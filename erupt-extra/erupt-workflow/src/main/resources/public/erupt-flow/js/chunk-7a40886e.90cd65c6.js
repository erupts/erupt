(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a40886e"],{"01f7":function(e,t,n){"use strict";var o=n("5617"),i=n.n(o);i.a},"07ae":function(e,t,n){"use strict";var o=n("845e"),i=n.n(o);i.a},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"12b5":function(e,t,n){},"13a6":function(e,t,n){"use strict";var o=n("12b5"),i=n.n(o);i.a},"1f9e":function(e,t,n){},"25f0":function(e,t,n){"use strict";var o=n("6eeb"),i=n("825a"),s=n("d039"),r=n("ad6d"),a="toString",l=RegExp.prototype,c=l[a],u=s((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=a;(u||d)&&o(RegExp.prototype,a,(function(){var e=i(this),t=String(e.source),n=e.flags,o=String(void 0===n&&e instanceof RegExp&&!("flags"in l)?r.call(e):n);return"/"+t+"/"+o}),{unsafe:!0})},"2b36":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",staticClass:"process-form",attrs:{"label-position":"top",rules:e.rules,model:e._value}},e._l(e.forms,(function(t,o){return n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"H"!=t.props.perm,expression:"item.props.perm!='H'"}],key:t.name+o,staticStyle:{"margin-bottom":"8px"},attrs:{prop:t.id,label:"SpanLayout"!==t.name?t.title+"["+t.props.perm+"]":""}},["SpanLayout"!==t.name&&"Description"!==t.name?n("form-design-render",{ref:"sub-item_"+t.id,refInFor:!0,attrs:{mode:e.mode,config:t},on:{change:e.change},model:{value:e._value[t.id],callback:function(n){e.$set(e._value,t.id,n)},expression:"_value[item.id]"}}):n("form-design-render",{ref:"`span-layou_${item.id}`",refInFor:!0,attrs:{mode:e.mode,config:t},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}})],1)})),1)},i=[],s=(n("4160"),n("b0c0"),n("159b"),n("d16b")),r={name:"FormRender",components:{FormDesignRender:s["a"]},props:{forms:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}},mode:{type:String,default:"PC"}},data:function(){return{rules:{}}},mounted:function(){this.loadFormConfig(this.forms)},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{},methods:{validate:function(e){var t=this,n=!0;this.$refs.form.validate((function(o){if(n=o,o)for(var i=0;i<t.forms.length;i++)if("TableList"===t.forms[i].name){var s=t.$refs["sub-item_".concat(t.forms[i].id)];if(s&&Array.isArray(s)&&s.length>0&&(s[0].validate((function(e){n=e})),!n))break}e(n)}))},loadFormConfig:function(e){var t=this;e.forEach((function(e){"SpanLayout"===e.name?t.loadFormConfig(e.props.items):(t.$set(t._value,e.id,t.value[e.id]),e.props.required&&t.$set(t.rules,e.id,[{type:"Array"===e.valueType?"array":void 0,required:!0,message:"è¯·å¡«å†™".concat(e.title),trigger:"blur"}]))}))},change:function(e,t){this.$emit("change",e,t)}}},a=r,l=(n("01f7"),n("2877")),c=Object(l["a"])(a,o,i,!1,null,"e6e9553e",null);t["a"]=c.exports},"2bd5":function(e,t,n){},"33db":function(e,t,n){"use strict";var o=n("550a"),i=n.n(o);i.a},3980:function(e,t,n){"use strict";var o=n("1f9e"),i=n.n(o);i.a},"3a86":function(e,t,n){},"3fb0":function(e,t,n){},"41f4":function(e,t,n){e.exports=n.p+"img/code.09fdd434.png"},"434e":function(e,t,n){},"47d1":function(e,t,n){"use strict";var o=n("905a"),i=n.n(o);i.a},4839:function(e,t,n){},"498a":function(e,t,n){"use strict";var o=n("23e7"),i=n("58a8").trim,s=n("c8d2");o({target:"String",proto:!0,forced:s("trim")},{trim:function(){return i(this)}})},"4de4":function(e,t,n){"use strict";var o=n("23e7"),i=n("b727").filter,s=n("1dde"),r=n("ae40"),a=s("filter"),l=r("filter");o({target:"Array",proto:!0,forced:!a||!l},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4e02":function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"m",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"l",(function(){return m})),n.d(t,"i",(function(){return h})),n.d(t,"c",(function(){return v}));var o=n("0c6d");function i(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/group",method:"get",params:e})}function s(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/process/groups",method:"get",params:e})}function r(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/sort",method:"put",data:e})}function a(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/group/sort",method:"put",data:e})}function l(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/group",method:"post",params:{groupName:e}})}function c(e,t){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/group/"+e,method:"put",data:t})}function u(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/group/"+e,method:"delete"})}function d(e,t){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/"+e,method:"put",data:t})}function p(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form",method:"post",data:e})}function f(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/detail/"+e,method:"get"})}function m(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/detail",method:"put",data:e})}function h(e){return Object(o["a"])({url:"../erupt-api/erupt-flow/admin/form/"+e.formId,method:"delete",data:e})}function v(){return Object(o["a"])({url:"../erupt-api/erupt-flow/forms",method:"get"})}},5007:function(e,t,n){"use strict";var o=n("4839"),i=n.n(o);i.a},"5135e":function(e,t,n){},5440:function(e,t,n){},"550a":function(e,t,n){},5617:function(e,t,n){},5623:function(e,t,n){"use strict";var o=n("b3a2"),i=n.n(o);i.a},"59d1":function(e,t,n){},6062:function(e,t,n){"use strict";var o=n("6d61"),i=n("6566");e.exports=o("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"62d1":function(e,t,n){},"6d5b":function(e,t,n){},"709c":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("w-dialog",{attrs:{border:!1,closeFree:"",width:"600px",title:e._title},on:{ok:e.selectOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"picker"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"candidate"},["role"!==e.type?n("div",[n("el-input",{staticStyle:{width:"95%"},attrs:{size:"small",clearable:"",placeholder:"æœç´¢","prefix-icon":"el-icon-search"},on:{input:e.searchUser},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.showUsers,expression:"!showUsers"}]},[n("ellipsis",{staticStyle:{height:"18px",color:"#8c8c8c",padding:"5px 0 0"},attrs:{hoverTip:"",row:1,content:e.deptStackStr}},[n("i",{staticClass:"el-icon-office-building",attrs:{slot:"pre"},slot:"pre"})]),n("div",{staticStyle:{"margin-top":"5px"}},[e.multiple?n("el-checkbox",{on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("å…¨é€‰")]):e._e(),n("span",{directives:[{name:"show",rawName:"v-show",value:e.deptStack.length>0,expression:"deptStack.length > 0"}],staticClass:"top-dept",on:{click:e.beforeNode}},[e._v("ä¸Šä¸€çº§")])],1)],1)],1):n("div",{staticClass:"role-header"},[n("div",[e._v("ç³»ç»Ÿè§’è‰²")])]),n("div",{staticClass:"org-items",style:"role"===e.type?"height: 350px":""},[n("el-empty",{directives:[{name:"show",rawName:"v-show",value:!e.nodes||0===e.nodes.length,expression:"!nodes || nodes.length === 0"}],attrs:{"image-size":100,description:"ä¼¼ä¹æ²¡æœ‰æ•°æ®"}}),e._l(e.nodes,(function(t,o){return n("div",{key:o,class:e.orgItemClass(t)},[t.type===e.type?n("el-checkbox",{on:{change:function(n){return e.selectChange(t)}},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"org.selected"}}):e._e(),"dept"===t.type?n("div",{on:{click:function(n){return e.triggerCheckbox(t)}}},[n("i",{staticClass:"el-icon-folder-opened"}),n("span",{staticClass:"name",attrs:{title:t.name}},[e._v(e._s(t.name.substring(0,12)))]),n("span",{class:"next-dept"+(t.selected?"-disable":""),on:{click:function(n){n.stopPropagation(),!t.selected&&e.nextNode(t)}}},[n("i",{staticClass:"iconfont icon-map-site"}),e._v(" ä¸‹çº§ ")])]):"user"===t.type?n("div",{staticStyle:{display:"flex","align-items":"center"},on:{click:function(n){return e.triggerCheckbox(t)}}},[e.$isNotEmpty(t.avatar)?n("el-avatar",{attrs:{size:35,src:t.avatar}}):n("span",{staticClass:"avatar"},[e._v(e._s(e.getShortName(t.name)))]),n("span",{staticClass:"name",attrs:{title:t.name}},[e._v(e._s(t.name.substring(0,12)))])],1):n("div",{staticStyle:{display:"inline-block"},on:{click:function(n){return e.triggerCheckbox(t)}}},[n("i",{staticClass:"iconfont icon-bumen"}),n("span",{staticClass:"name",attrs:{title:t.name}},[e._v(e._s(t.name.substring(0,12)))])])],1)}))],2)]),n("div",{staticClass:"selected"},[n("div",{staticClass:"count"},[n("span",[e._v("å·²é€‰ "+e._s(e.select.length)+" é¡¹")]),n("span",{on:{click:e.clearSelected}},[e._v("æ¸…ç©º")])]),n("div",{staticClass:"org-items",staticStyle:{height:"350px"}},[n("el-empty",{directives:[{name:"show",rawName:"v-show",value:0===e.select.length,expression:"select.length === 0"}],attrs:{"image-size":100,description:"è¯·ç‚¹å‡»å·¦ä¾§åˆ—è¡¨é€‰æ‹©æ•°æ®"}}),e._l(e.select,(function(t,o){return n("div",{key:o,class:e.orgItemClass(t)},["dept"===t.type?n("div",[n("i",{staticClass:"el-icon-folder-opened"}),n("span",{staticClass:"name",staticStyle:{position:"static"}},[e._v(e._s(t.name))])]):"user"===t.type?n("div",{staticStyle:{display:"flex","align-items":"center"}},[e.$isNotEmpty(t.avatar)?n("el-avatar",{attrs:{size:35,src:t.avatar}}):n("span",{staticClass:"avatar"},[e._v(e._s(e.getShortName(t.name)))]),n("span",{staticClass:"name"},[e._v(e._s(t.name))])],1):n("div",[n("i",{staticClass:"iconfont icon-bumen"}),n("span",{staticClass:"name"},[e._v(e._s(t.name))])]),n("i",{staticClass:"el-icon-close",on:{click:function(t){return e.noSelected(o)}}})])}))],2)])])])},i=[],s=(n("4160"),n("d81d"),n("a434"),n("b0c0"),n("ac1f"),n("841c"),n("498a"),n("159b"),n("0c6d"));function r(e){return Object(s["a"])({url:"../erupt-api/erupt-flow/oa/org/tree",method:"get",params:e})}function a(e){return Object(s["a"])({url:"../erupt-api/erupt-flow/oa/org/tree/user",method:"get",params:e})}function l(e){return Object(s["a"])({url:"../erupt-api/erupt-flow/oa/role",method:"get",params:e})}var c={name:"OrgPicker",components:{},props:{title:{default:"è¯·é€‰æ‹©",type:String},type:{type:String,required:!0},multiple:{default:!1,type:Boolean},selected:{default:function(){return[]},type:Array}},data:function(){return{visible:!1,loading:!1,checkAll:!1,nowDeptId:null,isIndeterminate:!1,searchUsers:[],nodes:[],select:[],search:"",deptStack:[]}},computed:{_title:function(){return"user"===this.type?"è¯·é€‰æ‹©ç”¨æˆ·"+(this.multiple?"[å¤šé€‰]":"[å•é€‰]"):"dept"===this.type?"è¯·é€‰æ‹©éƒ¨é—¨"+(this.multiple?"[å¤šé€‰]":"[å•é€‰]"):"role"===this.type?"è¯·é€‰æ‹©è§’è‰²"+(this.multiple?"[å¤šé€‰]":"[å•é€‰]"):"-"},deptStackStr:function(){return String(this.deptStack.map((function(e){return e.name}))).replaceAll(","," > ")},showUsers:function(){return this.search||""!==this.search.trim()}},methods:{show:function(){this.visible=!0,this.init(),this.getDataList()},orgItemClass:function(e){return{"org-item":!0,"org-dept-item":"dept"===e.type,"org-user-item":"user"===e.type,"org-role-item":"role"===e.type}},getDataList:function(){var e=this;if(this.loading=!0,"user"===this.type)return a({deptId:this.nowDeptId,keywords:this.search}).then((function(t){e.loading=!1,e.nodes=t.data,e.selectToLeft()})),"è¯·é€‰æ‹©ç”¨æˆ·";"dept"===this.type?r({deptId:this.nowDeptId,keywords:this.search}).then((function(t){e.loading=!1,e.nodes=t.data,e.selectToLeft()})):"role"===this.type&&l({deptId:this.nowDeptId,keywords:this.search}).then((function(t){e.loading=!1,e.nodes=t.data,e.selectToLeft()}))},getShortName:function(e){return e?e.length>2?e.substring(1,3):e:"**"},searchUser:function(){},selectToLeft:function(){var e=this,t=""===this.search.trim()?this.nodes:this.searchUsers;t.forEach((function(t){for(var n=0;n<e.select.length;n++){if(e.select[n].id===t.id){t.selected=!0;break}t.selected=!1}}))},triggerCheckbox:function(e){e.type==this.type&&(e.selected=!e.selected,this.selectChange(e))},selectChange:function(e){if(e.selected)this.multiple||(this.nodes.forEach((function(e){e.selected=!1})),this.select=[]),e.selected=!0,this.select.push(e);else{this.checkAll=!1;for(var t=0;t<this.select.length;t++)if(this.select[t].id===e.id){this.select.splice(t,1);break}}},noSelected:function(e){for(var t=this.nodes,n=0;n<2;n++){for(var o=0;o<t.length;o++)if(t[o].id===this.select[e].id){t[o].selected=!1,this.checkAll=!1;break}t=this.searchUsers}this.select.splice(e,1)},handleCheckAllChange:function(){var e=this;this.nodes.forEach((function(t){if(e.checkAll)t.selected||t.type!=e.type||(t.selected=!0,e.select.push(t));else{t.selected=!1;for(var n=0;n<e.select.length;n++)if(e.select[n].id===t.id){e.select.splice(n,1);break}}}))},nextNode:function(e){this.nowDeptId=e.id,this.deptStack.push(e),this.getDataList()},beforeNode:function(){0!==this.deptStack.length&&(this.deptStack.length<2?this.nowDeptId=null:this.nowDeptId=this.deptStack[this.deptStack.length-2].id,this.deptStack.splice(this.deptStack.length-1,1),this.getDataList())},recover:function(){this.select=[],this.nodes.forEach((function(e){return e.selected=!1}))},selectOk:function(){this.$emit("ok",Object.assign([],this.select.map((function(e){return e.avatar=void 0,e})))),this.visible=!1,this.recover()},clearSelected:function(){var e=this;this.$confirm("æ‚¨ç¡®å®šè¦æ¸…ç©ºå·²é€‰ä¸­çš„é¡¹?","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((function(){e.recover()}))},close:function(){this.$emit("close"),this.recover()},init:function(){this.checkAll=!1,this.nowDeptId=null,this.deptStack=[],this.nodes=[],this.select=Object.assign([],this.selected),this.selectToLeft()}}},u=c,d=(n("07ae"),n("2877")),p=Object(d["a"])(u,o,i,!1,null,"35bed664",null);t["a"]=p.exports},7116:function(e,t,n){"use strict";var o=n("62d1"),i=n.n(o);i.a},"73d9":function(e,t,n){"use strict";var o=n("e61d"),i=n.n(o);i.a},"7db0":function(e,t,n){"use strict";var o=n("23e7"),i=n("b727").find,s=n("44d2"),r=n("ae40"),a="find",l=!0,c=r(a);a in[]&&Array(1)[a]((function(){l=!1})),o({target:"Array",proto:!0,forced:l||!c},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s(a)},8032:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var o={string:"String",object:"Object",array:"Array",number:"Number",date:"Date",user:"User",dept:"Dept",role:"Role",dateRange:"DateRange"},i=[{name:"å¸ƒå±€",components:[{title:"åˆ†æ å¸ƒå±€",name:"SpanLayout",icon:"el-icon-c-scale-to-original",value:[],valueType:o.array,props:{items:[]}}]},{name:"åŸºç¡€ç»„ä»¶",components:[{title:"å•è¡Œæ–‡æœ¬è¾“å…¥",name:"TextInput",icon:"el-icon-edit",value:"",valueType:o.string,props:{required:!1,enablePrint:!0}},{title:"å¤šè¡Œæ–‡æœ¬è¾“å…¥",name:"TextareaInput",icon:"el-icon-more-outline",value:"",valueType:o.string,props:{required:!1,enablePrint:!0}},{title:"æ•°å­—è¾“å…¥æ¡†",name:"NumberInput",icon:"el-icon-edit-outline",value:"",valueType:o.number,props:{required:!1,enablePrint:!0}},{title:"é‡‘é¢è¾“å…¥æ¡†",name:"AmountInput",icon:"iconfont icon-zhufangbutiezhanghu",value:"",valueType:o.number,props:{required:!1,enablePrint:!0,showChinese:!0,precision:2}},{title:"å•é€‰æ¡†",name:"SelectInput",icon:"el-icon-circle-check",value:"",valueType:o.string,props:{required:!1,enablePrint:!0,expanding:!1,options:["é€‰é¡¹1","é€‰é¡¹2"]}},{title:"å¤šé€‰æ¡†",name:"MultipleSelect",icon:"iconfont icon-duoxuankuang",value:[],valueType:o.array,props:{required:!1,enablePrint:!0,expanding:!1,options:["é€‰é¡¹1","é€‰é¡¹2"]}},{title:"æ—¥æœŸæ—¶é—´ç‚¹",name:"DateTime",icon:"el-icon-date",value:"",valueType:o.date,props:{required:!1,enablePrint:!0,format:"yyyy-MM-dd HH:mm"}},{title:"æ—¥æœŸæ—¶é—´åŒºé—´",name:"DateTimeRange",icon:"iconfont icon-kaoqin",valueType:o.dateRange,props:{required:!1,enablePrint:!0,placeholder:["å¼€å§‹æ—¶é—´","ç»“æŸæ—¶é—´"],format:"yyyy-MM-dd HH:mm",showLength:!1}},{title:"ä¸Šä¼ å›¾ç‰‡",name:"ImageUpload",icon:"el-icon-picture-outline",value:[],valueType:o.array,props:{required:!1,enablePrint:!0,maxSize:5,maxNumber:10,enableZip:!0}},{title:"ä¸Šä¼ é™„ä»¶",name:"FileUpload",icon:"el-icon-folder-opened",value:[],valueType:o.array,props:{required:!1,enablePrint:!0,onlyRead:!1,maxSize:100,maxNumber:10,fileTypes:[]}},{title:"äººå‘˜é€‰æ‹©",name:"UserPicker",icon:"el-icon-user",value:[],valueType:o.user,props:{required:!1,enablePrint:!0,multiple:!1}},{title:"éƒ¨é—¨é€‰æ‹©",name:"DeptPicker",icon:"iconfont icon-map-site",value:[],valueType:o.dept,props:{required:!1,enablePrint:!0,multiple:!1}},{title:"è§’è‰²é€‰æ‹©",name:"RolePicker",icon:"el-icon-s-custom",value:[],valueType:o.role,props:{required:!1,enablePrint:!0,multiple:!1}},{title:"è¯´æ˜æ–‡å­—",name:"Description",icon:"el-icon-warning-outline",value:"",valueType:o.string,props:{required:!1,enablePrint:!0}}]},{name:"æ‰©å±•ç»„ä»¶",components:[{title:"æ˜ç»†è¡¨",name:"TableList",icon:"el-icon-tickets",value:[],valueType:o.array,props:{required:!1,enablePrint:!0,showBorder:!0,rowLayout:!0,showSummary:!1,summaryColumns:[],maxSize:0,columns:[]}}]}]},"841c":function(e,t,n){"use strict";var o=n("d784"),i=n("825a"),s=n("1d80"),r=n("129f"),a=n("14c3");o("search",1,(function(e,t,n){return[function(t){var n=s(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,n):new RegExp(t)[e](String(n))},function(e){var o=n(t,e,this);if(o.done)return o.value;var s=i(e),l=String(this),c=s.lastIndex;r(c,0)||(s.lastIndex=0);var u=a(s,l);return r(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]}))},"845e":function(e,t,n){},"89c4":function(e,t,n){},"8ec2":function(e,t,n){"use strict";var o=n("5440"),i=n.n(o);i.a},"905a":function(e,t,n){},"96e1":function(e,t,n){"use strict";var o=n("6d5b"),i=n.n(o);i.a},"99af":function(e,t,n){"use strict";var o=n("23e7"),i=n("d039"),s=n("e8b5"),r=n("861d"),a=n("7b0b"),l=n("50c4"),c=n("8418"),u=n("65f0"),d=n("1dde"),p=n("b622"),f=n("2d00"),m=p("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=f>=51||!i((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),b=d("concat"),y=function(e){if(!r(e))return!1;var t=e[m];return void 0!==t?!!t:s(e)},_=!g||!b;o({target:"Array",proto:!0,forced:_},{concat:function(e){var t,n,o,i,s,r=a(this),d=u(r,0),p=0;for(t=-1,o=arguments.length;t<o;t++)if(s=-1===t?r:arguments[t],y(s)){if(i=l(s.length),p+i>h)throw TypeError(v);for(n=0;n<i;n++,p++)n in s&&c(d,p,s[n])}else{if(p>=h)throw TypeError(v);c(d,p++,s)}return d.length=p,d}})},a2c5:function(e){e.exports=JSON.parse('{"id":"3538338","name":"wflow","font_family":"iconfont","css_prefix_text":"icon-","description":"","glyphs":[{"icon_id":"807897","name":"iconfont-kefu","font_class":"iconfontkefu","unicode":"e61c","unicode_decimal":58908},{"icon_id":"1313126","name":"BBDå¯†ç ","font_class":"mima","unicode":"e648","unicode_decimal":58952},{"icon_id":"2131309","name":"äººåŠ›ç¤¾ä¿","font_class":"renlishebao","unicode":"e636","unicode_decimal":58934},{"icon_id":"4774868","name":"éƒ¨é—¨","font_class":"bumen","unicode":"e758","unicode_decimal":59224},{"icon_id":"6337457","name":"æ’å…¥å›¾ç‰‡","font_class":"charutupian","unicode":"ec7f","unicode_decimal":60543},{"icon_id":"2958951","name":"è€ƒå‹¤ç®¡ç†","font_class":"kaoqinguanli","unicode":"e610","unicode_decimal":58896},{"icon_id":"3007689","name":"èº«ä»½è¯","font_class":"shenfenzheng","unicode":"e614","unicode_decimal":58900},{"icon_id":"5121522","name":"ä½ç½®","font_class":"weizhi","unicode":"e64b","unicode_decimal":58955},{"icon_id":"7568869","name":"24gf-phoneBubble","font_class":"24gf-phoneBubble","unicode":"e966","unicode_decimal":59750},{"icon_id":"11134714","name":"è€ƒå‹¤","font_class":"kaoqin","unicode":"e643","unicode_decimal":58947},{"icon_id":"15972093","name":"ä¼šè®®","font_class":"huiyi","unicode":"e61b","unicode_decimal":58907},{"icon_id":"19883444","name":"åŠ ç­","font_class":"jiaban","unicode":"e637","unicode_decimal":58935},{"icon_id":"1392555","name":"è¡¨æ ¼","font_class":"biaoge","unicode":"e665","unicode_decimal":58981},{"icon_id":"3868276","name":"ä½¿ç”¨æ–‡æ¡£","font_class":"shiyongwendang","unicode":"eb66","unicode_decimal":60262},{"icon_id":"5881147","name":"å¤šé€‰æ¡†","font_class":"duoxuankuang","unicode":"e62e","unicode_decimal":58926},{"icon_id":"26323690","name":"å•é€‰","font_class":"danxuan","unicode":"e751","unicode_decimal":59217},{"icon_id":"5032","name":"å‡ºç§Ÿ","font_class":"chuzu","unicode":"e600","unicode_decimal":58880},{"icon_id":"1079372","name":"æ‹›è˜","font_class":"zhaopin","unicode":"e647","unicode_decimal":58951},{"icon_id":"1183143","name":"è´¢åŠ¡","font_class":"caiwu","unicode":"e67d","unicode_decimal":59005},{"icon_id":"1727267","name":"05é‡‡è´­","font_class":"caigou","unicode":"e887","unicode_decimal":59527},{"icon_id":"1876349","name":"æˆ‘çš„äº§å“","font_class":"wodechanpin","unicode":"e679","unicode_decimal":59001},{"icon_id":"1977843","name":"å‘ç¥¨ç®¡ç†","font_class":"fapiaoguanli","unicode":"e63b","unicode_decimal":58939},{"icon_id":"7790995","name":"å·¥èµ„","font_class":"gongzi","unicode":"e7e9","unicode_decimal":59369},{"icon_id":"10120009","name":"ä½æˆ¿è¡¥è´´è´¦æˆ·","font_class":"zhufangbutiezhanghu","unicode":"e60c","unicode_decimal":58892},{"icon_id":"11435446","name":"ç»´ä¿®","font_class":"weixiu","unicode":"e613","unicode_decimal":58899},{"icon_id":"11435453","name":"å‘˜å·¥ç¦»èŒ","font_class":"yuangonglizhi","unicode":"e615","unicode_decimal":58901},{"icon_id":"11435456","name":"æ‹›è˜ç®¡ç†","font_class":"zhaopinguanli","unicode":"e616","unicode_decimal":58902},{"icon_id":"12911861","name":"è´¢åŠ¡","font_class":"caiwu1","unicode":"e603","unicode_decimal":58883},{"icon_id":"14443545","name":"è¯·å‡ç”³è¯·","font_class":"qingjiashenqing","unicode":"e60d","unicode_decimal":58893},{"icon_id":"14947326","name":"å‡ºå·®","font_class":"ziyuan207","unicode":"e722","unicode_decimal":59170},{"icon_id":"17187052","name":"ç”¨é¤å°±é¤","font_class":"yongcanjiucan","unicode":"e67e","unicode_decimal":59006},{"icon_id":"18170995","name":"åœ°å›¾ç»„ç»‡ç«™ç‚¹,å±‚çº§,ä¸‹çº§,ç»„ç»‡æ¶æ„å¸ƒå±€","font_class":"map-site","unicode":"ea00","unicode_decimal":59904},{"icon_id":"21053836","name":"åˆåŒ","font_class":"hetong","unicode":"e68a","unicode_decimal":59018},{"icon_id":"21159370","name":"è¡¥å¡","font_class":"buka","unicode":"e6ca","unicode_decimal":59082},{"icon_id":"24080655","name":"å‡ºå·®","font_class":"chucha","unicode":"e6c7","unicode_decimal":59079},{"icon_id":"24283254","name":"æŠ¥é”€ç”³è¯·-è´¹ç”¨æŠ¥é”€ç”³è¯·-02","font_class":"baoxiaoshenqing-feiyongbaoxiaoshenqing-02","unicode":"e726","unicode_decimal":59174},{"icon_id":"29522596","name":"11Cåˆ†ç»„,ç»„ç»‡æ ‘","font_class":"a-11Cfenzuzuzhishu","unicode":"e676","unicode_decimal":58998}]}')},a46d:function(e,t,n){"use strict";var o=n("ada0"),i=n.n(o);i.a},ada0:function(e,t,n){},b05a:function(e,t,n){"use strict";var o=n("5135e"),i=n.n(o);i.a},b3a2:function(e,t,n){},b64b:function(e,t,n){var o=n("23e7"),i=n("7b0b"),s=n("df75"),r=n("d039"),a=r((function(){s(1)}));o({target:"Object",stat:!0,forced:a},{keys:function(e){return s(i(e))}})},b69a:function(e,t,n){"use strict";var o=n("59d1"),i=n.n(o);i.a},b792:function(e,t,n){},b920:function(e,t,n){"use strict";var o=n("e81a"),i=n.n(o);i.a},b985:function(e,t,n){"use strict";var o=n("434e"),i=n.n(o);i.a},baa3:function(e,t,n){"use strict";var o=n("3a86"),i=n.n(o);i.a},bb4f:function(e,t,n){},c748:function(e,t,n){"use strict";var o=n("3fb0"),i=n.n(o);i.a},c8d2:function(e,t,n){var o=n("d039"),i=n("5899"),s="â€‹Â…á ";e.exports=function(e){return o((function(){return!!i[e]()||s[e]()!=s||i[e].name!==e}))}},d16b:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.config.name,e._b({ref:"form",tag:"component",attrs:{mode:e.mode},on:{change:e.change},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}},"component",e.config.props,!1))},i=[],s=(n("d3b7"),function(){return n.e("chunk-afe908e4").then(n.bind(null,"b28d"))}),r=function(){return n.e("chunk-e0ccc8b4").then(n.bind(null,"cf45"))},a=function(){return n.e("chunk-8c1fc5b0").then(n.bind(null,"5cb6"))},l=function(){return n.e("chunk-ba34bacc").then(n.bind(null,"d158"))},c=function(){return n.e("chunk-6b705aef").then(n.bind(null,"0d29"))},u=function(){return n.e("chunk-6bc1e906").then(n.bind(null,"412b"))},d=function(){return n.e("chunk-6a2da2a0").then(n.bind(null,"f89a"))},p=function(){return n.e("chunk-0e5083ab").then(n.bind(null,"4f98"))},f=function(){return n.e("chunk-d6bb8d6c").then(n.bind(null,"77aa"))},m=function(){return n.e("chunk-6381b3f0").then(n.bind(null,"db9e"))},h=function(){return n.e("chunk-4fc2b743").then(n.bind(null,"023d"))},v=function(){return n.e("chunk-2d0f04df").then(n.bind(null,"9c98"))},g=function(){return n.e("chunk-2d0e4c53").then(n.bind(null,"9248"))},b=function(){return n.e("chunk-db9a1e2e").then(n.bind(null,"f13b"))},y=function(){return n.e("chunk-67c6dcf5").then(n.bind(null,"86c3"))},_=function(){return n.e("chunk-29336a56").then(n.bind(null,"6ea6"))},k=function(){return n.e("chunk-2d0e9937").then(n.bind(null,"8db7"))},w=function(){return Promise.all([n.e("chunk-b27dd9ce"),n.e("chunk-b3a1d860"),n.e("chunk-0c54407a")]).then(n.bind(null,"918a"))},x=function(){return Promise.all([n.e("chunk-b27dd9ce"),n.e("chunk-3bcd2b64")]).then(n.bind(null,"7ca0"))},S={TextInput:s,NumberInput:r,AmountInput:a,TextareaInput:l,SelectInput:c,MultipleSelect:u,DateTime:d,DateTimeRange:p,UserPicker:y,DeptPicker:b,RolePicker:_,Description:f,FileUpload:h,ImageUpload:m,MoneyInput:g,Location:v,SignPanel:k,SpanLayout:w,TableList:x},C={name:"FormRender",components:S,props:{mode:{type:String,default:"DESIGN"},value:{default:void 0},config:{type:Object,default:function(){return{}}}},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},data:function(){return{}},methods:{validate:function(e){this.$refs.form.validate(e)},change:function(e){this.$emit("change",this.config.id,e)}}},N=C,O=n("2877"),$=Object(O["a"])(N,o,i,!1,null,"16180c58",null);t["a"]=$.exports},d394:function(e,t,n){"use strict";var o=n("2bd5"),i=n.n(o);i.a},d81d:function(e,t,n){"use strict";var o=n("23e7"),i=n("b727").map,s=n("1dde"),r=n("ae40"),a=s("map"),l=r("map");o({target:"Array",proto:!0,forced:!a||!l},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d8b8:function(e,t,n){"use strict";var o=n("bb4f"),i=n.n(o);i.a},dbb4:function(e,t,n){var o=n("23e7"),i=n("83ab"),s=n("56ef"),r=n("fc6a"),a=n("06cf"),l=n("8418");o({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,o=r(e),i=a.f,c=s(o),u={},d=0;while(c.length>d)n=i(o,t=c[d++]),void 0!==n&&l(u,t,n);return u}})},dd8f:function(e,t,n){"use strict";var o=n("89c4"),i=n.n(o);i.a},e439:function(e,t,n){var o=n("23e7"),i=n("d039"),s=n("fc6a"),r=n("06cf").f,a=n("83ab"),l=i((function(){r(1)})),c=!a||l;o({target:"Object",stat:!0,forced:c,sham:!a},{getOwnPropertyDescriptor:function(e,t){return r(s(e),t)}})},e4e9:function(e,t,n){"use strict";var o=n("b792"),i=n.n(o);i.a},e5e0:function(e,t,n){"use strict";n.r(t);var o,i,s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{background:"white"}},[n("layout-header",{on:{publish:e.publishProcess,preview:e.preview},model:{value:e.activeSelect,callback:function(t){e.activeSelect=t},expression:"activeSelect"}})],1),n("div",{staticClass:"layout-body"},[n("form-base-setting",{directives:[{name:"show",rawName:"v-show",value:"baseSetting"===e.activeSelect,expression:"activeSelect === 'baseSetting'"}],ref:"baseSetting"}),n("form-design",{directives:[{name:"show",rawName:"v-show",value:"formSetting"===e.activeSelect,expression:"activeSelect === 'formSetting'"}],ref:"formSetting"}),n("process-design",{directives:[{name:"show",rawName:"v-show",value:"processDesign"===e.activeSelect,expression:"activeSelect === 'processDesign'"}],ref:"processDesign"}),n("form-pro-setting",{directives:[{name:"show",rawName:"v-show",value:"proSetting"===e.activeSelect,expression:"activeSelect === 'proSetting'"}],ref:"proSetting"})],1),n("w-dialog",{attrs:{showFooter:!1,title:"è®¾ç½®é¡¹æ£€æŸ¥"},model:{value:e.validVisible,callback:function(t){e.validVisible=t},expression:"validVisible"}},[n("el-steps",{attrs:{"align-center":"",active:e.validStep,"finish-status":"success"}},e._l(e.validOptions,(function(e,t){return n("el-step",{key:t,attrs:{title:e.title,icon:e.icon,status:e.status,description:e.description}})})),1),n("el-result",{attrs:{icon:e.validIcon,title:e.errTitle,subTitle:e.validResult.desc}},[e.validResult.finished?e._e():n("i",{staticClass:"el-icon-loading",staticStyle:{"font-size":"30px"},attrs:{slot:"icon"},slot:"icon"}),e.validResult.errs.length>0?n("div",{staticClass:"err-info",attrs:{slot:"subTitle"},slot:"subTitle"},e._l(e.validResult.errs,(function(e,t){return n("ellipsis",{key:t+"_err",attrs:{"hover-tip":"",content:e}},[n("i",{staticClass:"el-icon-warning-outline",attrs:{slot:"pre"},slot:"pre"})])})),1):e._e(),n("template",{slot:"extra"},[e.validResult.finished?n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.doAfter}},[e._v(" "+e._s(e.validResult.action)+" ")]):e._e()],1)],2)],1)],1)},r=[],a=(n("a4d3"),n("e01a"),n("4160"),n("159b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"header"},[o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.value,"active-text-color":"#409eff",mode:"horizontal"},on:{select:e.handleSelect}},[o("el-menu-item",{staticClass:"e1",attrs:{index:"baseSetting"},on:{click:function(t){return e.to("baseSetting")}}},[e._v("â‘  åŸºç¡€ä¿¡æ¯ ")]),o("el-menu-item",{staticClass:"e1",attrs:{index:"formSetting"},on:{click:function(t){return e.to("formSetting")}}},[e._v("â‘¡ è¡¨å• ")]),o("el-menu-item",{staticClass:"e1",attrs:{index:"processDesign"},on:{click:function(t){return e.to("processDesign")}}},[e._v("â‘¢ å®¡æ‰¹æµç¨‹ ")])],1),o("div",{staticClass:"publish"},[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.publish}},[o("i",{staticClass:"el-icon-s-promotion"}),e._v("å‘å¸ƒ")])],1),o("div",{staticClass:"back"},[o("el-button",{attrs:{size:"medium",icon:"el-icon-arrow-left",circle:""},on:{click:e.exit}}),o("span",[o("i",{class:e.setup.logo&&e.setup.logo.icon,style:"background:"+(e.setup.logo&&e.setup.logo.background)}),o("span",[e._v(e._s(e.setup.formName))])])],1)],1),o("el-dialog",{attrs:{title:"è¯·ä½¿ç”¨æ‰‹æœºæ‰«ç é¢„è§ˆ",visible:e.viewCode,width:"300px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.viewCode=t}}},[o("img",{attrs:{src:n("41f4"),width:"250",height:"250"}})])],1)}),l=[],c=n("3786"),u={name:"LayoutHeader",props:{value:{type:String,default:"baseSetup"}},data:function(){return{viewCode:!1}},computed:{setup:function(){return this.$store.state.design}},created:function(){this.check()},mounted:function(){document.body.offsetWidth<=970&&this.$msgbox.alert("æœ¬è®¾è®¡å™¨æœªé€‚é…ä¸­å°å±å¹•ï¼Œå»ºè®®æ‚¨åœ¨PCç”µè„‘ç«¯æµè§ˆå™¨è¿›è¡Œæ“ä½œ"),this.listener()},methods:{publish:function(){this.$emit("publish")},preview:function(){this.$emit("preview"),this.viewCode=!0},valid:function(){return!!this.$isNotEmpty(this.setup.group)||(this.$message.warning("è¯·é€‰æ‹©åˆ†ç»„"),this.$router.push("/layout/baseSetup?_token="+Object(c["a"])()),!1)},exit:function(){var e=this;this.$confirm("æœªå‘å¸ƒçš„å†…å®¹å°†ä¸ä¼šè¢«ä¿å­˜ï¼Œæ˜¯å¦ç›´æ¥é€€å‡º ?","æç¤º",{confirmButtonText:"é€€å‡º",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((function(){e.$router.push("/formsPanel?_token="+Object(c["a"])())}))},to:function(e){this.$emit("input",e)},handleSelect:function(e,t){},listener:function(){window.onunload=this.closeBefore(),window.onbeforeunload=this.closeBefore()},closeBefore:function(){return!1},check:function(){this.$store.state.isEditFormProcessDesign}}},d=u,p=(n("baa3"),n("2877")),f=Object(p["a"])(d,a,l,!1,null,"47f31a68",null),m=f.exports,h=n("4e02"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"base-setup",on:{click:function(t){e.showIconSelect=!1}}},[n("el-form",{ref:"baseSetting",attrs:{model:e.setup,"label-position":"top","label-width":"80px"}},[e.setup.logo?n("el-form-item",{attrs:{label:"è¡¨å•å›¾æ ‡"}},[n("i",{class:e.setup.logo.icon,style:"background:"+e.setup.logo.background}),n("span",{staticClass:"change-icon"},[n("span",[n("span",[e._v("é€‰æ‹©èƒŒæ™¯è‰²")]),n("el-color-picker",{attrs:{"show-alpha":"",size:"small",predefine:e.colors},model:{value:e.setup.logo.background,callback:function(t){e.$set(e.setup.logo,"background",t)},expression:"setup.logo.background"}})],1),n("span",[n("span",[e._v("é€‰æ‹©å›¾æ ‡")]),n("el-popover",{attrs:{placement:"bottom-start",width:"390",trigger:"click"}},[n("div",{staticClass:"icon-select"},e._l(e.icons,(function(t,o){return n("i",{key:o,class:t,on:{click:function(n){e.setup.logo.icon=t}}})})),0),n("i",{class:e.setup.logo.icon,attrs:{slot:"reference"},slot:"reference"})]),n("i",{class:e.setup.icon,on:{click:function(t){t.stopPropagation(),e.showIconSelect=!0}}})],1)])]):e._e(),n("el-form-item",{attrs:{label:"è¡¨å•åç§°",rules:e.getRule("è¯·è¾“å…¥è¡¨å•åç§°"),prop:"formName"}},[n("el-input",{attrs:{size:"medium"},model:{value:e.setup.formName,callback:function(t){e.$set(e.setup,"formName",t)},expression:"setup.formName"}})],1),n("el-form-item",{staticClass:"group",attrs:{label:"æ‰€åœ¨åˆ†ç»„",rules:e.getRule("è¯·é€‰æ‹©è¡¨å•åˆ†ç»„"),prop:"groupId"}},[n("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©åˆ†ç»„",size:"medium"},model:{value:e.setup.groupId,callback:function(t){e.$set(e.setup,"groupId",t)},expression:"setup.groupId"}},e._l(e.fromGroup,(function(e,t){return n("el-option",{directives:[{name:"show",rawName:"v-show",value:e.groupId>-1,expression:"op.groupId > -1"}],key:t,attrs:{label:e.groupName,value:e.groupId}})})),1),n("el-popover",{attrs:{placement:"bottom-end",title:"æ–°å»ºè¡¨å•åˆ†ç»„",width:"300",trigger:"click"}},[n("el-input",{attrs:{size:"medium",placeholder:"è¯·è¾“å…¥æ–°çš„åˆ†ç»„å"},model:{value:e.newGroup,callback:function(t){e.newGroup=t},expression:"newGroup"}},[n("el-button",{attrs:{slot:"append",size:"medium",type:"primary"},on:{click:e.addGroup},slot:"append"},[e._v("æäº¤")])],1),n("el-button",{attrs:{slot:"reference",icon:"el-icon-plus",size:"medium",type:"primary"},slot:"reference"},[e._v("æ–°å»ºåˆ†ç»„")])],1)],1),n("el-form-item",{attrs:{label:"è¡¨å•è¯´æ˜"}},[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥è¡¨å•è¯´æ˜",type:"textarea","show-word-limit":"",autosize:{minRows:2,maxRows:5},maxlength:"500"},model:{value:e.setup.remark,callback:function(t){e.$set(e.setup,"remark",t)},expression:"setup.remark"}})],1)],1),n("org-picker",{ref:"orgPicker",attrs:{title:"è¯·é€‰æ‹©å¯ä»¥ç®¡ç†æ­¤è¡¨å•çš„äººå‘˜",multiple:"",type:"user",selected:e.select},on:{ok:e.selected}})],1)},g=[],b=(n("99af"),n("498a"),n("709c")),y=n("a2c5"),_={name:"FormBaseSetting",components:{OrgPicker:b["a"]},data:function(){return{nowUserSelect:null,showIconSelect:!1,select:[],newGroup:"",fromGroup:[],notifyTypes:[{type:"APP",name:"åº”ç”¨å†…é€šçŸ¥"},{type:"EMAIL",name:"é‚®ä»¶é€šçŸ¥"},{type:"SMS",name:"çŸ­ä¿¡é€šçŸ¥"},{type:"WX",name:"å¾®ä¿¡é€šçŸ¥"},{type:"DING",name:"é’‰é’‰é€šçŸ¥"}],colors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"],icons:["el-icon-delete-solid","el-icon-s-tools","el-icon-s-goods","el-icon-warning","el-icon-circle-plus","el-icon-camera-solid","el-icon-s-promotion","el-icon-s-cooperation","el-icon-s-platform","el-icon-s-custom","el-icon-s-data","el-icon-s-check","el-icon-s-claim"],rules:{formName:[{}],groupId:[]}}},computed:{setup:function(){var e=this.$store.state.design;return e}},created:function(){this.loadIconfont()},mounted:function(){this.getGroups()},methods:{getRule:function(e){return[{required:!0,message:e,trigger:"blur"}]},loadIconfont:function(){var e=this;y&&y.id&&y.glyphs.forEach((function(t){e.icons.push("".concat(y.font_family," ").concat(y.css_prefix_text).concat(t.font_class))}))},getGroups:function(){var e=this;Object(h["e"])().then((function(t){e.fromGroup=t.data})).catch((function(t){e.$message.error(t)}))},addGroup:function(){var e=this;""!==this.newGroup.trim()&&Object(h["b"])(this.newGroup.trim()).then((function(t){e.$message.success(t.message),e.getGroups()})).catch((function(t){return e.$message.error(t.response.message)}))},selected:function(e){this.$set(this.setup.settings,this.nowUserSelect,e)},selectUser:function(e){this.select=this.setup.settings[e],this.nowUserSelect=e,this.$refs.orgPicker.show()},validate:function(){this.$refs.baseSetting.validate();var e=[];return this.$isNotEmpty(this.setup.formName)||e.push("è¡¨å•åç§°æœªè®¾ç½®"),this.$isNotEmpty(this.setup.groupId)||e.push("è¡¨å•åˆ†ç»„æœªè®¾ç½®"),0===this.setup.settings.notify.types.length&&e.push("å®¡æ‰¹æ¶ˆæ¯é€šçŸ¥æ–¹å¼æœªè®¾ç½®"),e}}},k=_,w=(n("b69a"),Object(p["a"])(k,v,g,!1,null,"5dfc06b5",null)),x=w.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"calc(100vh - 65px)"}},[n("el-aside",[n("div",{staticClass:"components-nav"},[n("span",{on:{click:function(t){e.libSelect=0}}},[e._v("ç»„ä»¶åº“")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:0==e.libSelect,expression:"libSelect==0"}]},[e._l(e.baseComponents,(function(t,o){return n("div",{key:o,staticClass:"components"},[n("p",[e._v(e._s(t.name))]),n("ul",[n("draggable",{staticClass:"drag",attrs:{list:t.components,options:{sort:!1},group:{name:"form",pull:"clone",put:!1},clone:e.clone},on:{start:function(t){e.isStart=!0},end:function(t){e.isStart=!1}}},e._l(t.components,(function(t,o){return n("li",{key:o},[n("i",{class:t.icon}),n("span",[e._v(e._s(t.title))])])})),0)],1)])})),e.eruptForms&&e.eruptForms.length>0?n("div",{staticClass:"components"},[n("p",[e._v("Eruptè¡¨å•")]),n("ul",[n("div",{staticClass:"drag"},e._l(e.eruptForms,(function(t,o){return n("li",{key:o,staticStyle:{cursor:"pointer"},attrs:{title:"ç”Ÿæˆã€Š"+t.name+"ã€‹è¡¨å•"},on:{click:function(n){return e.useForm(t)}}},[n("i",{staticClass:"el-icon-s-order"}),n("span",[e._v(e._s(t.name))])])})),0)])]):e._e()],2)]),n("el-main",{staticClass:"layout-main"},[n("div",{staticClass:"tool-nav"},[n("div",[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"æ’¤é”€",placement:"bottom-start"}},[n("i",{staticClass:"el-icon-refresh-left"})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"æ¢å¤",placement:"bottom-start"}},[n("i",{staticClass:"el-icon-refresh-right"})])],1),n("div",[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"é¢„è§ˆè¡¨å•",placement:"bottom-start"}},[n("i",{staticClass:"el-icon-view",on:{click:e.viewForms}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"ç§»åŠ¨ç«¯",placement:"bottom-start"}},[n("i",{class:{"el-icon-mobile":!0,select:e.showMobile},on:{click:function(t){e.showMobile=!0}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"PCç«¯",placement:"bottom-start"}},[n("i",{class:{"el-icon-monitor":!0,select:!e.showMobile},on:{click:function(t){e.showMobile=!1}}})])],1)]),n("div",{staticClass:"work-form"},[n("div",{class:{mobile:e.showMobile,pc:!e.showMobile}},[n("div",{class:{bd:e.showMobile}},[n("div",{class:{"form-content":e.showMobile}},[n("div",{staticClass:"form"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.forms&&0===e.forms.length&&!e.isStart,expression:"forms && forms.length === 0 && !isStart"}],staticClass:"tip"},[e._v("ğŸ‘ˆ è¯·åœ¨å·¦ä¾§é€‰æ‹©æ§ä»¶å¹¶æ‹–è‡³æ­¤å¤„")]),n("draggable",{staticClass:"drag-from",attrs:{list:e.forms,group:"form",options:{animation:300,chosenClass:"choose",sort:!0}},on:{start:function(t){e.drag=!0,e.selectFormItem=null},end:function(t){e.drag=!1}}},e._l(e.forms,(function(t,o){return n("div",{key:o,staticClass:"form-item",style:e.getSelectedClass(t),on:{click:function(n){return e.selectItem(t)}}},[n("div",{staticClass:"form-header"},[n("p",[t.props.required?n("span",[e._v("*")]):e._e(),e._v(e._s(t.title))]),n("div",{staticClass:"option"},[n("i",{staticClass:"el-icon-close",on:{click:function(t){return e.del(o)}}})]),n("form-design-render",{attrs:{config:t}})],1)])})),0)],1)])])])])]),n("el-aside",{staticClass:"layout-param"},[e.selectFormItem?n("div",{staticClass:"tool-nav-r"},[n("i",{class:e.selectFormItem.icon,staticStyle:{"margin-right":"5px","font-size":"medium"}}),n("span",[e._v(e._s(e.selectFormItem.title))])]):e._e(),e.selectFormItem&&0!==e.forms.length?n("div",{staticStyle:{"text-align":"left",padding:"10px"}},[n("form-component-config")],1):n("div",{staticClass:"tip"},[e._v(" ğŸ˜€ é€‰ä¸­æ§ä»¶ååœ¨è¿™é‡Œè¿›è¡Œç¼–è¾‘ ")])]),n("w-dialog",{attrs:{clickClose:"",closeFree:"",width:"800px",showFooter:!1,border:!1,title:"è¡¨å•é¢„è§ˆ"},model:{value:e.viewFormVisible,callback:function(t){e.viewFormVisible=t},expression:"viewFormVisible"}},[n("form-render",{ref:"form",attrs:{forms:e.forms},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}})],1)],1)},C=[],N=(n("a434"),n("b0c0"),n("d3b7"),n("25f0"),n("6062"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),O=n("310e"),$=n.n(O),I=n("2b36"),E=n("d16b"),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["SpanLayout"!==e.form.name?n("el-form",{attrs:{"label-width":"90px"}},[n("el-form-item",{attrs:{label:"è¡¨å•åç§°"}},[n("el-input",{attrs:{size:"small",clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),n(e.form.name,{tag:"component",model:{value:e.form.props,callback:function(t){e.$set(e.form,"props",t)},expression:"form.props"}}),n("el-form-item",{attrs:{label:"å¿…å¡«é¡¹"}},[n("el-switch",{model:{value:e.form.props.required,callback:function(t){e.$set(e.form.props,"required",t)},expression:"form.props.required"}})],1)],1):n("el-empty",{attrs:{description:"å½“å‰ç»„ä»¶ä¸æ”¯æŒé…ç½®"}})],1)},P=[],R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æç¤ºè¯­"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1)},D=[],A={name:"TextInput",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},z=A,j=Object(p["a"])(z,R,D,!1,null,"3f53a800",null),F=j.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æç¤ºè¯­"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1)],1)},M=[],L={name:"NumberInput",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},B=L,G=Object(p["a"])(B,U,M,!1,null,"659605a6",null),V=G.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æç¤ºè¯­"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1),n("el-form-item",{attrs:{label:"ä¿ç•™å°æ•°"}},[n("el-input-number",{attrs:{"controls-position":"right",precision:0,max:3,min:0,size:"small",placeholder:"å°æ•°ä½æ•°"},model:{value:e.value.precision,callback:function(t){e.$set(e.value,"precision",t)},expression:"value.precision"}}),e._v(" ä½ ")],1),n("el-form-item",{attrs:{label:"å±•ç¤ºå¤§å†™"}},[n("el-switch",{model:{value:e.value.showChinese,callback:function(t){e.$set(e.value,"showChinese",t)},expression:"value.showChinese"}})],1)],1)},H=[],J={name:"AmountInputConfig",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},Y=J,W=Object(p["a"])(Y,q,H,!1,null,"14ddf80b",null),K=W.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æç¤ºè¯­"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1)],1)},Z=[],Q={name:"TextareaInput",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},ee=Q,te=Object(p["a"])(ee,X,Z,!1,null,"7080394f",null),ne=te.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æç¤ºè¯­"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1),n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{staticClass:"options",attrs:{label:"é€‰é¡¹è®¾ç½®"}},[n("div",{staticClass:"option-item-label",attrs:{slot:"label"},slot:"label"},[n("span",[e._v("é€‰é¡¹è®¾ç½®")]),n("el-button",{attrs:{icon:"el-icon-plus",type:"text",size:"mini"},on:{click:function(t){return e.value.options.push("æ–°é€‰é¡¹")}}},[e._v("æ–°å¢é€‰é¡¹")])],1),n("draggable",{attrs:{list:e.value.options,group:"option",handler:".el-icon-rank",options:e.dragOption}},e._l(e.value.options,(function(t,o){return n("div",{key:o,staticClass:"option-item"},[n("i",{staticClass:"el-icon-rank"}),n("el-input",{attrs:{size:"medium",placeholder:"è¯·è®¾ç½®é€‰é¡¹å€¼",clearable:""},model:{value:e.value.options[o],callback:function(t){e.$set(e.value.options,o,t)},expression:"value.options[index]"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-delete",type:"danger",size:"medium"},on:{click:function(t){return e.value.options.splice(o,1)}},slot:"append"})],1)],1)})),0)],1)],1),n("el-form-item",{attrs:{label:"é€‰é¡¹å±•å¼€"}},[n("el-switch",{model:{value:e.value.expanding,callback:function(t){e.$set(e.value,"expanding",t)},expression:"value.expanding"}})],1)],1)},ie=[],se={name:"SelectInputConfig",components:{draggable:$.a},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{dragOption:{animation:300,sort:!0}}},methods:{}},re=se,ae=(n("5623"),Object(p["a"])(re,oe,ie,!1,null,"039f33ba",null)),le=ae.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æ—¥æœŸæç¤º"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1),n("el-form-item",{attrs:{label:"æ—¥æœŸæ ¼å¼"}},[n("el-select",{attrs:{size:"small"},model:{value:e.value.format,callback:function(t){e.$set(e.value,"format",t)},expression:"value.format"}},[n("el-option",{attrs:{value:"yyyy",label:"å¹´"}}),n("el-option",{attrs:{value:"yyyy-MM",label:"å¹´-æœˆ"}}),n("el-option",{attrs:{value:"yyyy-MM-dd",label:"å¹´-æœˆ-æ—¥"}}),n("el-option",{attrs:{value:"yyyy-MM-dd HH:mm",label:"å¹´-æœˆ-æ—¥ æ—¶:åˆ†"}})],1)],1)],1)},ue=[],de={name:"DateTime",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},pe=de,fe=Object(p["a"])(pe,ce,ue,!1,null,"067a6338",null),me=fe.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"å¼€å§‹æ—¥æœŸæç¤º"},model:{value:e.value.placeholder[0],callback:function(t){e.$set(e.value.placeholder,0,t)},expression:"value.placeholder[0]"}}),n("el-input",{attrs:{size:"small",placeholder:"ç»“æŸæ—¥æœŸæç¤º"},model:{value:e.value.placeholder[1],callback:function(t){e.$set(e.value.placeholder,1,t)},expression:"value.placeholder[1]"}})],1),n("el-form-item",{attrs:{label:"æ—¥æœŸæ ¼å¼"}},[n("el-select",{attrs:{size:"small"},model:{value:e.value.format,callback:function(t){e.$set(e.value,"format",t)},expression:"value.format"}},[n("el-option",{attrs:{value:"yyyy",label:"å¹´"}}),n("el-option",{attrs:{value:"yyyy-MM",label:"å¹´-æœˆ"}}),n("el-option",{attrs:{value:"yyyy-MM-dd",label:"å¹´-æœˆ-æ—¥"}}),n("el-option",{attrs:{value:"yyyy-MM-dd HH:mm",label:"å¹´-æœˆ-æ—¥ æ—¶:åˆ†"}})],1)],1),n("el-form-item",{attrs:{label:"å±•ç¤ºæ—¶é•¿"}},[n("el-switch",{model:{value:e.value.showLength,callback:function(t){e.$set(e.value,"showLength",t)},expression:"value.showLength"}})],1)],1)},ve=[],ge={name:"DateTimeRangeConfig",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},be=ge,ye=Object(p["a"])(be,he,ve,!1,null,"67d8df9a",null),_e=ye.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æç¤ºè¯­"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1),n("el-form-item",{attrs:{label:"æ•°é‡é™åˆ¶"}},[n("tip",{attrs:{slot:"label",content:"é™åˆ¶æœ€å¤§ä¸Šä¼ å›¾ç‰‡æ•°é‡ï¼ˆä¸º0åˆ™ä¸é™åˆ¶ï¼‰"},slot:"label"},[e._v("æ•°é‡é™åˆ¶")]),n("el-input-number",{staticClass:"max-fill",attrs:{"controls-position":"right",precision:0,size:"small",placeholder:"æœ€å¤šä¸Šä¼ å‡ å¼ å›¾ç‰‡"},model:{value:e.value.maxNumber,callback:function(t){e.$set(e.value,"maxNumber",t)},expression:"value.maxNumber"}})],1),n("el-form-item",{attrs:{label:"å¤§å°é™åˆ¶"}},[n("tip",{attrs:{slot:"label",content:"é™åˆ¶å•ä¸ªå›¾ç‰‡æœ€å¤§å¤§å°-MBï¼ˆä¸º0åˆ™ä¸é™åˆ¶ï¼‰"},slot:"label"},[e._v("å¤§å°é™åˆ¶")]),n("el-input-number",{staticClass:"max-fill",attrs:{"controls-position":"right",precision:1,size:"small",placeholder:"å•ä¸ªæ–‡ä»¶æœ€å¤§å¤§å°"},model:{value:e.value.maxSize,callback:function(t){e.$set(e.value,"maxSize",t)},expression:"value.maxSize"}})],1),n("el-form-item",{attrs:{label:"å›¾ç‰‡å‹ç¼©"}},[n("el-switch",{model:{value:e.value.enableZip,callback:function(t){e.$set(e.value,"enableZip",t)},expression:"value.enableZip"}})],1)],1)},we=[],xe={name:"ImageUploadConfig",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},Se=xe,Ce=(n("a46d"),Object(p["a"])(Se,ke,we,!1,null,"86bec1dc",null)),Ne=Ce.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æç¤ºè¯­"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1),n("el-form-item",{attrs:{label:"æ•°é‡é™åˆ¶"}},[n("tip",{attrs:{slot:"label",content:"é™åˆ¶æœ€å¤§ä¸Šä¼ å›¾ç‰‡æ•°é‡ï¼ˆä¸º0åˆ™ä¸é™åˆ¶ï¼‰"},slot:"label"},[e._v("æ•°é‡é™åˆ¶")]),n("el-input-number",{staticClass:"max-fill",attrs:{"controls-position":"right",precision:0,size:"small",placeholder:"æœ€å¤šä¸Šä¼ å‡ å¼ å›¾ç‰‡"},model:{value:e.value.maxNumber,callback:function(t){e.$set(e.value,"maxNumber",t)},expression:"value.maxNumber"}})],1),n("el-form-item",{attrs:{label:"å¤§å°é™åˆ¶"}},[n("tip",{attrs:{slot:"label",content:"é™åˆ¶å•ä¸ªæ–‡ä»¶æœ€å¤§å¤§å°-MBï¼ˆä¸º0åˆ™ä¸é™åˆ¶ï¼‰"},slot:"label"},[e._v("å¤§å°é™åˆ¶")]),n("el-input-number",{staticClass:"max-fill",attrs:{"controls-position":"right",precision:1,size:"small",placeholder:"å•ä¸ªæ–‡ä»¶æœ€å¤§å¤§å°"},model:{value:e.value.maxSize,callback:function(t){e.$set(e.value,"maxSize",t)},expression:"value.maxSize"}})],1),n("el-form-item",{attrs:{label:"ç±»å‹é™åˆ¶"}},[n("tip",{attrs:{slot:"label",content:"é™åˆ¶ä¸Šä¼ æ–‡ä»¶çš„åç¼€ç±»å‹"},slot:"label"},[e._v("ç±»å‹é™åˆ¶")]),n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",multiple:"",filterable:"","allow-create":"","default-first-option":"",clearable:"",placeholder:"å…è®¸ä¸Šä¼ æ–‡ä»¶çš„åç¼€æ ¼å¼ï¼Œå¯è®¾ç½®å¤šç§"},model:{value:e.value.fileTypes,callback:function(t){e.$set(e.value,"fileTypes",t)},expression:"value.fileTypes"}})],1),n("el-form-item",{attrs:{label:"ä¸å¯ä¸‹è½½"}},[n("el-switch",{model:{value:e.value.onlyRead,callback:function(t){e.$set(e.value,"onlyRead",t)},expression:"value.onlyRead"}})],1)],1)},$e=[],Ie={name:"FileUploadConfig",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},Ee=Ie,Te=(n("d8b8"),Object(p["a"])(Ee,Oe,$e,!1,null,"d3b6f30e",null)),Pe=Te.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºå†…å®¹"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æç¤ºå†…å®¹"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1),n("el-form-item",{attrs:{label:"æ–‡å­—é¢œè‰²"}},[n("el-color-picker",{attrs:{size:"medium"},model:{value:e.value.color,callback:function(t){e.$set(e.value,"color",t)},expression:"value.color"}})],1)],1)},De=[],Ae={name:"Description",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},ze=Ae,je=Object(p["a"])(ze,Re,De,!1,null,"14e4d03c",null),Fe=je.exports,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},Me=[],Le={name:"MoneyInput",components:{},data:function(){return{}},methods:{}},Be=Le,Ge=Object(p["a"])(Be,Ue,Me,!1,null,"5dfb482a",null),Ve=Ge.exports,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"è¯·è®¾ç½®æç¤ºè¯­"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1),n("el-form-item",{attrs:{label:"æ˜¯å¦å¤šé€‰"}},[n("el-switch",{model:{value:e.value.multiple,callback:function(t){e.$set(e.value,"multiple",t)},expression:"value.multiple"}})],1)],1)},He=[],Je={name:"OrgPicker",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},Ye=Je,We=Object(p["a"])(Ye,qe,He,!1,null,"408a455e",null),Ke=We.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"æç¤ºæ–‡å­—"}},[n("el-input",{attrs:{size:"small",placeholder:"æé†’æ·»åŠ è®°å½•çš„æç¤º"},model:{value:e.value.placeholder,callback:function(t){e.$set(e.value,"placeholder",t)},expression:"value.placeholder"}})],1),n("el-form-item",{attrs:{label:"æœ€å¤§è¡Œæ•°"}},[n("tip",{attrs:{slot:"label",content:"å…è®¸æ·»åŠ å¤šå°‘æ¡è®°å½•ï¼ˆä¸º0åˆ™ä¸é™åˆ¶ï¼‰"},slot:"label"},[e._v("æœ€å¤§è¡Œæ•°")]),n("el-input-number",{attrs:{"controls-position":"right",precision:0,max:100,min:0,size:"small",placeholder:"é™åˆ¶æ¡æ•°"},model:{value:e.value.maxSize,callback:function(t){e.$set(e.value,"maxSize",t)},expression:"value.maxSize"}})],1),n("el-form-item",{attrs:{label:"å¸ƒå±€æ–¹å¼"}},[n("el-radio",{attrs:{name:"layout",label:!0},model:{value:e.value.rowLayout,callback:function(t){e.$set(e.value,"rowLayout",t)},expression:"value.rowLayout"}},[e._v("æŒ‰è¡¨æ ¼")]),n("el-radio",{attrs:{name:"layout",label:!1},model:{value:e.value.rowLayout,callback:function(t){e.$set(e.value,"rowLayout",t)},expression:"value.rowLayout"}},[e._v("æŒ‰è¡¨å•")])],1),n("el-form-item",{attrs:{label:"å±•ç¤ºåˆè®¡"}},[n("el-switch",{model:{value:e.value.showSummary,callback:function(t){e.$set(e.value,"showSummary",t)},expression:"value.showSummary"}}),e.value.showSummary?n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",multiple:"",clearable:"",placeholder:"è¯·é€‰æ‹©åˆè®¡é¡¹"},model:{value:e.value.summaryColumns,callback:function(t){e.$set(e.value,"summaryColumns",t)},expression:"value.summaryColumns"}},e._l(e.columns,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1):e._e()],1),n("el-form-item",{attrs:{label:"å±•ç¤ºè¾¹æ¡†"}},[n("el-switch",{model:{value:e.value.showBorder,callback:function(t){e.$set(e.value,"showBorder",t)},expression:"value.showBorder"}})],1)],1)},Ze=[],Qe=(n("4de4"),{name:"TableListConfig",components:{},props:{value:{type:Object,default:function(){return{}}}},computed:{columns:function(){return this.value.columns.filter((function(e){return"Number"===e.valueType}))}},data:function(){return{}},methods:{}}),et=Qe,tt=Object(p["a"])(et,Xe,Ze,!1,null,"31085c36",null),nt=tt.exports,ot={name:"FormComponentConfig",components:{TextInput:F,NumberInput:V,AmountInput:K,TextareaInput:ne,SelectInput:le,MultipleSelect:le,DateTime:me,DateTimeRange:_e,ImageUpload:Ne,FileUpload:Pe,Description:Fe,MoneyInput:Ve,DeptPicker:Ke,UserPicker:Ke,RolePicker:Ke,TableList:nt},props:{},computed:{form:function(){return this.$store.state.selectFormItem}},data:function(){return{}},methods:{}},it=ot,st=Object(p["a"])(it,T,P,!1,null,"d5718792",null),rt=st.exports,at=n("8032"),lt={name:"FormDesign",components:{draggable:$.a,FormComponentConfig:rt,FormDesignRender:E["a"],FormRender:I["a"]},data:function(){return{formData:{},libSelect:0,viewFormVisible:!1,isStart:!1,showMobile:!0,baseComponents:at["b"],select:null,drag:!1,eruptForms:[]}},computed:{forms:function(){return this.$store.state.design.formItems},selectFormItem:{get:function(){return this.$store.state.selectFormItem},set:function(e){this.$store.state.selectFormItem=e}},nodeMap:function(){return this.$store.state.nodeMap}},created:function(){var e=this;Object(h["c"])().then((function(t){e.eruptForms=t.data})).catch((function(t){e.$message.error(t)}))},methods:{copy:function(e,t){this.form.splice(t+1,0,Object.assign({},e))},getId:function(){return"field"+(Math.floor(89999*Math.random())+1e4).toString()+(new Date).getTime().toString().substring(5)},del:function(e){var t=this;this.$confirm("åˆ é™¤ç»„ä»¶å°†ä¼šè¿å¸¦åˆ é™¤åŒ…å«è¯¥ç»„ä»¶çš„æ¡ä»¶ä»¥åŠç›¸å…³è®¾ç½®ï¼Œæ˜¯å¦ç»§ç»­?","æç¤º",{confirmButtonText:"ç¡® å®š",cancelButtonText:"å– æ¶ˆ",type:"warning"}).then((function(){t.removeFormItemAbout(e,t.forms[e])}))},removeFormItemAbout:function(e,t){var n=this;return Object(N["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if("SpanLayout"!==t.name){o.next=4;break}return n.forms[e].props.items.forEach((function(t){n.removeFormItemAbout(e,t)})),n.forms.splice(e,1),o.abrupt("return");case 4:n.nodeMap.forEach((function(e){"CONDITION"===e.type&&e.props.groups.forEach((function(e){var n=e.cids.remove(t.id);n>-1&&e.conditions.splice(n,1)})),"ROOT"!==e.type&&"APPROVAL"!==e.type&&"CC"!==e.type||(e.props.formPerms.removeByKey("id",t.id),e.props.formUser===t.id&&(e.props.formUser=""))})),n.forms.splice(e,1);case 6:case"end":return o.stop()}}),o)})))()},removeFormItemAboutAll:function(){this.nodeMap.forEach((function(e){"CONDITION"===e.type&&e.props.groups.forEach((function(e){e.cids.length=0,e.conditions.length=0})),"ROOT"!==e.type&&"APPROVAL"!==e.type&&"CC"!==e.type||(e.props.formPerms.length=0,e.props.formUser="")})),this.forms.length=0},clone:function(e){return e.id=this.getId(),JSON.parse(JSON.stringify(e))},viewForms:function(){this.viewFormVisible=!0},selectItem:function(e){this.selectFormItem=e},getSelectedClass:function(e){return this.selectFormItem&&this.selectFormItem.id===e.id?"border-left: 4px solid #409eff":""},validateItem:function(e,t,n){var o=this;t.has(n.title)&&"SpanLayout"!==n.name&&e.push("è¡¨å• ".concat(n.title," åç§°é‡å¤")),t.add(n.title),"SelectInput"===n.name||"MultipleSelect"===n.name?0===n.props.options.length&&e.push("".concat(n.title," æœªè®¾ç½®é€‰é¡¹")):"TableList"===n.name?0===n.props.columns.length&&e.push("æ˜ç»†è¡¨ ".concat(n.title," å†…æœªæ·»åŠ ç»„ä»¶")):"SpanLayout"===n.name&&(0===n.props.items.length?e.push("åˆ†æ å†…æœªæ·»åŠ ç»„ä»¶"):n.props.items.forEach((function(n){return o.validateItem(e,t,n)})))},validate:function(){var e=this,t=[];if(this.forms.length>0){var n=new Set;this.forms.forEach((function(o){e.validateItem(t,n,o)}))}else t.push("è¡¨å•ä¸ºç©ºï¼Œè¯·æ·»åŠ ç»„ä»¶");return t},useForm:function(e){var t=this;this.$confirm("ç”Ÿæˆã€Š"+e.name+"ã€‹è¡¨å•ï¼Œå°†ä¼šè¦†ç›–ç°æœ‰ç»„ä»¶ï¼Œæ˜¯å¦ç»§ç»­?","æç¤º",{confirmButtonText:"ç¡® å®š",cancelButtonText:"å– æ¶ˆ",type:"warning"}).then((function(){return t.removeFormItemAboutAll(),e.formItems.forEach((function(e){t.forms.push(e)}))}))}}},ct=lt,ut=(n("b985"),Object(p["a"])(ct,S,C,!1,null,"08fff908",null)),dt=ut.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("div",{staticClass:"scale"},[n("el-button",{attrs:{icon:"el-icon-plus",size:"small",disabled:e.scale>=150,circle:""},on:{click:function(t){e.scale+=10}}}),n("span",[e._v(e._s(e.scale)+"%")]),n("el-button",{attrs:{icon:"el-icon-minus",size:"small",disabled:e.scale<=40,circle:""},on:{click:function(t){e.scale-=10}}}),n("el-button",{on:{click:e.validate}},[e._v("æ ¡éªŒæµç¨‹")])],1),n("div",{staticClass:"design",style:"transform: scale("+e.scale/100+");"},[n("process-tree",{ref:"process-tree",on:{selectedNode:e.nodeSelected}})],1),n("el-drawer",{attrs:{title:e.selectedNode.name,visible:e.showConfig,"modal-append-to-body":!1,size:"CONDITION"===e.selectedNode.type?"600px":"500px",direction:"rtl",modal:!1,"destroy-on-close":""},on:{"update:visible":function(t){e.showConfig=t}}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("el-input",{directives:[{name:"show",rawName:"v-show",value:e.showInput,expression:"showInput"}],staticStyle:{width:"300px"},attrs:{size:"medium"},on:{blur:function(t){e.showInput=!1}},model:{value:e.selectedNode.name,callback:function(t){e.$set(e.selectedNode,"name",t)},expression:"selectedNode.name"}}),n("el-link",{directives:[{name:"show",rawName:"v-show",value:!e.showInput,expression:"!showInput"}],staticStyle:{"font-size":"medium"},on:{click:function(t){e.showInput=!0}}},[n("i",{staticClass:"el-icon-edit",staticStyle:{"margin-right":"10px"}}),e._v(" "+e._s(e.selectedNode.name)+" ")])],1),n("div",{staticClass:"node-config-content"},[n("node-config")],1)])],1)},ft=[],mt=(n("c975"),n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("node",{attrs:{title:e.config.name,"show-error":e.showError,content:e.content,"error-info":e.errorInfo,placeholder:"è¯·è®¾ç½®å®¡æ‰¹äºº","header-bgc":"#ff943e","header-icon":"el-icon-s-check"},on:{selected:function(t){return e.$emit("selected")},delNode:function(t){return e.$emit("delNode")},insertNode:function(t){return e.$emit("insertNode",t)}}})}),ht=[],vt=(n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{node:!0,root:e.isRoot||!e.show,"node-error-state":e.showError}},[e.show?n("div",{class:{"node-body":!0,error:e.showError},on:{click:function(t){return e.$emit("selected")}}},[n("div",[n("div",{staticClass:"node-body-header",style:{"background-color":e.headerBgc}},[""!==(e.headerIcon||"")?n("i",{class:e.headerIcon,staticStyle:{"margin-right":"5px"}}):e._e(),n("ellipsis",{staticClass:"name",attrs:{"hover-tip":"",content:e.title}}),e.isRoot?e._e():n("i",{staticClass:"el-icon-close",staticStyle:{float:"right"},on:{click:function(t){return e.$emit("delNode")}}})],1),n("div",{staticClass:"node-body-content"},[e.leftIcon?n("i",{class:e.leftIcon}):e._e(),""===(e.content||"").trim()?n("span",{staticClass:"placeholder"},[e._v(e._s(e.placeholder))]):n("ellipsis",{attrs:{row:3,content:e.content}}),n("i",{staticClass:"el-icon-arrow-right"})],1),e.showError?n("div",{staticClass:"node-error"},[n("el-tooltip",{attrs:{effect:"dark",content:e.errorInfo,placement:"top-start"}},[n("i",{staticClass:"el-icon-warning-outline"})])],1):e._e()])]):e._e(),n("div",{staticClass:"node-footer"},[n("div",{staticClass:"btn"},[n("insert-button",{on:{insertNode:function(t){return e.$emit("insertNode",t)}}})],1)])])}),gt=[],bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"bottom-start",title:"æ·»åŠ æµç¨‹èŠ‚ç‚¹",width:"350",trigger:"click"}},[n("div",{staticClass:"node-select"},[n("div",{on:{click:e.addApprovalNode}},[n("i",{staticClass:"el-icon-s-check",staticStyle:{color:"rgb(255, 148, 62)"}}),n("span",[e._v("å®¡æ‰¹äºº")])]),n("div",{on:{click:e.addCcNode}},[n("i",{staticClass:"el-icon-s-promotion",staticStyle:{color:"rgb(50, 150, 250)"}}),n("span",[e._v("æŠ„é€äºº")])]),n("div",{on:{click:e.addConditionsNode}},[n("i",{staticClass:"el-icon-share",staticStyle:{color:"rgb(21, 188, 131)"}}),n("span",[e._v("æ¡ä»¶åˆ†æ”¯")])]),n("div",{on:{click:e.addConcurrentsNode}},[n("i",{staticClass:"el-icon-s-operation",staticStyle:{color:"#718dff"}}),n("span",[e._v("å¹¶è¡Œåˆ†æ”¯")])])]),n("el-button",{attrs:{slot:"reference",icon:"el-icon-plus",type:"primary",size:"small",circle:""},slot:"reference"})],1)},yt=[],_t={name:"InsertButton",components:{},data:function(){return{}},computed:{selectedNode:function(){this.$store.state.selectedNode}},methods:{addApprovalNode:function(){this.$emit("insertNode","APPROVAL")},addCcNode:function(){this.$emit("insertNode","CC")},addDelayNode:function(){this.$emit("insertNode","DELAY")},addConditionsNode:function(){this.$emit("insertNode","CONDITIONS")},addConcurrentsNode:function(){this.$emit("insertNode","CONCURRENTS")},addTriggerNode:function(){this.$emit("insertNode","TRIGGER")}}},kt=_t,wt=(n("e4e9"),Object(p["a"])(kt,bt,yt,!1,null,"3063624c",null)),xt=wt.exports,St={name:"Node",components:{InsertButton:xt},props:{isRoot:{type:Boolean,default:!1},show:{type:Boolean,default:!0},content:{type:String,default:""},title:{type:String,default:"æ ‡é¢˜"},placeholder:{type:String,default:"è¯·è®¾ç½®"},leftIcon:{type:String,default:void 0},headerIcon:{type:String,default:""},headerBgc:{type:String,default:"#576a95"},showError:{type:Boolean,default:!1},errorInfo:{type:String,default:"æ— ä¿¡æ¯"}},data:function(){return{}},methods:{}},Ct=St,Nt=(n("5007"),Object(p["a"])(Ct,vt,gt,!1,null,"e5c46912",null)),Ot=Nt.exports,$t={name:"ApprovalNode",props:{config:{type:Object,default:function(){return{}}}},components:{Node:Ot},data:function(){return{showError:!1,errorInfo:""}},computed:{content:function(){var e=this.config.props;switch(e.assignedType){case"ASSIGN_USER":if(e.assignedUser.length>0){var t=[];return e.assignedUser.forEach((function(e){return t.push(e.name)})),"æŒ‡å®šç”¨æˆ·ï¼š"+String(t).replaceAll(",","ã€")}return"è¯·æŒ‡å®šå®¡æ‰¹äºº";case"SELF":return"å‘èµ·äººè‡ªå·±";case"SELF_SELECT":return e.selfSelect.multiple?"å‘èµ·äººè‡ªé€‰å¤šäºº":"å‘èµ·äººè‡ªé€‰ä¸€äºº";case"LEADER_TOP":return"å¤šçº§ä¸»ç®¡ä¾æ¬¡å®¡æ‰¹";case"LEADER":return e.leader.level>1?"å‘èµ·äººçš„ç¬¬ "+e.leader.level+" çº§ä¸»ç®¡":"å‘èµ·äººçš„ç›´æ¥ä¸»ç®¡";case"FORM_USER":if(e.formUser&&""!==e.formUser){var n=this.getFormItemById(e.formUser);return n&&n.title?"è¡¨å•ï¼ˆ".concat(n.title,"ï¼‰å†…çš„äººå‘˜"):"è¯¥è¡¨å•å·²è¢«ç§»é™¤ğŸ˜¥"}return"è¡¨å•å†…è”ç³»äººï¼ˆæœªé€‰æ‹©ï¼‰";case"ROLE":if(e.role.length>0){var o=[];return e.role.forEach((function(e){return o.push(e.name)})),"æŒ‡å®šè§’è‰²ï¼š"+String(o).replaceAll(",","ã€")}return"æŒ‡å®šè§’è‰²ï¼ˆæœªè®¾ç½®ï¼‰";default:return"æœªçŸ¥è®¾ç½®é¡¹ğŸ˜¥"}}},methods:{getFormItemById:function(e){return this.$store.state.design.formItems.find((function(t){return t.id===e}))},validate:function(e){try{return this.showError=!this["validate_".concat(this.config.props.assignedType)](e)}catch(t){return!0}},validate_ASSIGN_USER:function(e){return this.config.props.assignedUser.length>0||(this.errorInfo="è¯·æŒ‡å®šå®¡æ‰¹äººå‘˜",e.push("".concat(this.config.name," æœªæŒ‡å®šå®¡æ‰¹äººå‘˜")),!1)},validate_SELF_SELECT:function(e){return!0},validate_LEADER_TOP:function(e){return!0},validate_LEADER:function(e){return!0},validate_ROLE:function(e){return!(this.config.props.role.length<=0)||(this.errorInfo="è¯·æŒ‡å®šè´Ÿè´£å®¡æ‰¹çš„ç³»ç»Ÿè§’è‰²",e.push("".concat(this.config.name," æœªæŒ‡å®šå®¡æ‰¹è§’è‰²")),!1)},validate_SELF:function(e){return!0},validate_FORM_USER:function(e){return""!==this.config.props.formUser||(this.errorInfo="è¯·æŒ‡å®šè¡¨å•ä¸­çš„äººå‘˜ç»„ä»¶",e.push("".concat(this.config.name," å®¡æ‰¹äººä¸ºè¡¨å•ä¸­äººå‘˜ï¼Œä½†æœªæŒ‡å®š")),!1)},validate_REFUSE:function(e){return!0}}},It=$t,Et=Object(p["a"])(It,mt,ht,!1,null,"1d482dd2",null),Tt=Et.exports,Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("node",{attrs:{title:e.config.name,"show-error":e.showError,content:e.content,"error-info":e.errorInfo,placeholder:"è¯·è®¾ç½®æŠ„é€äºº","header-bgc":"#3296fa","header-icon":"el-icon-s-promotion"},on:{selected:function(t){return e.$emit("selected")},delNode:function(t){return e.$emit("delNode")},insertNode:function(t){return e.$emit("insertNode",t)}}})},Rt=[],Dt={name:"CcNode",props:{config:{type:Object,default:function(){return{}}}},components:{Node:Ot},data:function(){return{showError:!1,errorInfo:""}},computed:{content:function(){if(this.config.props.shouldAdd)return"ç”±å‘èµ·äººæŒ‡å®š";if(this.config.props.assignedUser.length>0){var e=[];return this.config.props.assignedUser.forEach((function(t){return e.push(t.name)})),String(e).replaceAll(",","ã€")}return null}},methods:{validate:function(e){return this.showError=!1,this.config.props.shouldAdd?this.showError=!1:0===this.config.props.assignedUser.length&&(this.showError=!0,this.errorInfo="è¯·é€‰æ‹©éœ€è¦æŠ„é€çš„äººå‘˜"),this.showError&&e.push("æŠ„é€èŠ‚ç‚¹ ".concat(this.config.name," æœªè®¾ç½®æŠ„é€äºº")),!this.showError}}},At=Dt,zt=Object(p["a"])(At,Pt,Rt,!1,null,"15aae704",null),jt=zt.exports,Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"node"},[n("div",{staticClass:"node-body",on:{click:function(t){return e.$emit("selected")}}},[e.level>1?n("div",{staticClass:"node-body-left",on:{click:function(t){return t.stopPropagation(),e.$emit("leftMove")}}},[n("i",{staticClass:"el-icon-arrow-left"})]):e._e(),n("div",{staticClass:"node-body-main"},[n("div",{staticClass:"node-body-main-header"},[n("span",{staticClass:"title"},[n("i",{staticClass:"el-icon-s-operation"}),n("ellipsis",{staticClass:"name",attrs:{"hover-tip":"",content:e.config.name?e.config.name:"å¹¶è¡Œä»»åŠ¡"+e.level}})],1),n("span",{staticClass:"option"},[n("el-tooltip",{attrs:{effect:"dark",content:"å¤åˆ¶åˆ†æ”¯",placement:"top"}},[n("i",{staticClass:"el-icon-copy-document",on:{click:function(t){return e.$emit("copy")}}})]),n("i",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),e.$emit("delNode")}}})],1)]),e._m(0)]),e.level<e.size?n("div",{staticClass:"node-body-right",on:{click:function(t){return t.stopPropagation(),e.$emit("rightMove")}}},[n("i",{staticClass:"el-icon-arrow-right"})]):e._e()]),n("div",{staticClass:"node-footer"},[n("div",{staticClass:"btn"},[n("insert-button",{on:{insertNode:function(t){return e.$emit("insertNode",t)}}})],1)])])},Ut=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"node-body-main-content"},[n("span",[e._v("å¹¶è¡Œä»»åŠ¡ï¼ˆåŒæ—¶è¿›è¡Œï¼‰")])])}],Mt=(n("a9e3"),{name:"ConcurrentNode",components:{InsertButton:xt},props:{config:{type:Object,default:function(){return{}}},level:{type:Number,default:1},size:{type:Number,default:0}},data:function(){return{}},methods:{}}),Lt=Mt,Bt=(n("47d1"),Object(p["a"])(Lt,Ft,Ut,!1,null,"6d3cffcb",null)),Gt=Bt.exports,Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{node:!0,"node-error-state":e.showError}},[n("div",{class:{"node-body":!0,error:e.showError}},[e.level>1?n("div",{staticClass:"node-body-left",on:{click:function(t){return e.$emit("leftMove")}}},[n("i",{staticClass:"el-icon-arrow-left"})]):e._e(),n("div",{staticClass:"node-body-main",on:{click:function(t){return e.$emit("selected")}}},[n("div",{staticClass:"node-body-main-header"},[n("ellipsis",{staticClass:"title",attrs:{"hover-tip":"",content:e.config.name?e.config.name:"æ¡ä»¶"+e.level}}),n("span",{staticClass:"level"},[e._v("ä¼˜å…ˆçº§"+e._s(e.level))]),n("span",{staticClass:"option"},[n("el-tooltip",{attrs:{effect:"dark",content:"å¤åˆ¶æ¡ä»¶",placement:"top"}},[n("i",{staticClass:"el-icon-copy-document",on:{click:function(t){return t.stopPropagation(),e.$emit("copy")}}})]),n("i",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),e.$emit("delNode")}}})],1)],1),n("div",{staticClass:"node-body-main-content"},[""===(e.content||"").trim()?n("span",{staticClass:"placeholder"},[e._v(e._s(e.placeholder))]):n("ellipsis",{attrs:{hoverTip:"",row:4,content:e.content}})],1)]),e.level<e.size?n("div",{staticClass:"node-body-right",on:{click:function(t){return e.$emit("rightMove")}}},[n("i",{staticClass:"el-icon-arrow-right"})]):e._e(),e.showError?n("div",{staticClass:"node-error"},[n("el-tooltip",{attrs:{effect:"dark",content:e.errorInfo,placement:"top-start"}},[n("i",{staticClass:"el-icon-warning-outline"})])],1):e._e()]),n("div",{staticClass:"node-footer"},[n("div",{staticClass:"btn"},[n("insert-button",{on:{insertNode:function(t){return e.$emit("insertNode",t)}}})],1)])])},qt=[],Ht=["A","B","C","D","E","F","G","H","I","J"],Jt={name:"ConditionNode",components:{InsertButton:xt},props:{config:{type:Object,default:function(){return{}}},level:{type:Number,default:1},size:{type:Number,default:0}},data:function(){return{ValueType:at["a"],groupNames:Ht,placeholder:"è¯·è®¾ç½®æ¡ä»¶",errorInfo:"",showError:!1}},computed:{content:function(){var e=this;if(this.config.props.isDefault)return"é»˜è®¤æ¡ä»¶";var t=this.config.props.groups,n=[];t.forEach((function(t){var o=[];t.conditions.forEach((function(t){var n="";switch(t.valueType){case at["a"].dept:case at["a"].user:"user"==t.compare?n="".concat(t.title,"å±äº[").concat(String(t.value.map((function(e){return e.name}))).replaceAll(",",". "),"]ä¹‹ä¸€"):"dept"==t.compare?n="".concat(t.title,"éƒ¨é—¨å±äº[").concat(String(t.value.map((function(e){return e.name}))).replaceAll(",",". "),"]ä¹‹ä¸€"):"role"==t.compare?n="".concat(t.title,"è§’è‰²å±äº[").concat(String(t.value.map((function(e){return e.name}))).replaceAll(",",". "),"]ä¹‹ä¸€"):(console.log(t),n="æœªçŸ¥");break;case at["a"].number:case at["a"].string:n=e.getOrdinaryConditionContent(t);break}o.push(n)}));var i=String(o).replaceAll(",",o.length>1?"AND"===t.groupType?") ä¸” (":") æˆ– (":"AND"===t.groupType?" ä¸” ":" æˆ– ");n.push(o.length>1?"(".concat(i,")"):i)}));var o=String(n).replaceAll(",","AND"===this.config.props.groupsType?" ä¸” ":" æˆ– ");return o}},methods:{getDefault:function(e,t){return e&&""!==e?e:t},getOrdinaryConditionContent:function(e){switch(e.compare){case"IN":return"".concat(e.title,"ä¸º[").concat(String(e.value).replaceAll(",","ã€"),"]ä¸­ä¹‹ä¸€");case"B":return"".concat(e.value[0]," < ").concat(e.title," < ").concat(e.value[1]);case"AB":return"".concat(e.value[0]," â‰¤ ").concat(e.title," < ").concat(e.value[1]);case"BA":return"".concat(e.value[0]," < ").concat(e.title," â‰¤ ").concat(e.value[1]);case"ABA":return"".concat(e.value[0]," â‰¤ ").concat(e.title," â‰¤ ").concat(e.value[1]);case"<=":return"".concat(e.title," â‰¤ ").concat(this.getDefault(e.value[0]," ?"));case">=":return"".concat(e.title," â‰¥ ").concat(this.getDefault(e.value[0]," ?"));default:return"".concat(e.title).concat(e.compare).concat(this.getDefault(e.value[0]," ?"))}},validate:function(e){var t=this.config.props;if(t.isDefault)return!0;if(t.groups.length<=0)this.showError=!0,this.errorInfo="è¯·è®¾ç½®åˆ†æ”¯æ¡ä»¶",e.push("".concat(this.config.name," æœªè®¾ç½®æ¡ä»¶"));else for(var n=0;n<t.groups.length;n++){if(0===t.groups[n].cids.length){this.showError=!0,this.errorInfo="è¯·è®¾ç½®æ¡ä»¶ç»„".concat(this.groupNames[n],"å†…çš„æ¡ä»¶"),e.push("æ¡ä»¶ ".concat(this.config.name," æ¡ä»¶ç»„").concat(this.groupNames[n],"å†…æœªè®¾ç½®æ¡ä»¶"));break}for(var o=t.groups[n].conditions,i=0;i<o.length;i++){var s=o[i];if(0===s.value.length?this.showError=!0:this.showError=!1,this.showError)return this.errorInfo="è¯·å®Œå–„æ¡ä»¶ç»„".concat(this.groupNames[n],"å†…çš„").concat(s.title,"æ¡ä»¶"),e.push("æ¡ä»¶ ".concat(this.config.name," æ¡ä»¶ç»„").concat(this.groupNames[n],"å†…").concat(s.title,"æ¡ä»¶æœªå®Œå–„")),!1}}return!this.showError}}},Yt=Jt,Wt=(n("b05a"),Object(p["a"])(Yt,Vt,qt,!1,null,"62a12694",null)),Kt=Wt.exports,Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("node",{attrs:{title:e.config.name,"show-error":e.showError,content:e.content,"error-info":e.errorInfo,placeholder:"è¯·è®¾ç½®è§¦å‘å™¨","header-bgc":"#47bc82","header-icon":"el-icon-set-up"},on:{selected:function(t){return e.$emit("selected")},delNode:function(t){return e.$emit("delNode")},insertNode:function(t){return e.$emit("insertNode",t)}}})},Zt=[],Qt={name:"TriggerNode",props:{config:{type:Object,default:function(){return{}}}},components:{Node:Ot},data:function(){return{showError:!1,errorInfo:""}},computed:{content:function(){this.config}},methods:{validate:function(e){return this.showError=!1,"WEBHOOK"===this.config.props.type?this.$isNotEmpty(this.config.props.http.url)?this.showError=!1:(this.showError=!0,this.errorInfo="è¯·è®¾ç½®WEBHOOKçš„URLåœ°å€"):"EMAIL"===this.config.props.type&&(this.$isNotEmpty(this.config.props.email.subject)&&0!==this.config.props.email.to.length&&this.$isNotEmpty(this.config.props.email.content)?this.showError=!1:(this.showError=!0,this.errorInfo="è¯·è®¾ç½®é‚®ä»¶å‘é€é…ç½®")),this.showError&&e.push("".concat(this.config.name," è§¦å‘åŠ¨ä½œæœªè®¾ç½®å®Œå–„")),!this.showError}}},en=Qt,tn=Object(p["a"])(en,Xt,Zt,!1,null,"267f7b11",null),nn=tn.exports,on=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("node",{attrs:{title:e.config.name,"show-error":e.showError,content:e.content,"error-info":e.errorInfo,placeholder:"è¯·è®¾ç½®å»¶æ—¶æ—¶é—´","header-bgc":"#f25643","header-icon":"el-icon-time"},on:{selected:function(t){return e.$emit("selected")},delNode:function(t){return e.$emit("delNode")},insertNode:function(t){return e.$emit("insertNode",t)}}})},sn=[],rn={name:"DelayNode",props:{config:{type:Object,default:function(){return{}}}},components:{Node:Ot},data:function(){return{showError:!1,errorInfo:""}},computed:{content:function(){return"FIXED"===this.config.props.type?"ç­‰å¾… ".concat(this.config.props.time," ").concat(this.getName(this.config.props.unit)):"AUTO"===this.config.props.type?"è‡³å½“å¤© ".concat(this.config.props.dateTime):null}},methods:{validate:function(e){this.showError=!1;try{"AUTO"===this.config.props.type?""===(this.config.props.dateTime||"")&&(this.showError=!0,this.errorInfo="è¯·é€‰æ‹©æ—¶é—´ç‚¹"):this.config.props.time<=0&&(this.showError=!0,this.errorInfo="è¯·è®¾ç½®å»¶æ—¶æ—¶é•¿")}catch(t){this.showError=!0,this.errorInfo="é…ç½®å‡ºç°é—®é¢˜"}return this.showError&&e.push("".concat(this.config.name," æœªè®¾ç½®å»¶æ—¶è§„åˆ™")),!this.showError},getName:function(e){switch(e){case"D":return"å¤©";case"H":return"å°æ—¶";case"M":return"åˆ†é’Ÿ";default:return"æœªçŸ¥"}}}},an=rn,ln=Object(p["a"])(an,on,sn,!1,null,"9695851c",null),cn=ln.exports,un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("node",{attrs:{show:!1},on:{insertNode:function(t){return e.$emit("insertNode",t)}}})},dn=[],pn={name:"EmptyNode",components:{Node:Ot},data:function(){return{}},methods:{}},fn=pn,mn=Object(p["a"])(fn,un,dn,!1,null,"66bfa236",null),hn=mn.exports,vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("node",{attrs:{title:"å‘èµ·äºº","is-root":!0,content:e.content,placeholder:"æ‰€æœ‰äºº","header-bgc":"#576a95","header-icon":"el-icon-user-solid"},on:{selected:function(t){return e.$emit("selected")},insertNode:function(t){return e.$emit("insertNode",t)}}})},gn=[],bn={name:"RootNode",components:{Node:Ot},props:{config:{type:Object,default:function(){return{}}}},computed:{content:function(){if(this.config.props.assignedUser.length>0){var e=[];return this.config.props.assignedUser.forEach((function(t){return e.push(t.name)})),String(e).replaceAll(",","ã€")}return"æ‰€æœ‰äºº"}},data:function(){return{}},methods:{}},yn=bn,_n=Object(p["a"])(yn,vn,gn,!1,null,"5d527ccd",null),kn=_n.exports,wn={assignedType:"ASSIGN_USER",mode:"OR",sign:!1,nobody:{handler:"TO_PASS",assignedUser:[]},timeLimit:{timeout:{unit:"H",value:0},handler:{type:"REFUSE",notify:{once:!0,hour:1}}},assignedUser:[],formPerms:[],selfSelect:{multiple:!1},leaderTop:{endCondition:"TOP",endLevel:1},leader:{level:1},role:[],refuse:{type:"TO_END",target:""},formUser:""},xn={assignedUser:[],formPerms:[]},Sn={isDefault:!1,groupsType:"OR",groups:[{groupType:"AND",cids:[],conditions:[]}],expression:""},Cn={isDefault:!0,groupsType:"OR",groups:[{groupType:"AND",cids:[],conditions:[]}],expression:""},Nn={shouldAdd:!1,assignedUser:[],formPerms:[]},On={type:"WEBHOOK",http:{method:"GET",url:"",headers:[{name:"",isField:!0,value:""}],contentType:"FORM",params:[{name:"",isField:!0,value:""}],retry:1,handlerByScript:!1,success:"function handlerOk(res) {\n  return true;\n}",fail:"function handlerFail(res) {\n  return true;\n}"},email:{subject:"",to:[],content:""}},$n={type:"FIXED",time:0,unit:"M",dateTime:""},In={APPROVAL_PROPS:wn,CC_PROPS:Nn,DELAY_PROPS:$n,CONDITION_PROPS:Sn,CONDITION_PROPS_DEFAULT:Cn,ROOT_PROPS:xn,TRIGGER_PROPS:On},En={name:"ProcessTree",components:{Node:Ot,Root:kn,Approval:Tt,Cc:jt,Trigger:nn,Concurrent:Gt,Condition:Kt,Delay:cn,Empty:hn},data:function(){return{valid:!0}},computed:{nodeMap:function(){return this.$store.state.nodeMap},dom:function(){return this.$store.state.design.process}},render:function(e,t){this.nodeMap.clear();var n=this.getDomTree(e,this.dom);return n.push(e("div",{style:{"text-align":"center"}},[e("div",{class:{"process-end":!0},domProps:{innerHTML:"æµç¨‹ç»“æŸ"}})])),e("div",{class:{_root:!0},ref:"_root"},n)},methods:{getDomTree:function(e,t){var n=this;if(this.toMapping(t),this.isPrimaryNode(t)){var o=this.getDomTree(e,t.children);return this.decodeAppendDom(e,t,o),[e("div",{class:{"primary-node":!0}},o)]}if(this.isBranchNode(t)){var i=0,s=t.branchs.map((function(o){n.toMapping(o);var s=n.getDomTree(e,o.children);return n.decodeAppendDom(e,o,s,{level:i+1,size:t.branchs.length}),n.insertCoverLine(e,i,s,t.branchs),i++,e("div",{class:{"branch-node-item":!0}},s)}));s.unshift(e("div",{class:{"add-branch-btn":!0}},[e("el-button",{class:{"add-branch-btn-el":!0},props:{size:"small",round:!0},on:{click:function(){return n.addBranchNode(t)}},domProps:{innerHTML:"æ·»åŠ ".concat(this.isConditionNode(t)?"æ¡ä»¶":"åˆ†æ”¯")}},[])]));var r=[e("div",{class:{"branch-node":!0}},s)],a=this.getDomTree(e,t.children);return[e("div",{},[r,a])]}if(this.isEmptyNode(t)){var l=this.getDomTree(e,t.children);return this.decodeAppendDom(e,t,l),[e("div",{class:{"empty-node":!0}},l)]}return[]},decodeAppendDom:function(e,t,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i.config=t,n.unshift(e(t.type.toLowerCase(),{props:i,ref:t.id,key:t.id,on:{insertNode:function(e){return o.insertNode(e,t)},delNode:function(){return o.delNode(t)},selected:function(){return o.selectNode(t)},copy:function(){return o.copyBranch(t)},leftMove:function(){return o.branchMove(t,-1)},rightMove:function(){return o.branchMove(t,1)}}},[]))},toMapping:function(e){e&&e.id&&this.nodeMap.set(e.id,e)},insertCoverLine:function(e,t,n,o){0===t?(n.unshift(e("div",{class:{"line-top-left":!0}},[])),n.unshift(e("div",{class:{"line-bot-left":!0}},[]))):t===o.length-1&&(n.unshift(e("div",{class:{"line-top-right":!0}},[])),n.unshift(e("div",{class:{"line-bot-right":!0}},[])))},copyBranch:function(e){var t=this,n=this.nodeMap.get(e.parentId),o=this.$deepCopy(e);o.name=o.name+"-copy",this.forEachNode(n,o,(function(e,n){var o=t.getRandomId();console.log(n,"æ–°id =>"+o,"è€nodeId:"+n.id),n.id=o,n.parentId=e.id})),n.branchs.splice(n.branchs.indexOf(e),0,o),this.$forceUpdate()},branchMove:function(e,t){var n=this.nodeMap.get(e.parentId),o=n.branchs.indexOf(e),i=n.branchs[o+t];n.branchs[o+t]=n.branchs[o],n.branchs[o]=i,this.$forceUpdate()},isPrimaryNode:function(e){return e&&("ROOT"===e.type||"APPROVAL"===e.type||"CC"===e.type||"DELAY"===e.type||"TRIGGER"===e.type)},isBranchNode:function(e){return e&&("CONDITIONS"===e.type||"CONCURRENTS"===e.type)},isEmptyNode:function(e){return e&&"EMPTY"===e.type},isConditionNode:function(e){return"CONDITIONS"===e.type},isBranchSubNode:function(e){return e&&("CONDITION"===e.type||"CONCURRENT"===e.type)},isConcurrentNode:function(e){return"CONCURRENTS"===e.type},getRandomId:function(){return"node_".concat((new Date).getTime().toString().substring(5)).concat(Math.round(9e3*Math.random()+1e3))},selectNode:function(e){this.$store.commit("selectedNode",e),this.$emit("selectedNode",e)},insertNode:function(e,t){this.$refs["_root"].click();var n=t.children;switch(t.children={id:this.getRandomId(),parentId:t.id,props:{},type:e},e){case"APPROVAL":this.insertApprovalNode(t,n);break;case"CC":this.insertCcNode(t);break;case"DELAY":this.insertDelayNode(t);break;case"TRIGGER":this.insertTriggerNode(t);break;case"CONDITIONS":this.insertConditionsNode(t);break;case"CONCURRENTS":this.insertConcurrentsNode(t);break;default:break}this.isBranchNode({type:e})?(n&&n.id&&(n.parentId=t.children.children.id),this.$set(t.children.children,"children",n)):(n&&n.id&&(n.parentId=t.children.id),this.$set(t.children,"children",n)),this.$forceUpdate()},insertApprovalNode:function(e){this.$set(e.children,"name","å®¡æ‰¹äºº"),this.$set(e.children,"props",this.$deepCopy(In.APPROVAL_PROPS))},insertCcNode:function(e){this.$set(e.children,"name","æŠ„é€äºº"),this.$set(e.children,"props",this.$deepCopy(In.CC_PROPS))},insertDelayNode:function(e){this.$set(e.children,"name","å»¶æ—¶å¤„ç†"),this.$set(e.children,"props",this.$deepCopy(In.DELAY_PROPS))},insertTriggerNode:function(e){this.$set(e.children,"name","è§¦å‘å™¨"),this.$set(e.children,"props",this.$deepCopy(In.TRIGGER_PROPS))},insertConditionsNode:function(e){this.$set(e.children,"name","æ¡ä»¶åˆ†æ”¯"),this.$set(e.children,"children",{id:this.getRandomId(),parentId:e.children.id,type:"EMPTY"}),this.$set(e.children,"branchs",[{id:this.getRandomId(),parentId:e.children.id,type:"CONDITION",props:this.$deepCopy(In.CONDITION_PROPS),name:"æ¡ä»¶1",children:{}},{id:this.getRandomId(),parentId:e.children.id,type:"CONDITION",props:this.$deepCopy(In.CONDITION_PROPS_DEFAULT),name:"é»˜è®¤æ¡ä»¶",children:{}}])},insertConcurrentsNode:function(e){this.$set(e.children,"name","å¹¶è¡Œåˆ†æ”¯"),this.$set(e.children,"children",{id:this.getRandomId(),parentId:e.children.id,type:"EMPTY"}),this.$set(e.children,"branchs",[{id:this.getRandomId(),name:"åˆ†æ”¯1",parentId:e.children.id,type:"CONCURRENT",props:{},children:{}},{id:this.getRandomId(),name:"åˆ†æ”¯2",parentId:e.children.id,type:"CONCURRENT",props:{},children:{}}])},getBranchEndNode:function(e){return e.children&&e.children.id?this.getBranchEndNode(e.children):e},addBranchNode:function(e){e.branchs.length<8?e.branchs.push({id:this.getRandomId(),parentId:e.id,name:(this.isConditionNode(e)?"æ¡ä»¶":"åˆ†æ”¯")+(e.branchs.length+1),props:this.isConditionNode(e)?this.$deepCopy(In.CONDITION_PROPS):{},type:this.isConditionNode(e)?"CONDITION":"CONCURRENT",children:{}}):this.$message.warning("æœ€å¤šåªèƒ½æ·»åŠ  8 é¡¹ğŸ˜¥")},delNode:function(e){var t=this.nodeMap.get(e.parentId);if(t){if(this.isBranchNode(t)){if(t.branchs.splice(t.branchs.indexOf(e),1),t.branchs.length<2){var n=this.nodeMap.get(t.parentId);if(t.branchs[0].children&&t.branchs[0].children.id){n.children=t.branchs[0].children,n.children.parentId=n.id;var o=this.getBranchEndNode(t.branchs[0]);o.children=t.children.children,o.children&&o.children.id&&(o.children.parentId=o.id)}else n.children=t.children.children,n.children&&n.children.id&&(n.children.parentId=n.id)}}else e.children&&e.children.id&&(e.children.parentId=t.id),t.children=e.children;this.$forceUpdate()}else this.$message.warning("å‡ºç°é”™è¯¯ï¼Œæ‰¾ä¸åˆ°ä¸Šçº§èŠ‚ç‚¹ğŸ˜¥")},validateProcess:function(){this.valid=!0;var e=[];return this.validate(e,this.dom),e},validateNode:function(e,t){this.$refs[t.id].validate&&(this.valid=this.$refs[t.id].validate(e))},nodeDomUpdate:function(e){this.$refs[e.id].$forceUpdate()},forEachNode:function(e,t,n){var o=this;this.isBranchNode(t)?(n(e,t),this.forEachNode(t,t.children,n),t.branchs.map((function(e){n(t,e),o.forEachNode(e,e.children,n)}))):(this.isPrimaryNode(t)||this.isEmptyNode(t)||this.isBranchSubNode(t))&&(n(e,t),this.forEachNode(t,t.children,n))},validate:function(e,t){var n=this;this.isPrimaryNode(t)?(this.validateNode(e,t),this.validate(e,t.children)):this.isBranchNode(t)?(t.branchs.map((function(t){n.validateNode(e,t),n.validate(e,t.children)})),this.validate(e,t.children)):this.isEmptyNode(t)&&this.validate(e,t.children)}},watch:{}},Tn=En,Pn=(n("dd8f"),Object(p["a"])(Tn,o,i,!1,null,"0cc4e2ab",null)),Rn=Pn.exports,Dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.name&&e.formConfig.length>0?n("el-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("el-tab-pane",{attrs:{label:e.name,name:"properties"}},[n((e.selectNode.type||"").toLowerCase(),{tag:"component",attrs:{config:e.selectNode.props}})],1),n("el-tab-pane",{attrs:{label:"è¡¨å•æƒé™è®¾ç½®",name:"permissions"}},[n("form-authority-config")],1)],1):n((e.selectNode.type||"").toLowerCase(),{tag:"component",attrs:{config:e.selectNode.props}})],1)},An=[],zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{"label-position":"top","label-width":"90px"}},[n("el-form-item",{staticClass:"user-type",attrs:{label:"âš™ é€‰æ‹©å®¡æ‰¹äºº",prop:"text"}},[n("el-radio-group",{model:{value:e.nodeProps.assignedType,callback:function(t){e.$set(e.nodeProps,"assignedType",t)},expression:"nodeProps.assignedType"}},e._l(e.approvalTypes,(function(t){return n("el-radio",{key:t.type,attrs:{label:t.type}},[e._v(e._s(t.name))])})),1),"ASSIGN_USER"===e.nodeProps.assignedType?n("div",[n("el-form-item",{staticClass:"approve-end",attrs:{label:"æŒ‡å®šäººå‘˜",prop:"text"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"primary",round:""},on:{click:e.openForAssigneeUser}},[e._v("é€‰æ‹©äººå‘˜")]),n("org-items",{model:{value:e.nodeProps.assignedUser,callback:function(t){e.$set(e.nodeProps,"assignedUser",t)},expression:"nodeProps.assignedUser"}})],1)],1):"ROLE"===e.nodeProps.assignedType?n("div",[n("el-form-item",{staticClass:"approve-end",attrs:{label:"æŒ‡å®šè§’è‰²",prop:"text"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"primary",round:""},on:{click:e.openForAssigneeRole}},[e._v("é€‰æ‹©è§’è‰²")]),n("org-items",{model:{value:e.nodeProps.role,callback:function(t){e.$set(e.nodeProps,"role",t)},expression:"nodeProps.role"}})],1)],1):"LEADER_TOP"===e.nodeProps.assignedType?n("div",[n("el-form-item",{staticClass:"approve-end",attrs:{label:"å®¡æ‰¹ç»ˆç‚¹",prop:"text"}},[n("el-radio-group",{model:{value:e.nodeProps.leaderTop.endCondition,callback:function(t){e.$set(e.nodeProps.leaderTop,"endCondition",t)},expression:"nodeProps.leaderTop.endCondition"}},[n("el-radio",{attrs:{label:"TOP"}},[e._v("ç›´åˆ°æœ€ä¸Šå±‚ä¸»ç®¡")]),n("el-radio",{attrs:{label:"LEAVE"}},[e._v("ä¸è¶…è¿‡å‘èµ·äººçš„")])],1),"LEAVE"===e.nodeProps.leaderTop.endCondition?n("div",{staticClass:"approve-end-leave"},[n("span",[e._v("ç¬¬ ")]),n("el-input-number",{attrs:{min:1,max:20,step:1,size:"mini"},model:{value:e.nodeProps.leaderTop.level,callback:function(t){e.$set(e.nodeProps.leaderTop,"level",t)},expression:"nodeProps.leaderTop.level"}}),n("span",[e._v(" çº§ä¸»ç®¡")])],1):e._e()],1)],1):"LEADER"===e.nodeProps.assignedType?n("div",[n("el-form-item",{attrs:{label:"æŒ‡å®šä¸»ç®¡",prop:"text"}},[n("span",[e._v("å‘èµ·äººçš„ç¬¬ ")]),n("el-input-number",{attrs:{min:1,max:20,step:1,size:"mini"},model:{value:e.nodeProps.leader.level,callback:function(t){e.$set(e.nodeProps.leader,"level",t)},expression:"nodeProps.leader.level"}}),n("span",[e._v(" çº§ä¸»ç®¡")]),n("div",{staticStyle:{color:"#409EFF","font-size":"small"}},[e._v("ğŸ‘‰ 1çº§ä¸»ç®¡ä¸ºæœ¬éƒ¨é—¨ä¸»ç®¡ï¼Œéƒ¨é—¨å†…æ’åºç¬¬ä¸€çš„äººä¸ºä¸»ç®¡")])],1)],1):"FORM_USER"===e.nodeProps.assignedType?n("div",[n("el-form-item",{staticClass:"approve-end",attrs:{label:"è¡¨å•å†…è”ç³»äºº",prop:"text"}},[n("el-select",{staticStyle:{width:"80%"},attrs:{size:"small",placeholder:"è¯·é€‰æ‹©åŒ…å«è”ç³»äººçš„è¡¨å•é¡¹"},model:{value:e.nodeProps.formUser,callback:function(t){e.$set(e.nodeProps,"formUser",t)},expression:"nodeProps.formUser"}},e._l(e.forms,(function(e){return n("el-option",{attrs:{label:e.title,value:e.id}})})),1)],1)],1):n("div",[n("span",{staticClass:"item-desc"},[e._v("å‘èµ·äººè‡ªå·±ä½œä¸ºå®¡æ‰¹äººè¿›è¡Œå®¡æ‰¹")])])],1),n("el-divider"),n("el-form-item",{staticClass:"line-mode",attrs:{label:"ğŸ‘¤ å®¡æ‰¹äººä¸ºç©ºæ—¶",prop:"text"}},[n("el-radio-group",{model:{value:e.nodeProps.nobody.handler,callback:function(t){e.$set(e.nodeProps.nobody,"handler",t)},expression:"nodeProps.nobody.handler"}},[n("el-radio",{attrs:{label:"TO_PASS"}},[e._v("è‡ªåŠ¨é€šè¿‡")]),n("el-radio",{attrs:{label:"TO_REFUSE"}},[e._v("è‡ªåŠ¨é©³å›")]),n("el-radio",{attrs:{label:"TO_ADMIN"}},[e._v("è½¬äº¤å®¡æ‰¹ç®¡ç†å‘˜")]),n("el-radio",{attrs:{label:"TO_USER"}},[e._v("è½¬äº¤åˆ°æŒ‡å®šäººå‘˜")])],1),"TO_USER"===e.nodeProps.nobody.handler?n("div",{staticStyle:{"margin-top":"10px"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"primary",round:""},on:{click:e.openForNobodyAssignee}},[e._v("é€‰æ‹©äººå‘˜")]),n("org-items",{model:{value:e.nodeProps.nobody.assignedUser,callback:function(t){e.$set(e.nodeProps.nobody,"assignedUser",t)},expression:"nodeProps.nobody.assignedUser"}})],1):e._e()],1),e.showMode?n("div",[n("el-divider"),n("el-form-item",{staticClass:"approve-mode",attrs:{label:"ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ "+e.nodeProps.nobody.tips,prop:"text"}},[n("el-radio-group",{model:{value:e.nodeProps.mode,callback:function(t){e.$set(e.nodeProps,"mode",t)},expression:"nodeProps.mode"}},[n("el-radio",{attrs:{label:"NEXT"}},[e._v("ä¾æ¬¡ä¼šç­¾ ï¼ˆæŒ‰é¡ºåºå®¡æ‰¹ï¼Œæ¯ä¸ªäººå¿…é¡»åŒæ„ï¼‰")]),n("el-radio",{attrs:{label:"AND"}},[e._v("åŒæ—¶ä¼šç­¾ï¼ˆå¯åŒæ—¶å®¡æ‰¹ï¼Œæ¯ä¸ªäººå¿…é¡»åŒæ„ï¼‰")]),n("el-radio",{attrs:{label:"OR"}},[e._v("æˆ–ç­¾ï¼ˆæœ‰ä¸€äººåŒæ„å³å¯ï¼‰")])],1)],1)],1):e._e(),n("el-divider",[e._v("é«˜çº§è®¾ç½®")]),e._e(),n("el-form-item",{attrs:{label:"ğŸ™…â€ å¦‚æœå®¡æ‰¹è¢«é©³å› ğŸ‘‡"}},[n("el-radio-group",{model:{value:e.nodeProps.refuse.type,callback:function(t){e.$set(e.nodeProps.refuse,"type",t)},expression:"nodeProps.refuse.type"}},[n("el-radio",{attrs:{label:"TO_END"}},[e._v("ç›´æ¥ç»“æŸæµç¨‹")]),n("el-radio",{attrs:{label:"TO_BEFORE"}},[e._v("é©³å›åˆ°ä¸Šçº§å®¡æ‰¹èŠ‚ç‚¹")]),n("el-radio",{attrs:{label:"TO_NODE"}},[e._v("é©³å›åˆ°æŒ‡å®šèŠ‚ç‚¹")])],1),"TO_NODE"===e.nodeProps.refuse.type?n("div",[n("span",[e._v("æŒ‡å®šèŠ‚ç‚¹:")]),n("el-select",{staticStyle:{"margin-left":"10px",width:"150px"},attrs:{placeholder:"é€‰æ‹©è·³è½¬æ­¥éª¤",size:"small"},model:{value:e.nodeProps.refuse.target,callback:function(t){e.$set(e.nodeProps.refuse,"target",t)},expression:"nodeProps.refuse.target"}},e._l(e.nodeOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1):e._e()],1)],1),n("org-picker",{ref:"orgPicker",attrs:{multiple:"",type:e.orgPickerType,selected:e.orgPickerChecked},on:{ok:e.orgPickerOk}})],1)},jn=[],Fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"10px"}},e._l(e._value,(function(t,o){return n("el-tag",{key:o+"_org",staticClass:"org-item",attrs:{type:"dept"===t.type?"":"info",closable:"",size:"mini"},on:{close:function(t){return e.removeOrgItem(o)}}},[e._v(" "+e._s(t.name)+" ")])})),1)},Un=[],Mn={name:"OrgItems",components:{},props:{value:{type:Array,default:function(){return[]}}},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},data:function(){return{}},methods:{removeOrgItem:function(e){this._value.splice(e,1)}}},Ln=Mn,Bn=(n("13a6"),Object(p["a"])(Ln,Fn,Un,!1,null,"b08c02b8",null)),Gn=Bn.exports,Vn={name:"ApprovalNodeConfig",components:{OrgPicker:b["a"],OrgItems:Gn},props:{config:{type:Object,default:function(){return{}}}},watch:{},data:function(){return{orgPickerType:"user",orgPickerChecked:[],orgPickerMod:null,approvalTypes:[{name:"æŒ‡å®šäººå‘˜",type:"ASSIGN_USER"},{name:"æŒ‡å®šè§’è‰²",type:"ROLE"},{name:"å‘èµ·äººè‡ªå·±",type:"SELF"},{name:"è¿ç»­å¤šçº§ä¸»ç®¡",type:"LEADER_TOP"},{name:"ä¸»ç®¡",type:"LEADER"},{name:"è¡¨å•å†…è”ç³»äºº",type:"FORM_USER"}]}},computed:{nodeProps:function(){return this.$store.state.selectedNode.props},forms:function(){return this.$store.state.design.formItems.filter((function(e){return"UserPicker"===e.name}))},nodeOptions:function(){var e=[],t=["EMPTY","CONDITION","CONDITIONS","CONCURRENT","CONCURRENTS"];return this.$store.state.nodeMap.forEach((function(n){-1===t.indexOf(n.type)&&e.push({id:n.id,name:n.name})})),e},showMode:function(){switch(this.nodeProps.assignedType){case"ASSIGN_USER":return this.nodeProps.nobody.tips="æŒ‡å®šå¤šäººæ—¶",this.nodeProps.assignedUser.length>0;case"SELF_SELECT":return this.nodeProps.nobody.tips="å¤šäººå®¡æ‰¹æ—¶",this.nodeProps.selfSelect.multiple;case"LEADER_TOP":return this.nodeProps.nobody.tips="éƒ¨é—¨ä¸»ç®¡ä¸ºå¤šäººæ—¶",!0;case"FORM_USER":return this.nodeProps.nobody.tips="è¡¨å•è”ç³»äººé€‰æ‹©å¤šäººæ—¶",!0;case"ROLE":return this.nodeProps.nobody.tips="è§’è‰²ä¸‹æœ‰å¤šäººæ—¶",!0;default:return!1}}},methods:{openForAssigneeUser:function(){var e=this;this.orgPickerMod="user",this.orgPickerType="user",this.orgPickerChecked=this.config.assignedUser||[],console.log(this.orgPickerMod,this.orgPickerType,this.orgPickerChecked),this.$nextTick((function(){e.$refs.orgPicker.show()}))},openForAssigneeRole:function(){var e=this;this.orgPickerMod="role",this.orgPickerType="role",this.orgPickerChecked=this.config.role||[],this.$nextTick((function(){e.$refs.orgPicker.show()}))},openForNobodyAssignee:function(){var e=this;this.orgPickerMod="nobodyUser",this.orgPickerType="user",this.orgPickerChecked=this.config.nobody.assignedUser||[],this.$nextTick((function(){e.$refs.orgPicker.show()}))},orgPickerOk:function(e){var t=this;"user"===this.orgPickerMod&&(this.config.assignedUser.length=0,e.forEach((function(e){return t.config.assignedUser.push(e)}))),"role"===this.orgPickerMod&&(this.config.role.length=0,e.forEach((function(e){return t.config.role.push(e)}))),"nobodyUser"===this.orgPickerMod&&(this.config.nobody.assignedUser.length=0,e.forEach((function(e){return t.config.nobody.assignedUser.push(e)})))},removeOrgItem:function(e){this.select.splice(e,1)}}},qn=Vn,Hn=(n("8ec2"),Object(p["a"])(qn,zn,jn,!1,null,"3cf93fe0",null)),Jn=Hn.exports,Yn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{inline:"","label-width":"100px"}},[n("el-row",[n("el-form-item",{attrs:{label:"è°ƒæ•´ä¼˜å…ˆçº§",prop:"level"}},[n("el-popover",{attrs:{placement:"right",title:"æ‹–æ‹½æ¡ä»¶è°ƒæ•´ä¼˜å…ˆçº§é¡ºåº",width:"250",trigger:"click"}},[n("draggable",{staticStyle:{width:"100%","min-height":"25px"},attrs:{list:e.prioritySortList,group:"from",options:e.sortOption}},e._l(e.prioritySortList,(function(t,o){return n("div",{class:{"drag-no-choose":!0,"drag-hover":t.id===e.selectedNode.id}},[n("ellipsis",{staticStyle:{width:"160px"},attrs:{"hover-tip":"",content:t.name}}),n("div",[e._v("ä¼˜å…ˆçº§ "+e._s(o+1))])],1)})),0),n("el-button",{attrs:{slot:"reference",icon:"el-icon-sort",size:"small"},slot:"reference"},[e._v("ç¬¬"+e._s(e.nowNodeLeave+1)+"çº§")])],1)],1),n("el-form-item",{attrs:{label:"é»˜è®¤æ¡ä»¶"}},[n("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#c1c1c1","active-text":"æ˜¯","inactive-text":"å¦"},model:{value:e.config.isDefault,callback:function(t){e.$set(e.config,"isDefault",t)},expression:"config.isDefault"}})],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.config.isDefault,expression:"!config.isDefault"}]},[n("el-row",[n("el-form-item",{attrs:{label:"æ¡ä»¶ç»„å…³ç³»"}},[n("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#c1c1c1","active-value":"AND","inactive-value":"OR","active-text":"ä¸”","inactive-text":"æˆ–"},model:{value:e.config.groupsType,callback:function(t){e.$set(e.config,"groupsType",t)},expression:"config.groupsType"}})],1)],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.config.isDefault,expression:"!config.isDefault"}]},[n("el-button",{staticStyle:{margin:"0 15px 15px 0"},attrs:{type:"primary",size:"mini",icon:"el-icon-plus",round:""},on:{click:e.addConditionGroup}},[e._v(" æ·»åŠ æ¡ä»¶ç»„ ")]),n("span",{staticClass:"item-desc"},[e._v("æ³¨æ„ï¼åªæœ‰å¿…å¡«é€‰é¡¹æ‰èƒ½ä½œä¸ºå®¡æ‰¹æ¡ä»¶")])],1),n("group-item",{directives:[{name:"show",rawName:"v-show",value:!e.config.isDefault,expression:"!config.isDefault"}]})],1)},Wn=[],Kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.selectedNode.props.groups,(function(t,o){return n("div",{key:o+"_g",staticClass:"group"},[n("div",{staticClass:"group-header"},[n("span",{staticClass:"group-name"},[e._v("æ¡ä»¶ç»„ "+e._s(e.groupNames[o]))]),n("div",{staticClass:"group-cp"},[n("span",[e._v("ç»„å†…æ¡ä»¶å…³ç³»ï¼š")]),n("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#c1c1c1","active-value":"AND","inactive-value":"OR","active-text":"ä¸”","inactive-text":"æˆ–"},model:{value:t.groupType,callback:function(n){e.$set(t,"groupType",n)},expression:"group.groupType"}})],1),n("div",{staticClass:"group-operation"},[n("el-popover",{attrs:{placement:"bottom",title:"é€‰æ‹©å®¡æ‰¹æ¡ä»¶",width:"300",trigger:"click"}},[n("el-checkbox-group",{attrs:{"value-key":"id"},model:{value:t.cids,callback:function(n){e.$set(t,"cids",n)},expression:"group.cids"}},e._l(e.conditionList,(function(o,i){return n("el-checkbox",{key:o.id,attrs:{label:o.id},on:{change:function(n){return e.conditionChange(i,t)}}},[e._v(" "+e._s(o.title)+" ")])})),1),n("i",{staticClass:"el-icon-plus",attrs:{slot:"reference"},slot:"reference"})],1),n("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.delGroup(o)}}})],1)]),n("div",{staticClass:"group-content"},[0===t.conditions.length?n("p",[e._v("ç‚¹å‡»å³ä¸Šè§’ + ä¸ºæœ¬æ¡ä»¶ç»„æ·»åŠ æ¡ä»¶ â˜")]):n("div",[n("el-form",{ref:"condition-form",refInFor:!0,attrs:{"label-width":"100px"}},e._l(t.conditions,(function(o,i){return n("el-form-item",{key:o.id+"_"+i},[n("ellipsis",{attrs:{slot:"label","hover-tip":"",content:o.title},slot:"label"}),o.valueType===e.ValueType.string?n("span",[n("el-select",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"åˆ¤æ–­ç¬¦"},on:{change:function(e){o.value=[]}},model:{value:o.compare,callback:function(t){e.$set(o,"compare",t)},expression:"condition.compare"}},[n("el-option",{attrs:{label:"ç­‰äº",value:"="}}),e.getOptions(o.id).length>0?n("el-option",{attrs:{label:"åŒ…å«åœ¨",value:"IN"}}):e._e()],1),e.isSelect(o.id)?n("span",{staticStyle:{"margin-left":"10px"}},["IN"===o.compare?n("el-select",{staticStyle:{width:"280px"},attrs:{clearable:"",multiple:"",size:"small",placeholder:"é€‰æ‹©å€¼"},model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"condition.value"}},e._l(e.getOptions(o.id),(function(e,t){return n("el-option",{key:t,attrs:{label:e,value:e}})})),1):n("el-select",{staticStyle:{width:"280px"},attrs:{clearable:"",size:"small",placeholder:"é€‰æ‹©å€¼"},model:{value:o.value[0],callback:function(t){e.$set(o.value,0,t)},expression:"condition.value[0]"}},e._l(e.getOptions(o.id),(function(e,t){return n("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1):n("span",{staticStyle:{"margin-left":"10px"}},["="===o.compare?n("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"è¾“å…¥æ¯”è¾ƒå€¼",size:"small"},model:{value:o.value[0],callback:function(t){e.$set(o.value,0,t)},expression:"condition.value[0]"}}):n("el-select",{staticStyle:{width:"280px"},attrs:{multiple:"",clearable:"",filterable:"","allow-create":"",size:"small",placeholder:"è¾“å…¥å¯èƒ½åŒ…å«çš„å€¼"},model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"condition.value"}})],1)],1):o.valueType===e.ValueType.number?n("span",[n("el-select",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"åˆ¤æ–­ç¬¦"},model:{value:o.compare,callback:function(t){e.$set(o,"compare",t)},expression:"condition.compare"}},e._l(e.explains,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("span",{staticStyle:{"margin-left":"10px"}},[0===e.conditionValType(o.compare)?n("el-input",{staticStyle:{width:"280px"},attrs:{size:"small",placeholder:"è¾“å…¥æ¯”è¾ƒå€¼",type:"number"},model:{value:o.value[0],callback:function(t){e.$set(o.value,0,t)},expression:"condition.value[0]"}}):1===e.conditionValType(o.compare)?n("el-select",{staticStyle:{width:"280px"},attrs:{multiple:"",filterable:"","allow-create":"",size:"small",placeholder:"è¾“å…¥å¯èƒ½åŒ…å«çš„å€¼"},model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"condition.value"}}):n("span",[n("el-input",{staticStyle:{width:"130px"},attrs:{size:"small",type:"number",placeholder:"è¾“å…¥æ¯”è¾ƒå€¼"},model:{value:o.value[0],callback:function(t){e.$set(o.value,0,t)},expression:"condition.value[0]"}}),n("span",[e._v(" ~ "),n("el-input",{staticStyle:{width:"130px"},attrs:{size:"small",type:"number",placeholder:"è¾“å…¥æ¯”è¾ƒå€¼"},model:{value:o.value[1],callback:function(t){e.$set(o.value,1,t)},expression:"condition.value[1]"}})],1)],1)],1)],1):o.valueType===e.ValueType.user?n("span",[n("el-select",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{size:"small",placeholder:"åˆ¤æ–­ç¬¦"},model:{value:o.compare,callback:function(t){e.$set(o,"compare",t)},expression:"condition.compare"}},[n("el-option",{attrs:{label:"ä¸ºæŸäº›äººå…¶ä¸­ä¹‹ä¸€",value:"user"}}),n("el-option",{attrs:{label:"ä¸ºæŸéƒ¨é—¨æˆ–å…¶ä¸‹å±éƒ¨é—¨ä¹‹ä¸€",value:"dept"}}),n("el-option",{attrs:{label:"ä¸ºæŸè§’è‰²å…¶ä¸­ä¹‹ä¸€",value:"role"}})],1),n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"primary",round:""},on:{click:function(t){return e.selectUser(o.value,o.compare)}}},[e._v("é€‰æ‹©èŒƒå›´")]),n("org-items",{model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"condition.value"}})],1):o.valueType===e.ValueType.dept?n("span",[n("el-select",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{size:"small",placeholder:"åˆ¤æ–­ç¬¦"},model:{value:o.compare,callback:function(t){e.$set(o,"compare",t)},expression:"condition.compare"}},[n("el-option",{attrs:{label:"ä¸ºæŸéƒ¨é—¨æˆ–å…¶ä¸‹å±éƒ¨é—¨ä¹‹ä¸€",value:"dept"}})],1),n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"primary",round:""},on:{click:function(t){return e.selectUser(o.value,"dept")}}},[e._v("é€‰æ‹©éƒ¨é—¨")]),n("org-items",{model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"condition.value"}})],1):o.valueType===e.ValueType.date?n("span",[n("el-select",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"åˆ¤æ–­ç¬¦"},model:{value:o.compare,callback:function(t){e.$set(o,"compare",t)},expression:"condition.compare"}},e._l(e.explains,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("span",{staticStyle:{"margin-left":"10px"}},[0===e.conditionValType(o.compare)?n("el-date-picker",{staticStyle:{width:"280px"},attrs:{"value-format":"yyyy-MM-dd",size:"small",placeholder:"è¾“å…¥æ¯”è¾ƒå€¼",type:"date"},model:{value:o.value[0],callback:function(t){e.$set(o.value,0,t)},expression:"condition.value[0]"}}):n("span",[n("el-date-picker",{staticStyle:{width:"130px"},attrs:{"value-format":"yyyy-MM-dd",size:"small",type:"date",placeholder:"è¾“å…¥æ¯”è¾ƒå€¼"},model:{value:o.value[0],callback:function(t){e.$set(o.value,0,t)},expression:"condition.value[0]"}}),n("span",[e._v(" ~ "),n("el-date-picker",{staticStyle:{width:"130px"},attrs:{"value-format":"yyyy-MM-dd",size:"small",type:"date",placeholder:"è¾“å…¥æ¯”è¾ƒå€¼"},model:{value:o.value[1],callback:function(t){e.$set(o.value,1,t)},expression:"condition.value[1]"}})],1)],1)],1)],1):e._e(),n("i",{staticClass:"el-icon-delete",on:{click:function(n){return e.rmSubCondition(t,i)}}})],1)})),1)],1)])])})),n("org-picker",{ref:"orgPicker",attrs:{type:e.orgType,multiple:"",selected:e.users},on:{ok:e.selected}})],2)},Xn=[];n("c740"),n("4ec9"),n("e439"),n("dbb4"),n("b64b");function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var to={name:"ConditionGroupItemConfig",components:{OrgPicker:b["a"],OrgItems:Gn},data:function(){return{ValueType:at["a"],users:[],orgType:"user",showOrgSelect:!1,groupNames:["A","B","C","D","E","F","G","H","I","J"],supportTypes:[at["a"].number,at["a"].string,at["a"].date,at["a"].dept,at["a"].user],explains:[{label:"ç­‰äº",value:"="},{label:"å¤§äº",value:">"},{label:"å¤§äºç­‰äº",value:">="},{label:"å°äº",value:"<"},{label:"å°äºç­‰äº",value:"<="},{label:"åŒ…å«åœ¨",value:"IN"},{label:"x < å€¼ < x",value:"B"},{label:"x â‰¤ å€¼ < x",value:"AB"},{label:"x < å€¼ â‰¤ x",value:"BA"},{label:"x â‰¤ å€¼ â‰¤ x",value:"ABA"}]}},computed:{selectedNode:function(){return this.$store.state.selectedNode},select:function(){return this.selectedNode.props.assignedUser||[]},formItems:function(){return this.$store.state.design.formItems},formMap:function(){var e=this,t=new Map;return this.formItems.forEach((function(n){return e.itemToMap(t,n)})),t},conditionList:function(){var e=this,t=[];return this.formItems.forEach((function(n){return e.filterCondition(n,t)})),0!==t.length&&"root"===t[0].id||t.unshift({id:"root",title:"å‘èµ·äºº",valueType:"User"}),t}},methods:{itemToMap:function(e,t){var n=this;e.set(t.id,t),"SpanLayout"===t.name&&t.props.items.forEach((function(t){return n.itemToMap(e,t)}))},isSelect:function(e){var t=this.formMap.get(e);return!(!t||"SelectInput"!==t.name&&"MultipleSelect"!==t.name)},getOptions:function(e){return this.formMap.get(e).props.options||[]},conditionValType:function(e){switch(e){case"=":case">":case">=":case"<":case"<=":return 0;case"IN":return 1;default:return 2}},selectUser:function(e,t){var n=this;this.orgType===t||(e.length=0),this.users=e,this.orgType=t,this.$nextTick((function(){n.$refs.orgPicker.show()}))},filterCondition:function(e,t){var n=this;"SpanLayout"===e.name?e.props.items.forEach((function(e){return n.filterCondition(e,t)})):this.supportTypes.indexOf(e.valueType)>-1&&e.props.required&&t.push({title:e.title,id:e.id,valueType:e.valueType})},selected:function(e){var t=this;this.users.length=0,e.forEach((function(e){return t.users.push(e)}))},delGroup:function(e){this.selectedNode.props.groups.splice(e,1)},rmSubCondition:function(e,t){e.cids.splice(t,1),e.conditions.splice(t,1)},conditionChange:function(e,t){var n=this;t.cids.forEach((function(o){if(0>t.conditions.findIndex((function(e){return e.id===o}))){var i=eo({},n.conditionList[e]);i.compare="",i.value=[],t.conditions.push(i)}}));for(var o=0;o<t.conditions.length;o++)t.cids.indexOf(t.conditions[o].id)<0&&t.conditions.splice(o,1)}}},no=to,oo=(n("c748"),Object(p["a"])(no,Kn,Xn,!1,null,"0ce2f974",null)),io=oo.exports,so={name:"ConditionNodeConfig",components:{draggable:$.a,GroupItem:io},props:{config:{type:Object,default:function(){return{}}}},computed:{selectedNode:function(){return this.$store.state.selectedNode},select:function(){return this.config.assignedUser||[]},nowNodeLeave:function(){return this.prioritySortList.indexOf(this.selectedNode)},prioritySortList:function(){var e=this.$store.state.nodeMap.get(this.selectedNode.parentId);return e&&e.branchs||[]}},data:function(){return{sortOption:{animation:300,chosenClass:"choose",scroll:!0,sort:!0}}},methods:{addConditionGroup:function(){this.config.groups.push({cids:[],groupType:"OR",conditions:[]})},selectUser:function(){this.showOrgSelect=!0},selected:function(e){var t=this;this.showOrgSelect=!1,e.forEach((function(e){return t.select.push(e)}))},removeOrgItem:function(e){this.select.splice(e,1)}}},ro=so,ao=(n("96e1"),Object(p["a"])(ro,Yn,Wn,!1,null,"5046b055",null)),lo=ao.exports,co=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"margin-bottom":"20px"}},[n("p",{staticClass:"item-desc"},[e._v("å»¶æ—¶æ–¹å¼")]),n("el-radio-group",{attrs:{size:"small"},model:{value:e.config.type,callback:function(t){e.$set(e.config,"type",t)},expression:"config.type"}},[n("el-radio-button",{attrs:{label:"FIXED"}},[e._v("å›ºå®šæ—¶é•¿")]),n("el-radio-button",{attrs:{label:"AUTO"}},[e._v("è‡ªåŠ¨è®¡ç®—")])],1)],1),"FIXED"===e.config.type?n("div",[n("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"æ—¶é—´å•ä½",size:"small",type:"number"},model:{value:e.config.time,callback:function(t){e.$set(e.config,"time",t)},expression:"config.time"}},[n("el-select",{staticStyle:{width:"75px"},attrs:{slot:"append",placeholder:"è¯·é€‰æ‹©"},slot:"append",model:{value:e.config.unit,callback:function(t){e.$set(e.config,"unit",t)},expression:"config.unit"}},[n("el-option",{attrs:{label:"å¤©",value:"D"}}),n("el-option",{attrs:{label:"å°æ—¶",value:"H"}}),n("el-option",{attrs:{label:"åˆ†é’Ÿ",value:"M"}})],1)],1),n("span",{staticClass:"item-desc"},[e._v(" åè¿›å…¥ä¸‹ä¸€æ­¥")])],1):n("div",{staticClass:"item-desc"},[n("el-time-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"HH:mm:ss",size:"small",placeholder:"ä»»æ„æ—¶é—´ç‚¹"},model:{value:e.config.dateTime,callback:function(t){e.$set(e.config,"dateTime",t)},expression:"config.dateTime"}}),n("span",{staticClass:"item-desc"},[e._v(" åè¿›å…¥ä¸‹ä¸€æ­¥")])],1)])},uo=[],po={name:"DelayNodeConfig",components:{},props:{config:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},fo=po,mo=Object(p["a"])(fo,co,uo,!1,null,"1371640c",null),ho=mo.exports,vo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"primary",round:""},on:{click:e.selectOrg}},[e._v("é€‰æ‹©æŠ„é€äºº")]),n("div",{staticClass:"option"}),n("org-items",{model:{value:e.select,callback:function(t){e.select=t},expression:"select"}}),n("org-picker",{ref:"orgPicker",attrs:{multiple:"",type:"user",selected:e.select},on:{ok:e.selected}})],1)},go=[],bo={name:"CcNodeConfig.vue",components:{OrgPicker:b["a"],OrgItems:Gn},props:{config:{type:Object,default:function(){return{}}}},computed:{select:{get:function(){return this.config.assignedUser||[]},set:function(e){this.config.assignedUser=e}}},data:function(){return{}},methods:{selectOrg:function(){this.$refs.orgPicker.show()},selected:function(e){this.config.assignedType="CC",this.select=Object.assign([],e)},removeOrgItem:function(e){this.select.splice(e,1)}}},yo=bo,_o=(n("7116"),Object(p["a"])(yo,vo,go,!1,null,"043a8ff4",null)),ko=_o.exports,wo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{"label-position":"top","label-width":"90px"}},[n("el-form-item",{staticClass:"user-type",attrs:{label:"é€‰æ‹©è§¦å‘çš„åŠ¨ä½œ",prop:"text"}},[n("el-radio-group",{model:{value:e.config.type,callback:function(t){e.$set(e.config,"type",t)},expression:"config.type"}},[n("el-radio",{attrs:{label:"WEBHOOK"}},[e._v("å‘é€ç½‘ç»œè¯·æ±‚")]),n("el-radio",{attrs:{label:"EMAIL"}},[e._v("å‘é€é‚®ä»¶")])],1)],1),"WEBHOOK"===e.config.type?n("div",[n("el-form-item",{attrs:{label:"è¯·æ±‚åœ°å€",prop:"text"}},[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥URLåœ°å€",size:"medium"},model:{value:e.config.http.url,callback:function(t){e.$set(e.config.http,"url",t)},expression:"config.http.url"}},[n("el-select",{staticStyle:{width:"85px"},attrs:{slot:"prepend",placeholder:"URL"},slot:"prepend",model:{value:e.config.http.method,callback:function(t){e.$set(e.config.http,"method",t)},expression:"config.http.method"}},[n("el-option",{attrs:{label:"GET",value:"GET"}}),n("el-option",{attrs:{label:"POST",value:"POST"}}),n("el-option",{attrs:{label:"PUT",value:"PUT"}}),n("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1)],1)],1),n("el-form-item",{attrs:{label:"Headerè¯·æ±‚å¤´",prop:"text"}},[n("div",{attrs:{slot:"label"},slot:"label"},[n("span",{staticStyle:{"margin-right":"10px"}},[e._v("Headerè¯·æ±‚å¤´")]),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addItem(e.config.http.headers)}}},[e._v(" + æ·»åŠ ")])],1),e._l(e.config.http.headers,(function(t,o){return n("div",{key:t.name},[e._v(" - "),n("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"å‚æ•°å",size:"small"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"header.name"}}),n("el-radio-group",{staticStyle:{margin:"0 5px"},attrs:{size:"small"},model:{value:t.isField,callback:function(n){e.$set(t,"isField",n)},expression:"header.isField"}},[n("el-radio-button",{attrs:{label:!0}},[e._v("è¡¨å•")]),n("el-radio-button",{attrs:{label:!1}},[e._v("å›ºå®š")])],1),t.isField?n("el-select",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"è¯·é€‰æ‹©è¡¨å•å­—æ®µ"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"header.value"}},e._l(e.forms,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:e.title}})})),1):n("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"è¯·è®¾ç½®å­—æ®µå€¼",size:"small"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"header.value"}}),n("el-icon",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"5px",color:"#c75450",cursor:"pointer"},on:{click:function(t){return e.delItem(e.config.http.headers,o)}}})],1)}))],2),n("el-form-item",{attrs:{label:"Headerè¯·æ±‚å‚æ•°",prop:"text"}},[n("div",{attrs:{slot:"label"},slot:"label"},[n("span",{staticStyle:{"margin-right":"10px"}},[e._v("Headerè¯·æ±‚å‚æ•° ")]),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"text"},on:{click:function(t){return e.addItem(e.config.http.params)}}},[e._v(" + æ·»åŠ ")]),n("span",[e._v("å‚æ•°ç±»å‹ - ")]),n("el-radio-group",{staticStyle:{margin:"0 5px"},attrs:{size:"mini"},model:{value:e.config.http.contentType,callback:function(t){e.$set(e.config.http,"contentType",t)},expression:"config.http.contentType"}},[n("el-radio-button",{attrs:{label:"JSON"}},[e._v("json")]),n("el-radio-button",{attrs:{label:"FORM"}},[e._v("form")])],1)],1),e._l(e.config.http.params,(function(t,o){return n("div",{key:t.name},[e._v(" - "),n("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"å‚æ•°å",size:"small"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"param.name"}}),n("el-radio-group",{staticStyle:{margin:"0 5px"},attrs:{size:"small"},model:{value:t.isField,callback:function(n){e.$set(t,"isField",n)},expression:"param.isField"}},[n("el-radio-button",{attrs:{label:!0}},[e._v("è¡¨å•")]),n("el-radio-button",{attrs:{label:!1}},[e._v("å›ºå®š")])],1),t.isField?n("el-select",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"è¯·é€‰æ‹©è¡¨å•å­—æ®µ"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"param.value"}},e._l(e.forms,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:e.title}})})),1):n("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"è¯·è®¾ç½®å­—æ®µå€¼",size:"small"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"param.value"}}),n("el-icon",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"5px",color:"#c75450",cursor:"pointer"},on:{click:function(t){return e.delItem(e.config.http.params,o)}}})],1)})),n("div")],2),n("el-form-item",{attrs:{label:"è¯·æ±‚ç»“æœå¤„ç†",prop:"text"}},[n("div",{attrs:{slot:"label"},slot:"label"},[n("span",[e._v("è¯·æ±‚ç»“æœå¤„ç†")]),n("span",{staticStyle:{"margin-left":"20px"}},[e._v("è‡ªå®šä¹‰è„šæœ¬: ")]),n("el-switch",{model:{value:e.config.http.handlerByScript,callback:function(t){e.$set(e.config.http,"handlerByScript",t)},expression:"config.http.handlerByScript"}})],1),e.config.http.handlerByScript?n("span",{staticClass:"item-desc"},[e._v(" ğŸ‘‰ è¿”å›å€¼ä¸º ture åˆ™æµç¨‹é€šè¿‡ï¼Œä¸º false åˆ™æµç¨‹å°†è¢«é©³å› "),n("div",[e._v("æ”¯æŒå‡½æ•° "),n("span",{staticStyle:{color:"dodgerblue"}},[e._v("setFormByName( "),n("span",{staticStyle:{color:"#939494"}},[e._v("'è¡¨å•å­—æ®µå', 'è¡¨å•å­—æ®µå€¼'")]),e._v(" )")]),e._v(" å¯æ”¹è¡¨å•æ•°æ® ")])]):n("span",{staticClass:"item-desc"},[e._v("ğŸ‘‰ æ— è®ºè¯·æ±‚ç»“æœå¦‚ä½•ï¼Œå‡é€šè¿‡")]),e.config.http.handlerByScript?n("div",[n("div",[n("span",[e._v("è¯·æ±‚æˆåŠŸğŸ˜€ï¼š")]),n("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.config.http.success,callback:function(t){e.$set(e.config.http,"success",t)},expression:"config.http.success"}})],1),n("div",[n("span",[e._v("è¯·æ±‚å¤±è´¥ğŸ˜¥ï¼š")]),n("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.config.http.fail,callback:function(t){e.$set(e.config.http,"fail",t)},expression:"config.http.fail"}})],1)]):e._e()])],1):"EMAIL"===e.config.type?n("div",[n("el-form-item",{attrs:{label:"é‚®ä»¶ä¸»é¢˜",prop:"text"}},[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥é‚®ä»¶ä¸»é¢˜",size:"medium"},model:{value:e.config.email.subject,callback:function(t){e.$set(e.config.email,"subject",t)},expression:"config.email.subject"}})],1),n("el-form-item",{attrs:{label:"æ”¶ä»¶æ–¹",prop:"text"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",multiple:"","allow-create":"","default-first-option":"",placeholder:"è¯·è¾“å…¥æ”¶ä»¶äºº"},model:{value:e.config.email.to,callback:function(t){e.$set(e.config.email,"to",t)},expression:"config.email.to"}},e._l(e.config.email.to,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",{attrs:{label:"é‚®ä»¶æ­£æ–‡",prop:"text"}},[n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"é‚®ä»¶å†…å®¹ï¼Œæ”¯æŒå˜é‡æå–è¡¨å•æ•°æ® ${è¡¨å•å­—æ®µå} "},model:{value:e.config.email.content,callback:function(t){e.$set(e.config.email,"content",t)},expression:"config.email.content"}})],1)],1):e._e()],1)],1)},xo=[],So={name:"TriggerNodeConfig",components:{},props:{config:{type:Object,default:function(){return{}}}},computed:{forms:function(){return this.$store.state.design.formItems||[]}},data:function(){return{cmOptions:{tabSize:4,indentUnit:4,styleActiveLine:!0,lineNumbers:!0,styleSelectedText:!0,line:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","lock","warn"],highlightSelectionMatches:{showToken:/w/,annotateScrollbar:!0},mode:"javascript",hintOptions:{completeSingle:!1},keyMap:"sublime",matchBrackets:!0,showCursorWhenSelecting:!1,theme:"material",extraKeys:{Ctrl:"autocomplete"},lastLineBefore:0}}},methods:{addItem:function(e){e.length>0&&(""===e[e.length-1].name.trim()||""===e[e.length-1].value.trim())?this.$message.warning("è¯·å®Œå–„ä¹‹å‰é¡¹ååœ¨æ·»åŠ "):e.push({name:"",value:"",isField:!0})},delItem:function(e,t){e.splice(t,1)},onCmCodeChange:function(){},onCmReady:function(){}}},Co=So,No=(n("d394"),Object(p["a"])(Co,wo,xo,!1,null,"036f6480",null)),Oo=No.exports,$o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#f5f6f6"},data:e.formPerms,border:""}},[n("el-table-column",{attrs:{prop:"title","show-overflow-tooltip":"",label:"è¡¨å•å­—æ®µ"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.required?n("span",{staticStyle:{color:"#c75450"}},[e._v(" * ")]):e._e(),n("span",[e._v(e._s(t.row.title))])]}}])}),n("el-table-column",{attrs:{prop:"readOnly",label:"åªè¯»",width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-radio",{attrs:{label:"R"},on:{change:function(t){return e.allSelect("R")}},model:{value:e.permSelect,callback:function(t){e.permSelect=t},expression:"permSelect"}},[e._v("åªè¯»")])]}},{key:"default",fn:function(t){return[n("el-radio",{attrs:{label:"R",name:t.row.id},model:{value:t.row.perm,callback:function(n){e.$set(t.row,"perm",n)},expression:"scope.row.perm"}})]}}])}),"CC"!==e.nowNode.type?n("el-table-column",{attrs:{prop:"editable",label:"å¯ç¼–è¾‘",width:"90"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-radio",{attrs:{label:"E"},on:{change:function(t){return e.allSelect("E")}},model:{value:e.permSelect,callback:function(t){e.permSelect=t},expression:"permSelect"}},[e._v("å¯ç¼–è¾‘")])]}},{key:"default",fn:function(t){return[n("el-radio",{attrs:{label:"E",name:t.row.id},model:{value:t.row.perm,callback:function(n){e.$set(t.row,"perm",n)},expression:"scope.row.perm"}})]}}],null,!1,2030366288)}):e._e(),n("el-table-column",{attrs:{prop:"hide",label:"éšè—",width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-radio",{attrs:{label:"H"},on:{change:function(t){return e.allSelect("H")}},model:{value:e.permSelect,callback:function(t){e.permSelect=t},expression:"permSelect"}},[e._v("éšè—")])]}},{key:"default",fn:function(t){return[n("el-radio",{attrs:{label:"H",name:t.row.id},model:{value:t.row.perm,callback:function(n){e.$set(t.row,"perm",n)},expression:"scope.row.perm"}})]}}])})],1)],1)},Io=[],Eo={name:"FormAuthorityConfig",components:{},data:function(){return{tableData:[],isIndeterminate:!1,permSelect:"",checkStatus:{readOnly:!0,editable:!1,hide:!1}}},created:function(){var e=this.formPerms.toMap("id");this.formPerms.length=0,this.formPermsLoad(e,this.formData)},computed:{nowNode:function(){return this.$store.state.selectedNode},formData:function(){return this.$store.state.design.formItems},formPerms:function(){return this.$store.state.selectedNode.props.formPerms}},methods:{allSelect:function(e){this.permSelect=e,this.formPerms.forEach((function(t){return t.perm=e}))},formPermsLoad:function(e,t){var n=this;t.forEach((function(t){if("SpanLayout"===t.name)n.formPermsLoad(e,t.props.items);else{var o=e.get(t.id);o?(o.title=t.title,o.required=t.props.required,n.formPerms.push(o)):n.formPerms.push({id:t.id,title:t.title,required:t.props.required,perm:"ROOT"===n.$store.state.selectedNode.type?"E":"R"})}}))},handleCheckAllChange:function(){}},watch:{formPerms:{deep:!0,handler:function(){var e=new Set(this.formPerms.map((function(e){return e.perm})));this.permSelect=1===e.size?e.values()[0]:""}}}},To=Eo,Po=(n("33db"),Object(p["a"])(To,$o,Io,!1,null,"5d9826dc",null)),Ro=Po.exports,Do=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{staticClass:"desc"},[e._v("é€‰æ‹©èƒ½å‘èµ·è¯¥å®¡æ‰¹çš„è§’è‰²ï¼Œä¸é€‰åˆ™é»˜è®¤å¼€æ”¾ç»™æ‰€æœ‰äºº")]),n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"primary",round:""},on:{click:e.selectOrg}},[e._v("è¯·é€‰æ‹©")]),n("org-items",{model:{value:e.select,callback:function(t){e.select=t},expression:"select"}}),n("org-picker",{ref:"orgPicker",attrs:{title:"è¯·é€‰æ‹©å¯å‘èµ·æœ¬å®¡æ‰¹çš„è§’è‰²",type:"role",multiple:"",selected:e.select},on:{ok:e.selected}})],1)},Ao=[],zo={name:"RootConfig",components:{OrgPicker:b["a"],OrgItems:Gn},props:{config:{type:Object,default:function(){return{}}}},data:function(){return{showOrgSelect:!1}},computed:{select:function(){return this.config.assignedUser}},methods:{selectOrg:function(){this.$refs.orgPicker.show()},selected:function(e){var t=this;this.select.length=0,e.forEach((function(e){return t.select.push(e)}))},removeOrgItem:function(e){this.select.splice(e,1)}}},jo=zo,Fo=(n("b920"),Object(p["a"])(jo,Do,Ao,!1,null,"69fe35ca",null)),Uo=Fo.exports,Mo={name:"NodeConfig",components:{Approval:Jn,Condition:lo,Trigger:Oo,Delay:ho,Root:Uo,Cc:ko,FormAuthorityConfig:Ro},data:function(){return{active:"properties"}},computed:{selectNode:function(){return this.$store.state.selectedNode},formConfig:function(){return this.$store.state.design.formItems},name:function(){switch(this.selectNode.type){case"ROOT":return"è®¾ç½®å‘èµ·äºº";case"APPROVAL":return"è®¾ç½®å®¡æ‰¹äºº";case"CC":return"è®¾ç½®æŠ„é€äºº";default:return null}}},methods:{}},Lo=Mo,Bo=Object(p["a"])(Lo,Dn,An,!1,null,"6aaedfac",null),Go=Bo.exports,Vo={name:"ProcessDesign",components:{ProcessTree:Rn,NodeConfig:Go},data:function(){return{scale:100,selected:{},showInput:!1,showConfig:!1}},computed:{selectedNode:function(){return this.$store.state.selectedNode}},mounted:function(){},methods:{validate:function(){return this.$refs["process-tree"].validateProcess()},nodeSelected:function(e){this.showConfig=!0}},watch:{}},qo=Vo,Ho=(n("3980"),Object(p["a"])(qo,pt,ft,!1,null,"69a22f6c",null)),Jo=Ho.exports,Yo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"senior-setup"},[n("el-form",{attrs:{"label-position":"top","label-width":"80px"}},[n("el-form-item",{attrs:{label:"å®¡æ‰¹åŒæ„æ—¶æ˜¯å¦ç­¾å­—"}},[n("el-switch",{attrs:{"inactive-text":"æ— éœ€ç­¾å­—","active-text":"éœ€è¦ç­¾å­—"},model:{value:e.setup&&e.setup.sign,callback:function(t){e.$set(e.setup&&e.setup,"sign",t)},expression:"setup && setup.sign"}}),n("div",{staticClass:"sign-tip"},[e._v("å¦‚æœæ­¤å¤„è®¾ç½®ä¸º "),n("b",[e._v("éœ€è¦ç­¾å­—")]),e._v("ï¼Œåˆ™æ‰€æœ‰å®¡æ‰¹äººâ€œåŒæ„æ—¶â€ "),n("b",[e._v("å¿…é¡»ç­¾å­—")])])],1)],1)],1)},Wo=[],Ko={name:"FormProSetting",computed:{setup:function(){return this.$store.state.design.settings}},data:function(){return{}},methods:{validate:function(){return[]}}},Xo=Ko,Zo=(n("e6cb"),Object(p["a"])(Xo,Yo,Wo,!1,null,"75c21992",null)),Qo=Zo.exports,ei={name:"FormProcessDesign",components:{LayoutHeader:m,FormBaseSetting:x,FormDesign:dt,ProcessDesign:Jo,FormProSetting:Qo},data:function(){return{isNew:!0,validStep:0,timer:null,activeSelect:"baseSetting",validVisible:!1,validResult:{},validOptions:[{title:"åŸºç¡€ä¿¡æ¯",description:"",icon:"",status:""},{title:"å®¡æ‰¹è¡¨å•",description:"",icon:"",status:""},{title:"å®¡æ‰¹æµç¨‹",description:"",icon:"",status:""}],validComponents:["baseSetting","formSetting","processDesign","proSetting"]}},computed:{setup:function(){return this.$store.state.design},errTitle:function(){return this.validResult.finished&&!this.validResult.success?this.validResult.title+" (".concat(this.validResult.errs.length,"é¡¹é”™è¯¯) ğŸ˜¥"):this.validResult.title},validIcon:function(){return this.validResult.finished?this.validResult.success?"success":"warning":"el-icon-loading"}},created:function(){this.showValiding();var e=this.$route.query.code;this.$isNotEmpty(e)?(this.isNew=!1,this.loadFormInfo(e)):(this.isNew=!0,this.loadInitFrom());var t=this.$route.query.groupId;this.setup.groupId=this.$isNotEmpty(t)?parseInt(t):null},beforeDestroy:function(){this.stopTimer()},methods:{loadFormInfo:function(e){var t=this;Object(h["d"])(e).then((function(e){var n=e.data;n.logo=JSON.parse(n.logo),n.settings=JSON.parse(n.settings),n.formItems=JSON.parse(n.formItems),n.process=JSON.parse(n.process),t.$store.commit("loadForm",n)})).catch((function(e){t.$message.error(e)}))},loadInitFrom:function(){this.$store.commit("loadForm",{formId:null,formName:"æœªå‘½åè¡¨å•",logo:{icon:"iconfont icon-shiyongwendang",background:"#1e90ff"},settings:{commiter:[],admin:[],sign:!1,notify:{types:["APP"],title:"æ¶ˆæ¯é€šçŸ¥æ ‡é¢˜"}},groupId:void 0,formItems:[],process:{id:"root",parentId:null,type:"ROOT",name:"å‘èµ·äºº",desc:"",props:{assignedUser:[],formPerms:[]},children:{}},remark:"å¤‡æ³¨è¯´æ˜"})},validateDesign:function(){var e=this;this.validVisible=!0,this.validStep=0,this.showValiding(),this.stopTimer(),this.timer=setInterval((function(){e.validResult.errs=e.$refs[e.validComponents[e.validStep]].validate(),Array.isArray(e.validResult.errs)&&0===e.validResult.errs.length?(e.validStep++,e.validStep>=e.validOptions.length&&(e.stopTimer(),e.showValidFinish(!0))):(e.stopTimer(),e.validOptions[e.validStep].status="error",e.showValidFinish(!1,e.getDefaultValidErr()))}),300)},getDefaultValidErr:function(){switch(this.validStep){case 0:return"è¯·æ£€æŸ¥åŸºç¡€è®¾ç½®é¡¹";case 1:return"è¯·æ£€æŸ¥å®¡æ‰¹è¡¨å•ç›¸å…³è®¾ç½®";case 2:return"è¯·æ£€æŸ¥å®¡æ‰¹æµç¨‹ï¼ŒæŸ¥çœ‹å¯¹åº”æ ‡æ³¨èŠ‚ç‚¹é”™è¯¯ä¿¡æ¯";case 3:return"è¯·æ£€æŸ¥æ‰©å±•è®¾ç½®";default:return"æœªçŸ¥é”™è¯¯"}},showValidFinish:function(e,t){this.validResult.success=e,this.validResult.finished=!0,this.validResult.title=e?"æ ¡éªŒå®Œæˆ ğŸ˜€":"æ ¡éªŒå¤±è´¥ ",this.validResult.desc=e?"è®¾ç½®é¡¹æ ¡éªŒæˆåŠŸï¼Œæ˜¯å¦æäº¤ï¼Ÿ":t,this.validResult.action=e?"æ äº¤":"å»ä¿®æ”¹"},showValiding:function(){this.validResult={errs:[],finished:!1,success:!1,title:"æ£€æŸ¥ä¸­...",action:"å¤„ç†",desc:"æ­£åœ¨æ£€æŸ¥è®¾ç½®é¡¹"},this.validStep=0,this.validOptions.forEach((function(e){e.status="",e.icon="",e.description=""}))},doAfter:function(){this.validResult.success?this.doPublish():(this.activeSelect=this.validComponents[this.validStep],this.validVisible=!1)},stopTimer:function(){this.timer&&clearInterval(this.timer)},preview:function(){this.validateDesign()},publishProcess:function(){this.validateDesign()},doPublish:function(){var e=this;this.$confirm("ç¡®è®¤å‘å¸ƒåæµç¨‹ç«‹å³ç”Ÿæ•ˆï¼Œæ˜¯å¦ç»§ç»­?","æç¤º",{confirmButtonText:"å‘å¸ƒ",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((function(){var t=JSON.parse(JSON.stringify(e.setup));t.logo=JSON.stringify(e.setup.logo),t.settings=JSON.stringify(e.setup.settings),t.groupId=e.setup.groupId,t.formItems=JSON.stringify(e.setup.formItems),t.process=JSON.stringify(e.setup.process),e.isNew||!e.$isNotEmpty(e.setup.formId)?Object(h["a"])(t).then((function(t){e.$message.success("åˆ›å»ºè¡¨å•æˆåŠŸ"),e.$router.push("/formsPanel?_token="+Object(c["a"])())})).catch((function(t){e.$message.error(t)})):Object(h["l"])(t).then((function(t){e.$message.success("æ›´æ–°è¡¨å•æˆåŠŸ"),e.$router.push("/formsPanel?_token="+Object(c["a"])())})).catch((function(t){e.$message.error(t)}))}))}}},ti=ei,ni=(n("73d9"),Object(p["a"])(ti,s,r,!1,null,"36141b11",null));t["default"]=ni.exports},e61d:function(e,t,n){},e6cb:function(e,t,n){"use strict";var o=n("f44f"),i=n.n(o);i.a},e81a:function(e,t,n){},f44f:function(e,t,n){}}]);
//# sourceMappingURL=chunk-7a40886e.90cd65c6.js.map