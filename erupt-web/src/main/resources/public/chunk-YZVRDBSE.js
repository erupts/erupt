import{ca as jn,d as Yn,e as Xn}from"./chunk-X4JPWPF2.js";import{$a as qe,$e as _n,Ab as Zt,Ac as pn,Ai as Fn,B as Qt,Ba as Xi,Bb as Kt,Bi as Pn,C as Bi,Cb as P,Cc as mn,Ci as Bn,Db as pt,Di as It,Ea as ji,Eb as k,Ei as K,Fb as E,Fc as Ot,Fi as ie,G as J,Ga as d,Gb as nn,Gi as Rt,Ha as _,Hb as Ze,Hc as te,Hi as Wn,I as Wi,Ia as tt,Ib as ve,Ii as zn,J as Tt,Jb as yt,Ji as ke,K as Bt,Ka as Zi,Kb as w,Ki as Ln,L as me,La as Qe,Lb as W,Li as Hn,M as zi,Mb as an,Mi as Vn,Nb as be,Ni as Gn,O as Li,Ob as mt,Oc as ee,Oi as Nn,P as Q,Pb as sn,Pc as gn,Pi as Un,Qa as I,Qb as Mt,Qc as Z,Qi as An,Ra as fe,S as Hi,Sa as Xt,Ta as jt,U as Vi,Ua as ye,W as Ae,Wa as R,Wb as rn,Wc as un,Wi as Qn,X as Wt,Xb as on,Xi as qn,Y as qt,Yb as Ke,Yd as Lt,Ye as bn,Z as b,Zc as fn,_ as Gi,_a as $,_d as yn,_e as Cn,ab as f,af as wn,bc as zt,be as vn,bf as Dn,c as he,cb as y,cf as we,d as O,da as ge,db as Ye,df as xn,e as At,ea as ht,eb as Ki,ec as Jt,ef as Sn,f as pe,fa as ue,fb as G,fc as vt,ff as Tn,ga as Yt,gb as N,gc as ln,gh as In,h as Ii,hb as v,hc as dn,hf as kn,hh as ti,i as Ne,ia as h,ib as p,if as En,ja as x,jb as g,jf as De,jh as Rn,ka as S,kb as D,kc as it,kf as Mn,la as V,lb as Y,lc as nt,lf as On,m as Ri,mb as j,mi as $n,n as $i,na as Ni,nb as et,ne as bt,o as Fi,oa as Ui,oe as Je,p as Ue,pa as Ai,pc as cn,qa as kt,qb as Xe,ra as Qi,rb as Ji,sb as tn,ta as Et,tb as U,tc as Ce,ub as je,uc as _e,va as z,vi as xe,w as St,wb as F,wi as Se,x as Pi,xa as qi,xi as L,ya as Yi,yb as en,yc as at,yi as M,zb as c,zc as hn,zi as Te}from"./chunk-LH5JAFL2.js";import{a as ft,b as xt,h as Ge}from"./chunk-WWX6BADO.js";function Ht(i,a,t){let e=M(i,t?.in);if(isNaN(a))return L(t?.in||i,NaN);if(!a)return e;let n=e.getDate(),s=L(t?.in||i,e.getTime());s.setMonth(e.getMonth()+a+1,0);let r=s.getDate();return n>=r?s:(e.setFullYear(s.getFullYear(),s.getMonth(),n),e)}function Zn(i,a){let t=M(i,a?.in).getDay();return t===0||t===6}function Kn(i,a,t){return Fn(i,a*Se,t)}function Jn(i,a,t){let e=M(i,t?.in);return e.setTime(e.getTime()+a*xe),e}function ta(i,a,t){return Ht(i,a*3,t)}function Ee(i,a,t){return Te(i,a*7,t)}function ea(i,a,t){return Ht(i,a*12,t)}function ia(i,a,t){let[e,n]=K(t?.in,i,a);return+ie(e)==+ie(n)}function ei(i,a){let t=M(i,a?.in);return Math.trunc(t.getMonth()/3)+1}function ii(i,a,t){let[e,n]=K(t?.in,i,a),s=e.getFullYear()-n.getFullYear(),r=ei(e)-ei(n);return s*4+r}function na(i,a,t){let[e,n]=K(t?.in,i,a);return e.getFullYear()-n.getFullYear()}function sa(i,a,t){let[e,n]=K(t?.in,i,a),s=aa(e,n),r=Math.abs(Rt(e,n));e.setDate(e.getDate()-s*r);let o=+(aa(e,n)===-s),l=s*(r-o);return l===0?0:l}function aa(i,a){let t=i.getFullYear()-a.getFullYear()||i.getMonth()-a.getMonth()||i.getDate()-a.getDate()||i.getHours()-a.getHours()||i.getMinutes()-a.getMinutes()||i.getSeconds()-a.getSeconds()||i.getMilliseconds()-a.getMilliseconds();return t<0?-1:t>0?1:t}function ra(i,a,t){let[e,n]=K(t?.in,i,a),s=(+e-+n)/Se;return ke(t?.roundingMethod)(s)}function ni(i,a,t){let e=Ln(i,a)/xe;return ke(t?.roundingMethod)(e)}function lt(i,a){let[t,e]=K(i,a.start,a.end);return{start:t,end:e}}function ai(i,a){let{start:t,end:e}=lt(a?.in,i),n=+t>+e,s=n?+t:+e,r=n?e:t;r.setHours(0,0,0,0);let o=a?.step??1;if(!o)return[];o<0&&(o=-o,n=!n);let l=[];for(;+r<=s;)l.push(L(t,r)),r.setDate(r.getDate()+o),r.setHours(0,0,0,0);return n?l.reverse():l}function oa(i,a){let{start:t,end:e}=lt(a?.in,i),n=+t>+e,s=n?+t:+e,r=n?e:t;r.setMinutes(0,0,0);let o=a?.step??1;if(!o)return[];o<0&&(o=-o,n=!n);let l=[];for(;+r<=s;)l.push(L(t,r)),r.setHours(r.getHours()+o);return n?l.reverse():l}function la(i,a){let{start:t,end:e}=lt(a?.in,i),n=+t>+e,s=n?+t:+e,r=n?e:t;r.setHours(0,0,0,0),r.setDate(1);let o=a?.step??1;if(!o)return[];o<0&&(o=-o,n=!n);let l=[];for(;+r<=s;)l.push(L(t,r)),r.setMonth(r.getMonth()+o);return n?l.reverse():l}function da(i,a){let t=M(i,a?.in),e=t.getMonth(),n=e-e%3;return t.setMonth(n,1),t.setHours(0,0,0,0),t}function Me(i,a){let{start:t,end:e}=lt(a?.in,i),n=+t>+e,s=n?It(e,a):It(t,a),r=n?It(t,a):It(e,a);s.setHours(15),r.setHours(15);let o=+r.getTime(),l=s,u=a?.step??1;if(!u)return[];u<0&&(u=-u,n=!n);let T=[];for(;+l<=o;)l.setHours(0),T.push(L(t,l)),l=Ee(l,u),l.setHours(15);return n?T.reverse():T}function si(i,a){let{start:t,end:e}=lt(a?.in,i),n=+t>+e,s=n?+t:+e,r=n?e:t;r.setHours(0,0,0,0),r.setMonth(0,1);let o=a?.step??1;if(!o)return[];o<0&&(o=-o,n=!n);let l=[];for(;+r<=s;)l.push(L(t,r)),r.setFullYear(r.getFullYear()+o);return n?l.reverse():l}function ca(i,a){let t=M(i,a?.in);return t.setMinutes(59,59,999),t}function ha(i,a){let t=M(i,a?.in);return t.setSeconds(59,999),t}function pa(i,a){let t=M(i,a?.in),e=t.getMonth(),n=e-e%3+3;return t.setMonth(n,0),t.setHours(23,59,59,999),t}function ma(i,a){return M(i*1e3,a?.in)}function ga(i,a){let t=M(i,a?.in),e=t.getFullYear(),n=t.getMonth(),s=L(t,0);return s.setFullYear(e,n+1,0),s.setHours(0,0,0,0),s.getDate()}function Oe(i){return Math.trunc(+M(i)/1e3)}function ua(i,a){let t=M(i,a?.in);return t.setMinutes(0,0,0),t}function fa(i,a){let t=M(i,a?.in);return t.setSeconds(0,0),t}function ya(i,a){return ia(L(a?.in||i,i),zn(a?.in||i))}function va(i,a,t){let e=M(i,t?.in);return e.setDate(a),e}function ba(i){let a={},t=Pn();for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e]);for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e]===void 0?delete a[e]:a[e]=i[e]);Bn(a)}var Jd=Symbol.for("constructDateFrom");function Ca(i,a,t="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:i,timeZoneName:t}).format(a).split(/\s/g).slice(2).join(" ")}var qa={},ne={};function gt(i,a){try{let e=(qa[i]||=new Intl.DateTimeFormat("en-US",{timeZone:i,timeZoneName:"longOffset"}).format)(a).split("GMT")[1];return e in ne?ne[e]:_a(e,e.split(":"))}catch{if(i in ne)return ne[i];let t=i?.match(Ya);return t?_a(i,t.slice(1)):NaN}}var Ya=/([+-]\d\d):?(\d\d)?/;function _a(i,a){let t=+(a[0]||0),e=+(a[1]||0),n=+(a[2]||0)/60;return ne[i]=t*60+e>0?t*60+e+n:t*60-e-n}var Ct=class i extends Date{constructor(...a){super(),a.length>1&&typeof a[a.length-1]=="string"&&(this.timeZone=a.pop()),this.internal=new Date,isNaN(gt(this.timeZone,this))?this.setTime(NaN):a.length?typeof a[0]=="number"&&(a.length===1||a.length===2&&typeof a[1]!="number")?this.setTime(a[0]):typeof a[0]=="string"?this.setTime(+new Date(a[0])):a[0]instanceof Date?this.setTime(+a[0]):(this.setTime(+new Date(...a)),Da(this,NaN),ri(this)):this.setTime(Date.now())}static tz(a,...t){return t.length?new i(...t,a):new i(Date.now(),a)}withTimeZone(a){return new i(+this,a)}getTimezoneOffset(){let a=-gt(this.timeZone,this);return a>0?Math.floor(a):Math.ceil(a)}setTime(a){return Date.prototype.setTime.apply(this,arguments),ri(this),+this}[Symbol.for("constructDateFrom")](a){return new i(+new Date(a),this.timeZone)}},wa=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(i=>{if(!wa.test(i))return;let a=i.replace(wa,"$1UTC");Ct.prototype[a]&&(i.startsWith("get")?Ct.prototype[i]=function(){return this.internal[a]()}:(Ct.prototype[i]=function(){return Date.prototype[a].apply(this.internal,arguments),Xa(this),+this},Ct.prototype[a]=function(){return Date.prototype[a].apply(this,arguments),ri(this),+this}))});function ri(i){i.internal.setTime(+i),i.internal.setUTCSeconds(i.internal.getUTCSeconds()-Math.round(-gt(i.timeZone,i)*60))}function Xa(i){Date.prototype.setFullYear.call(i,i.internal.getUTCFullYear(),i.internal.getUTCMonth(),i.internal.getUTCDate()),Date.prototype.setHours.call(i,i.internal.getUTCHours(),i.internal.getUTCMinutes(),i.internal.getUTCSeconds(),i.internal.getUTCMilliseconds()),Da(i)}function Da(i){let a=gt(i.timeZone,i),t=a>0?Math.floor(a):Math.ceil(a),e=new Date(+i);e.setUTCHours(e.getUTCHours()-1);let n=-new Date(+i).getTimezoneOffset(),s=-new Date(+e).getTimezoneOffset(),r=n-s,o=Date.prototype.getHours.apply(i)!==i.internal.getUTCHours();r&&o&&i.internal.setUTCMinutes(i.internal.getUTCMinutes()+r);let l=n-t;l&&Date.prototype.setUTCMinutes.call(i,Date.prototype.getUTCMinutes.call(i)+l);let u=new Date(+i);u.setUTCSeconds(0);let T=n>0?u.getSeconds():(u.getSeconds()-60)%60,X=Math.round(-(gt(i.timeZone,i)*60))%60;(X||T)&&(i.internal.setUTCSeconds(i.internal.getUTCSeconds()+X),Date.prototype.setUTCSeconds.call(i,Date.prototype.getUTCSeconds.call(i)+X+T));let ot=gt(i.timeZone,i),dt=ot>0?Math.floor(ot):Math.ceil(ot),H=-new Date(+i).getTimezoneOffset()-dt,ct=dt!==t,Oi=H-l;if(ct&&Oi){Date.prototype.setUTCMinutes.call(i,Date.prototype.getUTCMinutes.call(i)+Oi);let He=gt(i.timeZone,i),Qa=He>0?Math.floor(He):Math.ceil(He),Ve=dt-Qa;Ve&&(i.internal.setUTCMinutes(i.internal.getUTCMinutes()+Ve),Date.prototype.setUTCMinutes.call(i,Date.prototype.getUTCMinutes.call(i)+Ve))}}var $t=class i extends Ct{static tz(a,...t){return t.length?new i(...t,a):new i(Date.now(),a)}toISOString(){let[a,t,e]=this.tzComponents(),n=`${a}${t}:${e}`;return this.internal.toISOString().slice(0,-1)+n}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){let[a,t,e,n]=this.internal.toUTCString().split(" ");return`${a?.slice(0,-1)} ${e} ${t} ${n}`}toTimeString(){let a=this.internal.toUTCString().split(" ")[4],[t,e,n]=this.tzComponents();return`${a} GMT${t}${e}${n} (${Ca(this.timeZone,this)})`}toLocaleString(a,t){return Date.prototype.toLocaleString.call(this,a,xt(ft({},t),{timeZone:t?.timeZone||this.timeZone}))}toLocaleDateString(a,t){return Date.prototype.toLocaleDateString.call(this,a,xt(ft({},t),{timeZone:t?.timeZone||this.timeZone}))}toLocaleTimeString(a,t){return Date.prototype.toLocaleTimeString.call(this,a,xt(ft({},t),{timeZone:t?.timeZone||this.timeZone}))}tzComponents(){let a=this.getTimezoneOffset(),t=a>0?"-":"+",e=String(Math.floor(Math.abs(a)/60)).padStart(2,"0"),n=String(Math.abs(a)%60).padStart(2,"0");return[t,e,n]}withTimeZone(a){return new i(+this,a)}[Symbol.for("constructDateFrom")](a){return new i(+new Date(a),this.timeZone)}};var ae=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new O;constructor(a=!1,t,e=!0,n){this._multiple=a,this._emitChanges=e,this.compareWith=n,t&&t.length&&(a?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...a){this._verifyValueAssignment(a),a.forEach(e=>this._markSelected(e));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...a){this._verifyValueAssignment(a),a.forEach(e=>this._unmarkSelected(e));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...a){this._verifyValueAssignment(a);let t=this.selected,e=new Set(a.map(s=>this._getConcreteValue(s)));a.forEach(s=>this._markSelected(s)),t.filter(s=>!e.has(this._getConcreteValue(s,e))).forEach(s=>this._unmarkSelected(s));let n=this._hasQueuedChanges();return this._emitChangeEvent(),n}toggle(a){return this.isSelected(a)?this.deselect(a):this.select(a)}clear(a=!0){this._unmarkAll();let t=this._hasQueuedChanges();return a&&this._emitChangeEvent(),t}isSelected(a){return this._selection.has(this._getConcreteValue(a))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(a){this._multiple&&this.selected&&this._selected.sort(a)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(a){a=this._getConcreteValue(a),this.isSelected(a)||(this._multiple||this._unmarkAll(),this.isSelected(a)||this._selection.add(a),this._emitChanges&&this._selectedToEmit.push(a))}_unmarkSelected(a){a=this._getConcreteValue(a),this.isSelected(a)&&(this._selection.delete(a),this._emitChanges&&this._deselectedToEmit.push(a))}_unmarkAll(){this.isEmpty()||this._selection.forEach(a=>this._unmarkSelected(a))}_verifyValueAssignment(a){a.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(a,t){if(this.compareWith){t=t??this._selection;for(let e of t)if(this.compareWith(a,e))return e;return a}else return a}};var Za=["bar"],Ka=["range"],Ja=["item"],ts=["baseline"],es=["group"],is=["groupHeader"],ns=["toolbar"],as=["content"],ss=["handle"],Di=(i,a)=>({item:i,refs:a});function rs(i,a){i&1&&D(0,"span",9,1)(2,"span",9,1)}function os(i,a){i&1&&(p(0,"div",4)(1,"span",9),D(2,"span",10),g(),p(3,"span",9),D(4,"span",10),g()())}function ls(i,a){if(i&1&&D(0,"div",11),i&2){let t=c();w("width",t.item.progress*100,"%")}}function ds(i,a){}function cs(i,a){}function hs(i,a){if(i&1&&(p(0,"div",1,0),R(2,cs,0,0,"ng-template",2),g()),i&2){let t=c();d(2),v("ngTemplateOutlet",t.template)("ngTemplateOutletContext",vt(2,Di,t.baselineItem.origin,t.baselineItem.refs))}}var $e=(i,a)=>a.x,Ia=(i,a)=>a==null?null:a.x;function ps(i,a){i&1&&et(0,"span",1)}function ms(i,a){if(i&1&&(V(),et(0,"rect",5)),i&2){let t=c(),e=t.$implicit,n=t.$index,s=c();$("x",n*s.view.cellWidth)("width",s.view.cellWidth)("height",s.mainHeight)("fill",e.fill)}}function gs(i,a){if(i&1&&f(0,ms,1,4,":svg:rect",5),i&2){let t=a.$implicit;y(t.fill?0:-1)}}function us(i,a){if(i&1&&(V(),et(0,"line",6)),i&2){let t=a.$index,e=c(2);$("x1",(t+1)*e.view.cellWidth)("x2",(t+1)*e.view.cellWidth)("y1",0)("y2",e.mainHeight)}}function fs(i,a){if(i&1&&(V(),Y(0,"g"),G(1,us,1,4,":svg:line",6,$e),j()),i&2){let t=c();d(),N(t.view.secondaryDatePoints)}}function ys(i,a){if(i&1&&(V(),et(0,"line",4)),i&2){let t=a.$implicit,e=a.$index,n=c(),s=(t==null?null:t.rightX)??(e+1)*n.view.primaryWidth;$("x1",s)("x2",s)("y1",0)("y2",n.mainHeight)}}function vs(i,a){if(i&1&&(V(),D(0,"rect",5)),i&2){let t=c(),e=t.$implicit,n=t.$index,s=c();$("x",n*s.view.cellWidth)("width",s.view.cellWidth)("height",s.ganttUpper.styles.headerHeight)("fill",e.fill)}}function bs(i,a){if(i&1&&(f(0,vs,1,4,":svg:rect",5),V(),p(1,"text",6),mt(2),g()),i&2){let t=a.$implicit;y(t.fill?0:-1),d(),W("today",t.additions==null?null:t.additions.isToday)("weekend",t.additions==null?null:t.additions.isWeekend),v("ngStyle",t.style),$("x",t.x)("y",t.y),d(),Mt(" ",t.text," ")}}function Cs(i,a){if(i&1&&(V(),p(0,"text",7),mt(1),g()),i&2){let t=a.$implicit;W("today",t.additions==null?null:t.additions.isToday)("weekend",t.additions==null?null:t.additions.isWeekend),v("ngStyle",t.style),$("x",t.x)("y",t.y),d(),Mt(" ",t.text," ")}}function _s(i,a){if(i&1&&(V(),D(0,"line",3)),i&2){let t=a.$implicit,e=a.$index,n=c(),s=(t==null?null:t.rightX)??(e+1)*n.view.primaryWidth;$("x1",s)("x2",s)("y1",0)("y2",n.ganttUpper.styles.headerHeight)}}function ws(i,a){if(i&1&&D(0,"div",5),i&2){let t=c(2);w("width",t.item.progress*100,"%")}}function Ds(i,a){}function xs(i,a){if(i&1&&(p(0,"div",0),f(1,ws,1,2,"div",1),g(),D(2,"div",2)(3,"div",3),R(4,Ds,0,0,"ng-template",4)),i&2){let t=c();d(),y(t.item.progress>=0?1:-1),d(3),v("ngTemplateOutlet",t.template)("ngTemplateOutletContext",vt(3,Di,t.item.origin,t.item.refs))}}var Ss=i=>({"gantt-scrollbar-bg":i});function Ts(i,a){if(i&1){let t=U();p(0,"div",4),F("click",function(){x(t);let n=c().$implicit,s=c(3);return S(s.selectView(n))}),mt(1),g()}if(i&2){let t=c().$implicit,e=c(3);W("active",t===e.ganttUpper.viewType),d(),Mt(" ",e.views[t].label," ")}}function ks(i,a){if(i&1&&f(0,Ts,2,3,"div",3),i&2){let t=a.$implicit,e=c(3);y(e.views[t]?0:-1)}}function Es(i,a){if(i&1&&(p(0,"div",2),G(1,ks,1,1,null,null,Ki),g()),i&2){let t=c(2);d(),N(t.ganttUpper.toolbarOptions==null?null:t.ganttUpper.toolbarOptions.viewTypes)}}function Ms(i,a){if(i&1&&f(0,Es,3,0,"div",2),i&2){let t=c();y(!(t.ganttUpper.toolbarOptions==null||t.ganttUpper.toolbarOptions.viewTypes==null)&&t.ganttUpper.toolbarOptions.viewTypes.length?0:-1)}}function Os(i,a){}function Is(i,a){if(i&1&&(V(),Y(0,"marker",4),et(1,"path",6),j()),i&2){let t=c(2),e=t.$implicit,n=t.$index;je("id","triangle"+n),d(),$("fill",e.color)("stroke",e.color)}}function Rs(i,a){if(i&1&&(V(),Y(0,"marker",5),et(1,"path",6),j()),i&2){let t=c(2),e=t.$implicit,n=t.$index;je("id","triangle"+n),d(),$("fill",e.color)("stroke",e.color)}}function $s(i,a){if(i&1&&(V(),Y(0,"defs"),f(1,Is,2,3,":svg:marker",4)(2,Rs,2,3,":svg:marker",5),j()),i&2){let t=c().$implicit,e=c();d(),y(t.type===e.ganttLinkTypes.sf?1:2)}}function Fs(i,a){if(i&1){let t=U();V(),Ji(0),et(1,"path",2),Y(2,"g")(3,"path",3),en("click",function(n){let s=x(t).$implicit,r=c();return S(r.onLineClick(n,s))})("mouseenter",function(){let n=x(t),s=n.$implicit,r=n.$index,o=c();return S(o.mouseEnterPath(s,r))})("mouseleave",function(){let n=x(t).$implicit,s=c();return S(s.mouseLeavePath(n))}),j()(),f(4,$s,3,1,":svg:defs"),tn()}if(i&2){let t=a.$implicit,e=a.$index,n=c();d(),$("d",t.path)("stroke",t.color)("style",t.type===n.ganttLinkTypes.sf?"marker-start: url(#triangle"+e+")":"marker-end: url(#triangle"+e+")",Xi),d(2),$("d",t.path),d(),y(n.showArrow?4:-1)}}var Ps=i=>({group:i}),Bs=(i,a,t,e)=>({item:i,refs:a,baseline:t,baselineRefs:e}),Ws=i=>({"gantt-quick-time-focus-item-hide":i});function zs(i,a){}function Ls(i,a){if(i&1&&(p(0,"div",5),R(1,zs,0,0,"ng-template",6),g()),i&2){let t=c().$implicit,e=c();w("height",e.ganttUpper.styles.lineHeight,"px"),v("ngClass",t.class),d(),v("ngTemplateOutlet",e.groupHeaderTemplate)("ngTemplateOutletContext",Jt(5,Ps,t))}}function Hs(i,a){}function Vs(i,a){if(i&1&&R(0,Hs,0,0,"ng-template",6),i&2){let t=c(2).$implicit,e=c();v("ngTemplateOutlet",e.itemTemplate)("ngTemplateOutletContext",dn(2,Bs,t.origin,t.refs,e.ganttUpper.baselineItemsMap[t.id]==null?null:e.ganttUpper.baselineItemsMap[t.id].origin,e.ganttUpper.baselineItemsMap[t.id]==null?null:e.ganttUpper.baselineItemsMap[t.id].refs))}}function Gs(i,a){if(i&1&&D(0,"gantt-range",8),i&2){let t=c(3).$implicit,e=c();v("template",e.rangeTemplate)("item",t)}}function Ns(i,a){if(i&1){let t=U();p(0,"gantt-bar",11),F("barClick",function(n){x(t);let s=c(4);return S(s.barClick.emit(n))}),g()}if(i&2){let t=c(3).$implicit,e=c();v("item",t)("template",e.barTemplate)}}function Us(i,a){if(i&1&&D(0,"gantt-baseline",10),i&2){let t=c(3).$implicit,e=c();v("baselineItem",e.ganttUpper.baselineItemsMap[t.id])("template",e.baselineTemplate)}}function As(i,a){if(i&1&&(f(0,Gs,1,2,"gantt-range",8),it(1,"isGanttRangeItem"),f(2,Ns,1,2,"gantt-bar",9),it(3,"isGanttBarItem"),f(4,Us,1,2,"gantt-baseline",10)),i&2){let t=c(2).$implicit,e=c();y(nt(1,3,t.type)?0:-1),d(2),y(nt(3,5,t.type)?2:-1),d(2),y(e.ganttUpper.baselineItemsMap[t.id]?4:-1)}}function Qs(i,a){if(i&1&&(p(0,"div",7),f(1,Vs,1,7,null,6),it(2,"isGanttCustomItem"),f(3,As,5,7),it(4,"isGanttRangeItem"),it(5,"isGanttBarItem"),g()),i&2){let t=c().$implicit,e=c();an(t.laneStyle),w("height",e.ganttUpper.styles.lineHeight,"px"),W("gantt-main-item-active",e.ganttUpper.isSelected(t.id)),d(),y(nt(2,8,t.type)?1:-1),d(2),y(nt(4,10,t.type)||nt(5,12,t.type)?3:-1)}}function qs(i,a){if(i&1&&(f(0,Ls,2,7,"div",3),it(1,"isGanttGroup"),f(2,Qs,6,14,"div",4),it(3,"isGanttGroup")),i&2){let t=a.$implicit;y(nt(1,2,t)?0:-1),d(2),y(nt(3,4,t)?-1:2)}}function Ys(i,a){if(i&1){let t=U();p(0,"a",19),F("click",function(){x(t),c();let n=Ke(0),s=c(2);return S(s.quickTime(n.origin,"left"))}),D(1,"gantt-icon",20),g()}}function Xs(i,a){if(i&1){let t=U();p(0,"a",19),F("click",function(){x(t),c();let n=Ke(0),s=c(2);return S(s.quickTime(n.origin,"right"))}),D(1,"gantt-icon",21),g()}}function js(i,a){if(i&1&&(rn(0),p(1,"div",15)(2,"span",16),f(3,Ys,2,0,"a",17),g(),p(4,"span",18),f(5,Xs,2,0,"a",17),g()()),i&2){let t=a.$implicit,e=c(2),n=on(e.toItemType(t));d(),w("height",e.ganttUpper.styles.lineHeight,"px"),v("ngClass",Jt(6,Ws,!(!(n==null||n.refs==null)&&n.refs.width))),d(2),y((n.refs==null?null:n.refs.x)<e.dom.visibleRangeX().min&&(n.refs!=null&&n.refs.width)?3:-1),d(2),y((n.refs==null?null:n.refs.x)+(n.refs==null?null:n.refs.width)>e.dom.visibleRangeX().max&&(n.refs!=null&&n.refs.width)?5:-1)}}function Zs(i,a){if(i&1&&(p(0,"div",12)(1,"div",13),G(2,js,6,8,"div",14,qe().trackBy,!0),g()()),i&2){let t=c();w("width",t.ganttUpper.view.width,"px"),d(),w("width",t.dom.visibleRangeX().max-t.dom.visibleRangeX().min,"px"),d(),N(t.viewportItems)}}var Ks=["resizeLine"];function Js(i,a){if(i&1&&Xe(0,4),i&2){let t=c().$implicit;v("ngTemplateOutlet",t.headerTemplateRef)}}function tr(i,a){if(i&1&&mt(0),i&2){let t=c().$implicit;Mt(" ",t.name," ")}}function er(i,a){if(i&1){let t=U();p(0,"div",7),f(1,Js,1,1,"ng-container",4)(2,tr,1,1),p(3,"div",8),F("cdkDragMoved",function(n){let s=x(t).$implicit,r=c();return S(r.onResizeMoved(n,s))})("cdkDragStarted",function(n){x(t);let s=c();return S(s.onResizeStarted(n))})("cdkDragEnded",function(n){let s=x(t).$implicit,r=c();return S(r.onResizeEnded(n,s))}),g()()}if(i&2){let t=a.$implicit;w("width",t.columnWidth),d(),y(t.headerTemplateRef?1:2)}}function ir(i,a){}function nr(i,a){if(i&1&&R(0,ir,0,0,"ng-template",4),i&2){let t=c();v("ngTemplateOutlet",t.gantt==null||t.gantt.table==null?null:t.gantt.table.settingsSlot)}}var ar=(i,a)=>({$implicit:i,group:a}),ci=(i,a)=>({$implicit:i,item:a});function sr(i,a){i&1&&(D(0,"gantt-icon",2),p(1,"div",3),mt(2,"\u6CA1\u6709\u6570\u636E"),g())}function rr(i,a){}function or(i,a){if(i&1&&(f(0,sr,3,0),R(1,rr,0,0,"ng-template",1)),i&2){let t=c();y(t.emptyTemplate?-1:0),d(),v("ngTemplateOutlet",t.emptyTemplate)}}function lr(i,a){}function dr(i,a){if(i&1&&R(0,lr,0,0,"ng-template",9),i&2){let t=c(2).$implicit,e=c(2);v("ngTemplateOutlet",e.groupTemplate)("ngTemplateOutletContext",vt(2,ar,t.origin,t.origin))}}function cr(i,a){if(i&1&&(p(0,"span",10),mt(1),g()),i&2){let t=c(2).$implicit;d(),sn(t.title)}}function hr(i,a){if(i&1){let t=U();p(0,"div",6)(1,"div",7),F("click",function(){x(t);let n=c().$implicit,s=c(2);return S(s.expandGroup(n))}),D(2,"gantt-icon",8),f(3,dr,1,5,null,9)(4,cr,2,1,"span",10),g()()}if(i&2){let t=c().$implicit,e=c(2);w("height",e.gantt.styles.lineHeight,"px"),v("ngClass",t.class),d(),W("expanded",t.expanded),d(),v("iconName",t.expanded?"angle-down":"angle-right"),d(),y(e.groupTemplate?3:4)}}function pr(i,a){}function mr(i,a){if(i&1&&D(0,"gantt-icon",15),i&2){let t=c(3).$implicit,e=c(2);v("cdkDragHandleDisabled",e.draggable&&t.itemDraggable===!1||!e.draggable)}}function gr(i,a){if(i&1){let t=U();p(0,"gantt-icon",20),F("click",function(n){x(t);let s=c(5).$implicit,r=c(2);return S(r.expandChildren(n,s))}),g()}if(i&2){let t=c(5).$implicit;v("iconName",t.expanded?"angle-down":"angle-right")}}function ur(i,a){i&1&&D(0,"gantt-icon",19),i&2&&v("iconName","loading")}function fr(i,a){if(i&1&&(f(0,gr,1,1,"gantt-icon",8),f(1,ur,1,1,"gantt-icon",19)),i&2){let t=c(4).$implicit;y(t.loading?-1:0),d(),y(t.loading?1:-1)}}function yr(i,a){if(i&1&&(p(0,"div",18),f(1,fr,2,2),g()),i&2){let t=c(3).$implicit,e=c(2);w("margin-left",t.level*20,"px"),d(),y(t.level<e.gantt.maxLevel-1&&(e.gantt.async&&t.expandable||(t.children==null?null:t.children.length)>0)?1:-1)}}function vr(i,a){}function br(i,a){if(i&1&&(p(0,"div",14),f(1,mr,1,1,"gantt-icon",15),f(2,yr,2,3,"div",16),p(3,"div",17),R(4,vr,0,0,"ng-template",9),g()()),i&2){let t=a.$implicit,e=a.$index,n=c(2).$implicit,s=c(2);w("width",t.columnWidth),v("classList",t.classList),d(),y(e===0&&s.draggable?1:-1),d(),y(t!=null&&t.showExpandIcon||!s.hasExpandIcon&&e===0?2:-1),d(2),v("ngTemplateOutlet",t.templateRef)("ngTemplateOutletContext",vt(7,ci,n.origin,n.origin))}}function Cr(i,a){}function _r(i,a){if(i&1){let t=U();p(0,"div",11),it(1,"isGanttRangeItem"),F("click",function(n){x(t);let s=c().$implicit,r=c(2);return S(r.itemClick.emit({event:n,current:s.origin,selectedValue:s.origin}))})("cdkDragStarted",function(n){x(t);let s=c(3);return S(s.onItemDragStarted(n))})("cdkDragEnded",function(n){x(t);let s=c(3);return S(s.onItemDragEnded(n))})("cdkDragMoved",function(n){x(t);let s=c(3);return S(s.emitItemDragMoved(n))}),R(2,pr,0,0,"ng-template",9),G(3,br,5,10,"div",12,Ye),D(5,"div",13),R(6,Cr,0,0,"ng-template",9),g()}if(i&2){let t=c().$implicit,e=c(2);w("height",e.gantt.styles.lineHeight,"px")("line-height",e.gantt.styles.lineHeight,"px"),W("gantt-table-item-with-group",e.hasGroup)("gantt-table-item-first-level-group",t.level===0&&nt(1,16,t.type))("gantt-table-item-active",e.ganttUpper.isSelected(t.id)),v("cdkDragData",t)("cdkDragDisabled",e.draggable&&t.itemDraggable===!1||!e.draggable),d(2),v("ngTemplateOutlet",e.rowBeforeTemplate)("ngTemplateOutletContext",vt(18,ci,t.origin,t.origin)),d(),N(e.columns),d(3),v("ngTemplateOutlet",e.rowAfterTemplate)("ngTemplateOutletContext",vt(21,ci,t.origin,t.origin))}}function wr(i,a){if(i&1&&(f(0,hr,5,7,"div",4),it(1,"isGanttGroup"),f(2,_r,7,24,"div",5),it(3,"isGanttGroup")),i&2){let t=a.$implicit;y(nt(1,2,t)?0:-1),d(2),y(nt(3,4,t)?-1:2)}}function Dr(i,a){if(i&1&&G(0,wr,4,6,null,null,qe().trackBy,!0),i&2){let t=c();N(t.viewportItems)}}var xr=["sideTemplate"],Sr=["mainTemplate"],Tr=["*"];function kr(i,a){}function Er(i,a){if(i&1&&(p(0,"div",3)(1,"div",4),R(2,kr,0,0,"ng-template",5),g()()),i&2){let t=c();w("width",t.sideWidth,"px")("padding-bottom",t.horizontalScrollbarHeight,"px"),d(2),v("ngTemplateOutlet",t.sideTemplate)}}function Mr(i,a){}function Or(i,a){if(i&1&&(p(0,"div",1),D(1,"gantt-calendar-header",6)(2,"gantt-calendar-grid",6)(3,"gantt-drag-backdrop"),p(4,"div",7)(5,"div",8),R(6,Mr,0,0,"ng-template",5),g()()()),i&2){let t=c();d(),w("padding-right",t.verticalScrollbarWidth,"px"),d(),w("padding-right",t.verticalScrollbarWidth,"px")("padding-bottom",t.horizontalScrollbarHeight,"px"),d(4),v("ngTemplateOutlet",t.mainTemplate)}}function Ir(i,a){if(i&1&&D(0,"gantt-toolbar",2),i&2){let t=c();v("template",t.ganttUpper.toolbarTemplate)}}var Rr=["cell"],$r=["header"],Fr=["rowBeforeSlot"],Pr=["rowAfterSlot"],Ra=["tableEmpty"],Br=["tableFooter"],Wr=["settingsSlot"],zr=["footer"],Lr=["ganttRoot"],Hr=["ganttTableBody"],Vr=(i,a,t)=>({"gantt-normal-viewport":i,"gantt-scroll-container":a,"with-footer":t}),Gr=i=>({columns:i});function Nr(i,a){i&1&&D(0,"gantt-loader")}function Ur(i,a){i&1&&Xe(0)}function Ar(i,a){}function Qr(i,a){if(i&1&&(p(0,"div",21),R(1,Ar,0,0,"ng-template",22),g()),i&2){let t=c(2),e=yt(4);w("width",e.tableWidth+1,"px"),d(),v("ngTemplateOutlet",t.table==null?null:t.table.tableFooterTemplate)("ngTemplateOutletContext",Jt(4,Gr,t.columns))}}function qr(i,a){}function Yr(i,a){if(i&1&&(p(0,"div",20),R(1,qr,0,0,"ng-template",23),g()),i&2){let t=c(2);d(),v("ngTemplateOutlet",t.footerTemplate)}}function Xr(i,a){if(i&1&&(p(0,"div",18),f(1,Qr,2,6,"div",19),f(2,Yr,2,1,"div",20),g()),i&2){let t=c(),e=yt(1);w("right",e.verticalScrollbarWidth,"px")("bottom",e.horizontalScrollbarHeight,"px"),d(),y(t.table!=null&&t.table.tableFooterTemplate?1:-1),d(),y(t.footerTemplate?2:-1)}}var q=class{constructor(a,t,e,n,s,r,o){this.start=a,this.text=t,this.x=e,this.y=n,this.additions=s,this.style=r,this.fill=o}};var Ie;function jr(i){Ie=i??void 0}var C=class i{constructor(a){if(a)if(a instanceof Date)this.value=a;else if(typeof a=="string"||typeof a=="number")a.toString().length<13?this.value=new $t(ma(+a),Ie):this.value=new $t(a,Ie);else throw new Error(`The input date type is not supported expect Date | string
                     | number | { date: number; with_time: 0 | 1}, actual ${JSON.stringify(a)}`);else this.value=new $t(new Date,Ie)}getYear(){return this.value.getFullYear()}getMonth(){return this.value.getMonth()}getDay(){return this.value.getDay()}getTime(){return this.value.getTime()}getDate(){return this.value.getDate()}getHours(){return this.value.getHours()}getMinutes(){return this.value.getMinutes()}getSeconds(){return this.value.getSeconds()}getMilliseconds(){return this.value.getMilliseconds()}getWeek(a){return Qn(this.value,a)}getDaysInMonth(){return ga(this.value)}getDaysInQuarter(){return Rt(this.endOfQuarter().addSeconds(1).value,this.startOfQuarter().value)}getDaysInYear(){return Rt(this.endOfYear().addSeconds(1).value,this.startOfYear().value)}setDate(a){return new i(va(this.value,a))}clone(){return new i(new Date(this.value))}add(a,t){switch(t){case"second":return new i(this.value).addSeconds(a);case"minute":return new i(this.value).addMinutes(a);case"hour":return new i(this.value).addHours(a);case"day":return new i(this.value).addDays(a);case"week":return new i(this.value).addWeeks(a);case"month":return new i(this.value).addMonths(a);case"quarter":return new i(this.value).addQuarters(a);case"year":return new i(this.value).addYears(a);default:return new i(this.value).addSeconds(a)}}addSeconds(a){return new i(Wn(this.value,a))}addMinutes(a){return new i(Jn(this.value,a))}addHours(a){return new i(Kn(this.value,a))}addDays(a){return new i(Te(this.value,a))}addWeeks(a){return new i(Ee(this.value,a))}addMonths(a){return new i(Ht(this.value,a))}addQuarters(a){return new i(ta(this.value,a))}addYears(a){return new i(ea(this.value,a))}startOfMinute(){return new i(fa(this.value))}startOfHour(){return new i(ua(this.value))}startOfDay(){return new i(ie(this.value))}startOfWeek(a){return new i(It(this.value,a))}startOfMonth(){return new i(Gn(this.value))}startOfQuarter(){return new i(da(this.value))}startOfYear(){return new i(Un(this.value))}endOfMinute(){return new i(ha(this.value))}endOfHour(){return new i(ca(this.value))}endOfDay(){return new i(Hn(this.value))}endOfWeek(a){return new i(An(this.value,a))}endOfMonth(){return new i(Vn(this.value))}endOfQuarter(){return new i(pa(this.value))}endOfYear(){return new i(Nn(this.value))}getUnixTime(){return Oe(this.value)}format(a,t){return qn(this.value,a,t)}isWeekend(){return Zn(this.value)}isToday(){return ya(this.value)}},B=(function(i){return i[i.fs=1]="fs",i[i.ff=2]="ff",i[i.ss=3]="ss",i[i.sf=4]="sf",i})(B||{}),Fe=(function(i){return i.curve="curve",i.straight="straight",i})(Fe||{}),st=(function(i){return i.default="#cacaca",i.blocked="#FF7575",i.active="#6698ff",i})(st||{}),xa=120,Pt=(function(i){return i.bar="bar",i.range="range",i.custom="custom",i})(Pt||{}),Pe=class i{get refs(){return this.refs$.getValue()}constructor(a,t,e){this.view=e,this.refs$=new At(null),this.origin=a,this.id=this.origin.id,this.links=(this.origin.links||[]).map(n=>typeof n=="string"?{type:B.fs,link:n}:n),this.color=this.origin.color,this.barStyle=this.origin.barStyle,this.laneStyle=this.origin.laneStyle,this.linkable=this.origin.linkable===void 0?!0:this.origin.linkable,this.draggable=this.origin.draggable===void 0?!0:this.origin.draggable,this.itemDraggable=this.origin.itemDraggable,this.expandable=this.origin.expandable||(this.origin.children||[]).length>0,this.expanded=this.origin.expanded===void 0?!1:this.origin.expanded,this.start=a.start?new C(a.start):null,this.end=a.end?new C(a.end):null,this.level=t,this.children=(a.children||[]).map(n=>new i(n,t+1,e)),this.type=this.origin.type||Pt.bar,this.progress=this.origin.progress,this.fillDateWhenStartOrEndIsNil(a)}fillDateWhenStartOrEndIsNil(a){this.view&&(a.start&&!a.end&&(this.end=this.view.getDateByXPoint(this.view.getXPointByDate(new C(a.start))+xa)),!a.start&&a.end&&(this.start=this.view.getDateByXPoint(this.view.getXPointByDate(new C(a.end))-xa)))}updateRefs(a){this.refs$.next(a)}updateDate(a,t){this.start=a,this.end=t,this.origin.start=this.start.getUnixTime(),this.origin.end=this.end.getUnixTime()}updateLevel(a){this.level=a}addChildren(a){this.origin.children=a,this.children=(a||[]).map(t=>new i(t,this.level+1,this.view))}setExpand(a){this.expanded=a,this.origin.expanded=a}addLink(a){this.links=[...this.links,a],this.origin.links=this.links}},hi=class{constructor(a){this.refs={},this.id=a.id,this.origin=a,this.title=a.title,this.expanded=a.expanded===void 0?!0:a.expanded,this.items=[],this.mergedItems=[[]],this.class=a.class||""}setExpand(a){this.expanded=a,this.origin.expanded=a}},m=(function(i){return i.day="day",i.quarter="quarter",i.month="month",i.year="year",i.week="week",i.hour="hour",i})(m||{}),pi=class{get refs(){return this.refs$.getValue()}constructor(a){this.refs$=new At(null),this.origin=a,this.id=this.origin.id,this.start=a.start?new C(a.start):null,this.end=a.end?new C(a.end):null}updateRefs(a){this.refs$.next(a)}},wt=(function(i){return i.zhHans="zh-hans",i.zhHant="zh-hant",i.enUs="en-us",i.deDe="de-de",i.jaJp="ja-jp",i.ruRu="ru-ru",i})(wt||{}),Ft=new Yt("gantt-i18n-locale"),mi={id:wt.zhHans,views:{[m.hour]:{label:"\u5C0F\u65F6",dateFormats:{primary:"M\u6708d\u65E5",secondary:"HH:mm"}},[m.day]:{label:"\u5929",dateFormats:{primary:"yyyy\u5E74MM\u6708",secondary:"d"}},[m.week]:{label:"\u5468",dateFormats:{primary:"yyyy\u5E74",secondary:"\u7B2Cw\u5468"}},[m.month]:{label:"\u6708",dateFormats:{primary:"yyyy\u5E74'Q'Q",secondary:"M\u6708"}},[m.quarter]:{label:"\u5B63",dateFormats:{primary:"yyyy\u5E74",secondary:"yyyy\u5E74'Q'Q"}},[m.year]:{label:"\u5E74",dateFormats:{secondary:"yyyy\u5E74"}}}},Dt={id:wt.zhHant,views:{[m.hour]:{label:"\u5C0F\u6642",dateFormats:{primary:"M\u6708d\u65E5",secondary:"HH:mm"}},[m.day]:{label:"\u5929",dateFormats:{primary:"yyyy\u5E74MM\u6708",secondary:"d"}},[m.week]:{label:"\u9031",dateFormats:{primary:"yyyy\u5E74",secondary:"\u7B2Cw\u9031"}},[m.month]:{label:"\u6708",dateFormats:{primary:"yyyy\u5E74'Q'Q",secondary:"M\u6708"}},[m.quarter]:{label:"\u5B63",dateFormats:{primary:"yyyy\u5E74",secondary:"yyyy\u5E74'Q'Q"}},[m.year]:{label:"\u5E74",dateFormats:{secondary:"yyyy\u5E74"}}}},Vt={locale:wt.zhHans,linkOptions:{dependencyTypes:[B.fs],showArrow:!1,lineType:Fe.curve},styleOptions:{headerHeight:44,lineHeight:44,barHeight:22},dateOptions:{weekStartsOn:1}},xi=new Yt("GANTT_GLOBAL_CONFIG"),$a=(()=>{class i{constructor(){let t=h(xi),e=t.locale||Vt.locale;this.config={locale:e,dateFormat:Object.assign({},Vt.dateFormat,t.dateFormat),styleOptions:Object.assign({},Vt.styleOptions,t.styleOptions),linkOptions:Object.assign({},Vt.linkOptions,t.linkOptions),dateOptions:Object.assign({},Vt.dateOptions,t.dateOptions)},this.i18nLocales=h(Ft).reduce((n,s)=>(n[s.id]=s,n),{"zh-cn":mi,"zh-tw":Dt}),this.config.dateOptions?.timeZone&&jr(this.config.dateOptions.timeZone),ba({locale:this.getDateLocale(),weekStartsOn:this.config?.dateOptions?.weekStartsOn})}setLocale(t){this.config.locale=t}getLocaleConfig(){return this.i18nLocales[this.config.locale]??this.i18nLocales[this.config.locale.toLowerCase()]??mi}getViewsLocale(){return this.getLocaleConfig().views}getDateLocale(){return this.config.dateOptions?.locale??this.getLocaleConfig().dateLocale}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Si(i){return typeof i=="number"}function se(i,a=1){return/^#/g.test(i)?`rgba(${parseInt(i.slice(1,3),16)},${parseInt(i.slice(3,5),16)},${parseInt(i.slice(5,7),16)},${a})`:i}function Re(i,a){let t={},e=[];return(i||[]).forEach(n=>{let s=n[a];t[s]||(t[s]=n,e.push(n))}),e}function gi(i){return i.reduce((a,t)=>a.concat(Array.isArray(t)?gi(t):t),[])}function ut(i){let a=[];return(i||[]).forEach(t=>{a.push(t),t.expanded&&t.children&&a.push(...ut(t.children))}),a}function Fa(i){let a=[];return(i||[]).forEach(t=>{a.push(t),t.children&&a.push(...Fa(t.children))}),a}function Pa(i,a){let t={};return i.forEach(e=>{let n=e[a];t[n]=e}),t}var Zr={id:wt.enUs,views:{[m.hour]:{label:"Hourly",dateFormats:{primary:"MMM d",secondary:"HH:mm"}},[m.day]:{label:"Daily",dateFormats:{primary:"MMM yyyy",secondary:"d"}},[m.week]:{label:"Weekly",dateFormats:{primary:"yyyy",secondary:"wo"}},[m.month]:{label:"Monthly",dateFormats:{primary:"yyyy 'Q'Q",secondary:"MMM"}},[m.quarter]:{label:"Quarterly",dateFormats:{primary:"yyyy",secondary:"yyyy 'Q'Q"}},[m.year]:{label:"Yearly",dateFormats:{secondary:"yyyy"}}}},Kr={id:wt.jaJp,views:{[m.hour]:{label:"\u6BCE\u6642",dateFormats:{primary:"M\u6708d\u65E5",secondary:"HH:mm"}},[m.day]:{label:"\u65E5",dateFormats:{primary:"yyyy\u5E74M\u6708d\u65E5",secondary:"d"}},[m.week]:{label:"\u9031",dateFormats:{primary:"yyyy\u5E74",secondary:"\u7B2Cw\u9031"}},[m.month]:{label:"\u6708",dateFormats:{primary:"yyyy\u5E74M\u6708",secondary:"M\u6708"}},[m.quarter]:{label:"\u56DB\u534A\u671F",dateFormats:{primary:"yyyy\u5E74",secondary:"yyyy\u5E74\u7B2CQ\u56DB\u534A\u671F"}},[m.year]:{label:"\u5E74",dateFormats:{secondary:"yyyy\u5E74"}}}},Jr={id:wt.deDe,dateLocale:Yn,views:{[m.hour]:{label:"St\xFCndlich",dateFormats:{primary:"dd. MMM",secondary:"HH:mm"}},[m.day]:{label:"T\xE4glich",dateFormats:{primary:"MMM yyyy",secondary:"d"}},[m.week]:{label:"W\xF6chentlich",dateFormats:{primary:"yyyy",secondary:"w. 'Woche'"}},[m.month]:{label:"Monatlich",dateFormats:{primary:"MMM yyyy",secondary:"MMM"}},[m.quarter]:{label:"Viertelj\xE4hrlich",dateFormats:{primary:"yyyy",secondary:"Q. 'Quartal' yyyy"}},[m.year]:{label:"J\xE4hrlich",dateFormats:{secondary:"yyyy"}}}},to={id:wt.ruRu,dateLocale:Xn,views:{[m.hour]:{label:"\u0415\u0436\u0435\u0447\u0430\u0441\u043D\u043E",dateFormats:{primary:"d MMM",secondary:"HH:mm"}},[m.day]:{label:"\u0415\u0436\u0435\u0434\u043D\u0435\u0432\u043D\u043E",dateFormats:{primary:"MMMM yyyy",secondary:"d"}},[m.week]:{label:"\u0415\u0436\u0435\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u043E",dateFormats:{primary:"yyyy",secondary:"\u041D\u0435\u0434\u0435\u043B\u044F w"}},[m.month]:{label:"\u0415\u0436\u0435\u043C\u0435\u0441\u044F\u0447\u043D\u043E",dateFormats:{primary:"MMMM yyyy",secondary:"MMM"}},[m.quarter]:{label:"\u0415\u0436\u0435\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u044C\u043D\u043E",dateFormats:{primary:"yyyy",secondary:"\u041A\u0432\u0430\u0440\u0442\u0430\u043B Q yyyy"}},[m.year]:{label:"\u0415\u0436\u0435\u0433\u043E\u0434\u043D\u043E",dateFormats:{secondary:"yyyy"}}}},eo=[{provide:Ft,useValue:mi,multi:!0},{provide:Ft,useValue:Dt,multi:!0},{provide:Ft,useValue:Zr,multi:!0},{provide:Ft,useValue:Kr,multi:!0},{provide:Ft,useValue:Jr,multi:!0},{provide:Ft,useValue:to,multi:!0}],Nt="40%",de="80%",io={min:new C().addYears(-1).startOfYear(),max:new C().addYears(1).endOfYear(),datePrecisionUnit:"day",dragPreviewDateFormat:"MM-dd"},_t=class{get start(){return this.start$.getValue()}get end(){return this.end$.getValue()}constructor(a,t,e){this.showTimeline=!0,this.dateFormats={},this.options=Object.assign({},io,e);let n=a.isCustom?this.viewStartOf(a.date):this.viewStartOf(a.date.value<this.options.start.value?a.date:this.options.start),s=t.isCustom?this.viewEndOf(t.date):this.viewEndOf(t.date.value>this.options.end.value?t.date:this.options.end);this.start$=new At(n),this.end$=new At(s),this.initialize()}startOf(a){return this.viewStartOf(a)}endOf(a){return this.viewEndOf(a)}hideHoliday(a){return this.options.hoilday?.hideHoliday&&this.options.hoilday?.isHoliday?.(a)}startOfPrecision(a){switch(this.options.datePrecisionUnit){case"minute":return a.startOfMinute();case"hour":return a.startOfHour();default:return a.startOfDay()}}endOfPrecision(a){switch(this.options.datePrecisionUnit){case"minute":return a.endOfMinute();case"hour":return a.endOfHour();default:return a.endOfDay()}}getDateIntervalWidth(a,t){let e=0,n=sa(t.value,a.value);for(let s=0;s<Math.abs(n);s++)e+=this.getDayOccupancyWidth(a.addDays(s));return e=n>=0?e:-e,Number(e.toFixed(3))}initialize(){this.cellWidth=this.getCellWidth(),this.primaryDatePoints=this.getPrimaryDatePoints(),this.secondaryDatePoints=this.getSecondaryDatePoints(),this.width=this.getWidth(),this.primaryWidth=this.getPrimaryWidth()}addStartDate(){let a=this.viewStartOf(this.start.add(this.options.addAmount*-1,this.options.addUnit));if(a.value>=this.options.min.value){let t=this.start;return this.start$.next(a),this.initialize(),{start:this.start,end:t}}return null}addEndDate(){let a=this.viewEndOf(this.end.add(this.options.addAmount,this.options.addUnit));if(a.value<=this.options.max.value){let t=this.end;return this.end$.next(a),this.initialize(),{start:t,end:this.end}}return null}updateDate(a,t){a=this.viewStartOf(a),t=this.viewEndOf(t),a.value<this.start.value&&this.start$.next(a),t.value>this.end.value&&this.end$.next(t),this.initialize()}getWidth(){return this.getCellWidth()*this.secondaryDatePoints.length}getCellWidth(){return this.options.cellWidth}getTodayXPoint(){let a=new C().startOfDay();return a.value>this.start.value&&a.value<this.end.value?this.getXPointByDate(a)+this.getDayOccupancyWidth(a)/2:null}getXPointByDate(a){return this.getDateIntervalWidth(this.start,a)}getDateByXPoint(a){let t=Math.max(Math.floor(a/this.getCellWidth()),0),e=this.secondaryDatePoints[Math.min(this.secondaryDatePoints.length-1,t)],n=this.getDayOccupancyWidth(e?.start);if(n===this.getCellWidth())return e?.start;{let s=Math.floor(a%this.getCellWidth()/n);return e?.start.addDays(s)}}getDateRangeWidth(a,t){return this.getDateIntervalWidth(this.startOfPrecision(a),this.endOfPrecision(t).addSeconds(1))}getMinRangeWidthByPrecisionUnit(a){switch(this.options.datePrecisionUnit){case"minute":return this.getDayOccupancyWidth(a)/24/60;case"hour":return this.getDayOccupancyWidth(a)/24;default:return this.getDayOccupancyWidth(a)}}getVisibleDateIndexOffset(a,t){switch(this.options.datePrecisionUnit){case"minute":return ni(t.value,a.value);case"hour":return ra(t.value,a.value);default:return Rt(t.value,a.value)}}getDateByIndexOffset(a,t){return a.add(t,this.options.datePrecisionUnit)}},no={cellWidth:35,start:new C().startOfYear().startOfWeek(),end:new C().endOfYear().endOfWeek(),addAmount:1,addUnit:"month",dateDisplayFormats:Dt.views.day.dateFormats},ui=class extends _t{constructor(a,t,e){super(a,t,Object.assign({},no,e)),this.showTimeline=!1,this.viewType=m.day}viewStartOf(a){return a.startOfWeek()}viewEndOf(a){return a.endOfWeek()}getPrimaryWidth(){return this.getCellWidth()*7}getDayOccupancyWidth(a){return this.hideHoliday(a)?0:this.cellWidth}getPrimaryDatePoints(){let a=Me({start:this.start.value,end:this.end.addSeconds(1).value}),t=[];for(let e=0;e<a.length;e++){let n=new C(a[e]),s=n.addWeeks(1),r=n.getDaysInMonth()-n.getDate()>=3?0:1,o=this.getDateIntervalWidth(n,s),l=t[t.length-1],u=new q(n,n.addWeeks(r).format(this.options.dateFormat?.yearMonth||this.options.dateDisplayFormats.primary),o/2+(l?.rightX||0),Nt);u.leftX=l?.rightX||0,u.rightX=u.leftX+o,t.push(u)}return t}getSecondaryDatePoints(){let a=ai({start:this.start.value,end:this.end.value}).filter(e=>!this.hideHoliday(new C(e))),t=[];for(let e=0;e<a.length;e++){let n=new C(a[e]),s=new q(n,n.format(this.options.dateDisplayFormats.secondary)||n.getDate().toString(),e*this.getCellWidth()+this.getCellWidth()/2,de,{isWeekend:n.isWeekend(),isToday:n.isToday()});t.push(s)}return t}getVisibleDateIndexOffset(a,t){let e=this.startOfPrecision(a).value,n=this.startOfPrecision(t).value,s=this.secondaryDatePoints.findIndex(o=>o.start.value>=e),r=this.secondaryDatePoints.findIndex(o=>o.start.value>=n);return s!==-1&&r!==-1?r-s:Rt(n,e)}getDateByIndexOffset(a,t){let e=this.startOfPrecision(a).value,n=this.secondaryDatePoints.findIndex(s=>s.start.value>=e);if(n!==-1){let s=n+t,r=Math.max(0,Math.min(s,this.secondaryDatePoints.length-1));return this.secondaryDatePoints[r].start}return a.addDays(t)}},ao={cellWidth:80,start:new C().startOfMonth(),end:new C().endOfMonth(),datePrecisionUnit:"minute",addAmount:1,addUnit:"week",dateDisplayFormats:Dt.views.hour.dateFormats,dragPreviewDateFormat:"HH:mm"},fi=class extends _t{constructor(a,t,e){super(a,t,Object.assign({},ao,e)),this.showTimeline=!0,this.viewType=m.hour}viewStartOf(a){return a.startOfWeek()}viewEndOf(a){return a.endOfWeek()}getPrimaryWidth(){return this.getCellWidth()*24}getDayOccupancyWidth(){return this.cellWidth*60}getHourOccupancyWidth(){return this.getDayOccupancyWidth()/60}getPrimaryDatePoints(){let a=ai({start:this.start.value,end:this.end.value}),t=[];for(let e=0;e<a.length;e++){let n=this.start.addDays(e),s=new q(n,n.format(this.options.dateFormat?.day||this.options.dateDisplayFormats.primary),this.getCellWidth()*24/2+e*(this.getCellWidth()*24),Nt);t.push(s)}return t}getSecondaryDatePoints(){let a=oa({start:this.start.value,end:this.end.value}),t=[];for(let e=0;e<a.length;e++){let n=new C(a[e]),s=new q(n,n.format(this.options.dateFormat?.hour||this.options.dateDisplayFormats.secondary),e*this.getCellWidth()+this.getCellWidth()/2,de,{isWeekend:n.isWeekend(),isToday:n.isToday()});t.push(s)}return t}getTodayXPoint(){let a=new C().startOfMinute();return a.value>this.start.value&&a.value<this.end.value?this.getXPointByDate(a):null}getDateIntervalWidth(a,t){let e=0,n=ni(t.value,a.value);for(let s=0;s<n;s++)e+=this.getHourOccupancyWidth()/60;return e=n>=0?e:-e,Number(e.toFixed(3))}getDateByXPoint(a){let t=this.getHourOccupancyWidth(),e=Math.max(Math.floor(a/t),0),n=this.secondaryDatePoints[Math.min(this.secondaryDatePoints.length-1,e)],s=t/60,r=Math.floor(a%t/s);return n?.start.addMinutes(r)}},so={start:new C().startOfQuarter().addQuarters(-1),end:new C().endOfQuarter().addQuarters(2),cellWidth:280,addAmount:1,addUnit:"quarter",dateDisplayFormats:Dt.views.month.dateFormats},yi=class extends _t{constructor(a,t,e){super(a,t,Object.assign({},so,e)),this.viewType=m.month}viewStartOf(a){return a.startOfQuarter()}viewEndOf(a){return a.endOfQuarter()}getPrimaryWidth(){return this.getCellWidth()*3}getDayOccupancyWidth(a){return this.cellWidth/a.getDaysInMonth()}getPrimaryDatePoints(){let a=ii(this.end.addSeconds(1).value,this.start.value),t=[];for(let e=0;e<a;e++){let n=this.start.addQuarters(e),s=new q(n,n.format(this.options.dateFormat?.yearQuarter||this.options.dateDisplayFormats.primary),this.getCellWidth()*3/2+e*(this.getCellWidth()*3),Nt);t.push(s)}return t}getSecondaryDatePoints(){let a=la({start:this.start.value,end:this.end.value}),t=[];for(let e=0;e<a.length;e++){let n=new C(a[e]),s=new q(n,n.format(this.options.dateFormat?.month||this.options.dateDisplayFormats.secondary),e*this.getCellWidth()+this.getCellWidth()/2,de);t.push(s)}return t}},ro={start:new C().addYears(-1).startOfYear(),end:new C().addYears(1).endOfYear(),min:new C().addYears(-2).startOfYear(),max:new C().addYears(2).endOfYear(),cellWidth:500,addAmount:1,addUnit:"year",dateDisplayFormats:Dt.views.quarter.dateFormats},vi=class extends _t{constructor(a,t,e){super(a,t,Object.assign({},ro,e)),this.viewType=m.quarter}viewStartOf(a){return a.startOfYear()}viewEndOf(a){return a.endOfYear()}getPrimaryWidth(){return this.getCellWidth()*4}getDayOccupancyWidth(a){return this.cellWidth/a.getDaysInQuarter()}getPrimaryDatePoints(){let a=si({start:this.start.value,end:this.end.value}),t=[];for(let e=0;e<a.length;e++){let n=new C(a[e]),s=new q(n,`${n.format(this.options.dateFormat?.year||this.options.dateDisplayFormats.primary)}`,this.getCellWidth()*4/2+e*(this.getCellWidth()*4),Nt);t.push(s)}return t}getSecondaryDatePoints(){let a=ii(this.end.value,this.start.value),t=[];for(let e=0;e<=a;e++){let n=this.start.addQuarters(e),s=new q(n,n.format(this.options.dateFormat?.quarter||this.options.dateDisplayFormats.secondary),e*this.getCellWidth()+this.getCellWidth()/2,de);t.push(s)}return t}},oo={cellWidth:280,start:new C().startOfYear().startOfWeek(),end:new C().endOfYear().endOfWeek(),addAmount:1,addUnit:"month",dateDisplayFormats:Dt.views.week.dateFormats},bi=class extends _t{constructor(a,t,e){super(a,t,Object.assign({},oo,e)),this.viewType=m.week}viewStartOf(a){return a.startOfWeek()}viewEndOf(a){return a.endOfWeek()}getPrimaryWidth(){return this.getCellWidth()}getDayOccupancyWidth(){return this.cellWidth/7}getPrimaryDatePoints(){let a=Me({start:this.start.value,end:this.end.addSeconds(1).value}),t=[];for(let e=0;e<a.length;e++){let n=new C(a[e]),s=n.getDaysInMonth()-n.getDate()>=3?0:1,r=new q(n,n.addWeeks(s).format(this.options.dateFormat?.year||this.options.dateDisplayFormats.primary),this.getCellWidth()/2+e*this.getCellWidth(),Nt);t.push(r)}return t}getSecondaryDatePoints(){let a=Me({start:this.start.value,end:this.end.addSeconds(1).value}),t=[];for(let e=0;e<a.length;e++){let n=new C(a[e]),s=new q(n,`${n.format(this.options.dateFormat?.week||this.options.dateDisplayFormats.secondary)}`,e*this.getCellWidth()+this.getCellWidth()/2,de);t.push(s)}return t}},lo={cellWidth:480,start:new C().addYears(-2).startOfYear(),end:new C().addYears(2).endOfYear(),addAmount:1,addUnit:"year",dateDisplayFormats:Dt.views.year.dateFormats},Ci=class extends _t{constructor(a,t,e){super(a,t,Object.assign({},lo,e)),this.viewType=m.year}viewStartOf(a){return a.startOfYear()}viewEndOf(a){return a.endOfYear()}getPrimaryWidth(){return this.getCellWidth()}getDayOccupancyWidth(a){return this.cellWidth/a.getDaysInYear()}getPrimaryDatePoints(){let a=si({start:this.start.value,end:this.end.value}),t=[];for(let e=0;e<a.length;e++){let n=new C(a[e]),s=new q(n,"",this.getCellWidth()/2+e*this.getCellWidth(),Nt);t.push(s)}return t}getSecondaryDatePoints(){let a=na(this.end.value,this.start.value),t=[],e="60%";for(let n=0;n<=a;n++){let s=this.start.addYears(n),r=new q(s,`${s.format(this.options.dateFormat?.year||this.options.dateDisplayFormats.secondary||this.options.dateDisplayFormats.primary)}`,n*this.getCellWidth()+this.getCellWidth()/2,e);t.push(r)}return t}},co={[m.hour]:fi,[m.day]:ui,[m.week]:bi,[m.month]:yi,[m.quarter]:vi,[m.year]:Ci};function ho(i,a,t,e){return new co[i](a,t,e)}var po=(()=>{class i{set linkOptions(t){this._linkOptions=t}get linkOptions(){return Object.assign({},this.configService.config.linkOptions,this._linkOptions)}set selectable(t){this._selectable=Je(t),this._selectable?this.selectionModel=this.initSelectionModel():this.selectionModel?.clear()}get selectable(){return this._selectable}set multiple(t){this._multiple=Je(t),this.selectable&&(this.selectionModel=this.initSelectionModel())}get multiple(){return this._multiple}get element(){return this.elementRef.nativeElement}constructor(){this.elementRef=h(z),this.cdr=h(Ot),this.ngZone=h(tt),this.config=h(xi),this.originItems=[],this.originGroups=[],this.originBaselineItems=[],this.viewType=m.month,this.showTodayLine=!0,this.showToolbar=!1,this.toolbarOptions={viewTypes:[m.day,m.month,m.year]},this.viewOptions={},this.quickTimeFocus=!1,this.loadOnScroll=new _,this.dragStarted=new _,this.dragMoved=new _,this.dragEnded=new _,this.barClick=new _,this.viewChange=new _,this.expandChange=new _,this.configService=h($a),this.linkDragEnded=new _,this.items=[],this.groups=[],this.baselineItems=[],this.baselineItemsMap={},this.firstChange=!0,this.unsubscribe$=new O,this._selectable=!1,this._multiple=!1,this.ganttClass=!0}createView(){let t=this.getViewDate();this.styles=Object.assign({},this.configService.config.styleOptions,this.styles),this.viewOptions.dateFormat=Object.assign({},this.configService.config.dateFormat,this.viewOptions.dateFormat),this.viewOptions.styleOptions=Object.assign({},this.configService.config.styleOptions,this.viewOptions.styleOptions),this.viewOptions.dateDisplayFormats=this.configService.getViewsLocale()[this.viewType]?.dateFormats,this.view=ho(this.viewType,t.start,t.end,this.viewOptions)}setupGroups(){let t=this.originGroups.filter(e=>e.expanded===!1).map(e=>e.id);this.groupsMap={},this.groups=[],this.originGroups.forEach(e=>{let n=new hi(e);n.expanded=!t.includes(n.id),this.groupsMap[n.id]=n,this.groups.push(n)})}setupItems(){this.originItems=Re(this.originItems,"id"),this.items=[],this.groups.length>0?this.originItems.forEach(t=>{let e=this.groupsMap[t.group_id];if(e){let n=new Pe(t,0,this.view);e.items.push(n)}}):this.originItems.forEach(t=>{let e=new Pe(t,0,this.view);this.items.push(e)})}setupBaselineItems(){this.originBaselineItems=Re(this.originBaselineItems,"id"),this.baselineItems=[],this.originBaselineItems.forEach(t=>{let e=new pi(t);this.baselineItems.push(e)}),this.baselineItemsMap=Pa(this.baselineItems,"id")}setupExpandedState(){this.originItems=Re(this.originItems,"id");let t=[],e=Fa(this.originItems);this.items.length>0?t=ut(this.items):t=gi(this.groups.map(n=>ut(n.items))),t.forEach(n=>{if(n.origin.expanded){let s=e.find(r=>r.id===n.id);s&&s.expanded===void 0&&(s.expanded=!0)}})}getViewDate(){let t=this.start,e=this.end;return(!this.start||!this.end)&&this.originItems.forEach(n=>{if(n.start&&!this.start){let s=n.start instanceof Date?Oe(n.start):n.start;t=t?Math.min(t,s):s}if(n.end&&!this.end){let s=n.start instanceof Date?Oe(n.start):n.start;e=e?Math.max(e,s):s}}),{start:{date:new C(t),isCustom:!!this.start},end:{date:new C(e),isCustom:!!this.end}}}computeRefs(){this.groups.forEach(e=>{let n=ut(e.items);this.computeItemsRefs(...n)});let t=ut(this.items);this.computeItemsRefs(...t)}initSelectionModel(){return new ae(this.multiple,[])}initCssVariables(){this.element.style.setProperty("--gantt-header-height",bt(this.styles.headerHeight)),this.element.style.setProperty("--gantt-line-height",bt(this.styles.lineHeight)),this.element.style.setProperty("--gantt-bar-height",bt(this.styles.barHeight))}expandGroups(t){this.groups.forEach(e=>{e.setExpand(t)}),this.expandChange.emit(this.groups),this.cdr.detectChanges()}ngOnInit(){this.createView(),this.setupGroups(),this.setupItems(),this.computeRefs(),this.setupBaselineItems(),this.computeItemsRefs(...this.baselineItems),this.initSelectionModel(),this.initCssVariables(),this.firstChange=!1;let t=this.ngZone.isStable?St(Promise.resolve()):this.ngZone.onStable.pipe(Q(1));this.ngZone.runOutsideAngular(()=>{t.pipe(b(this.unsubscribe$)).subscribe(()=>{this.element.style.opacity="1";let e=this.disabledLoadOnScroll;this.dragContainer.dragStarted.pipe(b(this.unsubscribe$)).subscribe(n=>{this.disabledLoadOnScroll=!0,this.dragStarted.emit(n)}),this.dragContainer.dragMoved.pipe(b(this.unsubscribe$)).subscribe(n=>{this.dragMoved.emit(n)}),this.dragContainer.dragEnded.pipe(b(this.unsubscribe$)).subscribe(n=>{this.disabledLoadOnScroll=e,this.dragEnded.emit(n)})})}),this.view.start$.pipe(Ae(1),b(this.unsubscribe$)).subscribe(()=>{this.computeRefs()})}ngOnChanges(t){this.firstChange||(t.viewType&&t.viewType.currentValue&&t.viewType.currentValue!==t.viewType.previousValue&&this.changeView(t.viewType.currentValue),t.viewOptions&&this.changeView(this.viewType),(t.originItems||t.originGroups)&&(this.setupExpandedState(),this.setupGroups(),this.setupItems(),this.computeRefs()),t.originBaselineItems&&(this.setupBaselineItems(),this.computeItemsRefs(...this.baselineItems)))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}computeItemsRefs(...t){t.forEach(e=>{e.updateRefs({width:e.start&&e.end?this.view.getDateRangeWidth(e.start,e.end):0,x:e.start?this.view.getXPointByDate(e.start):0,y:(this.styles.lineHeight-this.styles.barHeight)/2-1})})}trackBy(t,e){return e.id||t}detectChanges(){this.cdr.detectChanges()}expandGroup(t){t.setExpand(!t.expanded),this.expandChange.emit(t),this.cdr.detectChanges()}expandAll(){this.expandGroups(!0)}collapseAll(){this.expandGroups(!1)}getGanttItem(t){return this.getGanttItems([t])[0]||null}getGanttItems(t){let e=[];return this.items.length>0?e=ut(this.items):e=gi(this.groups.map(n=>ut(n.items))),e.filter(n=>t.includes(n.id))}isSelected(t){return!this.selectable||!this.selectionModel.hasValue()?!1:this.selectionModel.isSelected(t)}changeView(t){this.viewType=t,this.createView(),this.setupGroups(),this.setupItems(),this.computeRefs(),this.setupBaselineItems(),this.computeItemsRefs(...this.baselineItems),this.viewChange.emit(this.view)}rerenderView(){this.changeView(this.viewType)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275dir=Xt({type:i,contentQueries:function(e,n,s){if(e&1&&(P(s,Za,7),P(s,Ka,7),P(s,Ja,7),P(s,ts,7),P(s,es,7),P(s,is,7),P(s,ns,7)),e&2){let r;k(r=E())&&(n.barTemplate=r.first),k(r=E())&&(n.rangeTemplate=r.first),k(r=E())&&(n.itemTemplate=r.first),k(r=E())&&(n.baselineTemplate=r.first),k(r=E())&&(n.groupTemplate=r.first),k(r=E())&&(n.groupHeaderTemplate=r.first),k(r=E())&&(n.toolbarTemplate=r.first)}},hostVars:2,hostBindings:function(e,n){e&2&&W("gantt",n.ganttClass)},inputs:{originItems:[0,"items","originItems"],originGroups:[0,"groups","originGroups"],originBaselineItems:[0,"baselineItems","originBaselineItems"],viewType:"viewType",start:"start",end:"end",showTodayLine:"showTodayLine",draggable:"draggable",styles:"styles",showToolbar:"showToolbar",toolbarOptions:"toolbarOptions",viewOptions:"viewOptions",linkOptions:"linkOptions",disabledLoadOnScroll:"disabledLoadOnScroll",selectable:"selectable",multiple:"multiple",quickTimeFocus:"quickTimeFocus"},outputs:{loadOnScroll:"loadOnScroll",dragStarted:"dragStarted",dragMoved:"dragMoved",dragEnded:"dragEnded",barClick:"barClick",viewChange:"viewChange",expandChange:"expandChange"},features:[Et]})}}return i})(),A=new Yt("GANTT_UPPER_TOKEN");function mo(i,a){return a.includes(B.ss)&&i.from.pos===rt.start&&i.to.pos===rt.start?B.ss:a.includes(B.ff)&&i.from.pos===rt.finish&&i.to.pos===rt.finish?B.ff:a.includes(B.sf)&&i.from.pos===rt.start&&i.to.pos===rt.finish?B.sf:B.fs}var rt=(function(i){return i.start="start",i.finish="finish",i})(rt||{}),le=(()=>{class i{constructor(){this.ganttUpper=h(A),this.dragStarted=new _,this.dragMoved=new _,this.dragEnded=new _,this.linkDragStarted=new _,this.linkDragEntered=new _,this.linkDragEnded=new _,this.linkDragPath={from:null,to:null}}emitLinkDragStarted(t){this.linkDraggingId=t.item.id,this.linkDragPath.from=t,this.linkDragStarted.emit({source:t.item.origin,target:null})}emitLinkDragEntered(t){this.linkDragPath.to=t,this.linkDragEntered.emit({source:this.linkDragPath.from.item.origin,target:t.item.origin})}emitLinkDragLeaved(){this.linkDragPath.to=null}emitLinkDragEnded(t){if(t){this.linkDragPath.to=t;let e=mo(this.linkDragPath,this.ganttUpper.linkOptions?.dependencyTypes);this.linkDragPath.from.item.addLink({link:this.linkDragPath.to.item.id,type:e}),this.linkDragEnded.emit({source:this.linkDragPath.from.item.origin,target:this.linkDragPath.to.item.origin,type:e})}this.linkDraggingId=null,this.linkDragPath={from:null,to:null}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=ht({token:i,factory:i.\u0275fac})}}return i})();var go="#6698ff",uo=17,fo=24,yo=35,vo=4,Ba=(()=>{class i{constructor(){this.elementRef=h(z),this.ganttUpper=h(A),this.firstChange=!0,this.unsubscribe$=new O,this.refsUnsubscribe$=new O}ngOnInit(){this.firstChange=!1,this.item.refs$.pipe(b(this.refsUnsubscribe$)).subscribe(()=>{this.setPositions()})}ngOnChanges(t){this.firstChange||this.itemChange(t.item.currentValue)}itemChange(t){this.refsUnsubscribe$.next(),this.refsUnsubscribe$.complete(),this.item=t,this.item.refs$.pipe(b(this.refsUnsubscribe$)).subscribe(()=>{this.setPositions()})}setPositions(){let t=this.elementRef.nativeElement;t.style.left=this.item.refs?.x+"px",t.style.top=this.item.refs?.y+"px",t.style.width=this.item.refs?.width+"px",this.item.type===Pt.bar?t.style.height=this.ganttUpper.styles.barHeight+"px":this.item.type===Pt.range&&(t.style.height=uo+"px")}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.refsUnsubscribe$.next(),this.refsUnsubscribe$.complete()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275dir=Xt({type:i,inputs:{template:"template",item:"item"},features:[Et]})}}return i})(),oi=50,Gt=(function(i){return i[i.NONE=0]="NONE",i[i.LEFT=1]="LEFT",i[i.RIGHT=2]="RIGHT",i})(Gt||{}),Be=(()=>{class i{constructor(){this.ngZone=h(tt),this.platformId=h(qi),this.visibleRangeX=kt({min:0,max:0}),this.unsubscribe$=new O}disableBrowserWheelEvent(){let t=this.mainContainer;this.ngZone.runOutsideAngular(()=>J(t,"wheel").pipe(b(this.unsubscribe$)).subscribe(e=>{let n=e.deltaX;n&&(t.scrollLeft+t.offsetWidth===t.scrollWidth&&n>0||t.scrollLeft===0&&n<0)&&e.preventDefault()}))}initialize(t){this.root=t.nativeElement,this.side=this.root.getElementsByClassName("gantt-side")[0],this.container=this.root.getElementsByClassName("gantt-container")[0],this.sideContainer=this.root.getElementsByClassName("gantt-side-container")[0],this.mainContainer=this.root.getElementsByClassName("gantt-main-container")[0],this.mainScrollbar=this.root.getElementsByClassName("gantt-main-scrollbar")[0],this.mainFooter=this.root.getElementsByClassName("gantt-container-footer")[0],this.verticalScrollContainer=this.root.getElementsByClassName("gantt-scroll-container")[0];let e=this.mainContainer.getElementsByClassName("gantt-main-items")[0],n=this.mainContainer.getElementsByClassName("gantt-main-groups")[0];this.mainItems=e||n,this.calendarHeader=this.root.getElementsByClassName("gantt-calendar-header")[0],this.calendarOverlay=this.root.getElementsByClassName("gantt-calendar-grid")[0],this.disableBrowserWheelEvent()}getViewerScroll(t){let e=[J(this.mainContainer,"scroll",t)];return this.mainFooter&&e.push(J(this.mainFooter,"scroll",t)),this.mainScrollbar&&e.push(J(this.mainScrollbar,"scroll",t)),new he(n=>this.ngZone.runOutsideAngular(()=>Tt(...e).pipe(Qt(()=>this.mainContainer.scrollLeft),Vi(),Qt(([s,r])=>{this.setVisibleRangeX();let o={target:this.mainContainer,direction:Gt.NONE};return r-s<0&&this.mainContainer.scrollLeft<oi&&this.mainContainer.scrollLeft>0&&(o.direction=Gt.LEFT),r-s>0&&this.mainContainer.scrollWidth-this.mainContainer.clientWidth-this.mainContainer.scrollLeft<oi&&(o.direction=Gt.RIGHT),o})).subscribe(n)))}getResize(){return fn(this.platformId)?Ne:J(window,"resize").pipe(me(150))}getResizeByElement(t){return new he(e=>{new ResizeObserver(()=>{e.next(null)}).observe(t)})}scrollMainContainer(t){if(Si(t)){let e=t-this.mainContainer.clientWidth/2;this.mainContainer.scrollLeft=e>oi?e:0,this.calendarHeader.scrollLeft=this.mainContainer.scrollLeft,this.calendarOverlay.scrollLeft=this.mainContainer.scrollLeft,this.mainScrollbar&&(this.mainScrollbar.scrollLeft=this.mainContainer.scrollLeft),this.mainFooter&&(this.mainFooter.scrollLeft=this.mainContainer.scrollLeft)}}setVisibleRangeX(){this.visibleRangeX.set({min:this.mainContainer.scrollLeft,max:this.mainContainer.scrollLeft+this.mainContainer.clientWidth})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=ht({token:i,factory:i.\u0275fac})}}return i})(),Wa=.05;function bo(i,a){let{left:t,right:e,width:n}=i,s=n*Wa;return a>=t-s&&a<=t+s?1:a>=e-s&&a<=e+s?2:0}function Co(i,a,t,e){let{top:n,right:s,bottom:r,left:o,width:l,height:u}=i,T=l*a,X=u*a;return e>n-X&&e<r+X&&t>o-T&&t<s+T}function _o(i,a,t){let e=4,n=4,{left:s,right:r,width:o}=i,l=o*Wa;return t===1&&(e=Math.ceil((l-(a>s?a-s:0))/(l/n))),t===2&&(e=Math.ceil((l-(r>a?r-a:0))/(l/n))),e}var re;function wo(){if(re==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>re=!0}))}finally{re=re||!1}return re}function Do(i){return wo()?i:!!i.capture}var oe=Do({passive:!0}),Sa=.05,Ta=10,xo=2,li="gantt-bar-active",So="gantt-bar-drop-active",To="gantt-bar-single-drop-active";function ka(i,a){let t=document.createElementNS("http://www.w3.org/2000/svg",i);return t.classList.add(a),t}var Ea=(()=>{class i{get dragDisabled(){return!this.item()?.draggable||!this.ganttUpper.draggable}get linkDragDisabled(){return!this.item().linkable||!this.ganttUpper.linkable}get barHandleDragMoveAndScrollDistance(){return this.barHandleDragMoveDistance+this.dragScrollDistance}get autoScrollStep(){return Math.pow(xo,this.autoScrollSpeedRates)}constructor(){this.dragDrop=h(kn),this.dom=h(Be),this.dragContainer=h(le),this._ngZone=h(tt),this.item=kt(null),this.linkDragRefs=[],this.barHandleDragRefs=[],this.destroy$=new O,this.stopScrollTimers$=new O,this.barDragMoveDistance=0,this.barHandleDragMoveDistance=0,this.dragScrolling=!1,this.dragScrollDistance=0,this._horizontalScrollDirection=0,this.autoScrollSpeedRates=1,this.startScrollInterval=()=>{this.stopScrolling(),Wi(0,Ii).pipe(b(this.stopScrollTimers$)).subscribe(()=>{let t=this.dom.mainContainer,e=this.autoScrollStep;this._horizontalScrollDirection===1?t.scrollBy(-e,0):this._horizontalScrollDirection===2&&t.scrollBy(e,0)})},_e(()=>{this.item()&&this.createDrags()})}createDragRef(t){return this.dragDrop.createDrag(t)}createDragScrollEvent(t){return J(this.dom.mainContainer,"scroll",oe).pipe(b(t.ended))}createMouseEvents(){if(!this.hasMonitorMouseEvent&&(!this.dragDisabled||!this.linkDragDisabled)){this.hasMonitorMouseEvent=!0;let t=this.ganttUpper.linkOptions?.dependencyTypes?.length===1&&this.ganttUpper.linkOptions?.dependencyTypes[0]===B.fs?To:So;J(this.barElement,"mouseenter",oe).pipe(b(this.destroy$)).subscribe(()=>{this.dragContainer.linkDraggingId&&this.dragContainer.linkDraggingId!==this.item().id?this.linkDragDisabled||(this.barElement.classList.add(t),this.dragContainer.emitLinkDragEntered({item:this.item(),element:this.barElement})):(!this.dragDisabled||!this.linkDragDisabled)&&this.barElement.classList.add(li)}),J(this.barElement,"mouseleave",oe).pipe(b(this.destroy$)).subscribe(()=>{this.dragContainer.linkDraggingId?this.dragContainer.emitLinkDragLeaved():this.barElement.classList.remove(li),this.barElement.classList.remove(t)})}}createBarDrag(){let t=this.createDragRef(this.barElement);return t.disabled=this.dragDisabled,t.lockAxis="x",t.withBoundaryElement(this.dom.mainItems),t.started.subscribe(()=>{this.setDraggingStyles(),t.data={start:this.item().start,end:this.item().end},this.containerScrollLeft=this.dom.mainContainer.scrollLeft,this.createDragScrollEvent(t).subscribe(()=>{if(t.isDragging()){let e=this.dom.mainContainer.scrollLeft-this.containerScrollLeft;this.dragScrollDistance=e,t._boundaryRect=this.dom.mainItems.getBoundingClientRect(),this.barDragMove()}}),this.dragContainer.dragStarted.emit({item:this.item().origin})}),t.moved.subscribe(e=>{this.startScrollingIfNecessary(e.pointerPosition.x,e.pointerPosition.y),this.barDragMoveDistance=e.distance.x,this.dragScrolling||this.barDragMove()}),t.ended.subscribe(e=>{this.clearDraggingStyles(),this.closeDragBackdrop(),e.source.reset(),e.source.data=null,this.stopScrolling(),this.dragScrolling=!1,this.dragScrollDistance=0,this.barDragMoveDistance=0,this.item().updateRefs({width:this.ganttUpper.view.getDateRangeWidth(this.item().start,this.item().end),x:this.ganttUpper.view.getXPointByDate(this.item().start),y:(this.ganttUpper.styles.lineHeight-this.ganttUpper.styles.barHeight)/2-1}),this.dragContainer.dragEnded.emit({item:this.item().origin})}),t}createBarHandleDrags(){let t=[];return this.barElement.querySelectorAll(".drag-handles .handle").forEach((n,s)=>{let r=s===0,o=this.createDragRef(n);o.disabled=this.dragDisabled,o.lockAxis="x",o.withBoundaryElement(this.dom.mainItems),o.started.subscribe(()=>{this.setDraggingStyles(),this.containerScrollLeft=this.dom.mainContainer.scrollLeft,this.createDragScrollEvent(o).subscribe(()=>{if(o.isDragging()){let l=this.dom.mainContainer.scrollLeft-this.containerScrollLeft;this.dragScrollDistance=l,o._boundaryRect=this.dom.mainItems.getBoundingClientRect(),this.dragScrolling&&this.isStartGreaterThanEndWhenBarHandleDragMove(r)&&(this.stopScrolling(),this.dragScrolling=!1),r?this.barBeforeHandleDragMove():this.barAfterHandleDragMove()}}),this.dragContainer.dragStarted.emit({item:this.item().origin})}),o.moved.subscribe(l=>{this.barHandleDragMoveRecordDiffs&&this.barHandleDragMoveRecordDiffs>0&&this.startScrollingIfNecessary(l.pointerPosition.x,l.pointerPosition.y),this.barHandleDragMoveDistance=l.distance.x,this.dragScrolling||(r?this.barBeforeHandleDragMove():this.barAfterHandleDragMove())}),o.ended.subscribe(l=>{this.clearDraggingStyles(),this.closeDragBackdrop(),l.source.reset(),this.stopScrolling(),this.dragScrolling=!1,this.dragScrollDistance=0,this.barHandleDragMoveDistance=0,this.item().updateRefs({width:this.ganttUpper.view.getDateRangeWidth(this.item().start,this.item().end),x:this.ganttUpper.view.getXPointByDate(this.item().start),y:(this.ganttUpper.styles.lineHeight-this.ganttUpper.styles.barHeight)/2-1}),this.dragContainer.dragEnded.emit({item:this.item().origin})}),t.push(o)}),t}createLinkHandleDrags(){let t=[];return this.barElement.querySelectorAll(".link-handles .handle").forEach((n,s)=>{let r=s===0,o=this.dragDrop.createDrag(n);o.disabled=this.linkDragDisabled,o.withBoundaryElement(this.dom.root),o.beforeStarted.subscribe(()=>{n.style.pointerEvents="none",this.barDragRef&&(this.barDragRef.disabled=!0),this.createLinkDraggingLine(),this.dragContainer.emitLinkDragStarted({element:this.barElement,item:this.item(),pos:r?rt.start:rt.finish})}),o.moved.subscribe(()=>{let l=this.calcLinkLinePositions(n,r);this.linkDraggingLine.setAttribute("x1",l.x1.toString()),this.linkDraggingLine.setAttribute("y1",l.y1.toString()),this.linkDraggingLine.setAttribute("x2",l.x2.toString()),this.linkDraggingLine.setAttribute("y2",l.y2.toString())}),o.ended.subscribe(l=>{if(n.style.pointerEvents="",this.barDragRef&&(this.barDragRef.disabled=!1),this.dragContainer.linkDragPath.to){let u=l.source.getRootElement().getBoundingClientRect().x-this.dragContainer.linkDragPath.to.element.getBoundingClientRect().x;this.dragContainer.emitLinkDragEnded(xt(ft({},this.dragContainer.linkDragPath.to),{pos:u<this.dragContainer.linkDragPath.to.item.refs.width/2?rt.start:rt.finish}))}else this.dragContainer.emitLinkDragEnded();l.source.reset(),this.barElement.classList.remove(li),this.destroyLinkDraggingLine()}),t.push(o)}),t}openDragBackdrop(t,e,n){let s=this.dom.root.querySelector(".gantt-drag-backdrop"),r=this.dom.root.querySelector(".gantt-drag-mask"),o=this.dom.root.getBoundingClientRect(),l=t.getBoundingClientRect(),u=l.left-o.left-(this.dom.side.clientWidth+1);this.dragScrolling&&(this._horizontalScrollDirection===1?u+=this.autoScrollStep:this._horizontalScrollDirection===2&&(u-=this.autoScrollStep));let T=l.right-l.left;r.style.left=u+"px",r.style.width=T+"px",r.style.display="block",s.style.display="block",r.querySelector(".start").innerHTML=e.format(this.ganttUpper.view.options.dragPreviewDateFormat),r.querySelector(".end").innerHTML=n.format(this.ganttUpper.view.options.dragPreviewDateFormat)}closeDragBackdrop(){let t=this.dom.root.querySelector(".gantt-drag-backdrop"),e=this.dom.root.querySelector(".gantt-drag-mask");e.style.display="none",t.style.display="none"}setDraggingStyles(){this.barElement.classList.add("gantt-bar-draggable-drag")}clearDraggingStyles(){this.barElement.classList.remove("gantt-bar-draggable-drag")}barDragMove(){let{start:t,end:e}=this.barDragRef.data,n=this.ganttUpper.view.getVisibleDateIndexOffset(t,e),s=this.item().refs.x+this.barDragMoveDistance+this.dragScrollDistance,r=this.ganttUpper.view.getDateByXPoint(s),o=this.ganttUpper.view.getXPointByDate(r),l=r,u=this.ganttUpper.view.getDateByIndexOffset(r,n);if(this.ganttUpper.view.viewType===m.day){let T=this.ganttUpper.view.getDayOccupancyWidth(r);s>o+T/2&&(l=this.ganttUpper.view.getDateByIndexOffset(l,1),u=this.ganttUpper.view.getDateByIndexOffset(u,1))}if(this.dragScrolling){let T=s-this.barDragMoveDistance;this.barElement.style.left=T+"px"}this.openDragBackdrop(this.barElement,l,u),this.isStartOrEndInsideView(l,u)&&(this.updateItemDate(l,u),this.dragContainer.dragMoved.emit({item:this.item().origin}))}barBeforeHandleDragMove(){let{x:t,start:e,minRangeWidthWidth:n}=this.startOfBarHandle(),s=this.item().refs.width+this.barHandleDragMoveAndScrollDistance*-1,r=this.ganttUpper.view.getVisibleDateIndexOffset(e,this.item().end);if(s>Ta&&r>0){if(this.barElement.style.width=s+"px",this.barElement.style.left=t+"px",this.openDragBackdrop(this.barElement,e,this.item().end),!this.isStartOrEndInsideView(e,this.item().end))return;this.updateItemDate(e,this.item().end)}else{if(this.barHandleDragMoveRecordDiffs>0&&r<=0){this.barElement.style.width=n+"px";let o=this.ganttUpper.view.getXPointByDate(this.item().end);this.barElement.style.left=o+"px"}this.openDragBackdrop(this.barElement,this.item().end,this.item().end),this.updateItemDate(this.item().end,this.item().end)}this.barHandleDragMoveRecordDiffs=r,this.dragContainer.dragMoved.emit({item:this.item().origin})}barAfterHandleDragMove(){let{width:t,end:e}=this.endOfBarHandle(),n=this.ganttUpper.view.getVisibleDateIndexOffset(this.item().start,e);if(t>Ta&&n>0){if(this.barElement.style.width=t+"px",this.openDragBackdrop(this.barElement,this.item().start,e),!this.isStartOrEndInsideView(this.item().start,e))return;this.updateItemDate(this.item().start,e)}else{if(this.barHandleDragMoveRecordDiffs>0&&n<=0){let s=this.ganttUpper.view.getMinRangeWidthByPrecisionUnit(this.item().start);this.barElement.style.width=s+"px"}this.openDragBackdrop(this.barElement,this.item().start,this.item().start),this.updateItemDate(this.item().start,this.item().start)}this.barHandleDragMoveRecordDiffs=n,this.dragContainer.dragMoved.emit({item:this.item().origin})}calcLinkLinePositions(t,e){let n=this.dom.root.getBoundingClientRect(),s=t.getBoundingClientRect(),r=t.parentElement.parentElement.getBoundingClientRect();return{x1:r.left+(e?0:r.width)-n.left,y1:r.top+r.height/2-n.top,x2:s.left-n.left+s.width/2,y2:s.top-n.top+s.height/2}}createLinkDraggingLine(){if(!this.linkDraggingLine){let t=ka("svg","gantt-link-drag-container"),e=ka("line","link-dragging-line");e.style.pointerEvents="none",t.appendChild(e),this.dom.root.appendChild(t),this.linkDraggingLine=e}}destroyLinkDraggingLine(){this.linkDraggingLine&&(this.linkDraggingLine.parentElement.remove(),this.linkDraggingLine=null)}startScrollingIfNecessary(t,e){let n=this.dom.mainContainer.getBoundingClientRect(),s=this.dom.mainContainer.scrollLeft;if(Co(n,Sa,t,e)){let r=bo(n,t);r===1&&s>0||r===2&&s<this.ganttUpper.view.width-n.width?(this._horizontalScrollDirection=r,this.autoScrollSpeedRates=_o(n,t,r),this.dragScrolling=!0,this._ngZone.runOutsideAngular(this.startScrollInterval)):(this.dragScrolling=!1,this.stopScrolling())}}isStartGreaterThanEndWhenBarHandleDragMove(t){let e,n,s=this.dom.mainContainer.scrollLeft,r=this.dom.mainContainer.clientWidth,o=r*Sa;if(t){let{start:l,minRangeWidthWidth:u}=this.startOfBarHandle(),T=this.ganttUpper.view.getXPointByDate(this.item().end);e=l.value>this.item().end.value,n=T+u+o<=s+r}else{let{end:l}=this.endOfBarHandle(),u=this.ganttUpper.view.getXPointByDate(this.item().start);e=l.value<this.item().start.value,n=s+o<=u}return!!(e&&n)}startOfBarHandle(){let t=this.item().refs.x+this.barHandleDragMoveAndScrollDistance;return{x:t,start:this.ganttUpper.view.getDateByXPoint(t),minRangeWidthWidth:this.ganttUpper.view.getMinRangeWidthByPrecisionUnit(this.item().end)}}endOfBarHandle(){let t=this.item().refs.width+this.barHandleDragMoveAndScrollDistance;return{width:t,end:this.ganttUpper.view.getDateByXPoint(this.item().refs.x+t)}}stopScrolling(){this.stopScrollTimers$.next()}isStartOrEndInsideView(t,e){let n=t.getUnixTime(),s=e.getUnixTime(),r=this.ganttUpper.view.start.getUnixTime(),o=this.ganttUpper.view.end.getUnixTime();return!(n<r||s>o)}updateItemDate(t,e){this.item().updateDate(this.ganttUpper.view.startOfPrecision(t),this.ganttUpper.view.endOfPrecision(e))}initialize(t,e,n){this.barElement=t.nativeElement,this.ganttUpper=n,this.item.set(e)}createBarDragRef(){this.barDragRef?this.barDragRef.disabled=this.dragDisabled:this.dragDisabled||(this.barDragRef=this.createBarDrag())}createBarHandleDragRefs(){this.barHandleDragRefs.length>0?this.barHandleDragRefs.forEach(t=>{t.disabled=this.dragDisabled}):this.dragDisabled||(this.barHandleDragRefs=this.createBarHandleDrags())}createLinkDragRefs(){this.linkDragRefs.length>0?this.linkDragRefs.forEach(t=>{t.disabled=this.linkDragDisabled}):this.linkDragDisabled||(this.linkDragRefs=this.createLinkHandleDrags())}createDrags(){this.createMouseEvents(),this.createBarDragRef(),this.createBarHandleDragRefs(),this.createLinkDragRefs()}updateItem(t){this.item.set(t)}ngOnDestroy(){this.closeDragBackdrop(),this.barDragRef?.dispose(),this.linkDragRefs?.forEach(t=>t.dispose()),this.barHandleDragRefs?.forEach(t=>t.dispose()),this.destroy$.next(),this.destroy$.complete(),this.stopScrolling(),this.stopScrollTimers$.complete()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=ht({token:i,factory:i.\u0275fac})}}return i})();function Ma(i,a,t){return`linear-gradient(${i},${a} 0%,${t} 40%)`}var ko=(()=>{class i extends Ba{constructor(){super(),this.dragContainer=h(le),this.drag=h(Ea),this.ganttUpper=h(A),this.ngZone=h(tt),this.barClick=new _,this.ganttItemClass=!0}ngOnInit(){super.ngOnInit(),this.dragContainer.dragStarted.pipe(b(this.unsubscribe$)).subscribe(()=>{this.elementRef.nativeElement.style.pointerEvents="none"}),this.dragContainer.dragEnded.pipe(b(this.unsubscribe$)).subscribe(()=>{this.elementRef.nativeElement.style.pointerEvents="",this.setContentBackground()})}ngOnChanges(t){super.ngOnChanges(t),this.firstChange||(this.drag.updateItem(this.item),(t.item.currentValue.refs?.width!==t.item.previousValue.refs?.width||t.item.currentValue.color!==t.item.previousValue.color||t.item.currentValue.start?.value!==t.item.previousValue.start?.value||t.item.currentValue.end?.value!==t.item.previousValue.end?.value)&&this.setContentBackground())}ngAfterViewInit(){let t=this.ngZone.isStable?St(Promise.resolve()):this.ngZone.onStable.pipe(Q(1));this.ngZone.runOutsideAngular(()=>{t.pipe(b(this.unsubscribe$)).subscribe(()=>{this.drag.initialize(this.elementRef,this.item,this.ganttUpper)})}),this.setContentBackground(),this.handles.changes.pipe(Wt(this.handles),qt(()=>new he(e=>this.ngZone.runOutsideAngular(()=>Tt(...this.handles.toArray().map(n=>J(n.nativeElement,"mousedown"))).subscribe(e)))),b(this.unsubscribe$)).subscribe(e=>{e.stopPropagation()})}onBarClick(t){this.barClick.emit({event:t,item:this.item.origin})}setContentBackground(){let t=ft({},this.item.barStyle||{}),e=this.contentElementRef.nativeElement,n=this.elementRef.nativeElement;if(this.item.refs?.width){let s=this.item.color||go;if(this.item.origin.start&&this.item.origin.end&&(t.background=s,t.borderRadius=""),this.item.origin.start&&!this.item.origin.end){t.background=Ma("to left",se(s,.55),se(s,1));let r="4px 12.5px 12.5px 4px";t.borderRadius=r,n.style.borderRadius=r}if(!this.item.origin.start&&this.item.origin.end){t.background=Ma("to right",se(s,.55),se(s,1));let r="12.5px 4px 4px 12.5px";t.borderRadius=r,n.style.borderRadius=r}if(this.item.progress>=0){let r=e.querySelector(".gantt-bar-content-progress");t.background=se(s,.3),r.style.background=s}}t=Object.assign({},t,this.item.barStyle||{});for(let s in t)t.hasOwnProperty(s)&&(e.style[s]=t[s])}stopPropagation(t){t.stopPropagation()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["ngx-gantt-bar"],["gantt-bar"]],viewQuery:function(e,n){if(e&1&&(pt(as,5),pt(ss,5)),e&2){let s;k(s=E())&&(n.contentElementRef=s.first),k(s=E())&&(n.handles=s)}},hostVars:2,hostBindings:function(e,n){e&2&&W("gantt-bar",n.ganttItemClass)},outputs:{barClick:"barClick"},features:[zt([Ea]),ye,Et],decls:9,vars:8,consts:[["content",""],["handle",""],[1,"gantt-bar-layer"],[1,"drag-handles"],[1,"link-handles"],[1,"gantt-bar-border"],[1,"gantt-bar-content",3,"click"],[1,"gantt-bar-content-progress",3,"width"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"handle"],[1,"point"],[1,"gantt-bar-content-progress"]],template:function(e,n){if(e&1){let s=U();p(0,"div",2)(1,"div",3),f(2,rs,4,0),g(),f(3,os,5,0,"div",4),g(),D(4,"div",5),p(5,"div",6,0),F("click",function(o){return x(s),S(n.onBarClick(o))}),f(7,ls,1,2,"div",7),R(8,ds,0,0,"ng-template",8),g()}e&2&&(d(2),y(n.item.draggable&&n.ganttUpper.draggable?2:-1),d(),y(n.item.linkable&&n.ganttUpper.linkable?3:-1),d(4),y(n.item.progress>=0?7:-1),d(),v("ngTemplateOutlet",n.template)("ngTemplateOutletContext",vt(5,Di,n.item.origin,n.item.refs)))},dependencies:[Z],encapsulation:2})}}return i})(),Eo=(()=>{class i{constructor(){this.elementRef=h(z),this.ganttUpper=h(A),this.unsubscribe$=new O,this.ganttBaselineClass=!0}ngOnInit(){this.baselineItem.refs$.pipe(b(this.unsubscribe$)).subscribe(()=>{this.setPositions()})}setPositions(){let t=this.elementRef.nativeElement;t.style.left=this.baselineItem.refs.x+"px",t.style.bottom="2px",t.style.width=this.baselineItem.refs.width+"px"}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["ngx-gantt-baseline"],["gantt-baseline"]],hostVars:2,hostBindings:function(e,n){e&2&&W("gantt-baseline",n.ganttBaselineClass)},inputs:{baselineItem:"baselineItem",template:"template"},decls:1,vars:1,consts:[["content",""],[1,"baseline-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){e&1&&f(0,hs,3,5,"div",1),e&2&&y(n.baselineItem?0:-1)},dependencies:[Z],encapsulation:2})}}return i})(),Oa=5e3,za=(()=>{class i{get view(){return this.ganttUpper.view}constructor(){this.ganttUpper=h(A),this.ngZone=h(tt),this.elementRef=h(z),this.unsubscribe$=new O,this.mainHeight=Oa,this.todayBorderRadius=vo,this.viewTypes=m,this.className="gantt-calendar gantt-calendar-grid"}setTodayPoint(){let t=this.view.getTodayXPoint(),e=this.elementRef.nativeElement.getElementsByClassName("gantt-calendar-today-overlay")[0],n=this.elementRef.nativeElement.getElementsByClassName("today-line")[0];Si(t)?n&&(n.style.left=`${t}px`,n.style.top="0px",n.style.bottom=`${-Oa}px`):e.style.display="none"}ngOnInit(){this.ngZone.onStable.pipe(Q(1)).subscribe(()=>{Tt(this.ganttUpper.viewChange,this.ganttUpper.view.start$).pipe(b(this.unsubscribe$)).subscribe(()=>{this.setTodayPoint()})})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-calendar-grid"]],hostVars:2,hostBindings:function(e,n){e&2&&be(n.className)},decls:12,vars:8,consts:[[1,"gantt-calendar-today-overlay"],[1,"today-line"],[1,"gantt-calendar-grid-fill"],[1,"gantt-calendar-grid-main"],[1,"primary-line"],["y","0"],[1,"secondary-line"]],template:function(e,n){e&1&&(Y(0,"div",0),f(1,ps,1,0,"span",1),j(),V(),Y(2,"svg",2)(3,"g"),G(4,gs,1,1,null,null,$e),j()(),Y(6,"svg",3)(7,"g"),f(8,fs,3,0,":svg:g"),Y(9,"g"),G(10,ys,1,4,":svg:line",4,Ia),j()()()),e&2&&(w("width",n.view.width,"px"),d(),y(n.ganttUpper.showTodayLine?1:-1),d(),$("width",n.view.width)("height",1),d(2),N(n.view.secondaryDatePoints),d(2),$("width",n.view.width)("height",n.ganttUpper.styles.headerHeight-1),d(2),y(n.view.showTimeline?8:-1),d(2),N(n.view.primaryDatePoints))},encapsulation:2})}}return i})(),La=(()=>{class i{get view(){return this.ganttUpper.view}get height(){return this.ganttUpper.styles.headerHeight+"px"}constructor(){this.ganttUpper=h(A),this.ngZone=h(tt),this.elementRef=h(z),this.unsubscribe$=new O,this.viewTypes=m,this.className="gantt-calendar gantt-calendar-header"}ngOnInit(){this.ngZone.onStable.pipe(Q(1)).subscribe(()=>{Tt(this.ganttUpper.viewChange,this.ganttUpper.view.start$).pipe(b(this.unsubscribe$)).subscribe(()=>{this.ganttUpper.viewType===m.day&&this.setTodayPoint()})})}setTodayPoint(){let t=this.view.getTodayXPoint(),e=new C().getDate(),n=this.elementRef.nativeElement.getElementsByClassName("gantt-calendar-today-overlay")[0],s=this.elementRef.nativeElement.getElementsByClassName("today-rect")[0];Si(t)?s&&(s.style.left=`${t-yo/2}px`,s.style.top=`${this.ganttUpper.styles.headerHeight-fo}px`,s.innerHTML=e.toString()):n.style.display="none"}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-calendar-header"]],hostVars:4,hostBindings:function(e,n){e&2&&(be(n.className),w("height",n.height))},decls:13,vars:9,consts:[[1,"gantt-calendar-today-overlay"],[1,"today-rect",3,"hidden"],[1,"primary-text",3,"ngStyle","today","weekend"],[1,"primary-line"],[1,"header-line"],["y","0"],[1,"secondary-text",3,"ngStyle"],[1,"primary-text",3,"ngStyle"]],template:function(e,n){e&1&&(p(0,"div",0),D(1,"span",1),g(),V(),p(2,"svg")(3,"g"),G(4,bs,3,9,null,null,$e),G(6,Cs,2,8,":svg:text",2,$e),p(8,"g"),G(9,_s,1,4,":svg:line",3,Ia),g(),p(11,"g"),D(12,"line",4),g()()()),e&2&&(w("width",n.view.width,"px"),d(),v("hidden",n.ganttUpper.viewType!==n.viewTypes.day),d(),$("width",n.view.width)("height",n.ganttUpper.styles.headerHeight),d(2),N(n.view.secondaryDatePoints),d(2),N(n.view.primaryDatePoints),d(3),N(n.view.primaryDatePoints),d(3),$("x1",0)("x2",n.view.width)("y1",n.ganttUpper.styles.headerHeight)("y2",n.ganttUpper.styles.headerHeight))},dependencies:[gn],encapsulation:2})}}return i})(),_i=(()=>{class i{constructor(){this.ganttUpper=h(A)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-drag-backdrop"]],hostAttrs:[1,"gantt-drag-backdrop"],decls:4,vars:2,consts:[[1,"gantt-drag-mask"],[1,"date-range"],[1,"start"],[1,"end"]],template:function(e,n){e&1&&(Y(0,"div",0)(1,"div",1),et(2,"span",2)(3,"span",3),j()()),e&2&&w("top",n.ganttUpper.styles.headerHeight,"px")},encapsulation:2})}}return i})(),Mo=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-loader"]],hostAttrs:[1,"gantt-loader","gantt-loader-overlay"],decls:3,vars:0,consts:[[1,"gantt-loader-wrapper"],[1,"gantt-loader-loading"],[1,"gantt-loader-loading-spot"]],template:function(e,n){e&1&&(Y(0,"div",0)(1,"div",1),et(2,"span",2),j()())},encapsulation:2})}}return i})(),Oo=(()=>{class i extends Ba{constructor(){super(),this.ganttRangeClass=!0}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["ngx-gantt-range"],["gantt-range"]],hostVars:2,hostBindings:function(e,n){e&2&&W("gantt-range",n.ganttRangeClass)},features:[ye],decls:1,vars:1,consts:[[1,"gantt-range-main"],[1,"gantt-range-main-progress",3,"width"],[1,"gantt-range-triangle","left"],[1,"gantt-range-triangle","right"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"gantt-range-main-progress"]],template:function(e,n){e&1&&f(0,xs,5,6),e&2&&y(n.item.start&&n.item.end?0:-1)},dependencies:[Z],encapsulation:2})}}return i})(),Ti=(()=>{class i{constructor(){this.ngZone=h(tt),this.scrollGroupsMap=new Map}registerScrollEvent(t,e,n){let s=this.scrollGroupsMap.get(t)||{elements:[],destroy$:new O,direction:n};s.elements.push(e),this.scrollGroupsMap.set(t,s),this.monitorScrollChange(s)}unregisterScrollEvent(t,e){let n=this.scrollGroupsMap.get(t);n&&(n.elements=n.elements.filter(s=>s!==e),n.elements.length?this.scrollGroupsMap.set(t,n):this.scrollGroupsMap.delete(t),this.monitorScrollChange(n))}monitorScrollChange(t){let{elements:e,destroy$:n,direction:s}=t;if(n.next(),n.complete(),e.length){let r=e.map(o=>J(o,"scroll",oe));this.ngZone.runOutsideAngular(()=>Tt(...r).pipe(b(n)).subscribe(o=>{e.forEach(l=>{s==="x"?l.scrollLeft=o.currentTarget.scrollLeft:l.scrollTop=o.currentTarget.scrollTop})}))}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=ht({token:i,factory:i.\u0275fac})}}return i})(),ze=(()=>{class i{constructor(){this.syncScrollX=at(),this.elementRef=h(z),this.syncScrollService=h(Ti)}ngOnInit(){this.syncScrollService.registerScrollEvent(this.syncScrollX(),this.elementRef.nativeElement,"x")}ngOnDestroy(){this.syncScrollService.unregisterScrollEvent(this.syncScrollX(),this.elementRef.nativeElement)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275dir=Xt({type:i,selectors:[["","syncScrollX",""]],inputs:{syncScrollX:[1,"syncScrollX"]}})}}return i})(),Ha=(()=>{class i{constructor(){this.syncScrollY=at(),this.syncScrollService=h(Ti),this.elementRef=h(z)}ngOnInit(){this.syncScrollService.registerScrollEvent(this.syncScrollY(),this.elementRef.nativeElement,"y")}ngOnDestroy(){this.syncScrollService.unregisterScrollEvent(this.syncScrollY(),this.elementRef.nativeElement)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275dir=Xt({type:i,selectors:[["","syncScrollY",""]],inputs:{syncScrollY:[1,"syncScrollY"]}})}}return i})(),Io=(()=>{class i{constructor(){this.ganttUpper=h(A),this.hasFooter=at(!1),this.tableWidth=at(),this.ganttRoot=at(),this.tableScrollWidth=at(0)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-scrollbar"]],inputs:{hasFooter:[1,"hasFooter"],tableWidth:[1,"tableWidth"],ganttRoot:[1,"ganttRoot"],tableScrollWidth:[1,"tableScrollWidth"]},decls:5,vars:15,consts:[[1,"gantt-scrollbar",3,"ngClass"],["syncScrollX","ganttTableXScroll",1,"gantt-table-scrollbar"],[1,"h-100"],["syncScrollX","ganttMainXScroll",1,"gantt-main-scrollbar"]],template:function(e,n){if(e&1&&(p(0,"div",0)(1,"div",1),D(2,"div",2),g(),p(3,"div",3),D(4,"div",2),g()()),e&2){let s,r,o,l;w("height",((s=n.ganttRoot())==null?null:s.horizontalScrollbarHeight)+1,"px")("right",(r=n.ganttRoot())==null?null:r.verticalScrollbarWidth,"px"),v("ngClass",Jt(13,Ss,n.hasFooter())),d(),w("width",n.tableWidth(),"px"),W("with-scrollbar",(o=n.ganttRoot())==null?null:o.horizontalScrollbarHeight),d(),w("width",n.tableScrollWidth()-1,"px"),d(2),w("width",(l=n.ganttRoot().view)==null?null:l.width,"px")}},dependencies:[ee,ze],encapsulation:2})}}return i})(),Ro=(()=>{class i{get top(){return this.ganttUpper.styles.headerHeight+16+"px"}constructor(){this.ganttUpper=h(A),this.ganttItemClass=!0,this.views=h($a).getViewsLocale()}selectView(t){this.ganttUpper.changeView(t)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["ngx-gantt-toolbar"],["gantt-toolbar"]],hostVars:4,hostBindings:function(e,n){e&2&&(w("top",n.top),W("gantt-toolbar",n.ganttItemClass))},inputs:{template:"template"},decls:3,vars:2,consts:[[1,"toolbar-container"],[3,"ngTemplateOutlet"],[1,"toolbar-views"],[1,"toolbar-view",3,"active"],[1,"toolbar-view",3,"click"]],template:function(e,n){e&1&&(p(0,"div",0),f(1,Ms,1,1),R(2,Os,0,0,"ng-template",1),g()),e&2&&(d(),y(n.template?-1:1),d(),v("ngTemplateOutlet",n.template))},dependencies:[Z],encapsulation:2})}}return i})(),$o=(()=>{class i{constructor(){}setInlineStyles(t){let e=Array.from(t.getElementsByTagName("svg"));for(let n of e)this.recursElementChildren(n)}recursElementChildren(t){let e=["fill","color","font-size","stroke","font","text-anchor","stroke-dasharray","shape-rendering","stroke-width"];if(!t.style)return;let n=getComputedStyle(t);for(let s of e)t.style[s]=n[s];for(let s of Array.from(t.childNodes))this.recursElementChildren(s)}register(t){this.root=t.nativeElement,this.mainContainer=this.root.getElementsByClassName("gantt-main-container")[0]}html2canvas(t){return Ge(this,null,function*(){let e=this.root,n=this.mainContainer,s=e.offsetWidth,r=e.offsetHeight-n.offsetHeight+n.scrollHeight,o=(yield import("./chunk-NYHRGAWU.js")).default;return o(e,{logging:!1,allowTaint:!0,useCORS:!0,width:s,height:r,ignoreElements:l=>{if(t&&l.classList.contains(t)||l.classList.contains("gantt-calendar-today-overlay"))return!0},onclone:l=>{let u=e.className,T=l.querySelector(`.${u.replace(/\s+/g,".")}`),X=l.querySelector(".gantt-container"),ot=l.querySelector(".gantt-calendar-grid-main"),dt=l.querySelector(".gantt-links-overlay-main");T.style.width=`${s}px`,T.style.height=`${r}px`,T.style.overflow="unset",X.style.backgroundColor="#fff",ot.setAttribute("height",`${r}`),ot.setAttribute("style","background: transparent"),dt&&(dt.setAttribute("height",`${r}`),dt.setAttribute("style",`height: ${r}px`)),this.setInlineStyles(T)}})})}print(t="download",e){return Ge(this,null,function*(){this.html2canvas(e).then(n=>{let s=document.createElement("a"),r=n.toDataURL("image/png");s.download=`${t}.png`,s.href=r,s.click()})})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=ht({token:i,factory:i.\u0275fac})}}return i})(),Va=(()=>{class i{transform(t){return t===Pt.range}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275pipe=jt({name:"isGanttRangeItem",type:i,pure:!0})}}return i})(),Fo=(()=>{class i{transform(t){return t===Pt.bar}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275pipe=jt({name:"isGanttBarItem",type:i,pure:!0})}}return i})(),Po=(()=>{class i{transform(t){return t===Pt.custom}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275pipe=jt({name:"isGanttCustomItem",type:i,pure:!0})}}return i})(),Ga=(()=>{class i{transform(t){return!!t.items}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275pipe=jt({name:"isGanttGroup",type:i,pure:!0})}}return i})(),We=class{constructor(){}generatePath(a,t,e){if(a.before&&a.after&&t.before&&t.after){let n="";switch(e){case B.ss:n=this.generateSSPath(a,t);break;case B.ff:n=this.generateFFPath(a,t);break;case B.sf:n=this.generateFSAndSFPath(a,t,e);break;default:n=this.generateFSAndSFPath(a,t)}return n}}},Bo=(()=>{let i=class extends We{constructor(t){super(),this.ganttUpper=t}generateSSPath(t,e){let n=t.before.x,s=t.before.y,r=e.before.x,o=e.before.y,l=o>s?0:1,u=Math.abs(o-s)/2;return r>n?`M ${n} ${s}
                    A ${u} ${u} 0 1 ${l} ${n} ${o}
                    L ${r} ${o}`:`M ${n} ${s}
                    L ${r} ${s}
                    A ${u} ${u} 0 1 ${l} ${r} ${o}`}generateFFPath(t,e){let n=t.after.x,s=t.after.y,r=e.after.x,o=e.after.y,l=o>s?1:0,u=Math.abs(o-s)/2;return r>n?`M ${n} ${s}
                    L ${r} ${s}
                    A ${u} ${u} 0 1 ${l} ${r} ${o}`:`M ${n} ${s}
                    A ${u} ${u} 0 1 ${l} ${n} ${o}
                    L ${r} ${o}`}generateFSAndSFPath(t,e,n){let s=t.after.x,r=t.after.y,o=e.before.x,l=e.before.y,u=.5;n===B.sf&&(s=e.after.x,r=e.after.y,o=t.before.x,l=t.before.y);let T=Math.abs(o-s)*u,X=s+T,ot=o-T,dt=(s+o)/2,Mi=(r+l)/2,H=this.ganttUpper.styles.lineHeight/2,ct=this.ganttUpper.styles.lineHeight/2;return s>=o?Math.abs(l-r)<=this.ganttUpper.styles.lineHeight?`M ${s} ${r}
                    C ${s+H} ${r} ${s+H} ${l>r?r+H:r-H} ${s} ${l>r?r+ct:r-ct}
                    L ${o} ${l>r?l-ct:l+ct}
                    C ${o-ct} ${l>r?l-ct:l+ct}  ${o-H} ${l} ${o} ${l}
                    `:(H=this.ganttUpper.styles.lineHeight,`M ${s} ${r}
                    C ${s+H} ${r} ${s+H} ${l>r?r+H:r-H} ${dt} ${Mi}
                    C ${o-H} ${l>r?l-H:l+H} ${o-H} ${l} ${o} ${l}
                    `):this.ganttUpper.linkOptions?.showArrow&&o-s<200?(T=Math.max(Math.abs(l-r)*u,60),X=s+T,ot=o-T,`M ${s} ${r} C ${X} ${r} ${ot} ${l} ${o} ${l}`):`M ${s} ${r} C ${X} ${r} ${ot} ${l} ${o} ${l}`}};return i=Ri([$i(0,Qi(A))],i),i})(),wi=class extends We{constructor(){super(),this.pathControl=20}generateSSPath(a,t){let e=a.before.x,n=a.before.y,s=t.before.x,r=t.before.y,o=this.pathControl;return`M ${e} ${n}
                        L ${s>e?e-o:s-o} ${n}
                        L ${s>e?e-o:s-o} ${r}
                        L ${s} ${r}`}generateFFPath(a,t){let e=a.after.x,n=a.after.y,s=t.after.x,r=t.after.y,o=this.pathControl;return`M ${e} ${n}
                        L ${s>e?s+o:e+o} ${n}
                        L ${s>e?s+o:e+o} ${r}
                        L ${s} ${r}`}generateFSAndSFPath(a,t,e){let n=a.after.x,s=a.after.y,r=t.before.x,o=t.before.y,l=this.pathControl;return e===B.sf&&(n=t.after.x,s=t.after.y,r=a.before.x,o=a.before.y),r-n>=40?`M ${n} ${s}
                        L ${n+l} ${s}
                        L ${n+l} ${o}
                        L ${r} ${o}`:`M ${n} ${s}
                        L ${n+l} ${s}
                        L ${n+l} ${o>s?s+l:s-l}
                        L ${r-l} ${o>s?s+l:s-l}
                        L ${r-l} ${o}
                        L ${r} ${o}`}};function Wo(i,a){switch(i){case Fe.curve:return new Bo(a);case Fe.straight:return new wi;default:throw new Error("gantt link path type invalid")}}var zo=(()=>{class i{constructor(){this.ganttUpper=h(A),this.cdr=h(Ot),this.elementRef=h(z),this.ganttDragContainer=h(le),this.ngZone=h(tt),this.flatItems=[],this.lineClick=new _,this.links=[],this.ganttLinkTypes=B,this.showArrow=!1,this.linkItems=[],this.firstChange=!0,this.unsubscribe$=new O,this.ganttLinksOverlay=!0}ngOnInit(){this.linkLine=Wo(this.ganttUpper.linkOptions.lineType,this.ganttUpper),this.showArrow=this.ganttUpper.linkOptions.showArrow,this.firstChange=!1,this.buildLinks(),this.ganttDragContainer.dragStarted.pipe(b(this.unsubscribe$)).subscribe(()=>{this.elementRef.nativeElement.style.visibility="hidden"}),Tt(this.ganttUpper.viewChange,this.ganttUpper.expandChange,this.ganttUpper.view.start$,this.ganttUpper.dragEnded,this.ganttUpper.linkDragEnded,this.ngZone.onStable.pipe(Q(1)).pipe(qt(()=>this.ganttUpper.table?.dragDropped||Ne))).pipe(Ae(1),Li(0),b(this.unsubscribe$)).subscribe(()=>{this.elementRef.nativeElement.style.visibility="visible",this.buildLinks(),this.cdr.detectChanges()})}ngOnChanges(){this.firstChange||this.buildLinks()}computeItemPosition(){let t=this.ganttUpper.styles.lineHeight,e=this.ganttUpper.styles.barHeight;this.linkItems=[],this.flatItems.forEach((n,s)=>{if(!n.hasOwnProperty("items")){let r=n;if(r.refs&&r.refs.width>0){let o=s*t+r.refs.y+e/2;this.linkItems.push(xt(ft({},r),{before:{x:r.refs.x,y:o},after:{x:r.refs.x+r.refs.width,y:o}}))}}})}buildLinks(){this.computeItemPosition(),this.links=[],this.linkItems.forEach(t=>{(t.origin.start||t.origin.end)&&t.links.forEach(e=>{let n=this.linkItems.find(s=>s.id===e.link);if(n&&(n.origin.start||n.origin.end)){let s=st.default,r=st.active;(e.type===B.ff&&t.end.getTime()>n.end.getTime()||e.type===B.fs&&t.end.getTime()>n.start.getTime()||e.type===B.sf&&t.start.getTime()>n.end.getTime()||e.type===B.ss&&t.start.getTime()>n.start.getTime())&&(s=st.blocked,r=st.blocked),e.color&&(typeof e.color=="string"?(s=e.color,r=e.color):(s=e.color.default,r=e.color.active)),this.links.push({path:this.linkLine.generatePath(t,n,e.type),source:t.origin,target:n.origin,type:e.type,color:s,defaultColor:s,activeColor:r})}})})}trackBy(t){return t}onLineClick(t,e){this.lineClick.emit({event:t,source:e.source,target:e.target})}mouseEnterPath(t,e){t.color=t.activeColor||t.defaultColor,e<this.links.length-1&&(this.links.splice(e,1),this.links.push(t))}mouseLeavePath(t){t.color=t.defaultColor}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-links-overlay"]],hostVars:2,hostBindings:function(e,n){e&2&&W("gantt-links-overlay",n.ganttLinksOverlay)},inputs:{flatItems:"flatItems"},outputs:{lineClick:"lineClick"},features:[Et],decls:4,vars:1,consts:[[1,"gantt-links-overlay-main"],[1,"link-dragging-line"],["fill","transparent","stroke-width","2","pointer-events","none"],["stroke","transparent","stroke-width","9","fill","none","cursor","pointer",1,"link-line",3,"click","mouseenter","mouseleave"],["markerUnits","strokeWidth","markerWidth","5","markerHeight","4","refX","5","refY","2","orient","180",3,"id"],["markerUnits","strokeWidth","markerWidth","5","markerHeight","4","refX","5","refY","2","orient","auto",3,"id"],["d","M 0 0 L 5 2 L 0 4 z"]],template:function(e,n){e&1&&(V(),Y(0,"svg",0),G(1,Fs,5,5,":svg:ng-container",null,n.trackBy,!0),et(3,"line",1),j()),e&2&&($("width",n.ganttUpper.view.width),d(),N(n.links))},encapsulation:2})}}return i})(),Lo='<svg xmlns="http://www.w3.org/2000/svg" fit=""  preserveAspectRatio="xMidYMid meet" focusable="false"><g id="amnavigation/angle-right" stroke-width="1" fill-rule="evenodd"><path d="M7.978 11.498l-.005.005L2.3 5.831 3.13 5l4.848 4.848L12.826 5l.83.831-5.673 5.672-.005-.005z"   transform="rotate(-90 7.978 8.252)"></path></g></svg>',Ho='<svg xmlns="http://www.w3.org/2000/svg" fit=""  preserveAspectRatio="xMidYMid meet" focusable="false"><g id="aknavigation/angle-down" stroke-width="1" fill-rule="evenodd"><path d="M7.978 11.997l-.005.006L2.3 6.33l.83-.831 4.848 4.848L12.826 5.5l.83.83-5.673 5.673-.005-.006z" ></path></g></svg>',Vo='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fit=""   preserveAspectRatio="xMidYMid meet" focusable="false"><g id="kxaction/plus-square" stroke-width="1" fill-rule="evenodd"><path d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1.2a.8.8 0 0 0-.8.8v12a.8.8 0 0 0 .8.8h12a.8.8 0 0 0 .8-.8V2a.8.8 0 0 0-.8-.8H2zm5.45 6.2V4.75h1.2V7.4h2.65v1.2H8.65v2.65h-1.2V8.6H4.8V7.4h2.65z"></path></g></svg>',Go='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><g id="jnaction/minus-square" stroke-width="1" fill-rule="evenodd"><path d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1.2a.8.8 0 0 0-.8.8v12a.8.8 0 0 0 .8.8h12a.8.8 0 0 0 .8-.8V2a.8.8 0 0 0-.8-.8H2zm2.8 6.2h6.5v1.2H4.8V7.4z"></path></g></svg>',No=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve">
<path fill="#aaa" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)">
    <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform>
</path>
</svg>`,Uo=`<svg
width="148px"
height="134px"
viewBox="0 0 148 134"
version="1.1"
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink"
>
<defs>
  <filter x="0.0%" y="0.0%" width="100.0%" height="100.0%" filterUnits="objectBoundingBox" id="filter-1">
    <feGaussianBlur stdDeviation="0" in="SourceGraphic"></feGaussianBlur>
  </filter>
</defs>
<g id="148x134" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
  <g id="\u7F16\u7EC4-6" transform="translate(1.000000, 1.000000)">
    <ellipse
      id="\u692D\u5706\u5F62"
      fill="#EDEEF2"
      opacity="0.3"
      filter="url(#filter-1)"
      cx="73.0800017"
      cy="115.920003"
      rx="73.0800017"
      ry="16.8000004"
    ></ellipse>
    <g id="\u7F16\u7EC4-5" transform="translate(15.120000, 0.000000)">
      <polygon
        id="\u77E9\u5F62"
        fill="#E2E4E9"
        points="19.2789848 49.5600011 99.1200023 48.7200011 117.600003 75.9297673 117.600003 92.313049 0 92.313049 0 75.0356267"
      ></polygon>
      <path
        d="M23.5200005,0 L94.0800002,0 C97.7913538,2.06413823e-16 100.8,3.00864655 100.8,6.72000015 L100.8,99.1200023 L100.8,99.1200023 L16.8000004,99.1200023 L16.8000004,6.72000015 C16.8000004,3.00864655 19.8086469,1.56994302e-15 23.5200005,0 Z"
        id="\u77E9\u5F62"
        fill="#F9FAFB"
      ></path>
      <path
        d="M30.9200007,12.4400003 L86.6800019,12.4400003 C88.5356787,12.4400003 90.040002,13.9443236 90.040002,15.8000004 L90.040002,42.000001 C90.040002,43.8556778 88.5356787,45.360001 86.6800019,45.360001 L30.9200007,45.360001 C29.0643239,45.360001 27.5600006,43.8556778 27.5600006,42.000001 L27.5600006,15.8000004 C27.5600006,13.9443236 29.0643239,12.4400003 30.9200007,12.4400003 Z"
        id="\u77E9\u5F62"
        fill="#E8EAEE"
      ></path>
      <text
        id="&lt;/null&gt;"
        font-family="PingFangSC-Medium, PingFang SC"
        font-size="15.1200003"
        font-weight="400"
        fill="#BCBECD"
      >
        <tspan x="33.6000008" y="32.8000004">&lt;/null&gt;</tspan>
      </text>
      <rect id="\u77E9\u5F62" fill="#E8EAEE" x="27.5600006" y="52.0800012" width="61.4800014" height="5.04000011" rx="2.52000006"></rect>
      <rect
        id="\u77E9\u5F62\u5907\u4EFD"
        fill="#E8EAEE"
        x="27.5600006"
        y="63.8400014"
        width="61.4800014"
        height="5.04000011"
        rx="2.52000006"
      ></rect>
      <path
        d="M0,75.6000017 L29.280235,75.6000017 C32.0637502,75.6000017 34.3202352,77.8564866 34.3202352,80.6400018 L34.3202352,86.2591426 C34.3202352,89.0426578 36.5767201,91.2991427 39.3602353,91.2991427 L78.4136737,91.2991427 C81.1971889,91.2991427 83.4536738,89.0426578 83.4536738,86.2591426 L83.4536738,80.6400018 C83.4536738,77.8564866 85.7101587,75.6000017 88.4936739,75.6000017 L117.600003,75.6000017 L117.600003,75.6000017 L117.600003,110.880003 C117.600003,115.519195 113.839194,119.280003 109.200002,119.280003 L8.40000019,119.280003 C3.76080819,119.280003 -6.53729019e-15,115.519195 0,110.880003 L0,75.6000017 L0,75.6000017 Z"
        id="\u77E9\u5F62"
        fill="#EDEFF2"
      ></path>
    </g>
  </g>
</g>
</svg>`,Ao='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><g id="aijaction/drag--" stroke-width="1" fill-rule="evenodd"><g id="aij\u62D6\u52A8" transform="translate(5 1)" fill-rule="nonzero"><path d="M1 2a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM1 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm-4 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm-4 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z" id="aij\u5F62\u72B6\u7ED3\u5408"></path></g></g></svg>',Qo='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fit="" height="1em" width="1em" preserveAspectRatio="xMidYMid meet" focusable="false"><g id="adinavigation/arrow-left" stroke-width="1" fill-rule="evenodd"><path d="M7.4 4.15L4.438 7.315a.6.6 0 0 1-.876-.82l3.97-4.243a.598.598 0 0 1 .93-.057l3.97 4.323a.6.6 0 1 1-.885.812L8.6 4.118v9.149c0 .404-.269.733-.6.733-.332 0-.6-.329-.6-.733V4.15z" id="adi\u5F62\u72B6\u7ED3\u5408" transform="rotate(-90 7.995 8)"></path></g></svg>',qo='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fit="" height="1em" width="1em" preserveAspectRatio="xMidYMid meet" focusable="false"><g id="adlnavigation/arrow-right" stroke-width="1" fill-rule="evenodd"><path d="M7.4 4.15L4.438 7.315a.6.6 0 0 1-.876-.82l3.97-4.243a.598.598 0 0 1 .93-.057l3.97 4.323a.6.6 0 1 1-.885.812L8.6 4.118v9.149c0 .404-.269.733-.6.733-.332 0-.6-.329-.6-.733V4.15z" id="adl\u5F62\u72B6\u7ED3\u5408" transform="rotate(90 7.995 8)"></path></g></svg>',Yo={"angle-right":Lo,"angle-down":Ho,"plus-square":Vo,"minus-square":Go,loading:No,empty:Uo,drag:Ao,"arrow-left":Qo,"arrow-right":qo},Na=(()=>{class i{set iconName(t){this.setSvg(t)}constructor(){this.elementRef=h(z),this.isIcon=!0}setSvg(t){let e=Yo[t];e?this.elementRef.nativeElement.innerHTML=e:this.elementRef.nativeElement.innerHTML=""}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-icon"]],hostVars:2,hostBindings:function(e,n){e&2&&W("gantt-icon",n.isIcon)},inputs:{iconName:"iconName"},decls:0,vars:0,template:function(e,n){},encapsulation:2})}}return i})(),Xo=(()=>{class i{constructor(){this.ganttUpper=h(A),this.dom=h(Be),this.ngZone=h(tt),this.barClick=new _,this.lineClick=new _,this.ganttMainClass=!0,this.unsubscribe$=new O}ngOnInit(){let t=this.ngZone.isStable?St(Promise.resolve()):this.ngZone.onStable.pipe(Q(1));this.ngZone.runOutsideAngular(()=>{t.pipe(b(this.unsubscribe$)).subscribe(()=>{this.setupResize()})})}toItemType(t){return t}trackBy(t,e){return e.id||t}setupResize(){Bi([this.dom.getResize(),this.dom.getResizeByElement(this.dom.mainContainer)]).pipe(b(this.unsubscribe$)).subscribe(()=>{this.dom.setVisibleRangeX()})}quickTime(t,e){let n=e==="left"?t.start||t.end:t.end||t.start;this.ganttRoot.scrollToDate(n)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-main"]],hostVars:2,hostBindings:function(e,n){e&2&&W("gantt-main-container",n.ganttMainClass)},inputs:{viewportItems:"viewportItems",flatItems:"flatItems",groupHeaderTemplate:"groupHeaderTemplate",itemTemplate:"itemTemplate",barTemplate:"barTemplate",rangeTemplate:"rangeTemplate",baselineTemplate:"baselineTemplate",ganttRoot:"ganttRoot",quickTimeFocus:"quickTimeFocus"},outputs:{barClick:"barClick",lineClick:"lineClick"},decls:5,vars:4,consts:[[3,"lineClick","flatItems"],[1,"gantt-main-groups"],[1,"gantt-quick-time-focus-container",3,"width"],[1,"gantt-group",3,"height","ngClass"],[1,"gantt-item",3,"height","style","gantt-main-item-active"],[1,"gantt-group",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"gantt-item"],[3,"template","item"],[3,"item","template"],[3,"baselineItem","template"],[3,"barClick","item","template"],[1,"gantt-quick-time-focus-container"],[1,"gantt-quick-time-focus"],[1,"gantt-quick-time-focus-item",3,"ngClass","height"],[1,"gantt-quick-time-focus-item",3,"ngClass"],[1,"ml-2"],["href","javascript:;",1,"gantt-quick-time-focus-item-arrow","link-secondary"],[1,"mr-2"],["href","javascript:;",1,"gantt-quick-time-focus-item-arrow","link-secondary",3,"click"],["iconName","arrow-left"],["iconName","arrow-right"]],template:function(e,n){e&1&&(p(0,"gantt-links-overlay",0),F("lineClick",function(r){return n.lineClick.emit(r)}),g(),p(1,"div",1),G(2,qs,4,6,null,null,n.trackBy,!0),g(),f(4,Zs,4,4,"div",2)),e&2&&(v("flatItems",n.flatItems),d(),w("width",n.ganttUpper.view.width,"px"),d(),N(n.viewportItems),d(2),y(n.quickTimeFocus?4:-1))},dependencies:[zo,ee,Z,Oo,ko,Eo,Na,Va,Fo,Po,Ga],encapsulation:2})}}return i})(),ki=new Yt("gantt-abstract-token"),jo=typeof window<"u"&&!!window.CSS&&CSS.supports||(()=>!1);function Zo({element:i,style:a,value:t}){i.style[a]=t,jo(`-webkit-${a}: ${t}`)&&(i.style[`-webkit-${a}`]=t)}var Ua=100,di=80,Ko=(()=>{class i{get height(){return this.gantt.styles.headerHeight+"px"}get lineHeight(){return this.gantt.styles.headerHeight+"px"}constructor(){this.elementRef=h(z),this.gantt=h(ki),this.cdr=h(Ot),this.tableWidth=0,this.unsubscribe$=new O,this.className="gantt-table-header "}ngOnInit(){this.columnsChange(),this.columns.changes.pipe(b(this.unsubscribe$)).subscribe(()=>{!this.gantt?.table?.width&&!this.customWidth&&this.columnsChange()})}columnsChange(){let t=0;this.columns.forEach(e=>{e.columnWidth||(e.columnWidth=bt(Ua)),t+=Number(e.columnWidth.replace("px",""))}),this.tableWidth=this.gantt?.table?.width??this.customWidth??this.getCalcWidth(t),this.gantt.cdr.detectChanges()}dragFixed(t){t.movedWidth<t.minWidth&&Zo({element:t.target,style:"transform",value:`translate3d(${t.minWidth-t.originWidth}px, 0, 0)`})}onResizeStarted(t){let e=t.source.element.nativeElement;this.dragStartLeft=e.getBoundingClientRect().left}onResizeMoved(t,e){let n=t.source.element.nativeElement,s=n.getBoundingClientRect().left,r,o,l;e?(r=parseInt(e.columnWidth,10),o=r+(s-this.dragStartLeft),l=di):(r=this.elementRef.nativeElement.getBoundingClientRect().width,o=r+(s-this.dragStartLeft),l=di*this.columns.length),this.dragFixed({target:n,originWidth:r,movedWidth:o,minWidth:l}),this.showAuxiliaryLine(t)}onResizeEnded(t,e){let n=parseInt(e.columnWidth,10),r=t.source.element.nativeElement.getBoundingClientRect().left,o=parseInt(e.columnWidth,10)+(r-this.dragStartLeft),l=Math.max(o||0,di);e.columnWidth=bt(l),this.gantt.table&&this.gantt.table.columnChanges.emit({columns:this.columns}),this.tableWidth=this.gantt?.table?.width??this.customWidth??this.getCalcWidth(this.tableWidth-n+l),this.hideAuxiliaryLine(),t.source.reset()}onOverallResizeEnded(t){let n=t.source.element.nativeElement.getBoundingClientRect().left,s=this.elementRef.nativeElement.getBoundingClientRect().width,r=n-this.dragStartLeft;this.tableWidth=this.getCalcWidth(parseInt(s+r,10)),this.customWidth=this.tableWidth,this.gantt.table&&this.gantt.table.resizeChange.emit(this.tableWidth),this.hideAuxiliaryLine(),t.source.reset()}showAuxiliaryLine(t){let e=this.elementRef.nativeElement.getBoundingClientRect(),n=t.source.element.nativeElement.getBoundingClientRect(),s={x:n.left-e.left,y:n.top-e.top};this.resizeLineElementRef.nativeElement.style.left=`${s.x}px`,this.resizeLineElementRef.nativeElement.style.display="block"}hideAuxiliaryLine(){this.resizeLineElementRef.nativeElement.style.display="none"}getCalcWidth(t){return this.gantt.table?.maxWidth&&t>this.gantt.table?.maxWidth?this.gantt.table?.maxWidth:t}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-table-header"]],viewQuery:function(e,n){if(e&1&&pt(Ks,7),e&2){let s;k(s=E())&&(n.resizeLineElementRef=s.first)}},hostVars:6,hostBindings:function(e,n){e&2&&(be(n.className),w("height",n.height)("line-height",n.lineHeight))},inputs:{columns:"columns"},decls:8,vars:3,consts:[["resizeLine",""],["syncScrollX","ganttTableXScroll","cdkScrollable","",1,"gantt-table-header-container"],[1,"gantt-table-column",3,"width"],[1,"gantt-table-column","gantt-table-column-placeholder"],[3,"ngTemplateOutlet"],["cdkDrag","","cdkDragLockAxis","x","cdkDragBoundary",".gantt",1,"table-resize-handle",3,"cdkDragMoved","cdkDragStarted","cdkDragEnded"],[1,"table-resize-auxiliary-line"],[1,"gantt-table-column"],["cdkDrag","","cdkDragLockAxis","x","cdkDragBoundary",".gantt",1,"column-resize-handle",3,"cdkDragMoved","cdkDragStarted","cdkDragEnded"]],template:function(e,n){if(e&1){let s=U();p(0,"div",1),G(1,er,4,3,"div",2,Ye),D(3,"div",3),g(),f(4,nr,1,1,null,4),p(5,"div",5),F("cdkDragMoved",function(o){return x(s),S(n.onResizeMoved(o))})("cdkDragStarted",function(o){return x(s),S(n.onResizeStarted(o))})("cdkDragEnded",function(o){return x(s),S(n.onOverallResizeEnded(o))}),g(),D(6,"div",6,0)}e&2&&(w("width",n.tableWidth,"px"),d(),N(n.columns),d(3),y(!(n.gantt==null||n.gantt.table==null)&&n.gantt.table.settingsSlot?4:-1))},dependencies:[Z,De,ze],encapsulation:2})}}return i})(),Jo=(()=>{class i{set viewportItems(t){let e=t[0];e&&e.hasOwnProperty("items")&&(this.hasGroup=!0),this.ganttTableEmptyClass=!t?.length,this._viewportItems=t}get viewportItems(){return this._viewportItems}constructor(){this.gantt=h(ki),this.ganttUpper=h(A),this.cdr=h(Ot),this.document=h(Ui),this.elementRef=h(z),this.draggable=!1,this.dragDropped=new _,this.dragStarted=new _,this.dragEnded=new _,this.itemClick=new _,this.ganttTableClass=!0,this.ganttTableEmptyClass=!1,this.ganttTableDragging=!1,this.hasExpandIcon=!1,this.itemDragsMap=new Map,this.itemDragMoved=new O,this.destroy$=new O}ngOnInit(){this.columns.changes.pipe(Wt(this.columns),b(this.destroy$)).subscribe(()=>{this.hasExpandIcon=!1,this.columns.forEach(t=>{t.columnWidth||(t.columnWidth=bt(Ua)),t.showExpandIcon&&(this.hasExpandIcon=!0)}),this.cdr.detectChanges()})}ngAfterViewInit(){this.cdkDrags.changes.pipe(Wt(this.cdkDrags),b(this.destroy$)).subscribe(t=>{this.itemDragsMap.clear(),t.forEach(e=>{e.data&&this.itemDragsMap.set(e.element.nativeElement,e)})}),this.itemDragMoved.pipe(me(30),Bt(t=>t.source._dragRef.isDragging()),b(this.destroy$)).subscribe(t=>{this.onItemDragMoved(t)})}expandGroup(t){this.gantt.expandGroup(t)}expandChildren(t,e){t.stopPropagation(),this.gantt.expandChildren(e)}onItemDragStarted(t){this.ganttTableDragging=!0,this.getChildrenElementsByElement(t.source.element.nativeElement).forEach(n=>{n.classList.add("drag-item-hide")}),this.dragStarted.emit({source:t.source.data?.origin,sourceParent:this.getParentByItem(t.source.data)?.origin})}emitItemDragMoved(t){this.itemDragMoved.next(t)}onItemDragMoved(t){let e=this.document.elementFromPoint(t.pointerPosition.x,t.pointerPosition.y);if(!e){this.cleanupDragArtifacts();return}let n=e.classList.contains("gantt-table-item")?e:e.closest(".gantt-table-item");if(!n){this.cleanupDragArtifacts();return}if(this.itemDropTarget={id:this.itemDragsMap.get(n)?.data.id,position:this.getTargetPosition(n,t)},this.dropEnterPredicate){let s=this.itemDragsMap.get(n);this.dropEnterPredicate({source:t.source.data.origin,target:s.data.origin,dropPosition:this.itemDropTarget.position})?this.showDropPositionPlaceholder(n):(this.itemDropTarget=null,this.cleanupDragArtifacts(!1))}else this.showDropPositionPlaceholder(n)}onItemDragEnded(t){this.ganttTableDragging=!1,this.dragEnded.emit({source:t.source.data?.origin,sourceParent:this.getParentByItem(t.source.data)?.origin}),this.getChildrenElementsByElement(t.source.element.nativeElement).forEach(n=>{n.classList.remove("drag-item-hide")})}onListDropped(t){if(!this.itemDropTarget)return;let e=t.item.data,n=this.getParentByItem(e),s=this.getExpandChildrenByDrag(t.item),o=this.cdkDrags.find(u=>u.data?.id===this.itemDropTarget.id)?.data,l=this.getParentByItem(o);switch(this.removeItem(e,s),this.itemDropTarget.position){case"before":case"after":this.insertItem(o,e,s,this.itemDropTarget.position),e.updateLevel(o.level);break;case"inside":this.insertChildrenItem(o,e,s),e.updateLevel(o.level+1);break}this.dragDropped.emit({source:e.origin,sourceParent:n?.origin,target:o.origin,targetParent:l?.origin,dropPosition:this.itemDropTarget.position}),this.cleanupDragArtifacts(!0)}trackBy(t,e){return e.id||t}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}removeItem(t,e){this.viewportItems.splice(this.viewportItems.indexOf(t),1+e.length),this.flatItems.splice(this.flatItems.indexOf(t),1+e.length)}insertItem(t,e,n,s){if(s==="before")this.viewportItems.splice(this.viewportItems.indexOf(t),0,e,...n),this.flatItems.splice(this.flatItems.indexOf(t),0,e,...n);else{let r=this.cdkDrags.find(l=>l.data===t),o=0;t.expanded&&(o=this.getChildrenElementsByElement(r.element.nativeElement)?.length||0),this.viewportItems.splice(this.viewportItems.indexOf(t)+1+o,0,e,...n),this.flatItems.splice(this.flatItems.indexOf(t)+1+o,0,e,...n)}}insertChildrenItem(t,e,n){t.expanded&&(this.viewportItems.splice(this.viewportItems.indexOf(t)+t.children.length+1,0,e,...n),this.flatItems.splice(this.flatItems.indexOf(t)+t.children.length+1,0,e,...n)),t.children.push(e)}getParentByItem(t){return(this.flatItems||[]).find(e=>e.children?.includes(t))}getExpandChildrenByDrag(t){return t.data.expanded?this.getChildrenElementsByElement(t.element.nativeElement).map(n=>this.itemDragsMap.get(n).data):[]}getChildrenElementsByElement(t){let e=[],n=this.itemDragsMap.get(t),s=(n.getPlaceholderElement()||t).nextElementSibling,r=this.itemDragsMap.get(s);for(;r&&r.data.level>n.data.level;)e.push(s),s=s.nextElementSibling,r=this.itemDragsMap.get(s);return e}getTargetPosition(t,e){let n=t.getBoundingClientRect(),s=n.height*.3;return e.pointerPosition.y-n.top<s?"before":e.pointerPosition.y>=n.bottom-s?"after":"inside"}showDropPositionPlaceholder(t){this.cleanupDragArtifacts(),this.itemDropTarget&&t&&t.classList.add(`drop-position-${this.itemDropTarget.position}`)}cleanupDragArtifacts(t=!1){t&&(this.itemDropTarget=null,this.document.querySelectorAll(".drag-item-hide").forEach(e=>e.classList.remove("drag-item-hide"))),this.document.querySelectorAll(".drop-position-before").forEach(e=>e.classList.remove("drop-position-before")),this.document.querySelectorAll(".drop-position-after").forEach(e=>e.classList.remove("drop-position-after")),this.document.querySelectorAll(".drop-position-inside").forEach(e=>e.classList.remove("drop-position-inside"))}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["gantt-table-body"]],viewQuery:function(e,n){if(e&1&&pt(De,5),e&2){let s;k(s=E())&&(n.cdkDrags=s)}},hostVars:8,hostBindings:function(e,n){e&2&&W("gantt-table-draggable",n.draggable)("gantt-table-body",n.ganttTableClass)("gantt-table-empty",n.ganttTableEmptyClass)("gantt-table-dragging",n.ganttTableDragging)},inputs:{viewportItems:"viewportItems",flatItems:"flatItems",columns:"columns",groupTemplate:"groupTemplate",emptyTemplate:"emptyTemplate",rowBeforeTemplate:"rowBeforeTemplate",rowAfterTemplate:"rowAfterTemplate",draggable:"draggable",dropEnterPredicate:"dropEnterPredicate"},outputs:{dragDropped:"dragDropped",dragStarted:"dragStarted",dragEnded:"dragEnded",itemClick:"itemClick"},decls:3,vars:5,consts:[["cdkDropList","",1,"gantt-table-body-container",3,"cdkDropListDropped","cdkDropListAutoScrollStep","cdkDropListData","cdkDropListSortingDisabled"],[3,"ngTemplateOutlet"],["iconName","empty",1,"empty-icon"],[1,"empty-text"],[1,"gantt-table-group",3,"height","ngClass"],["cdkDrag","",1,"gantt-table-item",3,"cdkDragData","cdkDragDisabled","gantt-table-item-with-group","gantt-table-item-first-level-group","height","lineHeight","gantt-table-item-active"],[1,"gantt-table-group",3,"ngClass"],[1,"gantt-table-group-title",3,"click"],[1,"expand-icon",3,"iconName"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"group-title"],["cdkDrag","",1,"gantt-table-item",3,"click","cdkDragStarted","cdkDragEnded","cdkDragMoved","cdkDragData","cdkDragDisabled"],[3,"classList","width"],[1,"gantt-table-column","gantt-table-column-placeholder"],[3,"classList"],["iconName","drag","cdkDragHandle","",1,"gantt-drag-handle",3,"cdkDragHandleDisabled"],[1,"gantt-expand-icon",3,"marginLeft"],[1,"gantt-table-column-content"],[1,"gantt-expand-icon"],[3,"iconName"],[1,"expand-icon",3,"click","iconName"]],template:function(e,n){e&1&&(p(0,"div",0),F("cdkDropListDropped",function(r){return n.onListDropped(r)}),f(1,or,2,2),f(2,Dr,2,0),g()),e&2&&(v("cdkDropListAutoScrollStep",6)("cdkDropListData",n.viewportItems)("cdkDropListSortingDisabled",!0),d(),y(n.viewportItems!=null&&n.viewportItems.length?-1:1),d(),y(n.viewportItems&&n.viewportItems.length>0?2:-1))},dependencies:[Mn,Na,Z,ee,De,En,Va,Ga],encapsulation:2})}}return i})(),tl=(()=>{class i{get view(){return this.ganttUpper.view}onWindowResize(){this.computeScrollBarOffset()}constructor(){this.elementRef=h(z),this.ngZone=h(tt),this.dom=h(Be),this.dragContainer=h(le),this.ganttUpper=h(A),this.printService=h($o,{optional:!0}),this.verticalScrollbarWidth=0,this.horizontalScrollbarHeight=0,this.unsubscribe$=new O;let t=this.dragContainer;this.ganttUpper.dragContainer=t}ngOnInit(){let t=this.ngZone.isStable?St(Promise.resolve()):this.ngZone.onStable.pipe(Q(1));this.ngZone.runOutsideAngular(()=>{t.pipe(b(this.unsubscribe$)).subscribe(()=>{this.dom.initialize(this.elementRef),this.printService&&this.printService.register(this.elementRef),this.setupScrollClass(),this.setupResize(),this.setupViewScroll(),this.elementRef.nativeElement.style.opacity="1",this.ganttUpper.viewChange.pipe(Wt(null),b(this.unsubscribe$)).subscribe(()=>{this.scrollToToday()}),this.computeScrollBarOffset()})})}computeScrollBarOffset(){let t=this.dom.mainContainer,e=this.dom.verticalScrollContainer,n=0;e?n=e.offsetWidth-e.clientWidth:n=t?.offsetWidth-t?.clientWidth;let s=t?.offsetHeight-t?.clientHeight;this.verticalScrollbarWidth=n,this.horizontalScrollbarHeight=s}ngOnDestroy(){this.unsubscribe$.next()}setupViewScroll(){this.ganttUpper.disabledLoadOnScroll&&!this.ganttUpper.quickTimeFocus||this.dom.getViewerScroll(oe).pipe(b(this.unsubscribe$)).subscribe(t=>{if(t.direction===Gt.LEFT){let e=this.view.addStartDate();e&&(t.target.scrollLeft+=this.view.getDateRangeWidth(e.start,e.end),this.ganttUpper.loadOnScroll.observers&&this.ngZone.run(()=>this.ganttUpper.loadOnScroll.emit({start:e.start.getUnixTime(),end:e.end.getUnixTime()})))}if(t.direction===Gt.RIGHT){let e=this.view.addEndDate();e&&this.ganttUpper.loadOnScroll.observers&&this.ngZone.run(()=>this.ganttUpper.loadOnScroll.emit({start:e.start.getUnixTime(),end:e.end.getUnixTime()}))}})}setupResize(){this.dom.getResize().pipe(b(this.unsubscribe$)).subscribe(()=>{this.setupScrollClass()})}setupScrollClass(){let t=this.dom.mainContainer,e=t.offsetHeight;t.scrollHeight>e?this.elementRef.nativeElement.className="gantt gantt-scroll":this.elementRef.nativeElement.className="gantt"}scrollToToday(){let t=this.view.getTodayXPoint();this.dom.scrollMainContainer(t)}scrollToDate(t){let e;typeof t=="number"||t instanceof Date?e=this.view.getXPointByDate(new C(t)):e=this.view.getXPointByDate(t),this.dom.scrollMainContainer(e)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["ngx-gantt-root"]],contentQueries:function(e,n,s){if(e&1&&(P(s,xr,7),P(s,Sr,7)),e&2){let r;k(r=E())&&(n.sideTemplate=r.first),k(r=E())&&(n.mainTemplate=r.first)}},viewQuery:function(e,n){if(e&1&&pt(_i,7,z),e&2){let s;k(s=E())&&(n.backdrop=s.first)}},hostAttrs:[1,"gantt"],hostBindings:function(e,n){e&1&&F("resize",function(){return n.onWindowResize()},ji)},inputs:{sideWidth:"sideWidth"},features:[zt([Be,le,Ti])],ngContentSelectors:Tr,decls:4,vars:3,consts:[[1,"gantt-side",3,"width","padding-bottom"],[1,"gantt-container"],[3,"template"],[1,"gantt-side"],["syncScrollX","ganttTableXScroll","syncScrollY","ganttMainYScroll","cdkScrollable","",1,"gantt-side-container"],[3,"ngTemplateOutlet"],["syncScrollX","ganttMainXScroll"],[1,"gantt-main"],["syncScrollX","ganttMainXScroll","syncScrollY","ganttMainYScroll",1,"gantt-main-container"]],template:function(e,n){e&1&&(Zt(),f(0,Er,3,5,"div",0),f(1,Or,7,7,"div",1),Kt(2),f(3,Ir,1,1,"gantt-toolbar",2)),e&2&&(y(n.sideTemplate?0:-1),d(),y(n.mainTemplate?1:-1),d(2),y(n.ganttUpper.showToolbar||n.ganttUpper.toolbarTemplate?3:-1))},dependencies:[wn,Z,La,za,_i,Ro,ze,Ha],encapsulation:2})}}return i})(),el=(()=>{class i{set width(t){this.columnWidth=bt(t)}constructor(){this.ganttUpper=h(A),this.elementRef=h(z)}get classList(){return this.elementRef.nativeElement.classList}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["ngx-gantt-column"]],contentQueries:function(e,n,s){if(e&1&&(P(s,Rr,7),P(s,$r,7)),e&2){let r;k(r=E())&&(n.templateRef=r.first),k(r=E())&&(n.headerTemplateRef=r.first)}},hostAttrs:[1,"gantt-table-column"],inputs:{width:"width",name:"name",showExpandIcon:"showExpandIcon"},decls:0,vars:0,template:function(e,n){},encapsulation:2})}}return i})(),il=(()=>{class i{constructor(){this.draggable=!1,this.dragDropped=new _,this.dragStarted=new _,this.dragEnded=new _,this.columnChanges=new _,this.resizeChange=new _,this.itemClick=new _}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["ngx-gantt-table"]],contentQueries:function(e,n,s){if(e&1&&(P(s,Fr,7),P(s,Pr,7),P(s,Ra,7),P(s,Br,7),P(s,Wr,7)),e&2){let r;k(r=E())&&(n.rowBeforeTemplate=r.first),k(r=E())&&(n.rowAfterTemplate=r.first),k(r=E())&&(n.tableEmptyTemplate=r.first),k(r=E())&&(n.tableFooterTemplate=r.first),k(r=E())&&(n.settingsSlot=r.first)}},inputs:{draggable:"draggable",maxWidth:"maxWidth",width:"width",dropEnterPredicate:"dropEnterPredicate"},outputs:{dragDropped:"dragDropped",dragStarted:"dragStarted",dragEnded:"dragEnded",columnChanges:"columnChanges",resizeChange:"resizeChange",itemClick:"itemClick"},decls:0,vars:0,template:function(e,n){},encapsulation:2})}}return i})(),nl=(()=>{class i extends po{set loading(t){t?this.loadingDelay>0?this.loadingTimer=setTimeout(()=>{this._loading=t,this.cdr.markForCheck()},this.loadingDelay):this._loading=t:(clearTimeout(this.loadingTimer),this._loading=t)}get loading(){return this._loading}constructor(){super(),this.viewportRuler=h(Dn),this.maxLevel=2,this.virtualScrollEnabled=!0,this.loadingDelay=0,this.linkDragStarted=new _,this.linkDragEnded=new _,this.lineClick=new _,this.selectedChange=new _,this.virtualScrolledIndexChange=new _,this.tableScrollWidth=kt(0),this.flatItems=[],this.viewportItems=[],this._loading=!1,this.rangeStart=0,this.rangeEnd=0}ngOnInit(){super.ngOnInit();let t=this.ngZone.isStable?St(Promise.resolve()):this.ngZone.onStable.pipe(Q(1));this.ngZone.runOutsideAngular(()=>{t.pipe(b(this.unsubscribe$)).subscribe(()=>{this.dragContainer.linkDragStarted.pipe(b(this.unsubscribe$)).subscribe(e=>{this.linkDragStarted.emit(e)}),this.dragContainer.linkDragEnded.pipe(b(this.unsubscribe$)).subscribe(e=>{this.linkDragEnded.emit(e)})})}),this.virtualScrollEnabled||(this.viewportItems=this.flatItems.slice(this.rangeStart,this.rangeEnd),this.computeRefs())}computeRefs(){let t=[];this.viewportItems.forEach(e=>{if(!e.hasOwnProperty("items")){let n=e;n.links&&n.links.forEach(s=>{this.flatItemsMap[s.link]&&t.push(this.flatItemsMap[s.link])}),t.push(e)}}),this.computeItemsRefs(...Re(t,"id")),this.flatItems=[...this.flatItems],this.viewportItems=[...this.viewportItems]}setupItems(){super.setupItems(),this.buildFlatItems(),this.viewportItems=this.flatItems.slice(this.rangeStart,this.rangeEnd)}ngAfterViewInit(){this.virtualScrollEnabled&&this.virtualScroll.renderedRangeStream.pipe(b(this.unsubscribe$)).subscribe(t=>{let e=this.elementRef.nativeElement.querySelector(".gantt-links-overlay");e.style.top=`${-(this.styles.lineHeight*t.start)}px`,this.rangeStart=t.start,this.rangeEnd=t.end,this.viewportItems=this.flatItems.slice(t.start,t.end),this.appendDraggingItemToViewportItems(),this.computeRefs()}),this.initScrollContainerObserver()}ngAfterViewChecked(){if(this.virtualScrollEnabled&&this.viewportRuler&&this.virtualScroll.getRenderedRange().end>0){let t=this.ngZone.isStable?St(Promise.resolve()):this.ngZone.onStable.pipe(Q(1));this.ngZone.runOutsideAngular(()=>{t.pipe(b(this.unsubscribe$)).subscribe(()=>{this.ganttRoot.verticalScrollbarWidth||(this.ganttRoot.computeScrollBarOffset(),this.cdr.markForCheck())})})}}buildFlatItems(){let t=[];this.groups.length&&this.groups.forEach(e=>{if(t.push(e),e.expanded){let n=ut(e.items);t.push(...n)}}),this.items.length&&t.push(...ut(this.items)),this.flatItems=[...t],this.flatItemsMap=Pa(this.flatItems,"id"),this.virtualScrollEnabled||(this.rangeStart=0,this.rangeEnd=this.flatItems.length)}afterExpand(){this.buildFlatItems(),this.viewportItems=this.flatItems.slice(this.rangeStart,this.rangeEnd)}appendDraggingItemToViewportItems(){if(this.draggingItem){let t=this.viewportItems.find(e=>e.id===this.draggingItem.id);t||(t=this.flatItems.find(e=>e.id===this.draggingItem.id),t&&this.viewportItems.push(t))}}expandChildren(t){t.expanded?(t.setExpand(!1),this.afterExpand(),this.expandChange.emit(t)):(t.setExpand(!0),this.async&&this.childrenResolve&&t.children.length===0?(t.loading=!0,this.childrenResolve(t.origin).pipe(Q(1),Hi(()=>{t.loading=!1,this.afterExpand(),this.expandChange.emit(t),this.cdr.detectChanges()})).subscribe(e=>{t.addChildren(e),this.computeItemsRefs(...t.children)})):(this.computeItemsRefs(...t.children),this.afterExpand(),this.expandChange.emit(t)))}selectItem(t){if(this.table.itemClick.emit({event:t.event,current:t.current}),!this.selectable)return;let{event:e,selectedValue:n}=t;this.selectionModel.toggle(n.id);let s=this.selectionModel.selected;if(this.multiple){let r=this.getGanttItems(s).map(o=>o.origin);this.selectedChange.emit({event:e,current:n,selectedValue:r})}else{let r=this.getGanttItem(s[0])?.origin;this.selectedChange.emit({event:e,current:n,selectedValue:r})}}scrollToToday(){this.ganttRoot.scrollToToday()}scrollToDate(t){this.ganttRoot.scrollToDate(t)}scrolledIndexChange(t){this.virtualScrolledIndexChange.emit({index:t,renderedRange:{start:this.rangeStart,end:this.rangeEnd},count:this.flatItems.length})}expandGroups(t){this.groups.forEach(e=>{e.setExpand(t)}),this.afterExpand(),this.expandChange.emit(this.groups),this.cdr.detectChanges()}expandGroup(t){t.setExpand(!t.expanded),this.afterExpand(),this.expandChange.emit(t),this.cdr.detectChanges()}itemDragStarted(t){this.table.dragStarted.emit(t),this.draggingItem=t.source}itemDragEnded(t){this.table.dragEnded.emit(t),this.draggingItem=null}initScrollContainerObserver(){this.ganttTableBody&&this.ganttTableBody.elementRef?.nativeElement&&(this.tableScrollWidth.set(this.ganttTableBody.elementRef.nativeElement.clientWidth),typeof ResizeObserver<"u"&&(this.resizeObserver=new ResizeObserver(t=>{let e=t[0].target.clientWidth;this.tableScrollWidth()!==e&&(this.tableScrollWidth.set(e),this.cdr.markForCheck())}),this.resizeObserver.observe(this.ganttTableBody.elementRef.nativeElement)))}ngOnDestroy(){super.ngOnDestroy(),this.resizeObserver&&this.resizeObserver.disconnect()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["ngx-gantt"]],contentQueries:function(e,n,s){if(e&1&&(P(s,il,5),P(s,Ra,7),P(s,zr,7),P(s,el,5)),e&2){let r;k(r=E())&&(n.table=r.first),k(r=E())&&(n.tableEmptyTemplate=r.first),k(r=E())&&(n.footerTemplate=r.first),k(r=E())&&(n.columns=r)}},viewQuery:function(e,n){if(e&1&&(pt(Lr,5),pt(we,5),pt(Hr,7)),e&2){let s;k(s=E())&&(n.ganttRoot=s.first),k(s=E())&&(n.virtualScroll=s.first),k(s=E())&&(n.ganttTableBody=s.first)}},inputs:{maxLevel:"maxLevel",async:"async",childrenResolve:"childrenResolve",linkable:"linkable",loading:"loading",virtualScrollEnabled:"virtualScrollEnabled",loadingDelay:"loadingDelay"},outputs:{linkDragStarted:"linkDragStarted",linkDragEnded:"linkDragEnded",lineClick:"lineClick",selectedChange:"selectedChange",virtualScrolledIndexChange:"virtualScrolledIndexChange"},features:[zt([{provide:A,useExisting:i},{provide:ki,useExisting:ge(()=>i)}]),ye],decls:22,vars:49,consts:[["ganttRoot",""],["tableHeader",""],["ganttTableBody",""],[1,"gantt-header"],[3,"columns"],[1,"gantt-container-header"],["syncScrollX","ganttMainXScroll"],[1,"gantt-virtual-scroll-viewport",3,"scrolledIndexChange","ngClass","itemSize","minBufferPx","maxBufferPx"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"gantt-side"],["syncScrollX","ganttTableXScroll","syncScrollY","ganttMainYScroll",1,"gantt-side-container"],[1,"gantt-table"],[3,"dragDropped","dragStarted","dragEnded","itemClick","flatItems","viewportItems","columns","groupTemplate","emptyTemplate","rowBeforeTemplate","rowAfterTemplate","draggable","dropEnterPredicate"],[1,"gantt-container"],[1,"gantt-main"],["syncScrollX","ganttMainXScroll","syncScrollY","ganttMainYScroll",3,"barClick","lineClick","ganttRoot","flatItems","viewportItems","groupHeaderTemplate","itemTemplate","barTemplate","rangeTemplate","baselineTemplate","quickTimeFocus"],[3,"ganttRoot","hasFooter","tableWidth","tableScrollWidth"],["cdkScrollable","",1,"gantt-footer",3,"right","bottom"],["cdkScrollable","",1,"gantt-footer"],["syncScrollX","ganttTableXScroll",1,"gantt-table-footer",3,"width"],["syncScrollX","ganttMainXScroll",1,"gantt-container-footer"],["syncScrollX","ganttTableXScroll",1,"gantt-table-footer"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"]],template:function(e,n){if(e&1){let s=U();p(0,"ngx-gantt-root",null,0)(2,"div",3),D(3,"gantt-table-header",4,1),p(5,"div",5),D(6,"gantt-calendar-header",6),g()(),f(7,Nr,1,0,"gantt-loader"),p(8,"cdk-virtual-scroll-viewport",7),F("scrolledIndexChange",function(o){return x(s),S(n.scrolledIndexChange(o))}),R(9,Ur,1,0,"ng-container",8),p(10,"div",9)(11,"div",10)(12,"div",11)(13,"gantt-table-body",12,2),F("dragDropped",function(o){return x(s),S(n.table.dragDropped.emit(o))})("dragStarted",function(o){return x(s),S(n.itemDragStarted(o))})("dragEnded",function(o){return x(s),S(n.itemDragEnded(o))})("itemClick",function(o){return x(s),S(n.selectItem(o))}),g()()()(),p(15,"div",13),D(16,"gantt-calendar-grid",6),p(17,"div",14)(18,"gantt-main",15),F("barClick",function(o){return x(s),S(n.barClick.emit(o))})("lineClick",function(o){return x(s),S(n.lineClick.emit(o))}),g()()()(),D(19,"gantt-drag-backdrop")(20,"gantt-scrollbar",16),f(21,Xr,3,6,"div",17),g()}if(e&2){let s=yt(1),r=yt(4);d(3),v("columns",n.columns),d(3),w("padding-right",s.verticalScrollbarWidth,"px"),d(),y(n.loading?7:-1),d(),w("top",n.styles.headerHeight,"px"),v("ngClass",ln(45,Vr,!n.virtualScrollEnabled,n.virtualScrollEnabled,(n.table==null?null:n.table.tableFooterTemplate)||n.footerTemplate))("itemSize",n.styles.lineHeight)("minBufferPx",n.styles.lineHeight*10)("maxBufferPx",n.styles.lineHeight*20),d(),v("cdkVirtualForOf",n.flatItems)("cdkVirtualForTrackBy",n.trackBy),d(),w("width",r.tableWidth+1,"px")("padding-bottom",s.horizontalScrollbarHeight,"px"),d(3),v("flatItems",n.flatItems)("viewportItems",n.viewportItems)("columns",n.columns)("groupTemplate",n.groupTemplate)("emptyTemplate",n.table.tableEmptyTemplate||n.tableEmptyTemplate)("rowBeforeTemplate",n.table==null?null:n.table.rowBeforeTemplate)("rowAfterTemplate",n.table==null?null:n.table.rowAfterTemplate)("draggable",n.table.draggable)("dropEnterPredicate",n.table.dropEnterPredicate),d(3),w("padding-right",s.verticalScrollbarWidth,"px")("padding-bottom",s.horizontalScrollbarHeight,"px"),d(2),v("ganttRoot",s)("flatItems",n.flatItems)("viewportItems",n.viewportItems)("groupHeaderTemplate",n.groupHeaderTemplate)("itemTemplate",n.itemTemplate)("barTemplate",n.barTemplate)("rangeTemplate",n.rangeTemplate)("baselineTemplate",n.baselineTemplate)("quickTimeFocus",n.quickTimeFocus),d(),w("left",r.tableWidth+1,"px"),d(),v("ganttRoot",s)("hasFooter",!!(n.table!=null&&n.table.tableFooterTemplate))("tableWidth",r.tableWidth)("tableScrollWidth",n.tableScrollWidth()),d(),y(n.table!=null&&n.table.tableFooterTemplate||n.footerTemplate?21:-1)}},dependencies:[tl,Ko,La,Mo,we,_n,ee,xn,Jo,za,Xo,_i,Io,Z,ze,Ha],encapsulation:2,changeDetection:0})}}return i})(),Jc=(()=>{class i{constructor(){}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=fe({type:i})}static{this.\u0275inj=ue({providers:[we,{provide:xi,useValue:Vt},...eo],imports:[un,On,Sn,nl]})}}return i})();var ll=["content"],dl=["nz-segmented-item",""],Aa=["*"];function cl(i,a){}function hl(i,a){if(i&1&&(p(0,"span"),R(1,cl,0,0,"ng-template",3),g()),i&2){c(2);let t=yt(5);d(),v("ngTemplateOutlet",t)}}function pl(i,a){if(i&1&&(p(0,"span",4),D(1,"nz-icon",5),g(),f(2,hl,2,1,"span")),i&2){let t=c();d(),v("nzType",a),d(),y(t.hasLabel()?2:-1)}}function ml(i,a){}function gl(i,a){if(i&1&&R(0,ml,0,0,"ng-template",3),i&2){c();let t=yt(5);v("ngTemplateOutlet",t)}}function ul(i,a){i&1&&Kt(0)}var fl=(i,a)=>a.value;function yl(i,a){if(i&1){let t=U();p(0,"div",1),F("@thumbMotion.done",function(n){x(t);let s=c();return S(s.handleThumbAnimationDone(n))}),g()}if(i&2){let t=c();v("@thumbMotion",t.animationState)}}function vl(i,a){if(i&1&&(p(0,"label",2),mt(1),g()),i&2){let t=a.$implicit;v("nzIcon",t.icon)("nzValue",t.value)("nzDisabled",t.disabled),d(),Mt(" ",t.label," ")}}function bl(i,a){if(i&1&&G(0,vl,2,4,"label",2,fl),i&2){let t=c();N(t.normalizedOptions)}}var Ei=(()=>{class i{defaultName=h(Tn).getId("segmented_");name=kt(this.defaultName);selected$=new pe(1);activated$=new pe(1);change$=new O;disabled$=new pe(1);animationDone$=new O;keydown$=new O;setName(t){this.name.set(typeof t>"u"?this.defaultName:t)}ngOnDestroy(){this.selected$.complete(),this.activated$.complete(),this.change$.complete(),this.disabled$.complete(),this.animationDone$.complete(),this.keydown$.complete()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=ht({token:i,factory:i.\u0275fac})}return i})(),Ut=(()=>{class i{animationType=h(Yi,{optional:!0});service=h(Ei);elementRef=h(z);destroyRef=h(Ai);templateRef=hn.required("content",{read:Qe});nzValue=at.required();nzIcon=at();nzDisabled=at(!1,{transform:te});hasLabel=Ce(()=>this.templateRef().createEmbeddedView({}).rootNodes.some(t=>t.textContent.trim().length>0));name=this.service.name.asReadonly();isChecked=kt(!1);parentDisabled=yn(this.service.disabled$,{initialValue:!1});finalDisabled=Ce(()=>this.nzDisabled()||this.parentDisabled());ngOnInit(){this.service.selected$.pipe(Gi(t=>{this.isChecked.set(!1),t===this.nzValue()&&this.service.activated$.next(this.elementRef.nativeElement)}),qt(t=>this.animationType==="NoopAnimations"?Pi(t):this.service.animationDone$.pipe(Bt(e=>e.toState==="to"||e.toState==="toVertical"),Q(1),Qt(()=>t))),Bt(t=>t===this.nzValue()),Lt(this.destroyRef)).subscribe(()=>this.isChecked.set(!0))}handleClick(){!this.nzDisabled()&&!this.parentDisabled()&&(this.service.selected$.next(this.nzValue()),this.service.change$.next(this.nzValue()))}handleKeydown(t){this.finalDisabled()||(t.keyCode===37||t.keyCode===39||t.keyCode===38||t.keyCode===40)&&this.service.keydown$.next(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=I({type:i,selectors:[["label","nz-segmented-item",""],["label","nzSegmentedItem",""]],viewQuery:function(e,n){e&1&&Ze(n.templateRef,ll,5,Qe),e&2&&ve()},hostAttrs:[1,"ant-segmented-item"],hostVars:4,hostBindings:function(e,n){e&1&&F("click",function(){return n.handleClick()})("keydown",function(r){return n.handleKeydown(r)}),e&2&&W("ant-segmented-item-selected",n.isChecked())("ant-segmented-item-disabled",n.finalDisabled())},inputs:{nzValue:[1,"nzValue"],nzIcon:[1,"nzIcon"],nzDisabled:[1,"nzDisabled"]},exportAs:["nzSegmentedItem"],attrs:dl,ngContentSelectors:Aa,decls:6,vars:5,consts:[["content",""],["type","radio",1,"ant-segmented-item-input",3,"click","disabled","checked"],[1,"ant-segmented-item-label"],[3,"ngTemplateOutlet"],[1,"ant-segmented-item-icon"],[3,"nzType"]],template:function(e,n){if(e&1){let s=U();Zt(),p(0,"input",1),F("click",function(o){return x(s),S(o.stopPropagation())}),g(),p(1,"div",2),f(2,pl,3,2)(3,gl,1,1,null,3),g(),R(4,ul,1,0,"ng-template",null,0,cn)}if(e&2){let s;v("disabled",n.finalDisabled())("checked",n.isChecked()),$("name",n.name()),d(),$("aria-selected",n.isChecked()),d(),y((s=n.nzIcon())?2:3,s)}},dependencies:[ti,In,Z],encapsulation:2,changeDetection:0})}return i})();function Cl(i){return i.map(a=>typeof a=="string"||typeof a=="number"?{label:`${a}`,value:a}:a)}var _l="segmented",wl=(()=>{let i,a=[],t=[];return class Le{static{let n=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[Cn()],Fi(null,null,i,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:s=>"nzSize"in s,get:s=>s.nzSize,set:(s,r)=>{s.nzSize=r}},metadata:n},a,t),n&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})}_nzModuleName=_l;nzConfigService=h(bn);cdr=h(Ot);service=h(Ei);injector=h(Ni);dir=h(vn).valueSignal;nzBlock=!1;nzDisabled=!1;nzOptions=[];nzVertical=!1;nzShape="default";nzSize=Ue(this,a,"default");nzName=Ue(this,t);nzValueChange=new _;viewItemCmps=pn(Ut);contentItemCmps=mn(Ut);renderedItemCmps=Ce(()=>this.viewItemCmps().concat(this.contentItemCmps()));isDisabledFirstChange=!0;value;animationState={value:"to",params:ce()};normalizedOptions=[];onChange=()=>{};onTouched=()=>{};constructor(){this.service.selected$.pipe(Lt()).subscribe(n=>{this.value=n}),this.service.change$.pipe(Lt()).subscribe(n=>{this.nzValueChange.emit(n),this.onChange(n)}),this.service.activated$.pipe(zi(2,1),Lt()).subscribe(n=>{this.nzVertical?(this.animationState={value:"fromVertical",params:ce(n[0],!0)},this.cdr.detectChanges(),this.animationState={value:"toVertical",params:ce(n[1],!0)},this.cdr.detectChanges()):(this.animationState={value:"from",params:ce(n[0])},this.cdr.detectChanges(),this.animationState={value:"to",params:ce(n[1])},this.cdr.detectChanges())}),this.service.keydown$.pipe(Bt(()=>!this.nzDisabled),Lt()).subscribe(n=>this.onKeyDown(n)),Zi(()=>{_e(()=>{let n=this.renderedItemCmps();n.length&&(this.value===void 0||!n.some(s=>s.nzValue()===this.value))&&this.service.selected$.next(n[0].nzValue())},{injector:this.injector})})}ngOnChanges(n){let{nzName:s,nzOptions:r,nzDisabled:o}=n;s&&this.service.setName(this.nzName),r&&(this.normalizedOptions=Cl(r.currentValue)),o&&this.service.disabled$.next(o.currentValue)}handleThumbAnimationDone(n){(n.toState==="to"||n.toState==="toVertical")&&(this.animationState=null),this.service.animationDone$.next(n)}onOffset(n){let s=this.renderedItemCmps(),r=s.length,o=s.findIndex(T=>T.nzValue()===this.value),l=(o+n+r)%r;for(;s[l].nzDisabled()&&(l=(l+Math.sign(n)+r)%r,l!==o););let u=s[l];u&&(this.service.selected$.next(u.nzValue()),this.service.change$.next(u.nzValue()))}onKeyDown(n){switch(n.keyCode){case 38:this.onOffset(-1);break;case 37:this.onOffset(this.dir()==="rtl"?1:-1);break;case 40:this.onOffset(1);break;case 39:this.onOffset(this.dir()==="rtl"?-1:1);break}}writeValue(n){this.service.selected$.next(n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.nzDisabled=this.isDisabledFirstChange&&this.nzDisabled||n,this.isDisabledFirstChange=!1}static \u0275fac=function(s){return new(s||Le)};static \u0275cmp=I({type:Le,selectors:[["nz-segmented"]],contentQueries:function(s,r,o){s&1&&nn(o,r.contentItemCmps,Ut,4),s&2&&ve()},viewQuery:function(s,r){s&1&&Ze(r.viewItemCmps,Ut,5),s&2&&ve()},hostAttrs:["role","radiogroup","aria-label","segmented control",1,"ant-segmented"],hostVars:15,hostBindings:function(s,r){s&2&&($("tabindex",r.nzDisabled?void 0:0),W("ant-segmented-disabled",r.nzDisabled)("ant-segmented-rtl",r.dir()==="rtl")("ant-segmented-lg",r.nzSize==="large")("ant-segmented-sm",r.nzSize==="small")("ant-segmented-block",r.nzBlock)("ant-segmented-vertical",r.nzVertical)("ant-segmented-shape-round",r.nzShape==="round"))},inputs:{nzBlock:[2,"nzBlock","nzBlock",te],nzDisabled:[2,"nzDisabled","nzDisabled",te],nzOptions:"nzOptions",nzVertical:[2,"nzVertical","nzVertical",te],nzShape:"nzShape",nzSize:"nzSize",nzName:"nzName"},outputs:{nzValueChange:"nzValueChange"},exportAs:["nzSegmented"],features:[zt([Ei,{provide:jn,useExisting:ge(()=>Le),multi:!0}]),Et],ngContentSelectors:Aa,decls:4,vars:1,consts:[[1,"ant-segmented-group"],[1,"ant-segmented-thumb","ant-segmented-thumb-motion"],["nz-segmented-item","",3,"nzIcon","nzValue","nzDisabled"]],template:function(s,r){s&1&&(Zt(),p(0,"div",0),f(1,yl,1,1,"div",1),Kt(2,0,null,bl,2,0),g()),s&2&&(d(),y(r.animationState?1:-1))},dependencies:[ti,Rn,Ut],encapsulation:2,data:{animation:[$n]},changeDetection:0})}})();function ce(i,a=!1){return a?{transform:i?.offsetTop??0,width:i?.clientWidth??0,height:i?.clientHeight??0,vertical:a}:{transform:i?.offsetLeft??0,width:i?.clientWidth??0}}var Dh=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=fe({type:i});static \u0275inj=ue({imports:[wl,Ut]})}return i})();export{Pt as a,m as b,Ft as c,mi as d,xi as e,el as f,il as g,nl as h,Jc as i,wl as j,Dh as k};
