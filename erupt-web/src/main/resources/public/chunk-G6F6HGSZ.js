import{a as Ua}from"./chunk-77XHWXNN.js";import{a as Xr,b as ta,c as dt,d as na,e as ia,f as ai,g as ra}from"./chunk-PB5ZWPSS.js";import{j as Jn,k as Vr}from"./chunk-GHVLSWOE.js";import{c as Kr,e as ea}from"./chunk-UKGVOA6X.js";import{c as oa}from"./chunk-SJN4RJQG.js";import"./chunk-CWRPY4KV.js";import{$a as Mr,$b as ii,Aa as Xt,Bc as qr,Db as Je,Ea as hr,Eb as Ir,Fa as st,Ga as xr,Ha as wr,Hc as Jr,Ia as vr,Jc as Zr,K as yt,Ka as be,La as Ri,Ma as zr,Na as Gn,Nb as Zn,O as sr,Oa as Hn,Ob as Ar,P as Ln,Pa as yr,Pb as Br,Q as cr,Qa as bt,Qb as Xn,R as pr,Ta as $e,Tb as St,Ua as Qn,Ub as Kn,V as dr,Va as ct,Vb as Tt,W as $t,Wb as Mt,X as qt,Xa as Yn,Xb as Rr,Y as mr,Ya as br,Yb as ei,Za as Sr,Zb as ti,_a as Tr,_b as ni,ac as oi,bb as Or,bc as ri,ca as ur,cb as Er,cc as Lr,da as ke,db as Pr,ec as Wr,fa as oe,fc as Ur,g as ir,gc as jr,hb as Nr,ia as re,ic as Gr,l as or,lb as kr,n as rr,o as ar,oa as Wn,oc as Hr,p as lr,pa as _r,q as Bn,r as lt,ra as Un,rb as qn,sa as fr,tb as pt,tc as Qr,va as gr,vc as Yr,w as A,wa as Jt,x as Rn,xa as Cr,ya as Zt,yb as qe,yc as $r,za as jn}from"./chunk-WDJ5IFXN.js";import{$a as Ni,$e as je,$h as Ko,Ab as Me,Af as $o,B as Lt,Bb as pe,Bc as Oo,Ca as xo,Cb as He,Cd as ko,Db as H,Dh as Qt,Ea as Pi,Eb as B,Fa as wo,Fb as R,Fc as Ce,Fe as Ao,Ga as a,Gb as yo,Ha as w,Hc as ie,Ia as Ft,Ib as bo,Ic as Pn,Id as ki,J as wt,Jb as ae,Jf as qo,K as mo,Ka as Tn,Kb as fe,Kc as Eo,Kf as Jo,L as uo,La as Dt,Lb as L,Le as Bo,Mb as at,Me as Vi,Na as jt,Nb as De,Oa as F,Ob as d,Oc as et,Oe as Ro,Pa as Mn,Pb as D,Pc as Nn,Qa as E,Qb as N,Qc as Oe,Qd as Fn,R as zn,Ra as _e,Re as Lo,Sa as gt,Sc as Po,T as _o,Tb as v,Tc as No,Te as Dn,Ua as Ae,Ub as z,Ue as tt,Vb as y,Wa as M,Wc as Fo,X as Nt,Xa as vo,Y as ft,Yd as J,Z as Ei,Ze as Ht,_ as fo,_a as zo,_h as Xo,a as cn,aa as yn,ab as f,ai as vt,aj as nr,bc as On,be as Qe,bi as kn,cb as g,cc as Fi,ci as In,d as Rt,da as go,dc as de,di as er,e as co,ea as Ve,eb as O,ec as te,f as po,fa as ue,fb as b,fc as So,gb as S,gc as En,gj as Yt,ha as ot,hb as _,hf as Ai,hh as W,ia as T,ib as r,ih as we,ja as m,jb as l,jc as To,jf as Wo,jh as Be,ka as u,kb as h,kc as ge,kd as Do,ke as Io,kf as Uo,kh as Ye,la as Co,lc as ye,lf as jo,ma as ho,mc as Gt,mf as Go,na as bn,o as We,oa as Wt,ob as $,of as Ho,oh as Zo,p as me,pa as xe,pb as q,pc as ne,pe as Ii,ph as G,qa as Sn,qb as rt,qh as X,ri as Vn,sh as Y,ta as ze,tb as x,tc as Di,th as dn,ti as An,ua as Ut,uc as Mo,ui as zt,va as Ue,vf as Qo,vi as tr,wb as C,wf as Bi,x as pn,xj as Fr,yf as Yo,yj as $n,zb as s,ze as Vo,zj as Dr}from"./chunk-VOBISER7.js";import{a as sn,b as Oi,g as Wa,h as so}from"./chunk-WWX6BADO.js";var Li=class{_document;_textarea;constructor(c,e){this._document=e;let i=this._textarea=this._document.createElement("textarea"),t=i.style;t.position="fixed",t.top=t.opacity="0",t.left="-999em",i.setAttribute("aria-hidden","true"),i.value=c,i.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(i)}copy(){let c=this._textarea,e=!1;try{if(c){let i=this._document.activeElement;c.select(),c.setSelectionRange(0,c.value.length),e=this._document.execCommand("copy"),i&&i.focus()}}catch{}return e}destroy(){let c=this._textarea;c&&(c.remove(),this._textarea=void 0)}},aa=(()=>{class n{_document=T(Wt);constructor(){}copy(e){let i=this.beginCopy(e),t=i.copy();return i.destroy(),t}beginCopy(e){return new Li(e,this._document)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Wi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["button","nz-trans-button",""]],hostVars:8,hostBindings:function(i,t){i&2&&fe("border","0")("background","transparent")("padding","0")("line-height","inherit")}})}return n})(),Ui=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({})}return n})();function Ha(n,c){if(n&1&&($(0),h(1,"nz-icon",2),q()),n&2){let e=c.$implicit;a(),_("nzType",e)}}var Qa=["textarea"];function Ya(n,c){if(n&1){let e=x();r(0,"textarea",2,0),C("blur",function(){m(e);let t=s();return u(t.confirm())}),l(),r(2,"button",3),C("click",function(){m(e);let t=s();return u(t.confirm())}),h(3,"nz-icon",4),l()}}function $a(n,c){if(n&1&&($(0),h(1,"nz-icon",7),q()),n&2){let e=c.$implicit;a(),_("nzType",e)}}function qa(n,c){if(n&1){let e=x();r(0,"button",5),C("click",function(){m(e);let t=s();return u(t.onClick())}),M(1,$a,2,1,"ng-container",6),l()}if(n&2){let e=s();_("nzTooltipTitle",e.tooltip===null?null:e.tooltip||(e.locale==null?null:e.locale.edit)),a(),_("nzStringTemplateOutlet",e.icon)}}var Ja=["ellipsisContainer"],Za=["expandable"],Xa=["contentTemplate"],Ka=["*"],el=n=>({content:n});function tl(n,c){n&1&&pe(0)}function nl(n,c){if(n&1&&(f(0,tl,1,0),d(1)),n&2){let e=c.content;g(e?-1:0),a(),N(" ",e," ")}}function il(n,c){}function ol(n,c){if(n&1&&d(0),n&2){let e=s(3);N(" ",e.nzSuffix," ")}}function rl(n,c){if(n&1&&(M(0,il,0,0,"ng-template",5),f(1,ol,1,1)),n&2){let e=s(2),i=ae(1);_("ngTemplateOutlet",i)("ngTemplateOutletContext",te(3,el,e.nzContent)),a(),g(e.nzSuffix?1:-1)}}function al(n,c){if(n&1&&d(0),n&2){let e=s(3);N(" ",e.ellipsisStr," ")}}function ll(n,c){if(n&1&&d(0),n&2){let e=s(3);N(" ",e.nzSuffix," ")}}function sl(n,c){if(n&1){let e=x();r(0,"a",7,2),C("click",function(){m(e);let t=s(3);return u(t.onExpand())}),d(2),l()}if(n&2){let e=s(3);a(2),N(" ",e.locale==null?null:e.locale.expand," ")}}function cl(n,c){if(n&1&&(h(0,"span",null,1),f(2,al,1,1),f(3,ll,1,1),f(4,sl,3,1,"a",6)),n&2){let e=s(2);a(2),g(e.isEllipsis?2:-1),a(),g(e.nzSuffix?3:-1),a(),g(e.nzExpandable&&e.isEllipsis?4:-1)}}function pl(n,c){if(n&1&&f(0,rl,2,5)(1,cl,5,3),n&2){let e=s();g(e.expanded||!e.hasOperationsWithEllipsis&&e.nzEllipsisRows===1&&!e.hasEllipsisObservers||e.canCssEllipsis||e.nzSuffix&&e.expanded?0:1)}}function dl(n,c){if(n&1){let e=x();r(0,"nz-text-edit",8),C("endEditing",function(t){m(e);let o=s();return u(o.onEndEditing(t))})("startEditing",function(){m(e);let t=s();return u(t.onStartEditing())}),l()}if(n&2){let e=s();_("text",e.nzContent)("icon",e.nzEditIcon)("tooltip",e.nzEditTooltip)}}function ml(n,c){if(n&1){let e=x();r(0,"nz-text-copy",9),C("textCopy",function(t){m(e);let o=s();return u(o.onTextCopy(t))}),l()}if(n&2){let e=s();_("text",e.copyText)("tooltips",e.nzCopyTooltips)("icons",e.nzCopyIcons)}}var ji=(()=>{class n{cdr=T(Ce);clipboard=T(aa);i18n=T(Qt);destroyRef=T(xe);copied=!1;copyId;locale;nativeElement=T(Ue).nativeElement;copyTooltip=null;copedTooltip=null;copyIcon="copy";copedIcon="check";text;tooltips;icons=["copy","check"];textCopy=new w;constructor(){this.destroyRef.onDestroy(()=>{clearTimeout(this.copyId)})}ngOnInit(){this.i18n.localeChange.pipe(J(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.updateTooltips(),this.cdr.markForCheck()})}ngOnChanges(e){let{tooltips:i,icons:t}=e;i&&this.updateTooltips(),t&&this.updateIcons()}onClick(){if(this.copied)return;this.copied=!0,this.cdr.detectChanges();let e=this.text;this.textCopy.emit(e),this.clipboard.copy(e),this.onCopied()}onCopied(){clearTimeout(this.copyId),this.copyId=setTimeout(()=>{this.copied=!1,this.cdr.detectChanges()},3e3)}updateTooltips(){if(this.tooltips===null)this.copedTooltip=null,this.copyTooltip=null;else if(Array.isArray(this.tooltips)){let[e,i]=this.tooltips;this.copyTooltip=e||this.locale?.copy,this.copedTooltip=i||this.locale?.copied}else this.copyTooltip=this.locale?.copy,this.copedTooltip=this.locale?.copied;this.cdr.markForCheck()}updateIcons(){let[e,i]=this.icons;this.copyIcon=e,this.copedIcon=i,this.cdr.markForCheck()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-text-copy"]],inputs:{text:"text",tooltips:"tooltips",icons:"icons"},outputs:{textCopy:"textCopy"},exportAs:["nzTextCopy"],features:[ze],decls:2,vars:4,consts:[["type","button","nz-tooltip","","nz-trans-button","",1,"ant-typography-copy",3,"click","nzTooltipTitle"],[4,"nzStringTemplateOutlet"],[3,"nzType"]],template:function(i,t){i&1&&(r(0,"button",0),C("click",function(){return t.onClick()}),M(1,Ha,2,1,"ng-container",1),l()),i&2&&(L("ant-typography-copy-success",t.copied),_("nzTooltipTitle",t.copied?t.copedTooltip:t.copyTooltip),a(),_("nzStringTemplateOutlet",t.copied?t.copedIcon:t.copyIcon))},dependencies:[Ri,be,Ui,Wi,we,W,Ye,Be],encapsulation:2,changeDetection:0})}return n})(),Gi=(()=>{class n{ngZone=T(Ft);cdr=T(Ce);i18n=T(Qt);destroyRef=T(xe);editing=!1;locale;text;icon="edit";tooltip;startEditing=new w;endEditing=new w(!0);set textarea(e){this.textarea$.next(e)}autosizeDirective;beforeText;currentText;nativeElement=T(Ue).nativeElement;textarea$=new co(null);injector=T(bn);ngOnInit(){this.i18n.localeChange.pipe(J(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.cdr.markForCheck()}),this.textarea$.pipe(ft(e=>tt(e?.nativeElement,"keydown")),J(this.destroyRef)).subscribe(e=>{e.keyCode!==27&&e.keyCode!==13||this.ngZone.run(()=>{e.keyCode===27?this.onCancel():this.onEnter(e),this.cdr.markForCheck()})}),this.textarea$.pipe(ft(e=>tt(e?.nativeElement,"input")),J(this.destroyRef)).subscribe(e=>{this.currentText=e.target.value})}onClick(){this.beforeText=this.text,this.currentText=this.beforeText,this.editing=!0,this.startEditing.emit(),this.focusAndSetValue()}confirm(){this.editing=!1,this.endEditing.emit(this.currentText)}onEnter(e){e.stopPropagation(),e.preventDefault(),this.confirm()}onCancel(){this.currentText=this.beforeText,this.confirm()}focusAndSetValue(){let{injector:e}=this;Tn(()=>{this.textarea$.pipe(_o(i=>i!=null),J(this.destroyRef)).subscribe(i=>{i.nativeElement.focus(),i.nativeElement.value=this.currentText||"",this.autosizeDirective.resizeToFitContent(),this.cdr.markForCheck()})},{injector:e})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-text-edit"]],viewQuery:function(i,t){if(i&1&&(H(Qa,5),H(bt,5)),i&2){let o;B(o=R())&&(t.textarea=o.first),B(o=R())&&(t.autosizeDirective=o.first)}},inputs:{text:"text",icon:"icon",tooltip:"tooltip"},outputs:{startEditing:"startEditing",endEditing:"endEditing"},exportAs:["nzTextEdit"],decls:2,vars:1,consts:[["textarea",""],["nz-tooltip","","nz-trans-button","",1,"ant-typography-edit",3,"nzTooltipTitle"],["nz-input","","nzAutosize","",3,"blur"],["nz-trans-button","",1,"ant-typography-edit-content-confirm",3,"click"],["nzType","enter"],["nz-tooltip","","nz-trans-button","",1,"ant-typography-edit",3,"click","nzTooltipTitle"],[4,"nzStringTemplateOutlet"],[3,"nzType"]],template:function(i,t){i&1&&f(0,Ya,4,0)(1,qa,2,2,"button",1),i&2&&g(t.editing?0:1)},dependencies:[Yn,$e,bt,Ui,Wi,we,W,Ri,be,Ye,Be],encapsulation:2,changeDetection:0})}return n})(),ul="typography",_l="ant-typography-expand",Qi=(()=>{let n,c=[],e=[],i,t=[],o=[],p,P=[],ee=[],Le,Ge=[],ut=[],Bt,K=[],V=[];return class Hi{static{let Q=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[je()],i=[je()],p=[je()],Le=[je()],Bt=[je()],We(null,null,n,{kind:"field",name:"nzCopyTooltips",static:!1,private:!1,access:{has:k=>"nzCopyTooltips"in k,get:k=>k.nzCopyTooltips,set:(k,I)=>{k.nzCopyTooltips=I}},metadata:Q},c,e),We(null,null,i,{kind:"field",name:"nzCopyIcons",static:!1,private:!1,access:{has:k=>"nzCopyIcons"in k,get:k=>k.nzCopyIcons,set:(k,I)=>{k.nzCopyIcons=I}},metadata:Q},t,o),We(null,null,p,{kind:"field",name:"nzEditTooltip",static:!1,private:!1,access:{has:k=>"nzEditTooltip"in k,get:k=>k.nzEditTooltip,set:(k,I)=>{k.nzEditTooltip=I}},metadata:Q},P,ee),We(null,null,Le,{kind:"field",name:"nzEditIcon",static:!1,private:!1,access:{has:k=>"nzEditIcon"in k,get:k=>k.nzEditIcon,set:(k,I)=>{k.nzEditIcon=I}},metadata:Q},Ge,ut),We(null,null,Bt,{kind:"field",name:"nzEllipsisRows",static:!1,private:!1,access:{has:k=>"nzEllipsisRows"in k,get:k=>k.nzEllipsisRows,set:(k,I)=>{k.nzEllipsisRows=I}},metadata:Q},K,V),Q&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q})}_nzModuleName=ul;nzConfigService=T(Ht);el=T(Ue).nativeElement;cdr=T(Ce);viewContainerRef=T(Mn);renderer=T(jt);platform=T(Fn);i18n=T(Qt);resizeService=T(or);directionality=T(Qe);document=T(Wt);destroyRef=T(xe);nzCopyable=!1;nzEditable=!1;nzDisabled=!1;nzExpandable=!1;nzEllipsis=!1;nzCopyTooltips=me(this,c,void 0);nzCopyIcons=(me(this,e),me(this,t,["copy","check"]));nzEditTooltip=(me(this,o),me(this,P,void 0));nzEditIcon=(me(this,ee),me(this,Ge,"edit"));nzContent=me(this,ut);nzEllipsisRows=me(this,K,1);nzType=me(this,V);nzCopyText;nzSuffix;nzContentChange=new w;nzCopy=new w;nzExpandChange=new w;nzOnEllipsis=new w;textEditRef;textCopyRef;ellipsisContainer;expandableBtn;contentTemplate;locale;expandableBtnElementCache=null;editing=!1;ellipsisText;cssEllipsis=!1;isEllipsis=!0;expanded=!1;ellipsisStr="...";dir="ltr";get hasEllipsisObservers(){return this.nzOnEllipsis.observers.length>0}get canCssEllipsis(){return this.nzEllipsis&&this.cssEllipsis&&!this.expanded&&!this.hasEllipsisObservers}get hasOperationsWithEllipsis(){return(this.nzCopyable||this.nzEditable||this.nzExpandable)&&this.nzEllipsis}viewInit=!1;requestId=-1;windowResizeSubscription=cn.EMPTY;get copyText(){return typeof this.nzCopyText=="string"?this.nzCopyText:this.nzContent}constructor(){this.destroyRef.onDestroy(()=>{this.expandableBtnElementCache=null,this.windowResizeSubscription.unsubscribe()})}onTextCopy(Q){this.nzCopy.emit(Q)}onStartEditing(){this.editing=!0}onEndEditing(Q){this.editing=!1,this.nzContentChange.emit(Q),this.nzContent===Q&&this.renderOnNextFrame(),this.cdr.markForCheck()}onExpand(){this.isEllipsis=!1,this.expanded=!0,this.nzExpandChange.emit(),this.nzOnEllipsis.emit(!1)}canUseCSSEllipsis(){return this.nzEditable||this.nzCopyable||this.nzExpandable||this.nzSuffix||this.hasEllipsisObservers?!1:this.nzEllipsisRows===1?Vi("textOverflow"):Vi("webkitLineClamp")}renderOnNextFrame(){Ko(this.requestId),!(!this.viewInit||!this.nzEllipsis||this.nzEllipsisRows<0||this.expanded||!this.platform.isBrowser)&&(this.requestId=Xo(()=>this.syncEllipsis()))}getOriginContentViewRef(){let Q=this.viewContainerRef.createEmbeddedView(this.contentTemplate,{content:this.nzContent});return Q.detectChanges(),{viewRef:Q,removeView:()=>this.viewContainerRef.remove(this.viewContainerRef.indexOf(Q))}}syncEllipsis(){if(this.cssEllipsis)return;let{viewRef:Q,removeView:k}=this.getOriginContentViewRef(),I=[this.textCopyRef,this.textEditRef].filter(Ke=>Ke&&Ke.nativeElement).map(Ke=>Ke.nativeElement),ve=this.getExpandableBtnElement();ve&&I.push(ve);let{contentNodes:xt,text:ln,ellipsis:_t}=Ro(this.el,this.nzEllipsisRows,Q.rootNodes,I,this.ellipsisStr,this.nzSuffix);k(),this.ellipsisText=ln,_t!==this.isEllipsis&&(this.isEllipsis=_t,this.nzOnEllipsis.emit(_t));let it=this.ellipsisContainer.nativeElement;for(;it.firstChild;)this.renderer.removeChild(it,it.firstChild);xt.forEach(Ke=>{this.renderer.appendChild(it,Ke.cloneNode(!0))}),this.cdr.markForCheck()}getExpandableBtnElement(){if(this.nzExpandable){let Q=this.locale?this.locale.expand:"",k=this.expandableBtnElementCache;if(!k||k.innerText===Q){let I=this.document.createElement("a");I.className=_l,I.innerText=Q,this.expandableBtnElementCache=I}return this.expandableBtnElementCache}else return this.expandableBtnElementCache=null,null}renderAndSubscribeWindowResize(){this.platform.isBrowser&&(this.windowResizeSubscription.unsubscribe(),this.cssEllipsis=this.canUseCSSEllipsis(),this.renderOnNextFrame(),this.windowResizeSubscription=this.resizeService.connect().pipe(J(this.destroyRef)).subscribe(()=>this.renderOnNextFrame()))}ngOnInit(){this.i18n.localeChange.pipe(J(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.cdr.markForCheck()}),this.directionality.change?.pipe(J(this.destroyRef)).subscribe(Q=>{this.dir=Q,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterViewInit(){this.viewInit=!0,this.renderAndSubscribeWindowResize()}ngOnChanges(Q){let{nzCopyable:k,nzEditable:I,nzExpandable:ve,nzEllipsis:xt,nzContent:ln,nzEllipsisRows:_t,nzSuffix:it}=Q;(k||I||ve||xt||ln||_t||it)&&this.nzEllipsis&&(this.expanded?this.windowResizeSubscription.unsubscribe():this.renderAndSubscribeWindowResize())}static \u0275fac=function(k){return new(k||Hi)};static \u0275cmp=E({type:Hi,selectors:[["nz-typography"],["","nz-typography",""],["p","nz-paragraph",""],["span","nz-text",""],["h1","nz-title",""],["h2","nz-title",""],["h3","nz-title",""],["h4","nz-title",""]],viewQuery:function(k,I){if(k&1&&(H(Gi,5),H(ji,5),H(Ja,5),H(Za,5),H(Xa,5)),k&2){let ve;B(ve=R())&&(I.textEditRef=ve.first),B(ve=R())&&(I.textCopyRef=ve.first),B(ve=R())&&(I.ellipsisContainer=ve.first),B(ve=R())&&(I.expandableBtn=ve.first),B(ve=R())&&(I.contentTemplate=ve.first)}},hostVars:26,hostBindings:function(k,I){k&2&&(fe("-webkit-line-clamp",I.canCssEllipsis&&I.nzEllipsisRows>1?I.nzEllipsisRows:null),L("ant-typography",!I.editing)("ant-typography-rtl",I.dir==="rtl")("ant-typography-edit-content",I.editing)("ant-typography-secondary",I.nzType==="secondary")("ant-typography-warning",I.nzType==="warning")("ant-typography-danger",I.nzType==="danger")("ant-typography-success",I.nzType==="success")("ant-typography-disabled",I.nzDisabled)("ant-typography-ellipsis",I.nzEllipsis&&!I.expanded)("ant-typography-single-line",I.nzEllipsis&&I.nzEllipsisRows===1)("ant-typography-ellipsis-single-line",I.canCssEllipsis&&I.nzEllipsisRows===1)("ant-typography-ellipsis-multiple-line",I.canCssEllipsis&&I.nzEllipsisRows>1))},inputs:{nzCopyable:[2,"nzCopyable","nzCopyable",ie],nzEditable:[2,"nzEditable","nzEditable",ie],nzDisabled:[2,"nzDisabled","nzDisabled",ie],nzExpandable:[2,"nzExpandable","nzExpandable",ie],nzEllipsis:[2,"nzEllipsis","nzEllipsis",ie],nzCopyTooltips:"nzCopyTooltips",nzCopyIcons:"nzCopyIcons",nzEditTooltip:"nzEditTooltip",nzEditIcon:"nzEditIcon",nzContent:"nzContent",nzEllipsisRows:[2,"nzEllipsisRows","nzEllipsisRows",Pn],nzType:"nzType",nzCopyText:"nzCopyText",nzSuffix:"nzSuffix"},outputs:{nzContentChange:"nzContentChange",nzCopy:"nzCopy",nzExpandChange:"nzExpandChange",nzOnEllipsis:"nzOnEllipsis"},exportAs:["nzTypography"],features:[ze],ngContentSelectors:Ka,decls:5,vars:3,consts:[["contentTemplate",""],["ellipsisContainer",""],["expandable",""],[3,"text","icon","tooltip"],[3,"text","tooltips","icons"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-typography-expand"],[1,"ant-typography-expand",3,"click"],[3,"endEditing","startEditing","text","icon","tooltip"],[3,"textCopy","text","tooltips","icons"]],template:function(k,I){k&1&&(Me(),M(0,nl,2,2,"ng-template",null,0,ne),f(2,pl,2,1),f(3,dl,1,3,"nz-text-edit",3),f(4,ml,1,3,"nz-text-copy",4)),k&2&&(a(2),g(I.editing?-1:2),a(),g(I.nzEditable?3:-1),a(),g(I.nzCopyable&&!I.editing?4:-1))},dependencies:[Oe,Gi,ji],encapsulation:2,changeDetection:0})}})(),sa=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({imports:[Qi,ji,Gi]})}return n})();var gl=["*"],Cl=["nz-sider-trigger",""];function hl(n,c){}function xl(n,c){if(n&1&&M(0,hl,0,0,"ng-template",2),n&2){let e=s(),i=ae(5);_("ngTemplateOutlet",e.nzZeroTrigger||i)}}function wl(n,c){}function vl(n,c){if(n&1&&M(0,wl,0,0,"ng-template",2),n&2){let e=s(),i=ae(3);_("ngTemplateOutlet",e.nzTrigger||i)}}function zl(n,c){if(n&1&&h(0,"nz-icon",3),n&2){let e=s(2);_("nzType",e.nzCollapsed?"left":"right")}}function yl(n,c){if(n&1&&h(0,"nz-icon",3),n&2){let e=s(2);_("nzType",e.nzCollapsed?"right":"left")}}function bl(n,c){if(n&1&&f(0,zl,1,1,"nz-icon",3)(1,yl,1,1,"nz-icon",3),n&2){let e=s();g(e.nzReverseArrow?0:1)}}function Sl(n,c){n&1&&h(0,"nz-icon",4)}function Tl(n,c){if(n&1){let e=x();r(0,"div",2),C("click",function(){m(e);let t=s();return u(t.setCollapsed(!t.nzCollapsed))}),l()}if(n&2){let e=s();_("matchBreakPoint",e.matchBreakPoint)("nzCollapsedWidth",e.nzCollapsedWidth)("nzCollapsed",e.nzCollapsed)("nzBreakpoint",e.nzBreakpoint)("nzReverseArrow",e.nzReverseArrow)("nzTrigger",e.nzTrigger)("nzZeroTrigger",e.nzZeroTrigger)("siderWidth",e.widthSetting)}}var ca=(()=>{class n{nzCollapsed=!1;nzReverseArrow=!1;nzZeroTrigger=null;nzTrigger=void 0;matchBreakPoint=!1;nzCollapsedWidth=null;siderWidth=null;nzBreakpoint=null;isZeroTrigger=!1;isNormalTrigger=!1;updateTriggerType(){this.isZeroTrigger=this.nzCollapsedWidth===0&&(this.nzBreakpoint&&this.matchBreakPoint||!this.nzBreakpoint),this.isNormalTrigger=this.nzCollapsedWidth!==0}ngOnInit(){this.updateTriggerType()}ngOnChanges(){this.updateTriggerType()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["","nz-sider-trigger",""]],hostVars:10,hostBindings:function(i,t){i&2&&(fe("width",t.isNormalTrigger?t.siderWidth:null),L("ant-layout-sider-trigger",t.isNormalTrigger)("ant-layout-sider-zero-width-trigger",t.isZeroTrigger)("ant-layout-sider-zero-width-trigger-right",t.isZeroTrigger&&t.nzReverseArrow)("ant-layout-sider-zero-width-trigger-left",t.isZeroTrigger&&!t.nzReverseArrow))},inputs:{nzCollapsed:"nzCollapsed",nzReverseArrow:"nzReverseArrow",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",matchBreakPoint:"matchBreakPoint",nzCollapsedWidth:"nzCollapsedWidth",siderWidth:"siderWidth",nzBreakpoint:"nzBreakpoint"},exportAs:["nzSiderTrigger"],features:[ze],attrs:Cl,decls:6,vars:2,consts:[["defaultTrigger",""],["defaultZeroTrigger",""],[3,"ngTemplateOutlet"],[3,"nzType"],["nzType","bars"]],template:function(i,t){i&1&&(f(0,xl,1,1,null,2),f(1,vl,1,1,null,2),M(2,bl,2,1,"ng-template",null,0,ne)(4,Sl,1,0,"ng-template",null,1,ne)),i&2&&(g(t.isZeroTrigger?0:-1),a(),g(t.isNormalTrigger?1:-1))},dependencies:[Oe,we,W],encapsulation:2,changeDetection:0})}return n})(),Ml=(()=>{class n{destroyRef=T(xe);platform=T(Fn);cdr=T(Ce);breakpointService=T(Bn);nzMenuDirective=null;nzCollapsedChange=new w;nzWidth=200;nzTheme="dark";nzCollapsedWidth=80;nzBreakpoint=null;nzZeroTrigger=null;nzTrigger=void 0;nzReverseArrow=!1;nzCollapsible=!1;nzCollapsed=!1;matchBreakPoint=!1;flexSetting=null;widthSetting=null;updateStyleMap(){this.widthSetting=this.nzCollapsed?`${this.nzCollapsedWidth}px`:Vo(this.nzWidth),this.flexSetting=`0 0 ${this.widthSetting}`,this.cdr.markForCheck()}updateMenuInlineCollapsed(){this.nzMenuDirective&&this.nzMenuDirective.nzMode==="inline"&&this.nzCollapsedWidth!==0&&this.nzMenuDirective.setInlineCollapsed(this.nzCollapsed)}setCollapsed(e){e!==this.nzCollapsed&&(this.nzCollapsed=e,this.nzCollapsedChange.emit(e),this.updateMenuInlineCollapsed(),this.updateStyleMap(),this.cdr.markForCheck())}ngOnInit(){this.updateStyleMap(),this.platform.isBrowser&&this.breakpointService.subscribe(lr,!0).pipe(J(this.destroyRef)).subscribe(e=>{let i=this.nzBreakpoint;i&&Lo().subscribe(()=>{this.matchBreakPoint=!e[i],this.setCollapsed(this.matchBreakPoint),this.cdr.markForCheck()})})}ngOnChanges(e){let{nzCollapsed:i,nzCollapsedWidth:t,nzWidth:o}=e;(i||t||o)&&this.updateStyleMap(),i&&this.updateMenuInlineCollapsed()}ngAfterContentInit(){this.updateMenuInlineCollapsed()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-sider"]],contentQueries:function(i,t,o){if(i&1&&He(o,Ln,5),i&2){let p;B(p=R())&&(t.nzMenuDirective=p.first)}},hostAttrs:[1,"ant-layout-sider"],hostVars:18,hostBindings:function(i,t){i&2&&(fe("flex",t.flexSetting)("max-width",t.widthSetting)("min-width",t.widthSetting)("width",t.widthSetting),L("ant-layout-sider-zero-width",t.nzCollapsed&&t.nzCollapsedWidth===0)("ant-layout-sider-light",t.nzTheme==="light")("ant-layout-sider-dark",t.nzTheme==="dark")("ant-layout-sider-collapsed",t.nzCollapsed)("ant-layout-sider-has-trigger",t.nzCollapsible&&t.nzTrigger!==null))},inputs:{nzWidth:"nzWidth",nzTheme:"nzTheme",nzCollapsedWidth:"nzCollapsedWidth",nzBreakpoint:"nzBreakpoint",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",nzReverseArrow:[2,"nzReverseArrow","nzReverseArrow",ie],nzCollapsible:[2,"nzCollapsible","nzCollapsible",ie],nzCollapsed:[2,"nzCollapsed","nzCollapsed",ie]},outputs:{nzCollapsedChange:"nzCollapsedChange"},exportAs:["nzSider"],features:[ze],ngContentSelectors:gl,decls:3,vars:1,consts:[[1,"ant-layout-sider-children"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"],["nz-sider-trigger","",3,"click","matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"]],template:function(i,t){i&1&&(Me(),r(0,"div",0),pe(1),l(),f(2,Tl,1,8,"div",1)),i&2&&(a(2),g(t.nzCollapsible&&t.nzTrigger!==null?2:-1))},dependencies:[ca],encapsulation:2,changeDetection:0})}return n})();var pa=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({imports:[Ml,ca]})}return n})();var Ol=[[["nz-breadcrumb","nz-page-header-breadcrumb",""]],[["nz-avatar","nz-page-header-avatar",""]],[["nz-page-header-tags"],["","nz-page-header-tags",""]],[["nz-page-header-extra"],["","nz-page-header-extra",""]],[["nz-page-header-content"],["","nz-page-header-content",""]],[["nz-page-header-footer"],["","nz-page-header-footer",""]],[["nz-page-header-title"],["","nz-page-header-title",""]],[["nz-page-header-subtitle"],["","nz-page-header-subtitle",""]]],El=["nz-breadcrumb[nz-page-header-breadcrumb]","nz-avatar[nz-page-header-avatar]","nz-page-header-tags, [nz-page-header-tags]","nz-page-header-extra, [nz-page-header-extra]","nz-page-header-content, [nz-page-header-content]","nz-page-header-footer, [nz-page-header-footer]","nz-page-header-title, [nz-page-header-title]","nz-page-header-subtitle, [nz-page-header-subtitle]"];function Pl(n,c){if(n&1&&($(0),h(1,"nz-icon",8),q()),n&2){let e=c.$implicit,i=s(2);a(),_("nzType",e||i.getBackIcon())}}function Nl(n,c){if(n&1){let e=x();r(0,"div",5),C("click",function(){m(e);let t=s();return u(t.onBack())}),r(1,"div",6),M(2,Pl,2,1,"ng-container",7),l()()}if(n&2){let e=s();a(2),_("nzStringTemplateOutlet",e.nzBackIcon)}}function Fl(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(2);a(),D(e.nzTitle)}}function Dl(n,c){if(n&1&&(r(0,"span",3),M(1,Fl,2,1,"ng-container",7),l()),n&2){let e=s();a(),_("nzStringTemplateOutlet",e.nzTitle)}}function kl(n,c){n&1&&pe(0,6)}function Il(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(2);a(),D(e.nzSubtitle)}}function Vl(n,c){if(n&1&&(r(0,"span",4),M(1,Il,2,1,"ng-container",7),l()),n&2){let e=s();a(),_("nzStringTemplateOutlet",e.nzSubtitle)}}function Al(n,c){n&1&&pe(0,7)}var Bl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["nz-page-header-footer"],["","nz-page-header-footer",""]],hostAttrs:[1,"ant-page-header-footer"],exportAs:["nzPageHeaderFooter"]})}return n})(),Rl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["nz-breadcrumb","nz-page-header-breadcrumb",""]],exportAs:["nzPageHeaderBreadcrumb"]})}return n})();var Ll="pageHeader",Wl=(()=>{let n,c=[],e=[];return class Yi{static{let t=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[je()],We(null,null,n,{kind:"field",name:"nzGhost",static:!1,private:!1,access:{has:o=>"nzGhost"in o,get:o=>o.nzGhost,set:(o,p)=>{o.nzGhost=p}},metadata:t},c,e),t&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})}nzConfigService;elementRef;nzResizeObserver;cdr;directionality;location=T(Eo);destroyRef=T(xe);_nzModuleName=Ll;nzBackIcon=null;nzTitle;nzSubtitle;nzGhost=me(this,c,!0);nzBack=(me(this,e),new w);nzPageHeaderFooter;nzPageHeaderBreadcrumb;compact=!1;dir="ltr";enableBackButton=!0;constructor(t,o,p,P,ee){this.nzConfigService=t,this.elementRef=o,this.nzResizeObserver=p,this.cdr=P,this.directionality=ee}ngOnInit(){this.directionality.change?.pipe(J(this.destroyRef)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterViewInit(){if(!this.nzBack.observers.length){this.enableBackButton=this.location.getState()?.navigationId>1;let t=this.location.subscribe(()=>{this.enableBackButton=!0,this.cdr.detectChanges()});this.destroyRef.onDestroy(()=>t.unsubscribe())}this.nzResizeObserver.observe(this.elementRef).pipe(Lt(([t])=>t.contentRect.width),J(this.destroyRef)).subscribe(t=>{this.compact=t<768,this.cdr.markForCheck()})}onBack(){this.nzBack.observers.length?this.nzBack.emit():this.location.back()}getBackIcon(){return this.dir==="rtl"?"arrow-right":"arrow-left"}static \u0275fac=function(o){return new(o||Yi)(F(Ht),F(Ue),F(pr),F(Ce),F(Qe))};static \u0275cmp=E({type:Yi,selectors:[["nz-page-header"]],contentQueries:function(o,p,P){if(o&1&&(He(P,Bl,5),He(P,Rl,5)),o&2){let ee;B(ee=R())&&(p.nzPageHeaderFooter=ee.first),B(ee=R())&&(p.nzPageHeaderBreadcrumb=ee.first)}},hostAttrs:[1,"ant-page-header"],hostVars:10,hostBindings:function(o,p){o&2&&L("has-footer",p.nzPageHeaderFooter)("ant-page-header-ghost",p.nzGhost)("has-breadcrumb",p.nzPageHeaderBreadcrumb)("ant-page-header-compact",p.compact)("ant-page-header-rtl",p.dir==="rtl")},inputs:{nzBackIcon:"nzBackIcon",nzTitle:"nzTitle",nzSubtitle:"nzSubtitle",nzGhost:"nzGhost"},outputs:{nzBack:"nzBack"},exportAs:["nzPageHeader"],ngContentSelectors:El,decls:13,vars:3,consts:[[1,"ant-page-header-heading"],[1,"ant-page-header-heading-left"],[1,"ant-page-header-back"],[1,"ant-page-header-heading-title"],[1,"ant-page-header-heading-sub-title"],[1,"ant-page-header-back",3,"click"],["role","button","tabindex","0",1,"ant-page-header-back-button"],[4,"nzStringTemplateOutlet"],["nzTheme","outline",3,"nzType"]],template:function(o,p){o&1&&(Me(Ol),pe(0),r(1,"div",0)(2,"div",1),f(3,Nl,3,1,"div",2),pe(4,1),f(5,Dl,2,1,"span",3)(6,kl,1,0),f(7,Vl,2,1,"span",4)(8,Al,1,0),pe(9,2),l(),pe(10,3),l(),pe(11,4),pe(12,5)),o&2&&(a(3),g(p.nzBackIcon!==null&&p.enableBackButton?3:-1),a(2),g(p.nzTitle?5:6),a(2),g(p.nzSubtitle?7:8))},dependencies:[Ye,Be,we,W],encapsulation:2,changeDetection:0})}})();var da=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({imports:[Wl]})}return n})();var Ul=["*"];function jl(n,c){n&1&&pe(0)}function Gl(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(3);a(),D(e.nzTitle)}}function Hl(n,c){if(n&1&&(r(0,"div",2),M(1,Gl,2,1,"ng-container",4),l()),n&2){let e=s(2);a(),_("nzStringTemplateOutlet",e.nzTitle)}}function Ql(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(3);a(),D(e.nzExtra)}}function Yl(n,c){if(n&1&&(r(0,"div",3),M(1,Ql,2,1,"ng-container",4),l()),n&2){let e=s(2);a(),_("nzStringTemplateOutlet",e.nzExtra)}}function $l(n,c){if(n&1&&(r(0,"div",0),f(1,Hl,2,1,"div",2),f(2,Yl,2,1,"div",3),l()),n&2){let e=s();a(),g(e.nzTitle?1:-1),a(),g(e.nzExtra?2:-1)}}function ql(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(2).$implicit;a(),N(" ",e.title," ")}}function Jl(n,c){}function Zl(n,c){if(n&1&&(r(0,"td",6)(1,"div",7)(2,"span",8),M(3,ql,2,1,"ng-container",4),l(),r(4,"span",9),M(5,Jl,0,0,"ng-template",10),l()()()),n&2){let e=s().$implicit,i=s(3);_("colSpan",e.span),a(2),L("ant-descriptions-item-no-colon",!i.nzColon),a(),_("nzStringTemplateOutlet",e.title),a(2),_("ngTemplateOutlet",e.content)}}function Xl(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(2).$implicit;a(),N(" ",e.title," ")}}function Kl(n,c){}function es(n,c){if(n&1&&(r(0,"td",8),M(1,Xl,2,1,"ng-container",4),l(),r(2,"td",11),M(3,Kl,0,0,"ng-template",10),l()),n&2){let e=s().$implicit;a(),_("nzStringTemplateOutlet",e.title),a(),_("colSpan",e.span*2-1),a(),_("ngTemplateOutlet",e.content)}}function ts(n,c){if(n&1&&f(0,Zl,6,5,"td",6)(1,es,4,3),n&2){let e=s(3);g(e.nzBordered?1:0)}}function ns(n,c){if(n&1&&(r(0,"tr",5),b(1,ts,2,1,null,null,O),l()),n&2){let e=c.$implicit;a(),S(e)}}function is(n,c){if(n&1&&b(0,ns,3,0,"tr",5,O),n&2){let e=s();S(e.itemMatrix)}}function os(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s().$implicit;a(),N(" ",e.title," ")}}function rs(n,c){if(n&1&&(r(0,"td",6)(1,"div",7)(2,"span",8),M(3,os,2,1,"ng-container",4),l()()()),n&2){let e=c.$implicit,i=s(4);_("colSpan",e.span),a(2),L("ant-descriptions-item-no-colon",!i.nzColon),a(),_("nzStringTemplateOutlet",e.title)}}function as(n,c){}function ls(n,c){if(n&1&&(r(0,"td",6)(1,"div",7)(2,"span",9),M(3,as,0,0,"ng-template",10),l()()()),n&2){let e=c.$implicit;_("colSpan",e.span),a(3),_("ngTemplateOutlet",e.content)}}function ss(n,c){if(n&1&&(r(0,"tr",5),b(1,rs,4,4,"td",6,O),l(),r(3,"tr",5),b(4,ls,4,2,"td",6,O),l()),n&2){let e=c.$implicit;a(),S(e),a(3),S(e)}}function cs(n,c){if(n&1&&b(0,ss,6,0,null,null,O),n&2){let e=s(2);S(e.itemMatrix)}}function ps(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s().$implicit;a(),N(" ",e.title," ")}}function ds(n,c){if(n&1&&(r(0,"td",12),M(1,ps,2,1,"ng-container",4),l()),n&2){let e=c.$implicit;_("colSpan",e.span),a(),_("nzStringTemplateOutlet",e.title)}}function ms(n,c){}function us(n,c){if(n&1&&(r(0,"td",11),M(1,ms,0,0,"ng-template",10),l()),n&2){let e=c.$implicit;_("colSpan",e.span),a(),_("ngTemplateOutlet",e.content)}}function _s(n,c){if(n&1&&(r(0,"tr",5),b(1,ds,2,2,"td",12,O),l(),r(3,"tr",5),b(4,us,2,2,"td",11,O),l()),n&2){let e=c.$implicit;a(),S(e),a(3),S(e)}}function fs(n,c){if(n&1&&b(0,_s,6,0,null,null,O),n&2){let e=s(2);S(e.itemMatrix)}}function gs(n,c){if(n&1&&f(0,cs,2,0)(1,fs,2,0),n&2){let e=s();g(e.nzBordered?1:0)}}var Cs=(()=>{class n{content;nzSpan=1;nzTitle="";inputChange$=new Rt;ngOnChanges(){this.inputChange$.next()}ngOnDestroy(){this.inputChange$.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-descriptions-item"]],viewQuery:function(i,t){if(i&1&&H(Dt,7),i&2){let o;B(o=R())&&(t.content=o.first)}},inputs:{nzSpan:[2,"nzSpan","nzSpan",Pn],nzTitle:"nzTitle"},exportAs:["nzDescriptionsItem"],features:[ze],ngContentSelectors:Ul,decls:1,vars:0,template:function(i,t){i&1&&(Me(),vo(0,jl,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return n})(),hs="descriptions",xs={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},ws=(()=>{let n,c=[],e=[],i,t=[],o=[],p,P=[],ee=[],Le,Ge=[],ut=[];return class $i{static{let K=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[je()],i=[je()],p=[je()],Le=[je()],We(null,null,n,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:V=>"nzBordered"in V,get:V=>V.nzBordered,set:(V,le)=>{V.nzBordered=le}},metadata:K},c,e),We(null,null,i,{kind:"field",name:"nzColumn",static:!1,private:!1,access:{has:V=>"nzColumn"in V,get:V=>V.nzColumn,set:(V,le)=>{V.nzColumn=le}},metadata:K},t,o),We(null,null,p,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:V=>"nzSize"in V,get:V=>V.nzSize,set:(V,le)=>{V.nzSize=le}},metadata:K},P,ee),We(null,null,Le,{kind:"field",name:"nzColon",static:!1,private:!1,access:{has:V=>"nzColon"in V,get:V=>V.nzColon,set:(V,le)=>{V.nzColon=le}},metadata:K},Ge,ut),K&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:K})}nzConfigService=T(Ht);cdr=T(Ce);breakpointService=T(Bn);directionality=T(Qe);destroyRef=T(xe);_nzModuleName=hs;items;nzBordered=me(this,c,!1);nzLayout=(me(this,e),"horizontal");nzColumn=me(this,t,xs);nzSize=(me(this,o),me(this,P,"default"));nzTitle=(me(this,ee),"");nzExtra;nzColon=me(this,Ge,!0);itemMatrix=(me(this,ut),[]);realColumn=3;dir="ltr";breakpoint=rr.md;ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(J(this.destroyRef)).subscribe(K=>{this.dir=K})}ngOnChanges(K){K.nzColumn&&this.prepareMatrix()}ngAfterContentInit(){let K=this.items.changes.pipe(Nt(this.items));wt(K,K.pipe(ft(()=>wt(...this.items.map(V=>V.inputChange$)).pipe(uo(16)))),this.breakpointService.subscribe(ar).pipe(fo(V=>this.breakpoint=V))).pipe(J(this.destroyRef)).subscribe(()=>{this.prepareMatrix(),this.cdr.markForCheck()})}prepareMatrix(){if(!this.items)return;let K=[],V=0,le=this.realColumn=this.getColumn(),Q=this.items.toArray(),k=Q.length,I=[],ve=()=>{I.push(K),K=[],V=0};for(let xt=0;xt<k;xt++){let ln=Q[xt],{nzTitle:_t,content:it,nzSpan:Ke}=ln;V+=Ke,V>=le?(V>le&&Io(`"nzColumn" is ${le} but we have row length ${V}`),K.push({title:_t,content:it,span:le-(V-Ke)}),ve()):xt===k-1?(K.push({title:_t,content:it,span:le-(V-Ke)}),ve()):K.push({title:_t,content:it,span:Ke})}this.itemMatrix=I}getColumn(){return typeof this.nzColumn!="number"?this.nzColumn[this.breakpoint]:this.nzColumn}static \u0275fac=function(V){return new(V||$i)};static \u0275cmp=E({type:$i,selectors:[["nz-descriptions"]],contentQueries:function(V,le,Q){if(V&1&&He(Q,Cs,4),V&2){let k;B(k=R())&&(le.items=k)}},hostAttrs:[1,"ant-descriptions"],hostVars:8,hostBindings:function(V,le){V&2&&L("ant-descriptions-bordered",le.nzBordered)("ant-descriptions-middle",le.nzSize==="middle")("ant-descriptions-small",le.nzSize==="small")("ant-descriptions-rtl",le.dir==="rtl")},inputs:{nzBordered:[2,"nzBordered","nzBordered",ie],nzLayout:"nzLayout",nzColumn:"nzColumn",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra",nzColon:[2,"nzColon","nzColon",ie]},exportAs:["nzDescriptions"],features:[ze],decls:6,vars:3,consts:[[1,"ant-descriptions-header"],[1,"ant-descriptions-view"],[1,"ant-descriptions-title"],[1,"ant-descriptions-extra"],[4,"nzStringTemplateOutlet"],[1,"ant-descriptions-row"],[1,"ant-descriptions-item",3,"colSpan"],[1,"ant-descriptions-item-container"],[1,"ant-descriptions-item-label"],[1,"ant-descriptions-item-content"],[3,"ngTemplateOutlet"],[1,"ant-descriptions-item-content",3,"colSpan"],[1,"ant-descriptions-item-label",3,"colSpan"]],template:function(V,le){V&1&&(f(0,$l,3,2,"div",0),r(1,"div",1)(2,"table")(3,"tbody"),f(4,is,2,0),f(5,gs,2,1),l()()()),V&2&&(g(le.nzTitle||le.nzExtra?0:-1),a(4),g(le.nzLayout==="horizontal"?4:-1),a(),g(le.nzLayout==="vertical"?5:-1))},dependencies:[Ye,Be,Oe],encapsulation:2,changeDetection:0})}})(),ma=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({imports:[ws]})}return n})();var vs=["template"],_a=["*"];function zs(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(3);a(),D(e.nzLabel)}}function ys(n,c){if(n&1&&(r(0,"div",2),M(1,zs,2,1,"ng-container",5),l()),n&2){let e=s(2);a(),_("nzStringTemplateOutlet",e.nzLabel)}}function bs(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(2);a(),D(e.nzDot)}}function Ss(n,c){if(n&1&&(r(0,"li",1),f(1,ys,2,1,"div",2),h(2,"div",3),r(3,"div",4),M(4,bs,2,1,"ng-container",5),l(),r(5,"div",6),pe(6),l()()),n&2){let e=s();L("ant-timeline-item-right",(e.nzPosition||e.position)==="right")("ant-timeline-item-left",(e.nzPosition||e.position)==="left")("ant-timeline-item-last",e.isLast),a(),g(e.nzLabel?1:-1),a(2),fe("border-color",e.borderColor),L("ant-timeline-item-head-red",e.nzColor==="red")("ant-timeline-item-head-blue",e.nzColor==="blue")("ant-timeline-item-head-green",e.nzColor==="green")("ant-timeline-item-head-gray",e.nzColor==="gray")("ant-timeline-item-head-custom",!!e.nzDot),a(),_("nzStringTemplateOutlet",e.nzDot)}}function Ts(n,c){if(n&1&&rt(0,2),n&2){s();let e=ae(6);_("ngTemplateOutlet",e)}}function Ms(n,c){}function Os(n,c){if(n&1&&M(0,Ms,0,0,"ng-template",2),n&2){let e=c.$implicit;_("ngTemplateOutlet",e.template)}}function Es(n,c){if(n&1&&rt(0,2),n&2){s();let e=ae(6);_("ngTemplateOutlet",e)}}function Ps(n,c){n&1&&h(0,"nz-icon",8)}function Ns(n,c){if(n&1&&($(0),d(1),f(2,Ps,1,0,"nz-icon",8),q()),n&2){let e=s(3);a(),N(" ",e.nzPendingDot," "),a(),g(e.nzPendingDot?-1:2)}}function Fs(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(3);a(),N(" ",e.isPendingBoolean?"":e.nzPending," ")}}function Ds(n,c){if(n&1&&(r(0,"li",3),h(1,"div",4),r(2,"div",5),M(3,Ns,3,2,"ng-container",6),l(),r(4,"div",7),M(5,Fs,2,1,"ng-container",6),l()()),n&2){let e=s(2);a(3),_("nzStringTemplateOutlet",e.nzPendingDot),a(2),_("nzStringTemplateOutlet",e.nzPending)}}function ks(n,c){if(n&1&&f(0,Ds,6,2,"li",3),n&2){let e=s();g(e.nzPending?0:-1)}}var qi=(()=>{class n{check$=new po(1);markForCheck(){this.check$.next()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),Is=["red","blue","green","grey","gray"];function Vs(n){return Is.findIndex(c=>c===n)!==-1}var fa=(()=>{class n{cdr=T(Ce);timelineService=T(qi);template;nzPosition;nzColor="blue";nzDot;nzLabel;isLast=!1;borderColor=null;position;ngOnChanges(e){this.timelineService.markForCheck();let{nzColor:i}=e;i&&this.updateCustomColor()}detectChanges(){this.cdr.detectChanges()}updateCustomColor(){this.borderColor=Vs(this.nzColor)?null:this.nzColor}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-timeline-item"],["","nz-timeline-item",""]],viewQuery:function(i,t){if(i&1&&H(vs,5),i&2){let o;B(o=R())&&(t.template=o.first)}},inputs:{nzPosition:"nzPosition",nzColor:"nzColor",nzDot:"nzDot",nzLabel:"nzLabel"},exportAs:["nzTimelineItem"],features:[ze],ngContentSelectors:_a,decls:2,vars:0,consts:[["template",""],[1,"ant-timeline-item"],[1,"ant-timeline-item-label"],[1,"ant-timeline-item-tail"],[1,"ant-timeline-item-head"],[4,"nzStringTemplateOutlet"],[1,"ant-timeline-item-content"]],template:function(i,t){i&1&&(Me(),M(0,Ss,7,20,"ng-template",null,0,ne))},dependencies:[Ye,Be],encapsulation:2,changeDetection:0})}return n})(),As=(()=>{class n{cdr=T(Ce);timelineService=T(qi);directionality=T(Qe);destroyRef=T(xe);listOfItems;nzMode="left";nzPending;nzPendingDot;nzReverse=!1;isPendingBoolean=!1;timelineItems=[];dir="ltr";hasLabelItem=!1;ngOnChanges(e){let{nzMode:i,nzReverse:t,nzPending:o}=e;(ua(i)||ua(t))&&this.updateChildren(),o&&(this.isPendingBoolean=o.currentValue===!0)}ngOnInit(){this.timelineService.check$.pipe(J(this.destroyRef)).subscribe(()=>{this.cdr.markForCheck()}),this.directionality.change?.pipe(J(this.destroyRef)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterContentInit(){this.updateChildren(),this.listOfItems.changes.pipe(J(this.destroyRef)).subscribe(()=>{this.updateChildren()})}updateChildren(){if(this.listOfItems&&this.listOfItems.length){let e=this.listOfItems.length,i=!1;this.listOfItems.forEach((t,o)=>{t.isLast=this.nzReverse?o===0:o===e-1,t.position=Bs(o,this.nzMode),!i&&t.nzLabel&&(i=!0),t.detectChanges()}),this.timelineItems=this.nzReverse?this.listOfItems.toArray().reverse():this.listOfItems.toArray(),this.hasLabelItem=i}else this.timelineItems=[],this.hasLabelItem=!1;this.cdr.markForCheck()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-timeline"]],contentQueries:function(i,t,o){if(i&1&&He(o,fa,4),i&2){let p;B(p=R())&&(t.listOfItems=p)}},inputs:{nzMode:"nzMode",nzPending:"nzPending",nzPendingDot:"nzPendingDot",nzReverse:[2,"nzReverse","nzReverse",ie]},exportAs:["nzTimeline"],features:[On([qi]),ze],ngContentSelectors:_a,decls:8,vars:14,consts:[["pendingTemplate",""],[1,"ant-timeline"],[3,"ngTemplateOutlet"],[1,"ant-timeline-item","ant-timeline-item-pending"],[1,"ant-timeline-item-tail"],[1,"ant-timeline-item-head","ant-timeline-item-head-custom","ant-timeline-item-head-blue"],[4,"nzStringTemplateOutlet"],[1,"ant-timeline-item-content"],["nzType","loading"]],template:function(i,t){i&1&&(Me(),r(0,"ul",1),f(1,Ts,1,1,"ng-container",2),b(2,Os,1,1,null,2,O),f(4,Es,1,1,"ng-container",2),l(),M(5,ks,1,1,"ng-template",null,0,ne),pe(7)),i&2&&(L("ant-timeline-label",t.hasLabelItem)("ant-timeline-right",!t.hasLabelItem&&t.nzMode==="right")("ant-timeline-alternate",t.nzMode==="alternate"||t.nzMode==="custom")("ant-timeline-pending",!!t.nzPending)("ant-timeline-reverse",t.nzReverse)("ant-timeline-rtl",t.dir==="rtl"),a(),g(t.nzReverse?1:-1),a(),S(t.timelineItems),a(2),g(t.nzReverse?-1:4))},dependencies:[Oe,Ye,Be,we,W],encapsulation:2,changeDetection:0})}return n})();function ua(n){return!!(n&&(n.previousValue!==n.currentValue||n.isFirstChange()))}function Bs(n,c){if(c!=="custom")return c==="left"||c==="right"?c:c==="alternate"&&n%2===0?"left":"right"}var ga=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({imports:[fa,As]})}return n})();var Rs=["processDotTemplate"],Ls=["itemContainer"],Ws=(n,c,e)=>({$implicit:n,status:c,index:e});function Us(n,c){n&1&&h(0,"div",3)}function js(n,c){if(n&1&&(r(0,"div",11),h(1,"nz-progress",12),l()),n&2){let e=s(2);a(),_("nzPercent",e.nzPercentage)("nzWidth",e.nzSize==="small"?32:40)("nzFormat",e.nullProcessFormat)("nzStrokeWidth",4)}}function Gs(n,c){n&1&&(r(0,"span",5),h(1,"nz-icon",13),l())}function Hs(n,c){n&1&&(r(0,"span",5),h(1,"nz-icon",14),l())}function Qs(n,c){if(n&1&&(r(0,"span",5),d(1),l()),n&2){let e=s(2);a(),N(" ",e.index+1," ")}}function Ys(n,c){if(n&1&&($(0),h(1,"nz-icon",15),q()),n&2){let e=c.$implicit;a(),_("nzType",e)}}function $s(n,c){if(n&1&&(r(0,"span",5),M(1,Ys,2,1,"ng-container",8),l()),n&2){let e=s(2);a(),_("nzStringTemplateOutlet",e.nzIcon)}}function qs(n,c){if(n&1&&(f(0,js,2,4,"div",11),f(1,Gs,2,0,"span",5),f(2,Hs,2,0,"span",5),f(3,Qs,2,1,"span",5),f(4,$s,2,1,"span",5)),n&2){let e=s();g(e.showProgress?0:-1),a(),g(e.nzStatus==="finish"&&!e.nzIcon?1:-1),a(),g(e.nzStatus==="error"?2:-1),a(),g((e.nzStatus==="process"||e.nzStatus==="wait")&&!e.nzIcon?3:-1),a(),g(e.nzIcon?4:-1)}}function Js(n,c){n&1&&h(0,"span",17)}function Zs(n,c){}function Xs(n,c){if(n&1&&(r(0,"span",5),M(1,Js,1,0,"ng-template",null,1,ne)(3,Zs,0,0,"ng-template",16),l()),n&2){let e=ae(2),i=s();a(3),_("ngTemplateOutlet",i.customProcessTemplate||e)("ngTemplateOutletContext",En(2,Ws,e,i.nzStatus,i.index))}}function Ks(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s();a(),D(e.nzTitle)}}function ec(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s(2);a(),D(e.nzSubtitle)}}function tc(n,c){if(n&1&&(r(0,"div",9),M(1,ec,2,1,"ng-container",8),l()),n&2){let e=s();a(),_("nzStringTemplateOutlet",e.nzSubtitle)}}function nc(n,c){if(n&1&&($(0),d(1),q()),n&2){let e=s();a(),D(e.nzDescription)}}var ic=(()=>{class n{cdr=T(Ce);destroyRef=T(xe);processDotTemplate;itemContainer;nzTitle;nzSubtitle;nzDescription;nzDisabled=!1;nzPercentage=null;nzSize="default";get nzStatus(){return this._status}set nzStatus(e){this._status=e,this.isCustomStatus=!0}isCustomStatus=!1;_status="wait";get nzIcon(){return this._icon}set nzIcon(e){e instanceof Dt||(this.oldAPIIcon=typeof e=="string"&&e.indexOf("anticon")>-1),this._icon=e}oldAPIIcon=!0;_icon;customProcessTemplate;direction="horizontal";index=0;last=!1;outStatus="process";showProcessDot=!1;clickable=!1;clickOutsideAngular$=new Rt;nullProcessFormat=()=>null;get showProgress(){return this.nzPercentage!==null&&!this.nzIcon&&this.nzStatus==="process"&&this.nzPercentage>=0&&this.nzPercentage<=100}get currentIndex(){return this._currentIndex}set currentIndex(e){this._currentIndex=e,this.isCustomStatus||(this._status=e>this.index?"finish":e===this.index?this.outStatus||"":"wait")}_currentIndex=0;ngOnInit(){tt(this.itemContainer.nativeElement,"click").pipe(mo(()=>this.clickable&&this.currentIndex!==this.index&&!this.nzDisabled),J(this.destroyRef)).subscribe(()=>{this.clickOutsideAngular$.next(this.index)})}enable(){this.nzDisabled=!1,this.cdr.markForCheck()}disable(){this.nzDisabled=!0,this.cdr.markForCheck()}markForCheck(){this.cdr.markForCheck()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-step"]],viewQuery:function(i,t){if(i&1&&(H(Rs,5),H(Ls,7)),i&2){let o;B(o=R())&&(t.processDotTemplate=o.first),B(o=R())&&(t.itemContainer=o.first)}},hostAttrs:[1,"ant-steps-item"],hostVars:16,hostBindings:function(i,t){i&2&&L("ant-steps-item-wait",t.nzStatus==="wait")("ant-steps-item-process",t.nzStatus==="process")("ant-steps-item-finish",t.nzStatus==="finish")("ant-steps-item-error",t.nzStatus==="error")("ant-steps-item-active",t.currentIndex===t.index)("ant-steps-item-disabled",t.nzDisabled)("ant-steps-item-custom",!!t.nzIcon)("ant-steps-next-error",t.outStatus==="error"&&t.currentIndex===t.index+1)},inputs:{nzTitle:"nzTitle",nzSubtitle:"nzSubtitle",nzDescription:"nzDescription",nzDisabled:[2,"nzDisabled","nzDisabled",ie],nzPercentage:"nzPercentage",nzSize:"nzSize",nzStatus:"nzStatus",nzIcon:"nzIcon"},exportAs:["nzStep"],decls:12,vars:8,consts:[["itemContainer",""],["processDotTemplate",""],[1,"ant-steps-item-container",3,"tabindex"],[1,"ant-steps-item-tail"],[1,"ant-steps-item-icon"],[1,"ant-steps-icon"],[1,"ant-steps-item-content"],[1,"ant-steps-item-title"],[4,"nzStringTemplateOutlet"],[1,"ant-steps-item-subtitle"],[1,"ant-steps-item-description"],[1,"ant-steps-progress-icon"],["nzType","circle",3,"nzPercent","nzWidth","nzFormat","nzStrokeWidth"],["nzType","check"],["nzType","close"],[3,"nzType"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-steps-icon-dot"]],template:function(i,t){i&1&&(r(0,"div",2,0),f(2,Us,1,0,"div",3),r(3,"div",4),f(4,qs,5,5),f(5,Xs,4,6,"span",5),l(),r(6,"div",6)(7,"div",7),M(8,Ks,2,1,"ng-container",8),f(9,tc,2,1,"div",9),l(),r(10,"div",10),M(11,nc,2,1,"ng-container",8),l()()()),i&2&&(_("tabindex",t.clickable&&!t.nzDisabled?0:null),zo("role",t.clickable&&!t.nzDisabled?"button":null),a(2),g(t.last?-1:2),a(2),g(t.showProcessDot?-1:4),a(),g(t.showProcessDot?5:-1),a(3),_("nzStringTemplateOutlet",t.nzTitle),a(),g(t.nzSubtitle?9:-1),a(2),_("nzStringTemplateOutlet",t.nzDescription))},dependencies:[Xn,Br,we,W,Ye,Be,Oe],encapsulation:2,changeDetection:0})}return n})();var Ca=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({imports:[ic]})}return n})();var oc=["nz-transfer-search",""];function rc(n,c){if(n&1){let e=x();r(0,"span",4),C("click",function(){m(e);let t=s();return u(t._clear())}),h(1,"nz-icon",5),l()}}var ac=["headerCheckbox"],lc=["checkboxes"],sc=(n,c,e,i,t,o)=>({$implicit:n,direction:c,disabled:e,onItemSelectAll:i,onItemSelect:t,stat:o}),xa=n=>({"ant-transfer-list-content-item-disabled":n}),Zi=n=>({$implicit:n}),cc=(n,c)=>c.key;function pc(n,c){if(n&1){let e=x();r(0,"label",10,0),C("nzCheckedChange",function(t){m(e);let o=s();return u(o.onItemSelectAll(t))}),l()}if(n&2){let e=s();_("nzChecked",e.stat.checkAll)("nzIndeterminate",e.stat.checkHalf)("nzDisabled",e.stat.availableCount===0||e.disabled)}}function dc(n,c){if(n&1&&d(0),n&2){let e=s();N(" ",(e.stat.checkCount>0?e.stat.checkCount+"/":"")+e.stat.shownCount," ")}}function mc(n,c){if(n&1&&d(0),n&2){let e=s();N(" ",e.stat.shownCount," ")}}function uc(n,c){if(n&1&&(r(0,"span",5),d(1),l()),n&2){let e=s();a(),D(e.titleText)}}function _c(n,c){if(n&1){let e=x();r(0,"div",7)(1,"span",11),C("valueChanged",function(t){m(e);let o=s();return u(o.handleFilter(t))})("valueClear",function(){m(e);let t=s();return u(t.handleClear())}),l()()}if(n&2){let e=s();a(),_("placeholder",e.searchPlaceholder)("disabled",e.disabled)("value",e.filter)}}function fc(n,c){n&1&&rt(0)}function gc(n,c){if(n&1&&(r(0,"div",8),M(1,fc,1,0,"ng-container",12),l()),n&2){let e=s();a(),_("ngTemplateOutlet",e.renderList)("ngTemplateOutletContext",To(2,sc,e.validData,e.direction,e.disabled,e.onItemSelectAll,e.onItemSelect,e.stat))}}function Cc(n,c){if(n&1&&d(0),n&2){let e=s(2).$implicit;N(" ",e.title," ")}}function hc(n,c){}function xc(n,c){if(n&1&&M(0,hc,0,0,"ng-template",19),n&2){let e=s(2).$implicit,i=s(3);_("ngTemplateOutlet",i.render)("ngTemplateOutletContext",te(2,Zi,e))}}function wc(n,c){if(n&1){let e=x();r(0,"label",18,1),C("nzCheckedChange",function(){m(e);let t=s().$implicit,o=s(3);return u(o.onItemSelect(t))}),f(2,Cc,1,1)(3,xc,1,4,null,19),l()}if(n&2){let e=s().$implicit,i=s(3);_("nzChecked",e.checked)("nzDisabled",i.disabled||e.disabled),a(2),g(i.render?3:2)}}function vc(n,c){if(n&1){let e=x();r(0,"span",20),d(1),l(),r(2,"div",21),C("click",function(){m(e);let t=s(2).$implicit,o=s(3);return u(o.disabled||t.disabled?null:o.deleteItem(t))}),h(3,"nz-icon",22),l()}if(n&2){let e=s(2).$implicit,i=s(3);a(),N(" ",e.title," "),a(),De(te(3,xa,i.disabled||e.disabled))}}function zc(n,c){}function yc(n,c){if(n&1&&M(0,zc,0,0,"ng-template",19),n&2){let e=s(2).$implicit,i=s(3);_("ngTemplateOutlet",i.render)("ngTemplateOutletContext",te(2,Zi,e))}}function bc(n,c){if(n&1&&f(0,vc,4,5)(1,yc,1,4,null,19),n&2){let e=s(4);g(e.render?1:0)}}function Sc(n,c){if(n&1){let e=x();r(0,"li",16),C("click",function(){let t=m(e).$implicit,o=s(3);return u(o.oneWay?null:o.onItemSelect(t))}),f(1,wc,4,3,"label",17)(2,bc,2,1),l()}if(n&2){let e=c.$implicit,i=s(3);De(te(3,xa,i.disabled||e.disabled)),a(),g(i.oneWay?2:1)}}function Tc(n,c){if(n&1&&(r(0,"ul",13),b(1,Sc,3,5,"li",15,cc),l()),n&2){let e=s(2);a(),S(e.validData)}}function Mc(n,c){if(n&1&&(r(0,"div",14),h(1,"nz-embed-empty",23),l()),n&2){let e=s(2);a(),_("nzComponentName","transfer")("specificContent",e.notFoundContent)}}function Oc(n,c){if(n&1&&f(0,Tc,3,0,"ul",13)(1,Mc,2,2,"div",14),n&2){let e=s();g(e.stat.shownCount>0?0:1)}}function Ec(n,c){}function Pc(n,c){if(n&1&&(r(0,"div",9),M(1,Ec,0,0,"ng-template",19),l()),n&2){let e=s();a(),_("ngTemplateOutlet",e.footer)("ngTemplateOutletContext",te(2,Zi,e.direction))}}function Nc(n,c){if(n&1&&(r(0,"span"),d(1),l()),n&2){let e=s(3);a(),D(e.nzOperations[1])}}function Fc(n,c){if(n&1){let e=x();r(0,"button",4),C("click",function(){m(e);let t=s(2);return u(t.moveToLeft())}),h(1,"nz-icon",6),f(2,Nc,2,1,"span"),l()}if(n&2){let e=s(2);_("disabled",e.nzDisabled||!e.leftActive)("nzType","primary")("nzSize","small"),a(2),g(e.nzOperations[1]?2:-1)}}function Dc(n,c){if(n&1&&(r(0,"span"),d(1),l()),n&2){let e=s(2);a(),D(e.nzOperations[0])}}function kc(n,c){if(n&1){let e=x();r(0,"div",1),f(1,Fc,3,4,"button",3),r(2,"button",4),C("click",function(){m(e);let t=s();return u(t.moveToRight())}),h(3,"nz-icon",5),f(4,Dc,2,1,"span"),l()()}if(n&2){let e=s();a(),g(e.nzOneWay?-1:1),a(),_("disabled",e.nzDisabled||!e.rightActive)("nzType","primary")("nzSize","small"),a(2),g(e.nzOperations[0]?4:-1)}}function Ic(n,c){if(n&1&&(r(0,"span"),d(1),l()),n&2){let e=s(2);a(),D(e.nzOperations[0])}}function Vc(n,c){if(n&1&&(r(0,"span"),d(1),l()),n&2){let e=s(3);a(),D(e.nzOperations[1])}}function Ac(n,c){if(n&1){let e=x();r(0,"button",4),C("click",function(){m(e);let t=s(2);return u(t.moveToLeft())}),h(1,"nz-icon",5),f(2,Vc,2,1,"span"),l()}if(n&2){let e=s(2);_("disabled",e.nzDisabled||!e.leftActive)("nzType","primary")("nzSize","small"),a(2),g(e.nzOperations[1]?2:-1)}}function Bc(n,c){if(n&1){let e=x();r(0,"div",1)(1,"button",4),C("click",function(){m(e);let t=s();return u(t.moveToRight())}),h(2,"nz-icon",6),f(3,Ic,2,1,"span"),l(),f(4,Ac,3,4,"button",3),l()}if(n&2){let e=s();a(),_("disabled",e.nzDisabled||!e.rightActive)("nzType","primary")("nzSize","small"),a(2),g(e.nzOperations[0]?3:-1),a(),g(e.nzOneWay?-1:4)}}var wa=(()=>{class n{cdr=T(Ce);placeholder;value;disabled=!1;valueChanged=new w;valueClear=new w;_handle(){this.valueChanged.emit(this.value)}_clear(){this.disabled||(this.value="",this.valueClear.emit())}ngOnChanges(){this.cdr.detectChanges()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["","nz-transfer-search",""]],inputs:{placeholder:"placeholder",value:"value",disabled:[2,"disabled","disabled",ie]},outputs:{valueChanged:"valueChanged",valueClear:"valueClear"},exportAs:["nzTransferSearch"],features:[ze],attrs:oc,decls:4,vars:6,consts:[[1,"ant-input-prefix"],["nzType","search"],[1,"ant-input",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"ant-input-suffix"],[1,"ant-input-suffix",3,"click"],["nzType","close-circle","nzTheme","fill",1,"ant-input-clear-icon"]],template:function(i,t){i&1&&(r(0,"span",0),h(1,"nz-icon",1),l(),r(2,"input",2),y("ngModelChange",function(p){return z(t.value,p)||(t.value=p),p}),C("ngModelChange",function(){return t._handle()}),l(),f(3,rc,2,0,"span",3)),i&2&&(a(2),L("ant-input-disabled",t.disabled),v("ngModel",t.value),_("disabled",t.disabled)("placeholder",t.placeholder),a(),g(t.value&&t.value.length>0?3:-1))},dependencies:[Wn,ke,oe,re,we,W],encapsulation:2,changeDetection:0})}return n})(),Ji=(()=>{class n{cdr=T(Ce);direction="left";titleText="";showSelectAll=!0;dataSource=[];itemUnit="";itemsUnit="";filter="";oneWay=!1;disabled=!1;showSearch;searchPlaceholder;notFoundContent;filterOption;renderList=null;render=null;footer=null;handleSelectAll=new w;handleSelect=new w;filterChange=new w;moveToLeft=new w;headerCheckbox;checkboxes;stat={checkAll:!1,checkHalf:!1,checkCount:0,shownCount:0,availableCount:0};get validData(){return this.dataSource.filter(e=>!e.hide)}get availableData(){return this.validData.filter(e=>!e.disabled)}onItemSelect=e=>{this.disabled||e.disabled||(e.checked=!e.checked,this.updateCheckStatus(),this.handleSelect.emit(e))};onItemSelectAll=e=>{this.dataSource.forEach(i=>{!i.disabled&&!i.hide&&(i.checked=e)}),this.updateCheckStatus(),this.handleSelectAll.emit(e)};updateCheckStatus(){let e=this.dataSource.filter(i=>!i.disabled).length;this.stat.checkCount=this.dataSource.filter(i=>i.checked&&!i.disabled).length,this.stat.shownCount=this.validData.length,this.stat.availableCount=this.availableData.length,this.stat.checkAll=e>0&&e===this.stat.checkCount,this.stat.checkHalf=this.stat.checkCount>0&&!this.stat.checkAll,this.headerCheckbox&&(this.headerCheckbox.nzChecked=this.stat.checkAll)}handleFilter(e){this.filter=e,this.dataSource.forEach(i=>{i.hide=e.length>0&&!this.matchFilter(e,i)}),this.stat.shownCount=this.validData.length,this.stat.availableCount=this.availableData.length,this.filterChange.emit({direction:this.direction,value:e})}handleClear(){this.handleFilter("")}deleteItem(e){e.checked=!0,this.handleSelect.emit(e),this.moveToLeft.emit()}matchFilter(e,i){return this.filterOption?this.filterOption(e,i):i.title.includes(e)}markForCheck(){this.updateCheckStatus(),this.cdr.markForCheck()}ngAfterViewInit(){this.checkboxes.changes.pipe(Nt(this.checkboxes),ft(()=>{let e=this.checkboxes.toArray();return wt(...e.map(i=>tt(i.nativeElement,"click")))})).subscribe(e=>{e.stopPropagation()})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-transfer-list"]],viewQuery:function(i,t){if(i&1&&(H(ac,5,St),H(lc,5,Ue)),i&2){let o;B(o=R())&&(t.headerCheckbox=o.first),B(o=R())&&(t.checkboxes=o)}},hostAttrs:[1,"ant-transfer-list"],hostVars:2,hostBindings:function(i,t){i&2&&L("ant-transfer-list-with-footer",!!t.footer)},inputs:{direction:"direction",titleText:"titleText",showSelectAll:"showSelectAll",dataSource:"dataSource",itemUnit:"itemUnit",itemsUnit:"itemsUnit",filter:"filter",oneWay:"oneWay",disabled:[2,"disabled","disabled",ie],showSearch:[2,"showSearch","showSearch",ie],searchPlaceholder:"searchPlaceholder",notFoundContent:"notFoundContent",filterOption:"filterOption",renderList:"renderList",render:"render",footer:"footer"},outputs:{handleSelectAll:"handleSelectAll",handleSelect:"handleSelect",filterChange:"filterChange",moveToLeft:"moveToLeft"},exportAs:["nzTransferList"],decls:13,vars:9,consts:[["headerCheckbox",""],["checkboxes",""],[1,"ant-transfer-list-header"],["nz-checkbox","",1,"ant-transfer-list-checkbox",3,"nzChecked","nzIndeterminate","nzDisabled"],[1,"ant-transfer-list-header-selected"],[1,"ant-transfer-list-header-title"],[1,"ant-transfer-list-body"],[1,"ant-transfer-list-body-search-wrapper"],[1,"ant-transfer-list-body-customize-wrapper"],[1,"ant-transfer-list-footer"],["nz-checkbox","",1,"ant-transfer-list-checkbox",3,"nzCheckedChange","nzChecked","nzIndeterminate","nzDisabled"],["nz-transfer-search","",1,"ant-input-affix-wrapper","ant-transfer-list-search",3,"valueChanged","valueClear","placeholder","disabled","value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-transfer-list-content"],[1,"ant-transfer-list-body-not-found"],[1,"ant-transfer-list-content-item",3,"class"],[1,"ant-transfer-list-content-item",3,"click"],["nz-checkbox","",3,"nzChecked","nzDisabled"],["nz-checkbox","",3,"nzCheckedChange","nzChecked","nzDisabled"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-transfer-list-content-item-text"],[1,"ant-transfer-list-content-item-remove",3,"click"],["nzType","delete","nzTheme","outline"],[3,"nzComponentName","specificContent"]],template:function(i,t){i&1&&(r(0,"div",2),f(1,pc,2,3,"label",3),r(2,"span",4)(3,"span"),f(4,dc,1,1)(5,mc,1,1),d(6),l()(),f(7,uc,2,1,"span",5),l(),r(8,"div",6),f(9,_c,2,3,"div",7),f(10,gc,2,9,"div",8)(11,Oc,2,1),l(),f(12,Pc,2,4,"div",9)),i&2&&(a(),g(t.showSelectAll&&!t.oneWay?1:-1),a(3),g(t.oneWay?5:4),a(2),N(" ",t.validData.length>1?t.itemsUnit:t.itemUnit," "),a(),g(t.titleText?7:-1),a(),L("ant-transfer-list-body-with-search",t.showSearch),a(),g(t.showSearch?9:-1),a(),g(t.renderList?10:11),a(2),g(t.footer?12:-1))},dependencies:[Kn,St,Oe,Xt,jn,wa,we,W,dn,G],encapsulation:2,changeDetection:0})}return n})(),Rc=(()=>{class n{destroyRef=T(xe);cdr=T(Ce);i18n=T(Qt);elementRef=T(Ue);renderer=T(jt);directionality=T(Qe);nzFormStatusService=T(Gn,{optional:!0});nzFormNoStatusService=T(Hn,{optional:!0});lists;locale;leftFilter="";rightFilter="";dir="ltr";prefixCls="ant-transfer";statusCls={};hasFeedback=!1;nzDisabled=!1;nzDataSource=[];nzTitles=["",""];nzOperations=[];nzListStyle={};nzShowSelectAll=!0;nzItemUnit;nzItemsUnit;nzCanMove=e=>pn(e.list);nzRenderList=null;nzRender=null;nzFooter=null;nzShowSearch=!1;nzFilterOption;nzSearchPlaceholder;nzNotFoundContent;nzTargetKeys=[];nzSelectedKeys=[];nzStatus="";nzOneWay=!1;nzChange=new w;nzSearchChange=new w;nzSelectChange=new w;leftDataSource=[];lastLeftCheckedIndex;rightDataSource=[];lastRightCheckedIndex;isShiftPressed=!1;onTriggerShiftDown(){this.isShiftPressed=!0}onTriggerShiftUp(){this.isShiftPressed=!1}onTriggerMouseDown(e){let i=e.target.closest(".ant-transfer-list");e.shiftKey&&i&&e.preventDefault()}splitDataSource(){this.leftDataSource=[],this.rightDataSource=[],this.nzDataSource.forEach(e=>{e.direction==="right"?(e.direction="right",this.rightDataSource.push(e)):(e.direction="left",this.leftDataSource.push(e))})}getCheckedData(e){return this[e==="left"?"leftDataSource":"rightDataSource"].filter(i=>i.checked)}handleLeftSelectAll=e=>this.handleSelect("left",e);handleRightSelectAll=e=>this.handleSelect("right",e);handleLeftSelect=e=>this.handleSelect("left",!!e.checked,e);handleRightSelect=e=>this.handleSelect("right",!!e.checked,e);handleSelect(e,i,t){if(t){let P=e==="left"?this.leftDataSource:this.rightDataSource,ee=P.findIndex(Ge=>Ge.key===t.key),Le=this[e==="left"?"lastLeftCheckedIndex":"lastRightCheckedIndex"]??-1;if(this.isShiftPressed&&Le>-1){let Ge=Math.min(Le,ee),ut=Math.max(Le,ee);for(let Bt=Ge;Bt<=ut;Bt++){let K=P[Bt];K.disabled||(K.checked=i)}this.markForCheckAllList()}this[e==="left"?"lastLeftCheckedIndex":"lastRightCheckedIndex"]=ee}let o=this.getCheckedData(e),p=o.filter(P=>!P.disabled).length;this.updateOperationStatus(e,p),this.nzSelectChange.emit({direction:e,checked:i,list:o,item:t})}handleFilterChange(e){this.nzSearchChange.emit(e)}leftActive=!1;rightActive=!1;updateOperationStatus(e,i){this[e==="right"?"leftActive":"rightActive"]=(typeof i>"u"?this.getCheckedData(e).filter(t=>!t.disabled).length:i)>0}moveToLeft=()=>this.moveTo("left");moveToRight=()=>this.moveTo("right");moveTo(e){let i=e==="left"?"right":"left";this.updateOperationStatus(i,0);let o=(e==="left"?this.rightDataSource:this.leftDataSource).filter(p=>p.checked===!0&&!p.disabled);this.nzCanMove({direction:e,list:o}).subscribe({next:p=>this.truthMoveTo(e,p.filter(P=>!!P)),error:()=>o.forEach(p=>p.checked=!1)})}truthMoveTo(e,i){let t=e==="left"?"right":"left",o=e==="left"?this.rightDataSource:this.leftDataSource,p=e==="left"?this.leftDataSource:this.rightDataSource;for(let P of i)P.checked=!1,P.hide=!1,P.direction=e,o.splice(o.indexOf(P),1);p.splice(0,0,...i),this.updateOperationStatus(t),this.nzChange.emit({from:t,to:e,list:i}),this.markForCheckAllList()}markForCheckAllList(){this.lists&&this.lists.forEach(e=>e.markForCheck())}handleNzTargetKeys(){let e=Ii(this.nzTargetKeys),i=t=>t.hasOwnProperty("key");this.leftDataSource.forEach(t=>{i(t)&&e.indexOf(t.key)!==-1&&!t.disabled&&(t.checked=!0)}),this.moveToRight()}handleNzSelectedKeys(){let e=Ii(this.nzSelectedKeys);this.nzDataSource.forEach(t=>{e.indexOf(t.key)!==-1&&(t.checked=!0)});let i=t=>t.disabled===!1&&t.checked===!0;this.rightActive=this.leftDataSource.some(i),this.leftActive=this.rightDataSource.some(i)}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(zn((e,i)=>e.status===i.status&&e.hasFeedback===i.hasFeedback),yn(this.nzFormNoStatusService?this.nzFormNoStatusService.noFormStatus:pn(!1)),Lt(([{status:e,hasFeedback:i},t])=>({status:t?"":e,hasFeedback:i})),J(this.destroyRef)).subscribe(({status:e,hasFeedback:i})=>{this.setStatusStyles(e,i)}),this.i18n.localeChange.pipe(J(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Transfer"),this.markForCheckAllList()}),this.dir=this.directionality.value,this.directionality.change?.pipe(J(this.destroyRef)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()})}ngOnChanges(e){let{nzStatus:i,nzDataSource:t,nzTargetKeys:o,nzSelectedKeys:p}=e;t&&(this.splitDataSource(),this.updateOperationStatus("left"),this.updateOperationStatus("right"),this.cdr.detectChanges(),this.markForCheckAllList()),o&&this.handleNzTargetKeys(),p&&this.handleNzSelectedKeys(),i&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}setStatusStyles(e,i){this.hasFeedback=i,this.cdr.markForCheck(),this.statusCls=Dn(this.prefixCls,e,i),Object.keys(this.statusCls).forEach(t=>{this.statusCls[t]?this.renderer.addClass(this.elementRef.nativeElement,t):this.renderer.removeClass(this.elementRef.nativeElement,t)})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-transfer"]],viewQuery:function(i,t){if(i&1&&H(Ji,5),i&2){let o;B(o=R())&&(t.lists=o)}},hostAttrs:[1,"ant-transfer"],hostVars:6,hostBindings:function(i,t){i&1&&C("keydown.shift",function(){return t.onTriggerShiftDown()},Pi)("keyup.shift",function(){return t.onTriggerShiftUp()},Pi)("mousedown",function(p){return t.onTriggerMouseDown(p)}),i&2&&L("ant-transfer-rtl",t.dir==="rtl")("ant-transfer-disabled",t.nzDisabled)("ant-transfer-customize-list",t.nzRenderList)},inputs:{nzDisabled:[2,"nzDisabled","nzDisabled",ie],nzDataSource:"nzDataSource",nzTitles:"nzTitles",nzOperations:"nzOperations",nzListStyle:"nzListStyle",nzShowSelectAll:[2,"nzShowSelectAll","nzShowSelectAll",ie],nzItemUnit:"nzItemUnit",nzItemsUnit:"nzItemsUnit",nzCanMove:"nzCanMove",nzRenderList:"nzRenderList",nzRender:"nzRender",nzFooter:"nzFooter",nzShowSearch:[2,"nzShowSearch","nzShowSearch",ie],nzFilterOption:"nzFilterOption",nzSearchPlaceholder:"nzSearchPlaceholder",nzNotFoundContent:"nzNotFoundContent",nzTargetKeys:"nzTargetKeys",nzSelectedKeys:"nzSelectedKeys",nzStatus:"nzStatus",nzOneWay:[2,"nzOneWay","nzOneWay",ie]},outputs:{nzChange:"nzChange",nzSearchChange:"nzSearchChange",nzSelectChange:"nzSelectChange"},exportAs:["nzTransfer"],features:[ze],decls:4,vars:34,consts:[["data-direction","left","direction","left",1,"ant-transfer-list",3,"filterChange","handleSelect","handleSelectAll","titleText","showSelectAll","dataSource","filter","filterOption","renderList","render","disabled","showSearch","searchPlaceholder","notFoundContent","itemUnit","itemsUnit","footer"],[1,"ant-transfer-operation"],["data-direction","right","direction","right",1,"ant-transfer-list",3,"filterChange","moveToLeft","handleSelect","handleSelectAll","titleText","showSelectAll","dataSource","filter","filterOption","renderList","render","disabled","showSearch","searchPlaceholder","notFoundContent","itemUnit","itemsUnit","footer","oneWay"],["nz-button","","type","button",3,"disabled","nzType","nzSize"],["nz-button","","type","button",3,"click","disabled","nzType","nzSize"],["nzType","right"],["nzType","left"]],template:function(i,t){i&1&&(r(0,"nz-transfer-list",0),C("filterChange",function(p){return t.handleFilterChange(p)})("handleSelect",function(p){return t.handleLeftSelect(p)})("handleSelectAll",function(p){return t.handleLeftSelectAll(p)}),l(),f(1,kc,5,5,"div",1)(2,Bc,5,5,"div",1),r(3,"nz-transfer-list",2),C("filterChange",function(p){return t.handleFilterChange(p)})("moveToLeft",function(){return t.moveToLeft()})("handleSelect",function(p){return t.handleRightSelect(p)})("handleSelectAll",function(p){return t.handleRightSelectAll(p)}),l()),i&2&&(at(t.nzListStyle),_("titleText",t.nzTitles[0])("showSelectAll",t.nzShowSelectAll)("dataSource",t.leftDataSource)("filter",t.leftFilter)("filterOption",t.nzFilterOption)("renderList",t.nzRenderList&&t.nzRenderList[0])("render",t.nzRender)("disabled",t.nzDisabled)("showSearch",t.nzShowSearch)("searchPlaceholder",t.nzSearchPlaceholder||(t.locale==null?null:t.locale.searchPlaceholder))("notFoundContent",t.nzNotFoundContent)("itemUnit",t.nzItemUnit||(t.locale==null?null:t.locale.itemUnit))("itemsUnit",t.nzItemsUnit||(t.locale==null?null:t.locale.itemsUnit))("footer",t.nzFooter),a(),g(t.dir!=="rtl"?1:2),a(2),at(t.nzListStyle),_("titleText",t.nzTitles[1])("showSelectAll",t.nzShowSelectAll)("dataSource",t.rightDataSource)("filter",t.rightFilter)("filterOption",t.nzFilterOption)("renderList",t.nzRenderList&&t.nzRenderList[1])("render",t.nzRender)("disabled",t.nzDisabled)("showSearch",t.nzShowSearch)("searchPlaceholder",t.nzSearchPlaceholder||(t.locale==null?null:t.locale.searchPlaceholder))("notFoundContent",t.nzNotFoundContent)("itemUnit",t.nzItemUnit||(t.locale==null?null:t.locale.itemUnit))("itemsUnit",t.nzItemsUnit||(t.locale==null?null:t.locale.itemsUnit))("footer",t.nzFooter)("oneWay",t.nzOneWay))},dependencies:[Ji,we,W,dn,Y,G,X],encapsulation:2,changeDetection:0})}return n})(),va=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({imports:[Rc,Ji,wa]})}return n})();var Lc=["items"],Wc=["*"],Uc=n=>({$implicit:n});function jc(n,c){n&1&&rt(0)}function Gc(n,c){if(n&1&&M(0,jc,1,0,"ng-container",9),n&2){let e=s().$implicit,i=s(2);_("ngTemplateOutlet",i.suggestionTemplate)("ngTemplateOutletContext",te(2,Uc,e))}}function Hc(n,c){if(n&1&&d(0),n&2){let e=s().$implicit,i=s(2);N(" ",i.nzValueWith(e)," ")}}function Qc(n,c){if(n&1){let e=x();r(0,"li",8,1),C("click",function(){let t=m(e).$implicit,o=s(2);return u(o.selectSuggestion(t))}),f(2,Gc,1,4,"ng-container")(3,Hc,1,1),l()}if(n&2){let e=c.$index,i=s(2);L("ant-mentions-dropdown-menu-item-active",e===i.activeIndex)("ant-mentions-dropdown-menu-item-selected",e===i.activeIndex),a(2),g(i.suggestionTemplate?2:3)}}function Yc(n,c){n&1&&(r(0,"span"),h(1,"nz-icon",10),l())}function $c(n,c){if(n&1&&(r(0,"span"),h(1,"nz-embed-empty",11),l()),n&2){let e=s(3);a(),_("specificContent",e.nzNotFoundContent)}}function qc(n,c){if(n&1&&(r(0,"li",7),f(1,Yc,2,0,"span")(2,$c,2,1,"span"),l()),n&2){let e=s(2);a(),g(e.nzLoading?1:2)}}function Jc(n,c){if(n&1&&(r(0,"div",4)(1,"ul",5),b(2,Qc,4,5,"li",6,O),f(4,qc,3,1,"li",7),l()()),n&2){let e=s();a(2),S(e.filteredSuggestions),a(2),g(e.filteredSuggestions.length===0?4:-1)}}function Zc(n,c){if(n&1&&h(0,"nz-form-item-feedback-icon",2),n&2){let e=s();_("status",e.status)}}function Xc(n,c){n&1&&h(0,"nz-icon",14)}function Kc(n,c){if(n&1){let e=x();r(0,"span",3)(1,"button",12),C("click",function(){m(e);let t=s();return u(t.clear())}),M(2,Xc,1,0,"ng-template",13),l()()}if(n&2){let e=s();a(2),_("nzStringTemplateOutlet",e.nzClearIcon)}}var ep=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["","nzMentionSuggestion",""]],exportAs:["nzMentionSuggestion"]})}return n})(),Kt={split:" "},tp={provide:ur,useExisting:go(()=>Xi),multi:!0},Xi=(()=>{class n{elementRef=T(Ue);ngZone=T(Ft);cdr=T(Ce);destroyRef=T(xe);onFocusin=new w;onBlur=new w;onInput=new w;onKeydown=new w;onClick=new w;value=Sn("");disabled=Sn(!1);constructor(){this.destroyRef.onDestroy(()=>{this.completeEvents()}),Tn(()=>{this.setupEventListener("blur",this.onBlur),this.setupEventListener("focusin",this.onFocusin),this.setupEventListener("input",this.onInput),this.setupEventListener("click",this.onClick),this.setupEventListener("keydown",this.onKeydown)})}completeEvents(){this.onFocusin.complete(),this.onBlur.complete(),this.onInput.complete(),this.onKeydown.complete(),this.onClick.complete()}focus(e=null){this.elementRef.nativeElement.focus(),this.elementRef.nativeElement.setSelectionRange(e,e)}insertMention(e){let i=this.elementRef.nativeElement.value,t=`${e.mention}${Kt.split}`,o=[i.slice(0,e.startPos+1),t,i.slice(e.endPos,i.length)].join("");this.elementRef.nativeElement.value=o,this.focus(e.startPos+t.length+1),this.onChange(o),this.value.set(o)}clear(){this.value.set(""),this.elementRef.nativeElement.value="",this.onChange("")}writeValue(e){let i=typeof e=="string"?e:"";this.value.set(i),this.elementRef.nativeElement.value=i}onChange=()=>{};onTouched=()=>{};registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled.set(e)}setupEventListener(e,i){tt(this.elementRef.nativeElement,e).pipe(J(this.destroyRef)).subscribe(t=>{i.observers.length&&this.ngZone.run(()=>{i.emit(t),this.cdr.markForCheck()})})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=gt({type:n,selectors:[["input","nzMentionTrigger",""],["textarea","nzMentionTrigger",""]],hostAttrs:["autocomplete","off"],outputs:{onFocusin:"onFocusin",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClick:"onClick"},exportAs:["nzMentionTrigger"],features:[On([tp])]})}return n})(),np=(()=>{class n{ngZone=T(Ft);directionality=T(Qe);cdr=T(Ce);injector=T(bn);viewContainerRef=T(Mn);elementRef=T(Ue);renderer=T(jt);destroyRef=T(xe);nzValueWith=e=>e;nzPrefix="@";nzLoading=!1;nzNotFoundContent="\u65E0\u5339\u914D\u7ED3\u679C\uFF0C\u8F7B\u6572\u7A7A\u683C\u5B8C\u6210\u8F93\u5165";nzPlacement="bottom";nzSuggestions=[];nzStatus="";nzVariant="outlined";nzAllowClear=!1;nzClearIcon=null;nzOnSelect=new w;nzOnSearchChange=new w;nzOnClear=new w;suggestionsTemp;items;set suggestionChild(e){e&&(this.suggestionTemplate=e)}trigger=Oo.required(Xi);isOpen=!1;filteredSuggestions=[];suggestionTemplate=null;activeIndex=-1;dir="ltr";prefixCls="ant-mentions";statusCls={};status="";hasFeedback=!1;focused=Sn(!1);disabled=Di(()=>this.trigger().disabled());hasValue=Di(()=>!!this.trigger()?.value().trim());previousValue=null;cursorMention=null;cursorMentionStart;cursorMentionEnd;overlayRef=null;portal;positionStrategy;overlayOutsideClickSubscription;document=T(Wt);get triggerNativeElement(){return this.trigger().elementRef.nativeElement}get focusItemElement(){let e=this.items?.toArray();return e&&e[this.activeIndex]?e[this.activeIndex].nativeElement:null}nzFormStatusService=T(Gn,{optional:!0});nzFormNoStatusService=T(Hn,{optional:!0});constructor(){this.destroyRef.onDestroy(()=>{this.closeDropdown()}),Mo(()=>{this.trigger()&&(this.bindTriggerEvents(),this.closeDropdown(),this.overlayRef=null)})}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(zn((e,i)=>e.status===i.status&&e.hasFeedback===i.hasFeedback),yn(this.nzFormNoStatusService?this.nzFormNoStatusService.noFormStatus:pn(!1)),Lt(([{status:e,hasFeedback:i},t])=>({status:t?"":e,hasFeedback:i})),J(this.destroyRef)).subscribe(({status:e,hasFeedback:i})=>{this.setStatusStyles(e,i)}),this.dir=this.directionality.value,this.directionality.change?.pipe(J(this.destroyRef)).subscribe(e=>{this.dir=e})}ngOnChanges(e){let{nzSuggestions:i,nzStatus:t}=e;i&&this.isOpen&&(this.previousValue=null,this.activeIndex=-1,this.resetDropdown(!1)),t&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}ngAfterViewInit(){this.items.changes.pipe(Nt(this.items),ft(()=>{let e=this.items.toArray();return wt(...e.map(i=>tt(i.nativeElement,"mousedown")))})).subscribe(e=>{e.preventDefault()})}closeDropdown(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.detach(),this.overlayOutsideClickSubscription.unsubscribe(),this.isOpen=!1,this.cdr.markForCheck())}openDropdown(){this.attachOverlay(),this.isOpen=!0,this.cdr.markForCheck()}getMentions(){return this.trigger()?Ao(this.trigger().value(),this.nzPrefix):[]}selectSuggestion(e){let i=this.nzValueWith(e);this.trigger().insertMention({mention:i,startPos:this.cursorMentionStart,endPos:this.cursorMentionEnd}),this.nzOnSelect.emit(e),this.closeDropdown(),this.activeIndex=-1}clear(){this.closeDropdown(),this.trigger().clear(),this.nzOnClear.emit()}handleInput(e){let i=e.target;this.trigger().onChange(i.value),this.trigger().value.set(i.value),this.resetDropdown()}handleKeydown(e){let i=e.keyCode;if(this.isOpen&&i===13&&this.activeIndex!==-1&&this.filteredSuggestions.length)this.selectSuggestion(this.filteredSuggestions[this.activeIndex]),e.preventDefault();else if(i===37||i===39)this.resetDropdown(),e.stopPropagation();else{if(this.isOpen&&(i===9||i===27)){this.closeDropdown();return}this.isOpen&&i===38&&(this.setPreviousItemActive(),e.preventDefault(),e.stopPropagation()),this.isOpen&&i===40&&(this.setNextItemActive(),e.preventDefault(),e.stopPropagation())}}handleClick(){this.resetDropdown(!1)}bindTriggerEvents(){this.trigger().onFocusin.subscribe(()=>this.focused.set(!0)),this.trigger().onBlur.subscribe(()=>this.focused.set(!1)),this.trigger().onInput.subscribe(e=>this.handleInput(e)),this.trigger().onKeydown.subscribe(e=>this.handleKeydown(e)),this.trigger().onClick.subscribe(()=>this.handleClick())}suggestionsFilter(e,i){let t=e.substring(1);if(this.previousValue===e&&e!==this.cursorMention[0])return;this.previousValue=e,i&&this.nzOnSearchChange.emit({value:this.cursorMention.substring(1),prefix:this.cursorMention[0]});let o=t.toLowerCase();this.filteredSuggestions=this.nzSuggestions.filter(p=>this.nzValueWith(p).toLowerCase().includes(o))}resetDropdown(e=!0){if(this.resetCursorMention(),typeof this.cursorMention!="string"||!this.canOpen()){this.closeDropdown();return}this.suggestionsFilter(this.cursorMention,e);let i=this.filteredSuggestions.indexOf(this.cursorMention.substring(1));this.activeIndex=i>=0?i:0,this.openDropdown()}setNextItemActive(){this.activeIndex=this.activeIndex+1<=this.filteredSuggestions.length-1?this.activeIndex+1:0,this.cdr.markForCheck(),this.scrollToFocusItem()}setPreviousItemActive(){this.activeIndex=this.activeIndex-1<0?this.filteredSuggestions.length-1:this.activeIndex-1,this.cdr.markForCheck(),this.scrollToFocusItem()}scrollToFocusItem(){this.focusItemElement&&this.focusItemElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}canOpen(){let e=this.triggerNativeElement;return!e.readOnly&&!e.disabled}resetCursorMention(){let e=this.triggerNativeElement.value.replace(/[\r\n]/g,Kt.split)||"",i=this.triggerNativeElement.selectionStart,t=typeof this.nzPrefix=="string"?[this.nzPrefix]:this.nzPrefix,o=t.length;for(;o>=0;){let p=e.lastIndexOf(t[o],i),P=e.indexOf(Kt.split,i)>-1?e.indexOf(Kt.split,i):e.length,ee=e.substring(p,P);if(p>0&&e[p-1]!==Kt.split||p<0||ee.includes(t[o],1)||ee.includes(Kt.split))this.cursorMention=null,this.cursorMentionStart=-1,this.cursorMentionEnd=-1;else{this.cursorMention=ee,this.cursorMentionStart=p,this.cursorMentionEnd=P;return}o--}}updatePositions(){let e=Bo(this.triggerNativeElement,this.cursorMentionStart),i=e.top-this.triggerNativeElement.getBoundingClientRect().height-this.triggerNativeElement.scrollTop+(this.nzPlacement==="bottom"?e.height-6:-6),t=e.left-this.triggerNativeElement.scrollLeft;this.positionStrategy.withDefaultOffsetX(t).withDefaultOffsetY(i),this.nzPlacement==="bottom"&&this.positionStrategy.withPositions([...Jo]),this.nzPlacement==="top"&&this.positionStrategy.withPositions([...qo]),this.positionStrategy.apply()}subscribeOverlayOutsideClick(){let e=t=>{let o=t.target;return this.isOpen&&o!==this.triggerNativeElement&&!this.overlayRef?.overlayElement.contains(o)},i=new cn;return i.add(this.overlayRef.outsidePointerEvents().subscribe(t=>e(t)&&this.closeDropdown())),i.add(tt(this.document,"touchend").subscribe(t=>e(t)&&this.ngZone.run(()=>this.closeDropdown()))),i}attachOverlay(){this.overlayRef||(this.portal=new Ho(this.suggestionsTemp,this.viewContainerRef),this.overlayRef=$o(this.injector,{positionStrategy:this.getOverlayPosition(),scrollStrategy:Qo(this.injector),disposeOnNavigation:!0})),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayOutsideClickSubscription=this.subscribeOverlayOutsideClick()),this.updatePositions()}getOverlayPosition(){return this.positionStrategy=Yo(this.injector,this.trigger().elementRef).withPositions([new Bi({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new Bi({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})]).withFlexibleDimensions(!1).withPush(!1)}setStatusStyles(e,i){this.status=e,this.hasFeedback=i,this.cdr.markForCheck(),this.statusCls=Dn(this.prefixCls,e,i),Object.keys(this.statusCls).forEach(t=>{this.statusCls[t]?this.renderer.addClass(this.elementRef.nativeElement,t):this.renderer.removeClass(this.elementRef.nativeElement,t)})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["nz-mention"]],contentQueries:function(i,t,o){if(i&1&&(yo(o,t.trigger,Xi,5),He(o,ep,5,Dt)),i&2){bo();let p;B(p=R())&&(t.suggestionChild=p.first)}},viewQuery:function(i,t){if(i&1&&(H(Dt,5),H(Lc,5,Ue)),i&2){let o;B(o=R())&&(t.suggestionsTemp=o.first),B(o=R())&&(t.items=o)}},hostAttrs:[1,"ant-mentions"],hostVars:12,hostBindings:function(i,t){i&2&&L("ant-mentions-rtl",t.dir==="rtl")("ant-mentions-borderless",t.nzVariant==="borderless")("ant-mentions-filled",t.nzVariant==="filled")("ant-mentions-underlined",t.nzVariant==="underlined")("ant-mentions-focused",t.focused())("ant-mentions-disabled",t.disabled())},inputs:{nzValueWith:"nzValueWith",nzPrefix:"nzPrefix",nzLoading:[2,"nzLoading","nzLoading",ie],nzNotFoundContent:"nzNotFoundContent",nzPlacement:"nzPlacement",nzSuggestions:"nzSuggestions",nzStatus:"nzStatus",nzVariant:"nzVariant",nzAllowClear:[2,"nzAllowClear","nzAllowClear",ie],nzClearIcon:"nzClearIcon"},outputs:{nzOnSelect:"nzOnSelect",nzOnSearchChange:"nzOnSearchChange",nzOnClear:"nzOnClear"},exportAs:["nzMention"],features:[ze],ngContentSelectors:Wc,decls:5,vars:2,consts:[["suggestions",""],["items",""],[1,"ant-mentions-suffix",3,"status"],[1,"ant-mentions-suffix"],[1,"ant-mentions-dropdown"],["role","menu","tabindex","0",1,"ant-mentions-dropdown-menu"],["role","menuitem","tabindex","-1",1,"ant-mentions-dropdown-menu-item",3,"ant-mentions-dropdown-menu-item-active","ant-mentions-dropdown-menu-item-selected"],[1,"ant-mentions-dropdown-menu-item","ant-mentions-dropdown-menu-item-disabled"],["role","menuitem","tabindex","-1",1,"ant-mentions-dropdown-menu-item",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["nzType","loading"],["nzComponentName","select",3,"specificContent"],["type","button","tabindex","-1",1,"ant-mentions-clear-icon",3,"click"],[3,"nzStringTemplateOutlet"],["nzType","close-circle","nzTheme","fill"]],template:function(i,t){i&1&&(Me(),pe(0),M(1,Jc,5,1,"ng-template",null,0,ne),f(3,Zc,1,1,"nz-form-item-feedback-icon",2),f(4,Kc,3,1,"span",3)),i&2&&(a(3),g(t.hasFeedback&&t.status?3:-1),a(),g(t.nzAllowClear&&t.hasValue()?4:-1))},dependencies:[Oe,we,W,Xt,jn,yr,Be],encapsulation:2,changeDetection:0})}return n})();var za=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({imports:[np]})}return n})();var Pe=class{createBranch(c){throw new Error("Method not implemented.")}};var U=(function(n){return n.START="START",n.END="END",n.SUB="SUB",n.CC="CC",n.APPROVAL="APPROVAL",n.FlEX="FLEX",n.GATEWAY_PARALLEL="GATEWAY_PARALLEL",n.GATEWAY_INCLUSIVE="GATEWAY_INCLUSIVE",n.GATEWAY_EXCLUSION="GATEWAY_EXCLUSION",n.GATEWAY_BRANCH="GATEWAY_BRANCH",n.GATEWAY_JOIN="GATEWAY_JOIN",n})(U||{}),mt=(function(n){return n.PARALLEL_CONDITION="PARALLEL_CONDITION",n.CONDITION="CONDITION",n.ELSE="ELSE",n})(mt||{});function se(){return Math.random().toString(36).slice(2,10).toUpperCase()}function un(n){n&&typeof n=="object"&&(n.id&&(n.id=se()),n.branch&&Array.isArray(n.branch)&&n.branch.forEach(c=>un(c)),n.props&&n.props.branch&&Array.isArray(n.props.branch)&&n.props.branch.forEach(c=>un(c)))}function Ne(n,c,e){n.splice(c+1,0,{id:se(),type:U.FlEX,flex:e.code,name:e.name,color:e.color})}function ci(n){let c=["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#38f9d7","#fa709a","#fee140","#a8edea","#fed6e3","#ffecd2","#fcb69f","#ff9a9e","#fecfef"],e=n.charCodeAt(0)%c.length;return c[e]}var hn=(function(n){return n.PRE_SIGN="PRE_SIGN",n.POST_SIGN="POST_SIGN",n})(hn||{}),Ct=(function(n){return n.SUBMITTER_HIMSELF="SUBMITTER_HIMSELF",n.ROLE="ROLE",n.POST="POST",n.SPECIFIED_USER="SPECIFIED_USER",n.ORG_HEAD="ORG_HEAD",n})(Ct||{}),pi=(function(n){return n.ALL_APPROVE="ALL_APPROVE",n.ANY_APPROVE="ANY_APPROVE",n})(pi||{}),di=(function(n){return n.REDIRECT_TO_ADMIN="REDIRECT_TO_ADMIN",n.REDIRECT_TO_SPECIFIED_USER="REDIRECT_TO_SPECIFIED_USER",n})(di||{}),_n=class{reviewUserModes=[{mode:Ct.SUBMITTER_HIMSELF,modeValue:null}];formAccesses={};approvalStrategy=pi.ANY_APPROVE;nobodyStrategy=di.REDIRECT_TO_ADMIN;nobodyRedirectToUser;allowTransfer=!0;allowAddSign=!0;allowCc=!0;allowReturn=!0;requireApprovalNote=!1;requireSignature=!1;approvalTimeoutEnabled=!1;approvalTimeoutHours;approvalTimeoutAction},Ki=(function(n){return n.AUTO_PASS="AUTO_PASS",n.AUTO_REJECT="AUTO_REJECT",n})(Ki||{}),fn=class{reviewUserModes=[{mode:Ct.SUBMITTER_HIMSELF,modeValue:null}];formAccesses={}},gn=class{formAccesses={}},Cn=class{subFlowId;mappings=[];mappingsReverse=[]};var xn=(function(n){return n.ALL="ALL",n.MANAGER="MANAGER",n.SPECIFIC="SPECIFIC",n.NO="NO",n})(xn||{}),mi=class{id;code;name;remark;erupt;channels=[];icon="fa fa-user";color="#1890ff";flowGroup;enable;rule;permission=xn.ALL;permissionScope;setting=new eo},eo=class{subTitleFields=[]},Z=(function(n){return n.ORG="ORG",n.USER="USER",n.ROLE="ROLE",n.POST="POST",n})(Z||{}),Te=(function(n){return n.DEFAULT="DEFAULT",n.READONLY="READONLY",n.READ_WRITE="READ_WRITE",n.NOT_NULL="NOT_NULL",n.HIDE="HIDE",n})(Te||{});var ip=["nodeNameInput"],op=["*",[["","config",""]]],rp=["*","[config]"],ap=()=>({padding:"16px"});function lp(n,c){if(n&1&&h(0,"span",3),n&2){let e=s();_("nzTooltipTitle",e.model.error)("nzTwotoneColor","#FF4D4F")}}function sp(n,c){if(n&1){let e=x();r(0,"input",15,1),C("blur",function(){m(e);let t=s(2);return u(t.onBlur())}),y("ngModelChange",function(t){m(e);let o=s(2);return z(o.model.name,t)||(o.model.name=t),u(t)}),l()}if(n&2){let e=s(2);v("ngModel",e.model.name)}}function cp(n,c){if(n&1){let e=x();r(0,"div",16),C("click",function(){m(e);let t=s(2);return u(t.onEnableEdit())}),d(1),l()}if(n&2){let e=s(2);a(),N("",e.model.name," ")}}function pp(n,c){if(n&1){let e=x();r(0,"span",17),C("click",function(){m(e);let t=s(2);return u(t.onDelete())}),l()}}function dp(n,c){n&1&&h(0,"span",14)}function mp(n,c){if(n&1){let e=x();r(0,"div",8)(1,"div",9)(2,"div"),f(3,sp,2,1,"input",10),f(4,cp,2,1,"div",11),l(),f(5,pp,1,0,"span",12),l(),r(6,"div",13),C("click",function(){m(e);let t=s();return u(t.onSelect())}),pe(7),f(8,dp,1,0,"span",14),l()()}if(n&2){let e=s();fe("background",e.headerColor)("--shadowColor",e.headerColor),_("ngClass",e.progress==null?null:e.progress[e.model.id]),a(),fe("background-color",e.headerColor),a(2),g(e.enableEdit?3:-1),a(),g(e.enableEdit?-1:4),a(),g(e.showClose&&!e.readonly?5:-1),a(3),g(e.hasConfig&&!e.readonly?8:-1)}}function up(n,c){if(n&1){let e=x();r(0,"app-insert-btn",18),C("insertNode",function(t){m(e);let o=s();return u(o.onInsertNode(t))})("insertFlexNode",function(t){m(e);let o=s();return u(o.onInsertFlexNode(t))}),l()}}function _p(n,c){n&1&&($(0),pe(1,1),q())}function fp(n,c){if(n&1){let e=x();r(0,"div",19)(1,"button",20),C("click",function(){m(e);let t=s();return u(t.close())}),d(2,"Cancel"),l(),r(3,"button",21),C("click",function(){m(e);let t=s();return u(t.save())}),d(4,"Save"),l()()}}var Fe=(()=>{class n{eruptBuild;headerColor="";headerIcon="";content="";readonly=!1;model;showClose=!0;showBody=!0;hasConfig=!0;progress;modelChange=new w;select=new w;delete=new w;insertNode=new w;saveProp=new w;insertFlexNode=new w;nodeNameInput;showDrawer=!1;enableEdit=!1;constructor(){}ngAfterViewInit(){}onEnableEdit(){this.readonly||(this.enableEdit=!0,setTimeout(()=>{this.nodeNameInput&&this.nodeNameInput.nativeElement.focus()}))}onBlur(){this.enableEdit=!1}onSelect(){!this.hasConfig||this.readonly||(this.model.error=null,this.showDrawer=!0,this.select.emit())}onDelete(){this.delete.emit()}onInsertNode(e){this.insertNode.emit(e)}onInsertFlexNode(e){this.insertFlexNode.emit(e)}close(){this.showDrawer=!1}save(){this.saveProp.emit(),this.showDrawer=!1}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["erupt-node"]],viewQuery:function(i,t){if(i&1&&H(ip,5),i&2){let o;B(o=R())&&(t.nodeNameInput=o.first)}},inputs:{eruptBuild:"eruptBuild",headerColor:"headerColor",headerIcon:"headerIcon",content:"content",readonly:"readonly",model:"model",showClose:"showClose",showBody:"showBody",hasConfig:"hasConfig",progress:"progress"},outputs:{modelChange:"modelChange",select:"select",delete:"delete",insertNode:"insertNode",saveProp:"saveProp",insertFlexNode:"insertFlexNode"},standalone:!1,ngContentSelectors:rp,decls:9,vars:9,consts:[["footerTpl",""],["nodeNameInput",""],[1,"p-node"],["nz-tooltip","","nz-icon","","nzType","warning","nzTheme","twotone",1,"node-err-tip",3,"nzTooltipTitle","nzTwotoneColor"],[1,"p-node-body",3,"ngClass","background","--shadowColor"],[1,"p-node-add"],["nzPlacement","right",3,"nzOnClose","nzVisible","nzTitle","nzBodyStyle","nzFooter","nzWidth"],[4,"nzDrawerContent"],[1,"p-node-body",3,"ngClass"],[1,"p-node-header"],["autofocus","",2,"color","#000",3,"ngModel"],[1,"row-text"],[1,"fa","fa-close"],[1,"p-node-content",3,"click"],["nz-icon","","nzType","arrow-right",1,"w-p-node-click"],["autofocus","",2,"color","#000",3,"blur","ngModelChange","ngModel"],[1,"row-text",3,"click"],[1,"fa","fa-close",3,"click"],[3,"insertNode","insertFlexNode"],[2,"float","right"],["nz-button","",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(i,t){if(i&1){let o=x();Me(op),r(0,"div",2),f(1,lp,1,2,"span",3),f(2,mp,9,11,"div",4),r(3,"div",5),f(4,up,1,0,"app-insert-btn"),l()(),r(5,"nz-drawer",6),C("nzOnClose",function(){return m(o),u(t.close())}),M(6,_p,2,0,"ng-container",7),l(),M(7,fp,5,0,"ng-template",null,0,ne)}if(i&2){let o=ae(8);a(),g(t.model!=null&&t.model.error?1:-1),a(),g(t.showBody?2:-1),a(2),g(t.readonly?-1:4),a(),_("nzVisible",t.showDrawer)("nzTitle",t.model==null?null:t.model.name)("nzBodyStyle",de(8,ap))("nzFooter",o)("nzWidth",600)}},styles:['.p-node[_ngcontent-%COMP%]{width:200px;margin-bottom:8px;position:relative}.p-node[_ngcontent-%COMP%]   .node-err-tip[_ngcontent-%COMP%]{z-index:9;position:absolute;right:-30px;top:5px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]{cursor:pointer;background:#fff;overflow:hidden;border-radius:5px;box-shadow:0 0 5px #d8d8d8}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 10px;color:#fff;height:25px;font-size:13px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .row-text[_ngcontent-%COMP%]:hover{text-decoration:underline}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .node-del[_ngcontent-%COMP%]{display:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:3px;width:150px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:150px;border:none;border-radius:5px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-content[_ngcontent-%COMP%]{padding:7px 6px 7px 7px;min-height:40px;display:flex;justify-content:space-between;align-items:center;font-size:15px;background:#fff;margin:0 4px 4px;border-radius:5px;color:#656363;position:relative}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:92%;word-wrap:break-word}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 0 var(--shadowColor)}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover   .node-del[_ngcontent-%COMP%]{display:inline}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;height:80px}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]:before{position:absolute;content:"";width:3px;height:80px;background:#d9d9d9}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]:after{content:"";position:absolute;top:80px;left:50%;transform:translate(-50%);width:0;border-style:solid;border-width:8px 6px 4px;border-color:#d9d9d9 transparent transparent}']})}return n})();var Cp=()=>({}),hp=n=>[n],xp=()=>[];function wp(n,c){if(n&1){let e=x();r(0,"tr")(1,"td"),d(2),l(),r(3,"td")(4,"nz-radio-group",3),y("ngModelChange",function(t){m(e);let o=s().$implicit,p=s();return z(p.formAccesses[o.fieldName],t)||(p.formAccesses[o.fieldName]=t),u(t)}),r(5,"div",2),h(6,"label",4)(7,"label",4)(8,"label",5)(9,"label",4),l()()()()}if(n&2){let e=s().$implicit,i=s();a(2),D(e.eruptFieldJson.edit.title),a(2),v("ngModel",i.formAccesses[e.fieldName]),_("nzDisabled",e.eruptFieldJson.edit.readOnly.add),a(2),_("nzValue",i.FormAccessEnum.READONLY),a(),_("nzValue",i.FormAccessEnum.READ_WRITE),a(),_("nzValue",i.FormAccessEnum.NOT_NULL)("nzDisabled",e.eruptFieldJson.edit.type==i.EditType.DIVIDE||e.eruptFieldJson.edit.type==i.EditType.TPL||e.eruptFieldJson.edit.type==i.EditType.EMPTY),a(),_("nzValue",i.FormAccessEnum.HIDE)}}function vp(n,c){if(n&1&&f(0,wp,10,8,"tr"),n&2){let e=c.$implicit;g(e.eruptFieldJson.edit.title&&e.eruptFieldJson.edit.show?0:-1)}}var en=(()=>{class n{eruptBuild;radioValue;formAccesses={};access=Te.READONLY;FormAccessEnum=Te;ngOnInit(){}EditType=Rn;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["app-form-access"]],inputs:{eruptBuild:"eruptBuild",formAccesses:"formAccesses",access:"access"},standalone:!1,decls:17,vars:7,consts:[["nzHideOnSinglePage","",3,"nzData","nzSize"],[3,"nzWidth"],[2,"display","flex","gap","50px","justify-content","space-evenly"],[2,"width","100%",3,"ngModelChange","ngModel","nzDisabled"],["nz-radio","",3,"nzValue"],["nz-radio","",3,"nzValue","nzDisabled"]],template:function(i,t){i&1&&(r(0,"nz-table",0)(1,"thead")(2,"tr")(3,"th",1),d(4,"\u8868\u5355\u5B57\u6BB5"),l(),r(5,"th",2)(6,"span"),d(7,"\u53EA\u8BFB"),l(),r(8,"span"),d(9,"\u7F16\u8F91"),l(),r(10,"span"),d(11,"\u5FC5\u586B"),l(),r(12,"span"),d(13,"\u9690\u85CF"),l()()()(),r(14,"tbody"),b(15,vp,1,1,null,null,O),l()()),i&2&&(_("nzData",t.eruptBuild.eruptModel.eruptFieldModels.length?te(4,hp,de(3,Cp)):de(6,xp))("nzSize","small"),a(3),_("nzWidth","260px"),a(12),S(t.eruptBuild.eruptModel.eruptFieldModels))},dependencies:[oe,re,ii,ei,ti,ri,ni,oi,Mt,Tt],encapsulation:2})}return n})();var tn=(()=>{class n extends Pe{readonly=!1;model;eruptBuild;branch=[];index=0;progress;modelChange=new w;select=new w;delete=new w;insertNode=new w;startNode=new gn;ngOnInit(){this.model.prop&&(this.startNode=this.model.prop,this.startNode.formAccesses||(this.startNode.formAccesses={}))}onSelect(){this.select.emit(this.model)}onInsertNode(e){this.insertNode.emit({branch:this.branch,index:this.index,type:e})}onInsertFlexNode(e){Ne(this.branch,this.index,e)}type(){return U.START}color(){return"#80929C"}name(){return"\u53D1\u8D77\u4EBA"}create(){return{id:se(),type:this.type(),name:this.name(),prop:new gn}}onDelete(){}onSaveProp(){this.model.prop=this.startNode}FormAccessEnum=Te;static \u0275fac=(()=>{let e;return function(t){return(e||(e=Ut(n)))(t||n)}})();static \u0275cmp=E({type:n,selectors:[["app-start-node"]],inputs:{readonly:"readonly",model:"model",eruptBuild:"eruptBuild",branch:"branch",index:"index",progress:"progress"},outputs:{modelChange:"modelChange",select:"select",delete:"delete",insertNode:"insertNode"},standalone:!1,features:[Ae],decls:4,vars:10,consts:[[3,"modelChange","select","saveProp","insertNode","insertFlexNode","model","readonly","showClose","eruptBuild","headerColor","progress","hasConfig"],["config",""],[3,"eruptBuild","formAccesses","access"]],template:function(i,t){i&1&&(r(0,"erupt-node",0),y("modelChange",function(p){return z(t.model,p)||(t.model=p),p}),C("select",function(){return t.onSelect()})("saveProp",function(){return t.onSaveProp()})("insertNode",function(p){return t.onInsertNode(p)})("insertFlexNode",function(p){return t.onInsertFlexNode(p)}),d(1," \u6D41\u7A0B\u4ECE\u672C\u8282\u70B9\u5F00\u59CB "),r(2,"div",1),h(3,"app-form-access",2),l()()),i&2&&(v("model",t.model),_("readonly",t.readonly)("showClose",!1)("eruptBuild",t.eruptBuild)("headerColor",t.color())("progress",t.progress)("hasConfig",!0),a(3),_("eruptBuild",t.eruptBuild)("formAccesses",t.startNode.formAccesses)("access",t.FormAccessEnum.READ_WRITE))},dependencies:[Fe,en],encapsulation:2})}return n})();var ui=(()=>{class n extends Pe{progress;model;modelChange=new w;onSelect(){}onInsertNode(e){}onInsertFlexNode(e){}type(){return U.END}color(){return"#80929C"}name(){return"END"}create(){return{id:se(),type:this.type(),name:this.name()}}onDelete(){}onSaveProp(){}static \u0275fac=(()=>{let e;return function(t){return(e||(e=Ut(n)))(t||n)}})();static \u0275cmp=E({type:n,selectors:[["app-end-node"]],inputs:{progress:"progress",model:"model"},outputs:{modelChange:"modelChange"},standalone:!1,features:[Ae],decls:2,vars:1,consts:[[1,"process-end",3,"ngClass"]],template:function(i,t){i&1&&(r(0,"div",0),d(1,"\u6D41\u7A0B\u7ED3\u675F"),l()),i&2&&_("ngClass",t.progress==null?null:t.progress[t.model.id])},dependencies:[et],styles:["[_nghost-%COMP%]   .process-end[_ngcontent-%COMP%]{text-align:center;padding:10px;border-radius:5px;background:#e5e5e5;margin-top:8px;min-width:100px}"]})}return n})();var nt=(function(n){return n.TODO="TODO",n.DONE="DONE",n.CC="CC",n.CREATED="CREATED",n.ADMIN="ADMIN",n})(nt||{}),io=(function(n){return n.NEXT="NEXT",n.WAIT="WAIT",n.WAIT_API_TRIGGER="WAIT_API_TRIGGER",n.ERROR="ERROR",n.REENTRY="REENTRY",n.END="END",n})(io||{});var nn=(()=>{class n{_http;constructor(e){this._http=e}posts(){return this._http.get(A.erupt+"/flow/upms/posts")}roles(){return this._http.get(A.erupt+"/flow/upms/roles")}users(){return this._http.get(A.erupt+"/flow/upms/users")}org(){return this._http.get(A.erupt+"/flow/upms/orgs")}static \u0275fac=function(i){return new(i||n)(ot(Yt))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();var Xe=(()=>{class n{flowUpmsApiService;upmsData=new ta;constructor(e){this.flowUpmsApiService=e,this.flowUpmsApiService.users().subscribe(i=>{this.upmsData.users=i.data}),this.flowUpmsApiService.posts().subscribe(i=>{this.upmsData.posts=i.data}),this.flowUpmsApiService.roles().subscribe(i=>{this.upmsData.roles=i.data}),this.flowUpmsApiService.org().subscribe(i=>{this.upmsData.orgs=i.data})}static \u0275fac=function(i){return new(i||n)(ot(nn))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();function bp(n,c){n&1&&h(0,"hr",5)}function Sp(n,c){if(n&1&&h(0,"nz-option",9),n&2){let e=c.$implicit;_("nzValue",e.key)("nzLabel",e.value)}}function Tp(n,c){if(n&1){let e=x();r(0,"div",6)(1,"div",7),d(2,"\u63D0\u4EA4\u4EBA\u7684"),l(),r(3,"nz-select",8),y("ngModelChange",function(t){m(e);let o=s();return z(o.reviewUserMode.modeValue,t)||(o.reviewUserMode.modeValue=t),u(t)}),b(4,Sp,1,2,"nz-option",9,O),l()()}if(n&2){let e=s();a(3),v("ngModel",e.reviewUserMode.modeValue),a(),S(e.deptHeads)}}function Mp(n,c){if(n&1&&h(0,"nz-option",9),n&2){let e=c.$implicit;_("nzValue",e.key)("nzLabel",e.value)}}function Op(n,c){if(n&1){let e=x();r(0,"div",6)(1,"div",7),d(2,"\u89D2\u8272"),l(),r(3,"nz-select",8),y("ngModelChange",function(t){m(e);let o=s();return z(o.reviewUserMode.modeValue,t)||(o.reviewUserMode.modeValue=t),u(t)}),b(4,Mp,1,2,"nz-option",9,O),l()()}if(n&2){let e=s();a(3),v("ngModel",e.reviewUserMode.modeValue),a(),S(e.roles)}}function Ep(n,c){if(n&1&&h(0,"nz-option",9),n&2){let e=c.$implicit;_("nzValue",e.key)("nzLabel",e.value)}}function Pp(n,c){if(n&1){let e=x();r(0,"div",6)(1,"div",7),d(2,"\u5C97\u4F4D"),l(),r(3,"nz-select",8),y("ngModelChange",function(t){m(e);let o=s();return z(o.reviewUserMode.modeValue,t)||(o.reviewUserMode.modeValue=t),u(t)}),b(4,Ep,1,2,"nz-option",9,O),l()()}if(n&2){let e=s();a(3),v("ngModel",e.reviewUserMode.modeValue),a(),S(e.posts)}}function Np(n,c){if(n&1&&h(0,"nz-option",9),n&2){let e=c.$implicit;_("nzValue",e.key)("nzLabel",e.value)}}function Fp(n,c){if(n&1){let e=x();r(0,"div",6)(1,"div",7),d(2,"\u6307\u5B9A\u4EBA\u5458"),l(),r(3,"nz-select",8),y("ngModelChange",function(t){m(e);let o=s();return z(o.reviewUserMode.modeValue,t)||(o.reviewUserMode.modeValue=t),u(t)}),b(4,Np,1,2,"nz-option",9,O),l()()}if(n&2){let e=s();a(3),v("ngModel",e.reviewUserMode.modeValue),a(),S(e.users)}}var _i=(()=>{class n{upmsDataService;ApprovalMode=Ct;reviewUserMode;users=[];posts=[];roles=[];deptHeads=[];constructor(e){this.upmsDataService=e}ngOnInit(){this.users=this.upmsDataService.upmsData.users,this.posts=this.upmsDataService.upmsData.posts,this.roles=this.upmsDataService.upmsData.roles;for(let e=0;e<=10;e++)this.deptHeads.push({key:e,value:"\u76F4\u5C5E\u7EC4\u7EC7\u8D1F\u8D23\u4EBA"+(e==0?"":`\u52A0 ${e} \u7EA7\u8D1F\u8D23\u4EBA`)})}changeReview(){this.reviewUserMode.modeValue=null}static \u0275fac=function(i){return new(i||n)(F(Xe))};static \u0275cmp=E({type:n,selectors:[["app-review-user"]],inputs:{reviewUserMode:"reviewUserMode"},standalone:!1,decls:20,vars:11,consts:[[2,"display","flex","justify-content","space-between","align-items","center","margin-bottom","8px"],[2,"font-weight","500"],[1,"approval-mode"],[2,"width","100%",3,"ngModelChange","ngModel"],["nz-radio","",3,"nzValue"],[2,"border","1px solid #f0f0f0","margin","8px 0"],[2,"display","flex","align-items","center"],[2,"margin-right","12px"],["nzShowSearch","",2,"flex","1",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"div",1),d(2,"\u5BA1\u6279\u4EBA\u8BBE\u7F6E"),l()(),r(3,"div",2)(4,"nz-radio-group",3),y("ngModelChange",function(p){return z(t.reviewUserMode.mode,p)||(t.reviewUserMode.mode=p),p}),C("ngModelChange",function(){return t.changeReview()}),r(5,"label",4),d(6,"\u7EC4\u7EC7\u8D1F\u8D23\u4EBA"),l(),r(7,"label",4),d(8,"\u89D2\u8272"),l(),r(9,"label",4),d(10,"\u5C97\u4F4D"),l(),r(11,"label",4),d(12,"\u6307\u5B9A\u4EBA\u5458"),l(),r(13,"label",4),d(14,"\u63D0\u4EA4\u4EBA\u672C\u4EBA"),l()()(),f(15,bp,1,0,"hr",5),f(16,Tp,6,1,"div",6),f(17,Op,6,1,"div",6),f(18,Pp,6,1,"div",6),f(19,Fp,6,1,"div",6)),i&2&&(a(4),v("ngModel",t.reviewUserMode.mode),a(),_("nzValue",t.ApprovalMode.ORG_HEAD),a(2),_("nzValue",t.ApprovalMode.ROLE),a(2),_("nzValue",t.ApprovalMode.POST),a(2),_("nzValue",t.ApprovalMode.SPECIFIED_USER),a(2),_("nzValue",t.ApprovalMode.SUBMITTER_HIMSELF),a(2),g(t.reviewUserMode.mode!=t.ApprovalMode.SUBMITTER_HIMSELF?15:-1),a(),g(t.reviewUserMode.mode==t.ApprovalMode.ORG_HEAD?16:-1),a(),g(t.reviewUserMode.mode==t.ApprovalMode.ROLE?17:-1),a(),g(t.reviewUserMode.mode==t.ApprovalMode.POST?18:-1),a(),g(t.reviewUserMode.mode==t.ApprovalMode.SPECIFIED_USER?19:-1))},dependencies:[oe,re,qe,Je,Mt,Tt],styles:["[_nghost-%COMP%]     .allow-item{margin-bottom:5px}  .approval-mode label{width:31%;margin-bottom:8px}"]})}return n})();var Ip=()=>({value:0,label:"\u8BBE\u7F6E\u5BA1\u6838\u4EBA"}),Vp=()=>({value:1,label:"\u8868\u5355\u6743\u9650"}),Ap=()=>({value:2,label:"\u64CD\u4F5C\u6743\u9650"}),Bp=(n,c,e)=>[n,c,e];function Rp(n,c){if(n&1){let e=x();r(0,"button",18),C("click",function(){m(e);let t=s().$index,o=s(2);return u(o.deleteReviewUser(t))}),h(1,"span",19),l()}n&2&&_("nz-tooltip","\u5220\u9664\u5BA1\u6279\u4EBA")}function Lp(n,c){if(n&1&&(r(0,"nz-card",4)(1,"div",14)(2,"div",15),h(3,"app-review-user",16),l(),f(4,Rp,2,1,"button",17),l()()),n&2){let e=c.$implicit,i=s(2);a(3),_("reviewUserMode",e),a(),g(i.approveNode.reviewUserModes.length>1?4:-1)}}function Wp(n,c){if(n&1&&h(0,"nz-option",21),n&2){let e=c.$implicit;_("nzValue",e.key)("nzLabel",e.value)}}function Up(n,c){if(n&1){let e=x();r(0,"div",10)(1,"nz-select",20),y("ngModelChange",function(t){m(e);let o=s(2);return z(o.approveNode.nobodyRedirectToUser,t)||(o.approveNode.nobodyRedirectToUser=t),u(t)}),b(2,Wp,1,2,"nz-option",21,O),l()()}if(n&2){let e=s(2);a(),v("ngModel",e.approveNode.nobodyRedirectToUser),a(),S(e.upmsDataService.upmsData.users)}}function jp(n,c){if(n&1){let e=x();r(0,"div",13)(1,"nz-input-number",22),y("ngModelChange",function(t){m(e);let o=s(2);return z(o.approveNode.approvalTimeoutHours,t)||(o.approveNode.approvalTimeoutHours=t),u(t)}),l(),r(2,"span",23),d(3," \u5C0F\u65F6\u540E \u2192 "),l(),r(4,"nz-radio-group",8),y("ngModelChange",function(t){m(e);let o=s(2);return z(o.approveNode.approvalTimeoutAction,t)||(o.approveNode.approvalTimeoutAction=t),u(t)}),r(5,"label",9),d(6,"\u81EA\u52A8\u540C\u610F"),l(),r(7,"label",9),d(8,"\u81EA\u52A8\u62D2\u7EDD"),l()()()}if(n&2){let e=s(2);a(),v("ngModel",e.approveNode.approvalTimeoutHours),_("nzMin",1)("nzStep",1),a(3),v("ngModel",e.approveNode.approvalTimeoutAction),a(),_("nzValue",e.ApprovalTimeoutAction.AUTO_PASS),a(2),_("nzValue",e.ApprovalTimeoutAction.AUTO_REJECT)}}function Gp(n,c){if(n&1){let e=x();b(0,Lp,5,2,"nz-card",4,O),r(2,"button",5),C("click",function(){m(e);let t=s();return u(t.addReviewUsers())}),h(3,"span",6),d(4," \u6DFB\u52A0\u5BA1\u6279\u4EBA "),l(),h(5,"nz-divider",7),r(6,"div")(7,"h4"),d(8,"\u5BA1\u6279\u4EBA\u4E0D\u5B58\u5728\u65F6"),l(),r(9,"nz-radio-group",8),y("ngModelChange",function(t){m(e);let o=s();return z(o.approveNode.nobodyStrategy,t)||(o.approveNode.nobodyStrategy=t),u(t)}),r(10,"label",9),d(11,"\u8F6C\u4EA4\u7ED9\u7BA1\u7406\u5458"),l(),r(12,"label",9),d(13,"\u8F6C\u4EA4\u5230\u6307\u5B9A\u5BA1\u6279\u4EBA"),l(),f(14,Up,4,1,"div",10),l()(),h(15,"nz-divider",7),r(16,"div")(17,"h4"),d(18,"\u591A\u4EBA\u5BA1\u6279\u65F6\u4F7F\u7528\u7684\u5BA1\u6279\u65B9\u5F0F"),l(),r(19,"nz-radio-group",8),y("ngModelChange",function(t){m(e);let o=s();return z(o.approveNode.approvalStrategy,t)||(o.approveNode.approvalStrategy=t),u(t)}),r(20,"label",11),d(21,"\u6216\u7B7E\uFF08\u4E00\u540D\u5BA1\u6279\u4EBA\u540C\u610F\u5373\u53EF\uFF09"),l(),r(22,"label",12),d(23,"\u4F1A\u7B7E\uFF08\u9700\u6240\u6709\u5BA1\u6279\u4EBA\u540C\u610F\uFF09"),l()()(),h(24,"nz-divider",7),r(25,"div")(26,"h4"),d(27,"\u5BA1\u6279\u8D85\u65F6\u8BBE\u7F6E"),l(),r(28,"nz-switch",8),y("ngModelChange",function(t){m(e);let o=s();return z(o.approveNode.approvalTimeoutEnabled,t)||(o.approveNode.approvalTimeoutEnabled=t),u(t)}),l(),f(29,jp,9,6,"div",13),l()}if(n&2){let e=s();S(e.approveNode.reviewUserModes),a(9),v("ngModel",e.approveNode.nobodyStrategy),a(),_("nzValue",e.NobodyStrategy.REDIRECT_TO_ADMIN),a(2),_("nzValue",e.NobodyStrategy.REDIRECT_TO_SPECIFIED_USER),a(2),g(e.approveNode.nobodyStrategy==e.NobodyStrategy.REDIRECT_TO_SPECIFIED_USER?14:-1),a(5),v("ngModel",e.approveNode.approvalStrategy),a(),_("nzValue",e.ApprovalStrategy.ANY_APPROVE),a(2),_("nzValue",e.ApprovalStrategy.ALL_APPROVE),a(6),v("ngModel",e.approveNode.approvalTimeoutEnabled),a(),g(e.approveNode.approvalTimeoutEnabled?29:-1)}}function Hp(n,c){if(n&1&&h(0,"app-form-access",3),n&2){let e=s();_("eruptBuild",e.eruptBuild)("formAccesses",e.approveNode.formAccesses)}}function Qp(n,c){if(n&1){let e=x();r(0,"div",24)(1,"label",25),y("ngModelChange",function(t){m(e);let o=s();return z(o.approveNode.allowTransfer,t)||(o.approveNode.allowTransfer=t),u(t)}),d(2,"\u5141\u8BB8\u8F6C\u4EA4"),l()(),r(3,"div",24)(4,"label",25),y("ngModelChange",function(t){m(e);let o=s();return z(o.approveNode.allowAddSign,t)||(o.approveNode.allowAddSign=t),u(t)}),d(5,"\u5141\u8BB8\u52A0\u7B7E"),l()(),r(6,"div",24)(7,"label",25),y("ngModelChange",function(t){m(e);let o=s();return z(o.approveNode.allowCc,t)||(o.approveNode.allowCc=t),u(t)}),d(8,"\u5141\u8BB8\u6284\u9001"),l()(),r(9,"div",24)(10,"label",25),y("ngModelChange",function(t){m(e);let o=s();return z(o.approveNode.allowReturn,t)||(o.approveNode.allowReturn=t),u(t)}),d(11,"\u5141\u8BB8\u9000\u56DE"),l()(),r(12,"div",24)(13,"label",25),y("ngModelChange",function(t){m(e);let o=s();return z(o.approveNode.requireSignature,t)||(o.approveNode.requireSignature=t),u(t)}),d(14,"\u5BA1\u6279\u540C\u610F\u65F6\u9700\u624B\u5199\u7B7E\u540D"),l()(),r(15,"div",24)(16,"label",25),y("ngModelChange",function(t){m(e);let o=s();return z(o.approveNode.requireApprovalNote,t)||(o.approveNode.requireApprovalNote=t),u(t)}),d(17,"\u63D0\u4EA4\u5BA1\u6279\u9700\u586B\u5199\u5BA1\u6279\u610F\u89C1"),l()()}if(n&2){let e=s();a(),v("ngModel",e.approveNode.allowTransfer),a(3),v("ngModel",e.approveNode.allowAddSign),a(3),v("ngModel",e.approveNode.allowCc),a(3),v("ngModel",e.approveNode.allowReturn),a(3),v("ngModel",e.approveNode.requireSignature),a(3),v("ngModel",e.approveNode.requireApprovalNote)}}var fi=(()=>{class n extends Pe{upmsDataService;readonly=!1;eruptBuild;modelValue;branch=[];index=0;modelValueChange=new w;select=new w;delete=new w;insertNode=new w;progress;approveNode=new _n;selectTab=0;constructor(e){super(),this.upmsDataService=e}ngOnInit(){this.modelValue.prop&&(this.approveNode=this.modelValue.prop)}addReviewUsers(){this.approveNode.reviewUserModes.push({mode:Ct.SPECIFIED_USER,modeValue:null})}deleteReviewUser(e){this.approveNode.reviewUserModes.length>1&&this.approveNode.reviewUserModes.splice(e,1)}type(){return U.APPROVAL}name(){return"\u5BA1\u6279\u4EBA"}color(){return"#EC8151"}onSelect(){}onDelete(){this.delete.emit({branch:this.branch,index:this.index})}onInsertNode(e){this.insertNode.emit({branch:this.branch,index:this.index,type:e})}onInsertFlexNode(e){Ne(this.branch,this.index,e)}create(){return{id:se(),type:this.type(),name:this.name(),prop:new _n}}onSaveProp(){this.modelValue.prop=this.approveNode}ApprovalStrategy=pi;NobodyStrategy=di;ApprovalTimeoutAction=Ki;static \u0275fac=function(i){return new(i||n)(F(Xe))};static \u0275cmp=E({type:n,selectors:[["app-approval-node"]],inputs:{readonly:"readonly",eruptBuild:"eruptBuild",modelValue:"modelValue",branch:"branch",index:"index",progress:"progress"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode"},standalone:!1,features:[Ae],decls:7,vars:18,consts:[[3,"modelChange","select","insertNode","insertFlexNode","saveProp","delete","model","readonly","headerColor","eruptBuild","progress"],["config",""],[2,"margin-bottom","12px",3,"ngModelChange","nzOptions","ngModel"],[3,"eruptBuild","formAccesses"],["nzTitle","\u5BA1\u6279\u4EBA","nzSize","small",2,"margin-bottom","12px"],["nz-button","",2,"margin-bottom","12px",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[2,"margin","12px 0"],[3,"ngModelChange","ngModel"],["nz-radio","",3,"nzValue"],[2,"width","100%","margin-top","8px"],["nz-radio","",2,"width","100%",3,"nzValue"],["nz-radio","",2,"width","100%","margin-top","8px",3,"nzValue"],[2,"margin-top","12px"],[2,"display","flex","justify-content","space-between","align-items","flex-start"],[2,"flex","1"],[3,"reviewUserMode"],["nz-button","","nzType","text","nzDanger","","nzSize","small",2,"margin-left","8px",3,"nz-tooltip"],["nz-button","","nzType","text","nzDanger","","nzSize","small",2,"margin-left","8px",3,"click","nz-tooltip"],["nz-icon","","nzType","delete","nzTheme","outline"],["nzShowSearch","",2,"width","100%",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"],[2,"width","120px",3,"ngModelChange","ngModel","nzMin","nzStep"],[2,"margin","0 8px"],[1,"allow-item"],["nz-checkbox","",3,"ngModelChange","ngModel"]],template:function(i,t){i&1&&(r(0,"erupt-node",0),y("modelChange",function(p){return z(t.modelValue,p)||(t.modelValue=p),p}),C("select",function(){return t.onSelect()})("insertNode",function(p){return t.onInsertNode(p)})("insertFlexNode",function(p){return t.onInsertFlexNode(p)})("saveProp",function(){return t.onSaveProp()})("delete",function(){return t.onDelete()}),d(1),r(2,"div",1)(3,"nz-segmented",2),y("ngModelChange",function(p){return z(t.selectTab,p)||(t.selectTab=p),p}),l(),f(4,Gp,30,9),f(5,Hp,1,2,"app-form-access",3),f(6,Qp,18,6),l()()),i&2&&(v("model",t.modelValue),_("readonly",t.readonly)("headerColor",t.color())("eruptBuild",t.eruptBuild)("progress",t.progress),a(),N(" ",t.name()," "),a(2),_("nzOptions",En(14,Bp,de(11,Ip),de(12,Vp),de(13,Ap))),v("ngModel",t.selectTab),a(),g(t.selectTab==0?4:-1),a(),g(t.selectTab==1?5:-1),a(),g(t.selectTab==2?6:-1))},dependencies:[Jn,oe,re,Y,G,X,St,be,qe,Je,W,br,Tr,Mt,Tt,$n,Er,Fe,en,_i],encapsulation:2})}return n})();var $p=()=>({value:0,label:"\u8BBE\u7F6E\u6284\u9001\u4EBA"}),qp=()=>({value:1,label:"\u8868\u5355\u6743\u9650"}),Jp=(n,c)=>[n,c];function Zp(n,c){if(n&1){let e=x();r(0,"button",11),C("click",function(){m(e);let t=s().$index,o=s(2);return u(o.deleteReviewUser(t))}),h(1,"span",12),l()}n&2&&_("nz-tooltip","\u5220\u9664\u5BA1\u6279\u4EBA")}function Xp(n,c){if(n&1&&(r(0,"nz-card",4)(1,"div",7)(2,"div",8),h(3,"app-review-user",9),l(),f(4,Zp,2,1,"button",10),l()()),n&2){let e=c.$implicit,i=s(2);a(3),_("reviewUserMode",e),a(),g(i.ccNode.reviewUserModes.length>1?4:-1)}}function Kp(n,c){if(n&1){let e=x();b(0,Xp,5,2,"nz-card",4,O),r(2,"button",5),C("click",function(){m(e);let t=s();return u(t.addReviewUsers())}),h(3,"span",6),d(4," \u6DFB\u52A0\u6284\u9001 "),l()}if(n&2){let e=s();S(e.ccNode.reviewUserModes)}}function ed(n,c){if(n&1&&h(0,"app-form-access",3),n&2){let e=s();_("eruptBuild",e.eruptBuild)("formAccesses",e.ccNode.formAccesses)}}var gi=(()=>{class n extends Pe{readonly=!1;eruptBuild;modelValue;branch=[];index=0;progress;modelValueChange=new w;select=new w;delete=new w;insertNode=new w;selectTab=0;ccNode=new fn;ngOnInit(){this.modelValue.prop&&(this.ccNode=this.modelValue.prop)}deleteReviewUser(e){this.ccNode.reviewUserModes.length>1&&this.ccNode.reviewUserModes.splice(e,1)}addReviewUsers(){this.ccNode.reviewUserModes.push({mode:Ct.SPECIFIED_USER,modeValue:null})}onSelect(){this.select.emit(this.modelValue)}onDelete(){this.delete.emit({branch:this.branch,index:this.index})}onInsertNode(e){this.insertNode.emit({branch:this.branch,index:this.index,type:e})}type(){return U.CC}color(){return"#5994F3"}name(){return"\u6284\u9001\u4EBA"}create(){return{id:se(),type:this.type(),name:this.name(),prop:new fn}}onInsertFlexNode(e){Ne(this.branch,this.index,e)}onSaveProp(){this.modelValue.prop=this.ccNode}static \u0275fac=(()=>{let e;return function(t){return(e||(e=Ut(n)))(t||n)}})();static \u0275cmp=E({type:n,selectors:[["app-cc-node"]],inputs:{readonly:"readonly",eruptBuild:"eruptBuild",modelValue:"modelValue",branch:"branch",index:"index",progress:"progress"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode"},standalone:!1,features:[Ae],decls:6,vars:14,consts:[[3,"modelChange","select","insertNode","insertFlexNode","saveProp","delete","model","readonly","headerColor","eruptBuild","progress"],["config",""],[2,"margin-bottom","12px",3,"ngModelChange","nzOptions","ngModel"],[3,"eruptBuild","formAccesses"],["nzTitle","\u6284\u9001\u4EBA","nzSize","small",2,"margin-bottom","12px"],["nz-button","",2,"margin-bottom","12px",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[2,"display","flex","justify-content","space-between","align-items","flex-start"],[2,"flex","1"],[3,"reviewUserMode"],["nz-button","","nzType","text","nzDanger","","nzSize","small",2,"margin-left","8px",3,"nz-tooltip"],["nz-button","","nzType","text","nzDanger","","nzSize","small",2,"margin-left","8px",3,"click","nz-tooltip"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(i,t){i&1&&(r(0,"erupt-node",0),y("modelChange",function(p){return z(t.modelValue,p)||(t.modelValue=p),p}),C("select",function(){return t.onSelect()})("insertNode",function(p){return t.onInsertNode(p)})("insertFlexNode",function(p){return t.onInsertFlexNode(p)})("saveProp",function(){return t.onSaveProp()})("delete",function(){return t.onDelete()}),d(1," \u6284\u9001\u4EBA "),r(2,"div",1)(3,"nz-segmented",2),y("ngModelChange",function(p){return z(t.selectTab,p)||(t.selectTab=p),p}),l(),f(4,Kp,5,0),f(5,ed,1,2,"app-form-access",3),l()()),i&2&&(v("model",t.modelValue),_("readonly",t.readonly)("headerColor",t.color())("eruptBuild",t.eruptBuild)("progress",t.progress),a(3),_("nzOptions",So(11,Jp,de(9,$p),de(10,qp))),v("ngModel",t.selectTab),a(),g(t.selectTab==0?4:-1),a(),g(t.selectTab==1?5:-1))},dependencies:[Jn,oe,re,Y,G,X,be,W,$n,Fe,en,_i],encapsulation:2})}return n})();var nd=["nodeNameInput"];function id(n,c){if(n&1&&h(0,"span",2),n&2){let e=s();_("nzTooltipTitle",e.modelValue.error)("nzTwotoneColor","#FF4D4F")}}function od(n,c){n&1&&h(0,"span",5)}function rd(n,c){if(n&1){let e=x();r(0,"input",16,0),C("blur",function(){m(e);let t=s();return u(t.onBlur())}),y("ngModelChange",function(t){m(e);let o=s();return z(o.modelValue.name,t)||(o.modelValue.name=t),u(t)}),l()}if(n&2){let e=s();v("ngModel",e.modelValue.name)}}function ad(n,c){if(n&1){let e=x();r(0,"div",17),C("click",function(){m(e);let t=s();return u(t.onEnableEdit())}),d(1),l()}if(n&2){let e=s();a(),N("",e.modelValue.name," ")}}function ld(n,c){if(n&1){let e=x();r(0,"div",10)(1,"span",18),C("click",function(){m(e);let t=s();return u(t.onDelete())}),l()()}}function sd(n,c){n&1&&h(0,"span",14)}function cd(n,c){if(n&1){let e=x();r(0,"app-insert-btn",19),C("insertNode",function(t){m(e);let o=s();return u(o.onInsertNode(t))})("insertFlexNode",function(t){m(e);let o=s();return u(o.onInsertFlexNode(t))}),l()}}var Ci=(()=>{class n{eruptBuild;insertFlexNode=new w;moveLn=!1;moveRn=!1;type="";color="";headerIcon="";content="";readonly=!1;modelValue;showError=!1;errorInfo="";isDefault=!1;placeholder="\u8BF7\u8BBE\u7F6E";desc="";progress;modelValueChange=new w;select=new w;delete=new w;insertNode=new w;copy=new w;moveL=new w;moveR=new w;nodeNameInput;enableEdit=!1;ngAfterViewInit(){}onEnableEdit(){this.readonly||(this.enableEdit=!0,setTimeout(()=>{this.nodeNameInput&&this.nodeNameInput.nativeElement.focus()}))}onBlur(){this.enableEdit=!1}onSelect(){this.modelValue.error=null,this.select.emit()}onDelete(){this.delete.emit()}onInsertNode(e){this.insertNode.emit(e)}onInsertFlexNode(e){this.insertFlexNode.emit(e)}onCopy(){this.copy.emit()}onMoveL(){this.moveL.emit()}onMoveR(){this.moveR.emit()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["app-branch-node"]],viewQuery:function(i,t){if(i&1&&H(nd,5),i&2){let o;B(o=R())&&(t.nodeNameInput=o.first)}},inputs:{eruptBuild:"eruptBuild",moveLn:"moveLn",moveRn:"moveRn",type:"type",color:"color",headerIcon:"headerIcon",content:"content",readonly:"readonly",modelValue:"modelValue",showError:"showError",errorInfo:"errorInfo",isDefault:"isDefault",placeholder:"placeholder",desc:"desc",progress:"progress"},outputs:{insertFlexNode:"insertFlexNode",modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode",copy:"copy",moveL:"moveL",moveR:"moveR"},standalone:!1,decls:20,vars:14,consts:[["nodeNameInput",""],[1,"p-node"],["nz-tooltip","","nz-icon","","nzType","warning","nzTheme","twotone",1,"node-err-tip",3,"nzTooltipTitle","nzTwotoneColor"],[1,"p-node-body",3,"ngClass"],[1,"p-node-move",3,"click"],["nz-icon","","nzType","left"],[2,"flex","1"],[1,"p-node-header"],["autofocus","",3,"ngModel"],[1,"row-text"],[1,"node-action"],["nzType","secondary","nzSize","small",1,"node-desc"],[1,"p-node-content",3,"click"],["nzEllipsis","","nzEllipsisRows","4"],["nz-icon","","nzType","right"],[1,"p-node-add"],["autofocus","",3,"blur","ngModelChange","ngModel"],[1,"row-text",3,"click"],[1,"fa","fa-close",3,"click"],[3,"insertNode","insertFlexNode"]],template:function(i,t){i&1&&(r(0,"div",1),f(1,id,1,2,"span",2),r(2,"div",3)(3,"div",4),C("click",function(){return t.onMoveL()}),f(4,od,1,0,"span",5),l(),r(5,"div",6)(6,"div",7)(7,"div"),f(8,rd,2,1,"input",8),f(9,ad,2,1,"div",9),l(),f(10,ld,2,0,"div",10),r(11,"nz-typography",11),d(12),l()(),r(13,"div",12),C("click",function(){return!t.readonly&&t.onSelect()}),r(14,"nz-typography",13),d(15),l()()(),r(16,"div",4),C("click",function(){return t.onMoveR()}),f(17,sd,1,0,"span",14),l()(),r(18,"div",15),f(19,cd,1,0,"app-insert-btn"),l()()),i&2&&(a(),g(t.modelValue!=null&&t.modelValue.error?1:-1),a(),fe("--shadowColor",t.color),_("ngClass",t.progress==null?null:t.progress[t.modelValue.id]),a(2),g(!t.readonly&&t.moveLn&&!t.isDefault?4:-1),a(3),fe("color",t.isDefault?"#898989":t.color),a(),g(t.enableEdit?8:-1),a(),g(t.enableEdit?-1:9),a(),g(!t.readonly&&!t.isDefault?10:-1),a(2),D(t.desc),a(3),N(" ",t.content||t.placeholder," "),a(2),g(!t.readonly&&t.moveRn&&!t.isDefault?17:-1),a(2),g(t.readonly?-1:19))},styles:['.p-node[_ngcontent-%COMP%]{width:200px;margin-bottom:8px;position:relative}.p-node[_ngcontent-%COMP%]   .node-err-tip[_ngcontent-%COMP%]{position:absolute;right:-30px;top:5px;color:#ff4d4f}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]{cursor:pointer;background:#fff;overflow:hidden;border-radius:5px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 0 5px #d8d8d8}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-move[_ngcontent-%COMP%]{width:15px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-move[_ngcontent-%COMP%]:hover{background:#f5f6f6}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 0 var(--shadowColor)}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover   .node-action[_ngcontent-%COMP%]{display:inline!important}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover   .node-desc[_ngcontent-%COMP%]{display:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child, .p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{height:100%}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child:hover, .p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child:hover{background:#d9d9d9}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:25px;font-size:13px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .node-action[_ngcontent-%COMP%]{color:#767676;display:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .node-action[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:2px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .node-desc[_ngcontent-%COMP%]{position:absolute;right:8px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .row-text[_ngcontent-%COMP%]:hover{text-decoration:underline}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:3px;width:115px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:115px;border:1px solid #d9d9d9;border-radius:5px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-content[_ngcontent-%COMP%]{padding:5px;min-height:50px;display:flex;justify-content:space-between;align-items:center;font-size:15px;color:#656363}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{word-wrap:break-word}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;height:80px}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]:before{position:absolute;content:"";width:2px;height:80px;background:#d9d9d9}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]:after{content:"";position:absolute;top:80px;left:50%;transform:translate(-50%);width:0;border-style:solid;border-width:8px 6px 4px;border-color:#d9d9d9 transparent transparent}']})}return n})();function dd(n,c){if(n&1){let e=x();$(0)(1),r(2,"erupt-smart-search",5),y("searchChange",function(t){m(e);let o=s(2);return z(o.gatewayNode.conditions,t)||(o.gatewayNode.conditions=t),u(t)}),l(),q()()}if(n&2){let e=s(2);a(2),_("requiredHasCondition",e.gatewayType!=e.GatewayType.PARALLEL)("upmsData",e.upmsData)("eruptModel",e.eruptBuild.eruptModel),v("search",e.gatewayNode.conditions)}}function md(n,c){if(n&1){let e=x();r(0,"nz-drawer",3),C("nzOnClose",function(){m(e);let t=s();return u(t.closeDrawer())}),M(1,dd,3,4,"ng-container",4),l()}if(n&2){let e=s(),i=ae(3);_("nzVisible",e.showDrawer)("nzMaskClosable",!1)("nzTitle",e.modelValue.name)("nzFooter",i)("nzWidth",600)}}function ud(n,c){if(n&1){let e=x();r(0,"div",6)(1,"button",7),C("click",function(){m(e);let t=s();return u(t.closeDrawer())}),d(2,"Cancel"),l(),r(3,"button",8),C("click",function(){m(e);let t=s();return u(t.onSaveProp())}),d(4,"Save"),l()()}}var ce=(function(n){return n.EXCLUSIVE="EXCLUSIVE",n.PARALLEL="PARALLEL",n.INCLUSIVE="INCLUSIVE",n})(ce||{}),on=(()=>{class n extends Pe{upmsDataService;readonly=!1;eruptBuild;modelValue;branch=[];index=0;moveLn=!1;moveRn=!1;isDefault=!1;gatewayType=ce.EXCLUSIVE;modelValueChange=new w;select=new w;delete=new w;insertNode=new w;moveL=new w;moveR=new w;gatewayNode={};progress;smartSearchComponent;upmsData;showErr=!1;errInfo=null;showDrawer=!1;constructor(e){super(),this.upmsDataService=e,this.upmsData=this.upmsDataService?.upmsData}ngOnInit(){this.gatewayNode=this.modelValue.prop}onSelect(){this.isDefault||(this.showDrawer=!0)}onDelete(){this.delete.emit({branch:this.branch,index:this.index})}closeDrawer(){this.showDrawer=!1}onInsertNode(e){this.insertNode.emit({branch:this.branch,index:this.index,type:e})}onInsertFlexNode(e){Ne(this.branch,-1,e)}onMoveL(){this.moveL.emit()}onMoveR(){this.moveR.emit()}type(){return this.gatewayType===ce.EXCLUSIVE?U.GATEWAY_EXCLUSION:this.gatewayType===ce.PARALLEL?U.GATEWAY_PARALLEL:U.GATEWAY_INCLUSIVE}color(){return this.gatewayType===ce.EXCLUSIVE?"#59B9A4":this.gatewayType===ce.PARALLEL?"#718dff":"#FF9800"}name(){return this.gatewayType===ce.EXCLUSIVE?"\u4E92\u65A5\u5206\u652F":this.gatewayType===ce.PARALLEL?"\u5E76\u884C\u5206\u652F":"\u5305\u5BB9\u5206\u652F"}create(){return this.gatewayType===ce.EXCLUSIVE?{id:se(),type:U.GATEWAY_EXCLUSION,name:this.name(),branches:[this.createBranch(0),{id:se(),type:U.GATEWAY_BRANCH,name:"\u9ED8\u8BA4\u6761\u4EF6",prop:{type:mt.ELSE,conditions:[]},branches:[]}]}:this.gatewayType===ce.PARALLEL?{id:se(),type:U.GATEWAY_PARALLEL,name:this.name(),branches:[this.createBranch(0),this.createBranch(1)]}:{id:se(),type:U.GATEWAY_INCLUSIVE,name:this.name(),branches:[this.createBranch(0),{id:se(),type:U.GATEWAY_BRANCH,name:"\u9ED8\u8BA4\u6761\u4EF6\uFF08\u5305\u5BB9\uFF09",prop:{type:mt.ELSE,conditions:[]},branches:[]}]}}onSaveProp(){this.smartSearchComponent.saveCondition()&&(this.modelValue.prop=this.gatewayNode,this.showDrawer=!1)}createBranch(e){return this.gatewayType===ce.EXCLUSIVE?{id:se(),type:U.GATEWAY_BRANCH,name:"\u4E92\u65A5\u6761\u4EF6"+(e+1),prop:{type:mt.CONDITION,conditions:[]},branches:[]}:this.gatewayType===ce.PARALLEL?{id:se(),type:U.GATEWAY_BRANCH,name:"\u5E76\u884C\u8DEF\u5F84"+(e+1),prop:{type:mt.PARALLEL_CONDITION,conditions:[]},branches:[]}:{id:se(),type:U.GATEWAY_BRANCH,name:"\u5305\u5BB9\u6761\u4EF6"+(e+1),prop:{type:mt.CONDITION,conditions:[]},branches:[]}}getHeaderIcon(){return this.gatewayType===ce.EXCLUSIVE?"share":this.gatewayType===ce.PARALLEL?"apartment":"fork"}getDescription(){return this.gatewayType===ce.EXCLUSIVE?"\u4F18\u5148\u7EA7 "+(this.index+1):this.gatewayType===ce.PARALLEL?"\u5E76\u884C\u6267\u884C":"\u5305\u5BB9\u6267\u884C"}getContent(){return this.gatewayType===ce.EXCLUSIVE?"":this.gatewayType===ce.PARALLEL?"\u5E76\u884C\u6D41\u7A0B\u5206\u652F":"\u5305\u5BB9\u6D41\u7A0B\u5206\u652F"}GatewayType=ce;static \u0275fac=function(i){return new(i||n)(F(Xe))};static \u0275cmp=E({type:n,selectors:[["app-gateway-node"]],viewQuery:function(i,t){if(i&1&&H(ai,5),i&2){let o;B(o=R())&&(t.smartSearchComponent=o.first)}},inputs:{readonly:"readonly",eruptBuild:"eruptBuild",modelValue:"modelValue",branch:"branch",index:"index",moveLn:"moveLn",moveRn:"moveRn",isDefault:"isDefault",gatewayType:"gatewayType",gatewayNode:"gatewayNode",progress:"progress"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode",moveL:"moveL",moveR:"moveR"},standalone:!1,features:[Ae],decls:4,vars:14,consts:[["footerTpl",""],[3,"modelValueChange","insertNode","insertFlexNode","moveL","moveR","delete","select","modelValue","readonly","showError","errorInfo","color","headerIcon","eruptBuild","isDefault","moveRn","moveLn","desc","content","progress"],["nzPlacement","right",3,"nzVisible","nzMaskClosable","nzTitle","nzFooter","nzWidth"],["nzPlacement","right",3,"nzOnClose","nzVisible","nzMaskClosable","nzTitle","nzFooter","nzWidth"],[4,"nzDrawerContent"],[3,"searchChange","requiredHasCondition","upmsData","eruptModel","search"],[2,"float","right"],["nz-button","",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(i,t){if(i&1){let o=x();r(0,"app-branch-node",1),y("modelValueChange",function(P){return m(o),z(t.modelValue,P)||(t.modelValue=P),u(P)}),C("insertNode",function(P){return m(o),u(t.onInsertNode(P))})("insertFlexNode",function(P){return m(o),u(t.onInsertFlexNode(P))})("moveL",function(){return m(o),u(t.onMoveL())})("moveR",function(){return m(o),u(t.onMoveR())})("delete",function(){return m(o),u(t.onDelete())})("select",function(){return m(o),u(t.onSelect())}),l(),f(1,md,2,5,"nz-drawer",2),M(2,ud,5,0,"ng-template",null,0,ne)}i&2&&(v("modelValue",t.modelValue),_("readonly",t.readonly)("showError",t.showErr)("errorInfo",t.errInfo)("color",t.color())("headerIcon",t.getHeaderIcon())("eruptBuild",t.eruptBuild)("isDefault",t.isDefault)("moveRn",t.moveRn)("moveLn",t.moveLn)("desc",t.getDescription())("content",t.getContent())("progress",t.progress),a(),g(t.showDrawer?1:-1))},dependencies:[Y,G,X,An,Vn,ai,Ci],encapsulation:2})}return n})();var he=(()=>{class n{_http;constructor(e){this._http=e}groupList(){return this._http.get(A.erupt+"/flow/group/list",null,{observe:"body"})}groupAdd(e){return this._http.post(A.erupt+"/flow/group/add",null,{name:e})}groupEdit(e,i){return this._http.post(A.erupt+"/flow/group/edit",null,{id:e,name:i})}groupDelete(e){return this._http.post(A.erupt+"/flow/group/delete",null,{id:e})}groupSort(e){return this._http.post(A.erupt+"/flow/group/sort",e)}flowSort(e,i){return this._http.post(A.erupt+"/flow/sort/"+i,e)}eruptFlows(){return this._http.get(A.erupt+"/flow/flex/erupts")}eruptFlowBuild(e){return this._http.get(A.erupt+"/flow/flex/erupt-build/"+e)}flexEruptFlowBuild(e){return this._http.get(A.erupt+"/flow/flex/flex-erupt-build/"+e)}flexNodes(){return this._http.get(A.erupt+"/flow/flex/flex-nodes")}configList(){return this._http.get(A.erupt+"/flow/list",null)}configCreate(e){return this._http.post(A.erupt+"/flow/create",e)}configUpdate(e){return this._http.post(A.erupt+"/flow/update",e)}configCopy(e){return this._http.post(A.erupt+"/flow/copy",null,{id:e})}configDelete(e){return this._http.post(A.erupt+"/flow/delete",null,{id:e})}configSwitchEnable(e){return this._http.post(A.erupt+"/flow/switch-enable",null,{id:e})}configGet(e){return this._http.get(A.erupt+"/flow/get/"+e)}ruleCheck(e){return this._http.post(A.erupt+"/flow/rule-check",e)}static \u0275fac=function(i){return new(i||n)(ot(Yt))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();var Ot=(()=>{class n{flexNodes=[];constructor(e){e.flexNodes().subscribe(i=>{this.flexNodes=i.data})}static \u0275fac=function(i){return new(i||n)(ot(he))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();function gd(n,c){if(n&1&&h(0,"erupt-edit-type",0),n&2){let e=s();_("eruptBuildModel",e.eruptBuild)("readonly",e.readonly)("mode",null)}}var Et=(()=>{class n{dataService;flowApiService;dataHandlerService;loading=!1;readonly=!1;eruptBuild;erupt;initValue=!0;formAccesses;defaultFormAccess=Te.DEFAULT;constructor(e,i,t){this.dataService=e,this.flowApiService=i,this.dataHandlerService=t}ngOnInit(){if(this.loading=!0,this.erupt?this.flowApiService.eruptFlowBuild(this.erupt).subscribe({next:e=>{e.data.eruptModel.eruptJson.layout.formSize=yt.FULL_LINE,this.dataHandlerService.initErupt(e.data),this.eruptBuild=e.data,this.initEruptValue()},complete:()=>{this.loading=!1}}):this.initValue&&this.initEruptValue(),this.formAccesses&&this.eruptBuild)for(let e of this.eruptBuild.eruptModel.eruptFieldModels){let i=this.formAccesses[e.fieldName];if(i)switch(i){case Te.READONLY:e.eruptFieldJson.edit.readOnly={add:!0,edit:!0};break;case Te.READ_WRITE:e.eruptFieldJson.edit.readOnly={add:!1,edit:!1};break;case Te.HIDE:e.eruptFieldJson.edit.show=!1;break;case Te.NOT_NULL:e.eruptFieldJson.edit.notNull=!0;break}else switch(this.defaultFormAccess){case Te.READ_WRITE:e.eruptFieldJson.edit.readOnly={add:!1,edit:!1};break;case Te.NOT_NULL:e.eruptFieldJson.edit.notNull=!0;break;case Te.HIDE:e.eruptFieldJson.edit.show=!1;break;case Te.READONLY:e.eruptFieldJson.edit.readOnly={add:!0,edit:!0};break}}}initEruptValue(){this.dataService.getInitValue(this.eruptBuild.eruptModel.eruptName).subscribe(e=>{this.dataHandlerService.objectToEruptValue(e,this.eruptBuild)})}static \u0275fac=function(i){return new(i||n)(F(qn),F(he),F(dt))};static \u0275cmp=E({type:n,selectors:[["erupt-flow-form"]],inputs:{readonly:"readonly",eruptBuild:"eruptBuild",erupt:"erupt",initValue:"initValue",formAccesses:"formAccesses",defaultFormAccess:"defaultFormAccess"},standalone:!1,decls:1,vars:1,consts:[["size","default",3,"eruptBuildModel","readonly","mode"]],template:function(i,t){i&1&&f(0,gd,1,3,"erupt-edit-type",0),i&2&&g(t.eruptBuild?0:-1)},dependencies:[ia],encapsulation:2})}return n})();function Cd(n,c){if(n&1&&h(0,"erupt-flow-form",2),n&2){let e=s();_("eruptBuild",e.flexErupt)("initValue",!1)("readonly",!1)}}var wi=(()=>{class n extends Pe{flowApiService;flowDataService;dataHandlerService;readonly=!1;eruptBuild;modelValue;branch=[];index=0;modelValueChange=new w;select=new w;delete=new w;insertNode=new w;progress;flexErupt;constructor(e,i,t){super(),this.flowApiService=e,this.flowDataService=i,this.dataHandlerService=t}ngOnInit(){}onInsertNode(e){this.insertNode.emit({branch:this.branch,index:this.index,type:e})}onInsertFlexNode(e){Ne(this.branch,this.index,e)}color(){if(this.modelValue?.flex){for(let e of this.flowDataService.flexNodes)if(e.code===this.modelValue.flex)return e.color}return"#000"}create(e){return{id:se(),type:this.type(),flex:e.code,name:e.name}}onSelect(){this.modelValue?.flex&&this.flowApiService.flexEruptFlowBuild(this.modelValue.flex).subscribe(e=>{e.data.eruptModel.eruptJson.layout.formSize=yt.FULL_LINE,this.dataHandlerService.initErupt(e.data),this.modelValue.prop&&this.dataHandlerService.objectToEruptValue(this.modelValue.prop,e.data),this.flexErupt=e.data})}onSaveProp(){this.modelValue.prop=sn({},this.dataHandlerService.eruptValueToObject(this.flexErupt))}onDelete(){this.delete.emit({branch:this.branch,index:this.index})}type(){return U.FlEX}name(){return"Flex"}static \u0275fac=function(i){return new(i||n)(F(he),F(Ot),F(dt))};static \u0275cmp=E({type:n,selectors:[["erupt-flex-node"]],inputs:{readonly:"readonly",eruptBuild:"eruptBuild",modelValue:"modelValue",branch:"branch",index:"index",progress:"progress"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode"},standalone:!1,features:[Ae],decls:5,vars:7,consts:[[3,"modelChange","select","insertNode","insertFlexNode","saveProp","delete","model","readonly","headerColor","eruptBuild","progress"],["config",""],[3,"eruptBuild","initValue","readonly"]],template:function(i,t){i&1&&(r(0,"erupt-node",0),y("modelChange",function(p){return z(t.modelValue,p)||(t.modelValue=p),p}),C("select",function(){return t.onSelect()})("insertNode",function(p){return t.onInsertNode(p)})("insertFlexNode",function(p){return t.onInsertFlexNode(p)})("saveProp",function(){return t.onSaveProp()})("delete",function(){return t.onDelete()}),r(1,"div",1),f(2,Cd,1,3,"erupt-flow-form",2),l(),r(3,"div"),d(4),l()()),i&2&&(v("model",t.modelValue),_("readonly",t.readonly)("headerColor",t.color())("eruptBuild",t.eruptBuild)("progress",t.progress),a(2),g(t.flexErupt?2:-1),a(2),N(" ",t.modelValue==null?null:t.modelValue.name," "))},dependencies:[Fe,Et],encapsulation:2})}return n})();function xd(n,c){if(n&1&&h(0,"nz-option",3),n&2){let e=c.$implicit;_("nzValue",e.id)("nzLabel",e.name)}}function wd(n,c){if(n&1&&h(0,"nz-option",3),n&2){let e=s().$implicit;_("nzValue",e.fieldName)("nzLabel",e.eruptFieldJson.edit.title)}}function vd(n,c){if(n&1&&f(0,wd,1,2,"nz-option",3),n&2){let e=c.$implicit;g(e.eruptFieldJson.edit.title?0:-1)}}function zd(n,c){if(n&1&&h(0,"nz-option",3),n&2){let e=s().$implicit;_("nzValue",e.fieldName)("nzLabel",e.eruptFieldJson.edit.title)}}function yd(n,c){if(n&1&&f(0,zd,1,2,"nz-option",3),n&2){let e,i=c.$implicit,t=s().$implicit,o=s(3);g(i.eruptFieldJson.edit.title&&i.eruptFieldJson.edit.type==(o.eruptBuild.eruptModel.eruptFieldModelMap==null||(e=o.eruptBuild.eruptModel.eruptFieldModelMap.get(t.source))==null?null:e.eruptFieldJson.edit.type)?0:-1)}}function bd(n,c){if(n&1){let e=x();r(0,"div",6)(1,"nz-select",9),y("ngModelChange",function(t){let o=m(e).$implicit;return z(o.source,t)||(o.source=t),u(t)}),C("ngModelChange",function(){let t=m(e).$implicit;return u(t.target=null)}),b(2,vd,1,1,null,null,O),l(),d(4," \u2192 "),r(5,"nz-select",10),y("ngModelChange",function(t){let o=m(e).$implicit;return z(o.target,t)||(o.target=t),u(t)}),b(6,yd,1,1,null,null,O),l(),r(8,"button",11),C("click",function(){let t=m(e).$index,o=s(3);return u(o.subNode.mappings.splice(t,1))}),h(9,"span",12),l()()}if(n&2){let e=c.$implicit,i=s(3);a(),v("ngModel",e.source),a(),S(i.eruptBuild.eruptModel.eruptFieldModels),a(3),_("disabled",!e.source),v("ngModel",e.target),a(),S(i.subEruptBuild.eruptModel.eruptFieldModels)}}function Sd(n,c){if(n&1&&h(0,"nz-option",3),n&2){let e=s().$implicit;_("nzValue",e.fieldName)("nzLabel",e.eruptFieldJson.edit.title)}}function Td(n,c){if(n&1&&f(0,Sd,1,2,"nz-option",3),n&2){let e=c.$implicit;g(e.eruptFieldJson.edit.title?0:-1)}}function Md(n,c){if(n&1&&h(0,"nz-option",3),n&2){let e=s().$implicit;_("nzValue",e.fieldName)("nzLabel",e.eruptFieldJson.edit.title)}}function Od(n,c){if(n&1&&f(0,Md,1,2,"nz-option",3),n&2){let e,i=c.$implicit,t=s().$implicit,o=s(3);g(i.eruptFieldJson.edit.title&&i.eruptFieldJson.edit.type==(o.eruptBuild.eruptModel.eruptFieldModelMap==null||(e=o.eruptBuild.eruptModel.eruptFieldModelMap.get(t.source))==null?null:e.eruptFieldJson.edit.type)?0:-1)}}function Ed(n,c){if(n&1){let e=x();r(0,"div",6)(1,"nz-select",13),y("ngModelChange",function(t){let o=m(e).$implicit;return z(o.source,t)||(o.source=t),u(t)}),C("ngModelChange",function(){let t=m(e).$implicit;return u(t.target=null)}),b(2,Td,1,1,null,null,O),l(),d(4," \u2192 "),r(5,"nz-select",14),y("ngModelChange",function(t){let o=m(e).$implicit;return z(o.target,t)||(o.target=t),u(t)}),b(6,Od,1,1,null,null,O),l(),r(8,"button",11),C("click",function(){let t=m(e).$index,o=s(3);return u(o.subNode.mappingsReverse.splice(t,1))}),h(9,"span",12),l()()}if(n&2){let e=c.$implicit,i=s(3);a(),v("ngModel",e.source),a(),S(i.subEruptBuild.eruptModel.eruptFieldModels),a(3),_("disabled",!e.source),v("ngModel",e.target),a(),S(i.eruptBuild.eruptModel.eruptFieldModels)}}function Pd(n,c){if(n&1){let e=x();r(0,"div",4)(1,"nz-tabset")(2,"nz-tab",5),b(3,bd,10,3,"div",6,O),r(5,"div",4)(6,"button",7),C("click",function(){m(e);let t=s(2);return u(t.addMapping())}),d(7,"\u6DFB\u52A0\u6620\u5C04"),l()()(),r(8,"nz-tab",8),b(9,Ed,10,3,"div",6,O),r(11,"div",4)(12,"button",7),C("click",function(){m(e);let t=s(2);return u(t.addMappingForParent())}),d(13,"\u6DFB\u52A0\u6620\u5C04"),l()()()()()}if(n&2){let e=s(2);a(3),S(e.subNode.mappings),a(6),S(e.subNode.mappingsReverse)}}function Nd(n,c){if(n&1){let e=x();r(0,"div",1)(1,"nz-select",2),y("ngModelChange",function(t){m(e);let o=s();return z(o.subNode.subFlowId,t)||(o.subNode.subFlowId=t),u(t)}),C("ngModelChange",function(t){m(e);let o=s();return u(o.changeSubFlow(t))}),b(2,xd,1,2,"nz-option",3,O),l(),f(4,Pd,14,0,"div",4),l()}if(n&2){let e=s();a(),v("ngModel",e.subNode.subFlowId),a(),S(e.flowConfigs),a(2),g(e.subEruptBuild?4:-1)}}var zi=(()=>{class n extends Pe{flowApi;readonly=!1;eruptBuild;modelValue;branch=[];index=0;progress;modelValueChange=new w;select=new w;delete=new w;insertNode=new w;subNode;flowConfigs=[];subEruptBuild;constructor(e){super(),this.flowApi=e}ngOnInit(){this.flowApi.configList().subscribe(e=>{this.flowConfigs=e.data,this.modelValue.prop?(this.subNode=this.modelValue.prop,this.subNode.subFlowId&&this.changeSubFlow(this.subNode.subFlowId,!1)):this.subNode=new Cn})}color(){return"#5bc2f9"}create(){return{id:se(),type:this.type(),name:this.name()}}name(){return"\u5B50\u6D41\u7A0B"}onDelete(){this.delete.emit({branch:this.branch,index:this.index})}onInsertFlexNode(e){Ne(this.branch,this.index,e)}onInsertNode(e){this.insertNode.emit({branch:this.branch,index:this.index,type:e,prop:new Cn})}onSaveProp(){this.modelValue.prop=this.subNode}onSelect(){this.select.emit(this.modelValue)}type(){return U.SUB}changeSubFlow(e,i=!0){let t=this.flowConfigs.find(o=>o.id===e);i&&(this.subNode.mappings=[{source:null,target:null}],this.subNode.mappingsReverse=[]),this.flowApi.eruptFlowBuild(t.erupt).subscribe(o=>{this.subEruptBuild=o.data})}addMapping(){this.subNode.mappings.push({source:null,target:null})}addMappingForParent(){this.subNode.mappingsReverse.push({source:null,target:null})}static \u0275fac=function(i){return new(i||n)(F(he))};static \u0275cmp=E({type:n,selectors:[["app-sub-node"]],inputs:{readonly:"readonly",eruptBuild:"eruptBuild",modelValue:"modelValue",branch:"branch",index:"index",progress:"progress"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode"},standalone:!1,features:[Ae],decls:4,vars:9,consts:[[3,"modelChange","select","insertNode","insertFlexNode","saveProp","delete","model","readonly","headerColor","eruptBuild","progress"],["config",""],["nzShowSearch","","nzPlaceHolder","\u9009\u62E9\u5B50\u6D41\u7A0B",2,"width","100%",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"],[2,"margin","12px 0"],["nzTitle","\u7236\u6D41\u7A0B \u2192 \u5B50\u6D41\u7A0B"],[2,"display","flex","align-items","center","gap","8px","margin-bottom","12px"],["nz-button","","nzType","primary",3,"click"],["nzTitle","\u5B50\u6D41\u7A0B \u2192 \u7236\u6D41\u7A0B"],["nzShowSearch","","nzPlaceHolder","\u4E3B\u6D41\u7A0B\u5B57\u6BB5",2,"flex","1",3,"ngModelChange","ngModel"],["nzShowSearch","","nzPlaceHolder","\u5B50\u6D41\u7A0B\u5B57\u6BB5",2,"flex","1",3,"ngModelChange","disabled","ngModel"],["nz-button","","nzType","text","nzDanger","",3,"click"],["nz-icon","","nzType","minus-circle","nzTheme","outline"],["nzShowSearch","","nzPlaceHolder","\u5B50\u6D41\u7A0B\u5B57\u6BB5",2,"flex","1",3,"ngModelChange","ngModel"],["nzShowSearch","","nzPlaceHolder","\u4E3B\u6D41\u7A0B\u5B57\u6BB5",2,"flex","1",3,"ngModelChange","disabled","ngModel"]],template:function(i,t){i&1&&(r(0,"erupt-node",0),y("modelChange",function(p){return z(t.modelValue,p)||(t.modelValue=p),p}),C("select",function(){return t.onSelect()})("insertNode",function(p){return t.onInsertNode(p)})("insertFlexNode",function(p){return t.onInsertFlexNode(p)})("saveProp",function(){return t.onSaveProp()})("delete",function(){return t.onDelete()}),d(1),ge(2,"translate"),f(3,Nd,5,2,"div",1),l()),i&2&&(v("model",t.modelValue),_("readonly",t.readonly)("headerColor",t.color())("eruptBuild",t.eruptBuild)("progress",t.progress),a(),N(" ",ye(2,7,"SUB_FLOW")," "),a(2),g(t.subNode?3:-1))},dependencies:[oe,re,Y,G,X,qe,Je,W,qt,$t,Fe,pt],encapsulation:2})}return n})();var ao=[(()=>{let n=new on;return n.gatewayType=ce.EXCLUSIVE,n})(),(()=>{let n=new on;return n.gatewayType=ce.PARALLEL,n})(),(()=>{let n=new on;return n.gatewayType=ce.INCLUSIVE,n})(),new tn,new fi,new gi,new zi,new wi],yi=new Map;for(let n of ao)yi[n.type()]=n;var Dd=n=>({"p-branch-end":n}),Ma=(()=>{class n{nodeType=U;readonly=!1;eruptBuild;modelValue;branch=[];index=0;progress;modelValueChange=new w;select=new w;delete=new w;insertNode=new w;onInsertNode(e){this.insertNode.emit({branch:this.branch,index:this.index,type:e})}onInsertFlexNode(e){Ne(this.branch,this.index,e)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["app-gateway-join"]],inputs:{readonly:"readonly",eruptBuild:"eruptBuild",modelValue:"modelValue",branch:"branch",index:"index",progress:"progress"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode"},standalone:!1,decls:6,vars:9,consts:[[2,"position","relative"],[2,"display","flex","justify-content","center"],["title","\u7F51\u5173\u6C47\u805A",3,"ngClass"],["viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","width","40","height","40",1,"icon"],["fill","#d9d9d9","d","M537.6 409.6L537.6 307.2 896 307.2 896 0l-51.2 0 0 256.00000001-307.2-1e-8L537.6 51.2l-51.2 0 0 204.8-307.2 1e-8L179.2 0l-51.2 0 0 307.2 358.4 0 0 102.4-102.4 0 128 204.8 128-204.8-102.4 0z m153.6 563.2l0-256c0-28.16-23.04-51.2-51.2-51.2l-256 0c-28.16 0-51.2 23.04-51.2 51.2l0 256c0 28.16 23.04 51.2 51.2 51.2L640 1024c28.16 0 51.2-23.04 51.2-51.2z"],[3,"insertFlexNode","insertNode","progress","eruptBuild","readonly","showBody"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),Co(),r(3,"svg",3),h(4,"path",4),l()()(),ho(),r(5,"erupt-node",5),C("insertFlexNode",function(p){return t.onInsertFlexNode(p)})("insertNode",function(p){return t.insertNode.emit({branch:t.branch,index:t.index,type:p})}),l()()),i&2&&(a(2),_("ngClass",t.progress==null?null:t.progress[t.modelValue.id]),a(3),De(te(7,Dd,t.branch.length===t.index+1)),_("progress",t.progress)("eruptBuild",t.eruptBuild)("readonly",t.readonly)("showBody",!1))},dependencies:[et,Fe],encapsulation:2})}return n})();var Id=n=>({"p-branch-end":n});function Vd(n,c){if(n&1){let e=x();r(0,"app-start-node",4),y("modelChange",function(t){m(e);let o=s();return z(o.node,t)||(o.node=t),u(t)}),C("modelChange",function(t){m(e);let o=s();return u(o.nodeChange.emit(t))})("insertNode",function(t){m(e);let o=s();return u(o.insertNodeFun(o.branch,t.index,t.type))})("delete",function(t){m(e);let o=s();return u(o.deleteNode(o.branch,t.index))})("select",function(t){m(e);let o=s();return u(o.select.emit(t))}),l()}if(n&2){let e=s();_("readonly",e.readonly),v("model",e.node),_("eruptBuild",e.eruptBuild)("branch",e.branch)("index",e.index)("progress",e.progress)}}function Ad(n,c){if(n&1){let e=x();r(0,"app-end-node",5),y("modelChange",function(t){m(e);let o=s();return z(o.node,t)||(o.node=t),u(t)}),l()}if(n&2){let e=s();_("progress",e.progress),v("model",e.node)}}function Bd(n,c){if(n&1){let e=x();r(0,"erupt-flex-node",6),y("modelValueChange",function(t){m(e);let o=s();return z(o.node,t)||(o.node=t),u(t)}),C("modelValueChange",function(t){m(e);let o=s();return u(o.nodeChange.emit(t))})("insertNode",function(t){m(e);let o=s();return u(o.insertNodeFun(o.branch,t.index,t.type))})("delete",function(t){m(e);let o=s();return u(o.deleteNode(o.branch,t.index))})("select",function(t){m(e);let o=s();return u(o.select.emit(t))}),l()}if(n&2){let e=s();_("readonly",e.readonly),v("modelValue",e.node),_("eruptBuild",e.eruptBuild)("branch",e.branch)("index",e.index)("progress",e.progress)}}function Rd(n,c){if(n&1){let e=x();r(0,"app-sub-node",6),y("modelValueChange",function(t){m(e);let o=s();return z(o.node,t)||(o.node=t),u(t)}),C("modelValueChange",function(t){m(e);let o=s();return u(o.nodeChange.emit(t))})("insertNode",function(t){m(e);let o=s();return u(o.insertNodeFun(o.branch,t.index,t.type))})("delete",function(t){m(e);let o=s();return u(o.deleteNode(o.branch,t.index))})("select",function(t){m(e);let o=s();return u(o.select.emit(t))}),l()}if(n&2){let e=s();_("readonly",e.readonly),v("modelValue",e.node),_("eruptBuild",e.eruptBuild)("branch",e.branch)("index",e.index)("progress",e.progress)}}function Ld(n,c){if(n&1){let e=x();r(0,"app-approval-node",6),y("modelValueChange",function(t){m(e);let o=s();return z(o.node,t)||(o.node=t),u(t)}),C("modelValueChange",function(t){m(e);let o=s();return u(o.nodeChange.emit(t))})("insertNode",function(t){m(e);let o=s();return u(o.insertNodeFun(o.branch,t.index,t.type))})("delete",function(t){m(e);let o=s();return u(o.deleteNode(o.branch,t.index))})("select",function(t){m(e);let o=s();return u(o.select.emit(t))}),l()}if(n&2){let e=s();_("readonly",e.readonly),v("modelValue",e.node),_("eruptBuild",e.eruptBuild)("branch",e.branch)("index",e.index)("progress",e.progress)}}function Wd(n,c){if(n&1){let e=x();r(0,"app-cc-node",6),y("modelValueChange",function(t){m(e);let o=s();return z(o.node,t)||(o.node=t),u(t)}),C("modelValueChange",function(t){m(e);let o=s();return u(o.nodeChange.emit(t))})("insertNode",function(t){m(e);let o=s();return u(o.insertNodeFun(o.branch,t.index,t.type))})("delete",function(t){m(e);let o=s();return u(o.deleteNode(o.branch,t.index))})("select",function(t){m(e);let o=s();return u(o.select.emit(t))}),l()}if(n&2){let e=s();_("readonly",e.readonly),v("modelValue",e.node),_("eruptBuild",e.eruptBuild)("branch",e.branch)("index",e.index)("progress",e.progress)}}function Ud(n,c){if(n&1){let e=x();r(0,"app-gateway-join",6),y("modelValueChange",function(t){m(e);let o=s();return z(o.node,t)||(o.node=t),u(t)}),C("modelValueChange",function(t){m(e);let o=s();return u(o.nodeChange.emit(t))})("insertNode",function(t){m(e);let o=s();return u(o.insertNodeFun(o.branch,t.index,t.type))})("delete",function(t){m(e);let o=s();return u(o.deleteNode(o.branch,t.index))})("select",function(t){m(e);let o=s();return u(o.select.emit(t))}),l()}if(n&2){let e=s();_("readonly",e.readonly),v("modelValue",e.node),_("eruptBuild",e.eruptBuild)("branch",e.branch)("index",e.index)("progress",e.progress)}}function jd(n,c){if(n&1){let e=x();r(0,"button",11),C("click",function(){m(e);let t=s(2);return u(t.addBranch())}),d(1," \u6DFB\u52A0\u5206\u652F "),l()}}function Gd(n,c){if(n&1){let e=x();r(0,"app-recursive-node",14),C("nodeChange",function(t){let o=m(e).$index,p=s().$implicit;return u(p[o]=t)})("insertNode",function(t){m(e);let o=s().$implicit,p=s(2);return u(p.insertNodeFun(o.branches,t.index,t.type))})("delete",function(t){m(e);let o=s().$implicit,p=s(2);return u(p.deleteNode(o.branches,t.index))})("select",function(t){m(e);let o=s(3);return u(o.select.emit(t))}),l()}if(n&2){let e=c.$implicit,i=c.$index,t=s().$implicit,o=s(2);_("eruptBuild",o.eruptBuild)("readonly",o.readonly)("node",e)("progress",o.progress)("branch",t.branches)("index",i)}}function Hd(n,c){if(n&1){let e=x();r(0,"div")(1,"div")(2,"app-gateway-node",12),y("modelValueChange",function(t){let o=m(e).$index,p=s(2);return z(p.node.branches[o],t)||(p.node.branches[o]=t),u(t)}),C("insertNode",function(t){let o=m(e).$index,p=s(2);return u(p.insertNodeFun(p.node.branches[o].branches,-1,t.type))})("delete",function(){let t=m(e).$index,o=s(2);return u(o.deleteBranch(t))})("copy",function(){let t=m(e).$index,o=s(2);return u(o.copyBranch(t))})("moveL",function(){let t=m(e).$index,o=s(2);return u(o.moveL(t))})("moveR",function(){let t=m(e).$index,o=s(2);return u(o.moveR(t))})("select",function(t){let o=m(e).$index,p=s(2);return u(p.selectFun(t,o))}),l(),b(3,Gd,1,6,"app-recursive-node",13,O),l()()}if(n&2){let e=c.$implicit,i=c.$index,t=s(2);De("p-branch-item"+(i===0?" p-branch-item-l":"")+(i===t.node.branches.length-1?" p-branch-item-r":"")),a(2),_("readonly",t.readonly),v("modelValue",t.node.branches[i]),_("index",i)("progress",t.progress)("eruptBuild",t.eruptBuild)("branch",t.node.branches[i].branches)("moveRn",t.node.type===t.nodeType.GATEWAY_PARALLEL?i<t.node.branches.length-1:i<t.node.branches.length-2)("moveLn",i>0)("isDefault",(e.prop==null?null:e.prop.type)===t.BranchType.ELSE)("gatewayType",t.node.type===t.nodeType.GATEWAY_PARALLEL?t.gatewayType.PARALLEL:t.node.type===t.nodeType.GATEWAY_EXCLUSION?t.gatewayType.EXCLUSIVE:t.gatewayType.INCLUSIVE),a(),S(e.branches)}}function Qd(n,c){if(n&1){let e=x();r(0,"erupt-node",15),C("insertFlexNode",function(t){m(e);let o=s(2);return u(o.onInsertFlexNode(t))})("insertNode",function(t){m(e);let o=s(2);return u(o.insertNodeFun(o.branch,o.index,t))}),l()}if(n&2){let e=s(2);De(te(6,Id,e.branch.length===e.index+1)),_("eruptBuild",e.eruptBuild)("readonly",e.readonly)("progress",e.progress)("showBody",!1)}}function Yd(n,c){if(n&1&&(r(0,"div",3)(1,"div",7),f(2,jd,2,0,"button",8),b(3,Hd,5,12,"div",9,O),l(),f(5,Qd,1,8,"erupt-node",10),l()),n&2){let e=s();a(2),g(e.readonly?-1:2),a(),S(e.node.branches),a(2),g(e.node.type===e.nodeType.GATEWAY_EXCLUSION?5:-1)}}var Oa=(()=>{class n{readonly=!1;node;branch=[];index=0;progress;eruptBuild;nodeChange=new w;select=new w;delete=new w;insertNode=new w;nodeType=U;gatewayType=ce;insertNodeFun(e,i,t){let o=yi[t].create();e.splice(i+1,0,o),(o.type===U.GATEWAY_PARALLEL||o.type===U.GATEWAY_INCLUSIVE)&&e.splice(i+2,0,{id:se(),type:U.GATEWAY_JOIN,name:o.type+"_JOIN"})}onInsertFlexNode(e){Ne(this.branch,this.index,e)}deleteNode(e,i){console.log(e[i].type),e[i].type===U.GATEWAY_PARALLEL||e[i].type===U.GATEWAY_INCLUSIVE?e.splice(i,2):e.splice(i,1)}addBranch(){let e=!1;for(let o of this.node.branches)o.prop?.type===mt.ELSE&&(e=!0);let i=this.node.branches.length-(e?1:0),t=this.node.type;this.node.branches.splice(i,0,yi[t].createBranch(i))}deepCopy(e){return JSON.parse(JSON.stringify(e))}copyBranch(e){let i=this.deepCopy(this.node.branches[e]);i.name=i.name+"-copy";let t=this.deepCopy(this.node.branches[e]);un(i),un(t),this.node.branches.splice(e+1,0,t)}deleteBranch(e){this.node.branches.length<=2?this.deleteNode(this.branch,this.index):this.node.branches.splice(e,1)}moveL(e){this.exchange(this.node.branches,e,e-1)}moveR(e){this.exchange(this.node.branches,e,e+1)}exchange(e,i,t){let o=e[i];e[i]=e[t],e[t]=o}selectFun(e,i){}BranchType=mt;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["app-recursive-node"]],inputs:{readonly:"readonly",node:"node",branch:"branch",index:"index",progress:"progress",eruptBuild:"eruptBuild"},outputs:{nodeChange:"nodeChange",select:"select",delete:"delete",insertNode:"insertNode"},standalone:!1,decls:8,vars:1,consts:[[3,"readonly","model","eruptBuild","branch","index","progress"],[3,"progress","model"],[3,"readonly","modelValue","eruptBuild","branch","index","progress"],[1,"p-gateway"],[3,"modelChange","insertNode","delete","select","readonly","model","eruptBuild","branch","index","progress"],[3,"modelChange","progress","model"],[3,"modelValueChange","insertNode","delete","select","readonly","modelValue","eruptBuild","branch","index","progress"],[1,"p-branch"],["nz-button","","nzType","default","nzShape","round",1,"p-gateway-add"],[3,"class"],[3,"eruptBuild","readonly","progress","class","showBody"],["nz-button","","nzType","default","nzShape","round",1,"p-gateway-add",3,"click"],[3,"modelValueChange","insertNode","delete","copy","moveL","moveR","select","readonly","modelValue","index","progress","eruptBuild","branch","moveRn","moveLn","isDefault","gatewayType"],[3,"eruptBuild","readonly","node","progress","branch","index"],[3,"nodeChange","insertNode","delete","select","eruptBuild","readonly","node","progress","branch","index"],[3,"insertFlexNode","insertNode","eruptBuild","readonly","progress","showBody"]],template:function(i,t){if(i&1&&f(0,Vd,1,6,"app-start-node",0)(1,Ad,1,2,"app-end-node",1)(2,Bd,1,6,"erupt-flex-node",2)(3,Rd,1,6,"app-sub-node",2)(4,Ld,1,6,"app-approval-node",2)(5,Wd,1,6,"app-cc-node",2)(6,Ud,1,6,"app-gateway-join",2)(7,Yd,6,2,"div",3),i&2){let o;g((o=t.node.type)===t.nodeType.START?0:o===t.nodeType.END?1:o===t.nodeType.FlEX?2:o===t.nodeType.SUB?3:o===t.nodeType.APPROVAL?4:o===t.nodeType.CC?5:o===t.nodeType.GATEWAY_JOIN?6:7)}},dependencies:[Y,G,X,tn,fi,gi,on,Fe,n,wi,ui,Ma,zi],styles:['.p-gateway[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative;width:100%}.p-gateway[_ngcontent-%COMP%]   .p-gateway-add[_ngcontent-%COMP%]{z-index:2;top:-16px;position:absolute}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:center;background:#f5f5f5;width:100%}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]:before, .p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]:after{content:"";position:absolute;left:160px;right:160px;height:2px;background:#d9d9d9;z-index:0}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]:before{top:0}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]:after{bottom:0}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   .p-branch-item[_ngcontent-%COMP%]{position:relative;padding:0 60px;display:flex;justify-content:center}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   .p-branch-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:1;margin-top:40px;display:flex;flex-direction:column;align-items:center}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   .p-branch-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .p-node[_ngcontent-%COMP%]:last-child   [_ngcontent-%COMP%]:deep(.p-node-add):after{display:none!important}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   .p-branch-item[_ngcontent-%COMP%]:before{content:"";position:absolute;background:#d9d9d9;height:100%;width:2px}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(.p-branch-end .p-node-add):after{display:none!important}']})}return n})();var qd=["canvasContainer"],Jd=["node"];function Zd(n,c){if(n&1&&(r(0,"div",15),d(1),ge(2,"translate"),l()),n&2){let e=c.$implicit;_("ngClass",e),a(),N(" ",ye(2,2,e)," ")}}function Xd(n,c){if(n&1&&(r(0,"div",4),b(1,Zd,3,4,"div",15,O),ge(3,"enumToArray"),l()),n&2){let e=s();a(),S(ye(3,0,e.FlowTurn))}}function Kd(n,c){if(n&1){let e=x();r(0,"app-recursive-node",16,1),C("nodeChange",function(t){let o=m(e).$index,p=s();return p.modelValue[o]=t,u(p.modelValueChange.emit(p.modelValue))})("select",function(t){m(e);let o=s();return u(o.selectNode(t))}),l()}if(n&2){let e=c.$implicit,i=c.$index,t=s();_("readonly",t.readonly)("eruptBuild",t.eruptBuild)("node",e)("branch",t.modelValue)("progress",t.progress)("index",i)}}var rn=(()=>{class n{message;modelValue=[];eruptBuild;readonly=!1;modelValueChange=new w;select=new w;progress;canvasContainer;nodeRefs;isDragging=!1;startX=0;startY=0;startScrollLeft=0;startScrollTop=0;scale=1;minScale=.1;maxScale=3;scaleStep=.1;zoomSupported=this.checkZoomSupport();constructor(e){this.message=e}checkZoomSupport(){let e=document.createElement("div");return e.style.zoom="1.1",e.style.zoom==="1.1"}ngAfterViewInit(){this.initCanvasDrag()}ngOnInit(){this.modelValue||(this.modelValue=[new tn().create(),new ui().create()],this.modelValueChange.emit(this.modelValue))}initCanvasDrag(){if(this.canvasContainer){let e=this.canvasContainer.nativeElement;e.style.cursor="grab",e.style.userSelect="none"}}getScrollableContainer(){if(!this.canvasContainer)return null;let e=this.canvasContainer.nativeElement.parentElement;for(;e;){let i=window.getComputedStyle(e);if(i.overflow==="auto"||i.overflow==="scroll"||i.overflowX==="auto"||i.overflowX==="scroll"||i.overflowY==="auto"||i.overflowY==="scroll")return e;e=e.parentElement}return this.canvasContainer.nativeElement.closest(".flow")}getProcessRenderElement(){return this.canvasContainer?this.canvasContainer.nativeElement.querySelector(".process"):null}applyScale(){let e=this.getProcessRenderElement();e&&(this.zoomSupported?(e.style.zoom=this.scale.toString(),e.style.transform="",e.style.transformOrigin=""):(e.style.transform=`scale(${this.scale})`,e.style.transformOrigin="center center",e.style.zoom=""))}onMouseDown(e){let i=e.target,t=this.canvasContainer?.nativeElement;if(t&&(i===t||t.contains(i))){if(i.closest("button, input, select, textarea, [contenteditable], .node-input, .node-edit, .node-delete, .insert-btn"))return;this.isDragging=!0,this.startX=e.clientX,this.startY=e.clientY;let p=this.getScrollableContainer();p&&(this.startScrollLeft=p.scrollLeft,this.startScrollTop=p.scrollTop),t.style.cursor="grabbing"}}onMouseMove(e){if(this.isDragging){let i=this.startX-e.clientX,t=this.startY-e.clientY,o=this.getScrollableContainer();o&&(o.scrollLeft=this.startScrollLeft+i,o.scrollTop=this.startScrollTop+t),e.preventDefault()}}onMouseUp(e){if(this.isDragging){this.isDragging=!1;let i=this.canvasContainer.nativeElement;i.style.cursor="grab"}}onMouseLeave(e){if(this.isDragging){this.isDragging=!1;let i=this.canvasContainer.nativeElement;i.style.cursor="grab"}}selectNode(e){this.select.emit(e)}doZoom(e){e>0?this.scale=Math.min(this.maxScale,this.scale+this.scaleStep):this.scale=Math.max(this.minScale,this.scale-this.scaleStep),this.applyScale()}doHit(){this.scale=1,this.applyScale();let e=this.getScrollableContainer();if(e){let i=e.scrollWidth-e.clientWidth;e.scrollLeft=i>0?i/2:0,e.scrollTop=0}}FlowTurn=io;static \u0275fac=function(i){return new(i||n)(F(lt))};static \u0275cmp=E({type:n,selectors:[["erupt-flow"]],viewQuery:function(i,t){if(i&1&&(H(qd,5),H(Jd,5)),i&2){let o;B(o=R())&&(t.canvasContainer=o.first),B(o=R())&&(t.nodeRefs=o)}},hostBindings:function(i,t){i&1&&C("mousedown",function(p){return t.onMouseDown(p)})("mousemove",function(p){return t.onMouseMove(p)})("mouseup",function(p){return t.onMouseUp(p)})("mouseleave",function(p){return t.onMouseLeave(p)})},inputs:{modelValue:"modelValue",eruptBuild:"eruptBuild",readonly:"readonly",progress:"progress"},outputs:{modelValueChange:"modelValueChange",select:"select"},standalone:!1,decls:18,vars:5,consts:[["canvasContainer",""],["node",""],[1,"flow"],[1,"operation"],[2,"zoom",".6"],[1,"operation-zoom"],["nz-button","","nzSize","small",3,"click"],["nz-icon","","nzType","minus"],[1,"zoom-text"],["nz-button","","nzSize","small","title","\u91CD\u7F6E\u89C6\u56FE",3,"click"],["nz-icon","","nzType","reload"],["nz-icon","","nzType","plus"],[1,"canvas-container",2,"width","100%","height","100%","position","relative"],["id","flow-canvas",1,"process"],[3,"readonly","eruptBuild","node","branch","progress","index"],[2,"padding","6px","margin-bottom","16px",3,"ngClass"],[3,"nodeChange","select","readonly","eruptBuild","node","branch","progress","index"]],template:function(i,t){if(i&1){let o=x();r(0,"div",2)(1,"div",3),f(2,Xd,4,2,"div",4),r(3,"div",5)(4,"button",6),C("click",function(){return m(o),u(t.doZoom(-1))}),h(5,"span",7),l(),r(6,"span",8),d(7),ge(8,"number"),l(),r(9,"button",9),C("click",function(){return m(o),u(t.doHit())}),h(10,"span",10),l(),r(11,"button",6),C("click",function(){return m(o),u(t.doZoom(1))}),h(12,"span",11),l()()(),r(13,"div",12,0)(15,"div",13),b(16,Kd,2,6,"app-recursive-node",14,O),l()()()}i&2&&(a(2),g(t.progress?2:-1),a(5),N("",Gt(8,2,t.scale*100,"1.0-0"),"%"),a(9),S(t.modelValue))},dependencies:[et,Y,G,X,W,Oa,No,Jr,pt],styles:[".flow[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;position:relative}.flow[_ngcontent-%COMP%]   .operation[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;z-index:99;transition:all .3s ease}.flow[_ngcontent-%COMP%]   .operation[_ngcontent-%COMP%]   .operation-zoom[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#ffffffe6;border-radius:6px;padding:8px;box-shadow:0 2px 8px #00000026;backdrop-filter:blur(10px)}.flow[_ngcontent-%COMP%]   .operation[_ngcontent-%COMP%]   .operation-zoom[_ngcontent-%COMP%]   .zoom-text[_ngcontent-%COMP%]{padding:0 12px;font-size:14px;color:var(--text-color);font-weight:500;min-width:50px;text-align:center}.flow[_ngcontent-%COMP%]   .operation[_ngcontent-%COMP%]   .operation-zoom[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 2px}.flow[_ngcontent-%COMP%]   .operation[_ngcontent-%COMP%]   .operation-zoom[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]{cursor:grab;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;position:relative;width:100%;height:100%}.flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]:active{cursor:grabbing}.flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .process[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:100%;min-height:100%;padding:40px;width:max-content;height:max-content;transform-origin:center center}.flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .process[_ngcontent-%COMP%]   .process-node[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-bottom:28px;min-width:200px}.flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .process[_ngcontent-%COMP%]   .process-end[_ngcontent-%COMP%]{text-align:center;padding:10px;border-radius:5px;background:#e5e5e5;margin-top:16px;min-width:100px}.process-designer[_ngcontent-%COMP%]{display:block;min-width:100%;min-height:100%;position:relative}"]})}return n})();function nm(n,c){if(n&1){let e=x();r(0,"div",5),C("click",function(){m(e);let t=s().$implicit,o=s(2);return u(o.onInsertNode(t.type()))}),d(1),l()}if(n&2){let e=s().$implicit;fe("color",e.color()),a(),N(" ",e.name()," ")}}function im(n,c){if(n&1&&f(0,nm,2,3,"div",4),n&2){let e=c.$implicit,i=s(2);g(e.type()!=i.nodeType.START&&e.type()!=i.nodeType.FlEX?0:-1)}}function om(n,c){if(n&1){let e=x();r(0,"div",5),C("click",function(){let t=m(e).$implicit,o=s(2);return u(o.onInsertFlexNode(t))}),d(1),l()}if(n&2){let e=c.$implicit;fe("color",e.color),a(),N(" ",e.name," ")}}function rm(n,c){if(n&1&&(r(0,"div",3),b(1,im,1,1,null,null,O),b(3,om,2,3,"div",4,O),l()),n&2){let e=s();a(),S(e.nodeList),a(2),S(e.flexNodes)}}var lo=(()=>{class n{insertNode=new w;insertFlexNode=new w;popoverVisible=!1;nodeList=ao;nodeType=U;flexNodes=[];constructor(e){this.flexNodes=e.flexNodes}onInsertNode(e){this.insertNode.emit(e),this.popoverVisible=!1}onInsertFlexNode(e){this.insertFlexNode.emit(e),this.popoverVisible=!1}static \u0275fac=function(i){return new(i||n)(F(Ot))};static \u0275cmp=E({type:n,selectors:[["app-insert-btn"]],outputs:{insertNode:"insertNode",insertFlexNode:"insertFlexNode"},standalone:!1,decls:4,vars:2,consts:[["nzPopoverContent",""],["nz-button","","nzShape","circle","nz-popover","","nzPopoverTitle","\u8BF7\u9009\u62E9\u6D41\u7A0B\u8282\u70B9","nzPopoverPlacement","right","nzPopoverTrigger","click",2,"z-index","1","filter","drop-shadow(0 4px 8px rgba(31,35,41,.1))",3,"nzPopoverVisibleChange","nzPopoverContent","nzPopoverVisible"],["nz-icon","","nzType","plus",2,"font-size","16px"],[1,"node-options",2,"width","360px"],[3,"color"],[3,"click"]],template:function(i,t){if(i&1){let o=x();r(0,"button",1),y("nzPopoverVisibleChange",function(P){return m(o),z(t.popoverVisible,P)||(t.popoverVisible=P),u(P)}),h(1,"span",2),M(2,rm,5,0,"ng-template",null,0,ne),l()}if(i&2){let o=ae(3);_("nzPopoverContent",o),v("nzPopoverVisible",t.popoverVisible)}},dependencies:[Y,G,X,Zn,W],styles:[".node-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.node-options[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:3px;margin-right:5px;border-radius:10px;border:1px solid #DEDFDF}.node-options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;padding:8px 10px;border-radius:15px;background:#f8f9f9;margin:5px;width:110px}.node-options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px #e3e3e3}"]})}return n})();function am(n,c){if(n&1&&(h(0,"span",24),r(1,"span",25),d(2),ge(3,"translate"),l()),n&2){let e=s().$implicit;_("nzType",e.icon),a(2),D(ye(3,2,e.key))}}function lm(n,c){if(n&1){let e=x();r(0,"div",26),C("click",function(){let t=m(e).$implicit,o=s().$implicit,p=s();return u(p.onItemToggle(o.key,t))}),r(1,"label",27),C("ngModelChange",function(){let t=m(e).$implicit,o=s().$implicit,p=s();return u(p.onItemToggle(o.key,t))})("click",function(t){return m(e),u(t.stopPropagation())}),l(),r(2,"span",28),d(3),l()()}if(n&2){let e=c.$implicit,i=s().$implicit,t=s();L("selected",t.isItemSelected(i.key,e.key)),a(),_("ngModel",t.isItemSelected(i.key,e.key)),a(2),D(e.value)}}function sm(n,c){if(n&1&&(r(0,"div",23),h(1,"span",29),r(2,"p"),d(3),l()()),n&2){let e=s().$implicit,i=s();a(3),D(i.getEmptyStateText(e.key))}}function cm(n,c){if(n&1){let e=x();r(0,"nz-tab",4),M(1,am,4,4,"ng-template",null,0,ne),r(3,"div",15)(4,"nz-input-group",16)(5,"input",17),y("ngModelChange",function(t){let o=m(e).$implicit;return z(o.searchText,t)||(o.searchText=t),u(t)}),C("ngModelChange",function(t){let o=m(e).$implicit,p=s();return u(p.onSearchChange(o.key,t))}),l()()(),r(6,"div",18)(7,"div",19)(8,"span",20),d(9),l(),r(10,"span",21),d(11,"\u70B9\u51FB\u9009\u62E9\u6216\u53D6\u6D88\u9009\u62E9"),l()(),b(12,lm,4,4,"div",22,Ni().trackByKey,!0),f(14,sm,4,1,"div",23),l()()}if(n&2){let e=c.$implicit,i=ae(2),t=s();_("nzTitle",i),a(5),_("placeholder","\u641C\u7D22"+t.i18n.fanyi(e.key)+"\u540D\u79F0..."),v("ngModel",e.searchText),a(4),D(t.getListTitle(e.key)),a(3),S(t.getFilteredItems(e.key)),a(2),g(t.getFilteredItems(e.key).length===0?14:-1)}}function pm(n,c){if(n&1){let e=x();r(0,"button",30),C("click",function(){m(e);let t=s();return u(t.onClearAll())}),h(1,"span",31),d(2," \u6E05\u7A7A\u5168\u90E8 "),l()}}function dm(n,c){if(n&1){let e=x();r(0,"nz-tag",38),h(1,"span",24),r(2,"span",39),d(3),l(),r(4,"i",40),C("click",function(){let t=m(e).$implicit,o=s(3);return u(o.onItemRemove(t))}),l()()}if(n&2){let e=c.$implicit,i=s(3);_("nzColor",i.getTagColor(e.scope)),a(),_("nzType",e.icon),a(2),D(e.displayName)}}function mm(n,c){if(n&1&&(r(0,"div",35),b(1,dm,5,3,"nz-tag",38,Ni().trackByScope,!0),l()),n&2){let e=s().$implicit;a(),S(e.items)}}function um(n,c){if(n&1&&(r(0,"div",36),h(1,"span",41),r(2,"span",42),d(3),l()()),n&2){let e=s().$implicit,i=s();a(3),N("\u6682\u65E0\u5DF2\u9009",i.i18n.fanyi(e.scope))}}function _m(n,c){if(n&1){let e=x();r(0,"div",37)(1,"button",43),C("click",function(){m(e);let t=s().$implicit,o=s();return u(o.onClearAll(t.scope))}),h(2,"span",31),d(3),l()()}if(n&2){let e=s().$implicit,i=s();a(),_("nzTooltipTitle","\u6E05\u7A7A"+i.i18n.fanyi(e.scope)),a(2),N(" \u6E05\u7A7A",i.i18n.fanyi(e.scope)," ")}}function fm(n,c){if(n&1&&(r(0,"div",13)(1,"div",32),h(2,"span",24),r(3,"span",33),d(4),l(),r(5,"span",34),d(6),l()(),f(7,mm,3,0,"div",35),f(8,um,4,1,"div",36),f(9,_m,4,2,"div",37),l()),n&2){let e=c.$implicit,i=s();a(2),_("nzType",e.icon),a(2),D(i.i18n.fanyi(e.scope)),a(2),N("(",e.items.length,")"),a(),g(e.items.length>0?7:-1),a(),g(e.items.length===0?8:-1),a(),g(e.items.length>0?9:-1)}}function gm(n,c){if(n&1&&(r(0,"div",14),h(1,"span",41),r(2,"p"),d(3),l(),r(4,"span",44),d(5),l()()),n&2){let e=s();a(3),D(e.getEmptySelectedText()),a(2),D(e.getEmptySelectedTip())}}var Ea=(()=>{class n{upmsDataService;i18n;flowUpmsScopes=[];flowUpmsScopesChange=new w;activeTab=0;tabs=[{key:Z.USER,icon:"user",items:[],searchText:null},{key:Z.ROLE,icon:"safety-certificate",items:[],searchText:null},{key:Z.POST,icon:"idcard",items:[],searchText:null},{key:Z.ORG,icon:"apartment",items:[],searchText:null}];constructor(e,i){this.upmsDataService=e,this.i18n=i}ngOnInit(){this.loadData()}loadData(){this.tabs.find(e=>e.key===Z.USER).items=this.upmsDataService.upmsData.users,this.tabs.find(e=>e.key===Z.POST).items=this.upmsDataService.upmsData.posts,this.tabs.find(e=>e.key===Z.ROLE).items=this.upmsDataService.upmsData.roles,this.tabs.find(e=>e.key===Z.ORG).items=this.upmsDataService.upmsData.orgs}onTabChange(e){this.activeTab=e}onSearchChange(e,i){let t=this.tabs.find(o=>o.key===e);t&&(t.searchText=i)}onItemToggle(e,i){if(this.flowUpmsScopes.some(o=>o.scope===e&&o.scopeValue===i.key)){let o=this.flowUpmsScopes.findIndex(p=>p.scope===e&&p.scopeValue===i.key);o>-1&&this.flowUpmsScopes.splice(o,1)}else{let o={scope:e,scopeValue:i.key};this.flowUpmsScopes.push(o)}this.emitChanges()}onItemRemove(e){let i=this.flowUpmsScopes.findIndex(t=>t.scope===e.scope&&t.scopeValue===e.scopeValue);i>-1&&this.flowUpmsScopes.splice(i,1),this.emitChanges()}onClearAll(e){e?this.flowUpmsScopes=this.flowUpmsScopes.filter(i=>i.scope!==e):this.flowUpmsScopes=[],this.emitChanges()}emitChanges(){this.flowUpmsScopesChange.emit(this.flowUpmsScopes)}getFilteredItems(e){let i=this.tabs.find(t=>t.key===e);return i?i.searchText?i.items.filter(t=>t.value.toLowerCase().includes(i.searchText.toLowerCase())):i.items:[]}get currentTab(){return this.tabs[this.activeTab]}getListTitle(e){let i=this.tabs.find(o=>o.key===e);return i?`\u5171 ${this.getFilteredItems(e).length} \u4E2A${this.i18n.fanyi(i.key)}`:""}getEmptyStateText(e){let i=this.tabs.find(t=>t.key===e);return i?`\u672A\u627E\u5230\u5339\u914D\u7684${this.i18n.fanyi(i.key)}`:""}getEmptySelectedText(){return"\u6682\u65E0\u5DF2\u9009\u9879\u76EE"}getEmptySelectedTip(){return"\u8BF7\u5728\u5DE6\u4FA7\u9009\u62E9\u9700\u8981\u5206\u914D\u7684\u9879\u76EE"}getItemIcon(e){switch(e){case Z.ORG:return"apartment";case Z.ROLE:return"safety-certificate";case Z.USER:return"user";case Z.POST:return"idcard";default:return"idcard"}}getItemLabel(e){switch(e){case Z.ORG:return"\u7EC4\u7EC7\u67B6\u6784";case Z.ROLE:return"\u89D2\u8272";case Z.USER:return"\u7528\u6237";case Z.POST:return"\u5C97\u4F4D";default:return"\u672A\u77E5"}}getTagColor(e){switch(e){case Z.ORG:return"blue";case Z.ROLE:return"green";case Z.USER:return"orange";case Z.POST:return"purple";default:return"default"}}getItemDisplayName(e){let i=this.tabs.find(o=>o.key===e.scope);if(!i)return"";let t=i.items.find(o=>o.key===e.scopeValue);return t?t.value:""}isItemSelected(e,i){return this.flowUpmsScopes.some(t=>t.scope===e&&t.scopeValue===i)}getSortedDisplayData(){let e={[Z.ORG]:1,[Z.ROLE]:2,[Z.USER]:3,[Z.POST]:4};return this.flowUpmsScopes.map(i=>Oi(sn({},i),{displayName:this.getItemDisplayName(i),icon:this.getItemIcon(i.scope),label:this.getItemLabel(i.scope)})).sort((i,t)=>{let o=e[i.scope]-e[t.scope];return o!==0?o:i.displayName.localeCompare(t.displayName)})}getGroupedDisplayData(){let e=[];return this.tabs.forEach(i=>{let t=this.flowUpmsScopes.filter(o=>o.scope===i.key).map(o=>Oi(sn({},o),{displayName:this.getItemDisplayName(o),icon:this.getItemIcon(o.scope),label:this.getItemLabel(o.scope)})).sort((o,p)=>o.displayName.localeCompare(p.displayName));t.length>0&&e.push({scope:i.key,icon:i.icon,items:t})}),e}trackByKey(e,i){return i.key}trackByScope(e,i){return`${i.scope}-${i.scopeValue}`}trackByGroup(e,i){return i.scope}static \u0275fac=function(i){return new(i||n)(F(Xe),F(ir))};static \u0275cmp=E({type:n,selectors:[["erupt-upms-select"]],inputs:{flowUpmsScopes:"flowUpmsScopes"},outputs:{flowUpmsScopesChange:"flowUpmsScopesChange"},standalone:!1,decls:17,vars:7,consts:[["tabTitleTemplate",""],[1,"upms-select-container"],[1,"left-panel"],[1,"custom-tabs",3,"nzSelectedIndexChange","nzSelectedIndex","nzTabPosition","nzType","nzSize"],[3,"nzTitle"],[1,"right-panel"],[1,"selected-header"],[1,"header-info"],[1,"panel-title"],[1,"header-actions"],["nz-button","","nzType","link","nzSize","small","nzDanger","",1,"clear-all-btn"],[1,"selected-items"],[1,"tags-container"],[1,"group-container"],[1,"empty-selected"],[1,"search-container"],["nzSize","default"],["nz-input","",3,"ngModelChange","placeholder","ngModel"],[1,"item-list"],[1,"item-list-header"],[1,"item-count"],[1,"item-tip"],[1,"item-item",3,"selected"],[1,"empty-state"],["nz-icon","","nzTheme","outline",3,"nzType"],[1,"tab-label"],[1,"item-item",3,"click"],["nz-checkbox","",3,"ngModelChange","click","ngModel"],[1,"item-name"],["nz-icon","","nzType","search","nzTheme","outline"],["nz-button","","nzType","link","nzSize","small","nzDanger","",1,"clear-all-btn",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],[1,"group-header"],[1,"group-label"],[1,"group-count"],[1,"group-tags"],[1,"group-empty"],[1,"group-actions"],[2,"margin-bottom","6px",3,"nzColor"],[1,"tag-text"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"],["nz-icon","","nzType","inbox","nzTheme","outline"],[1,"empty-text"],["nz-button","","nzType","link","nzSize","small","nzDanger","","nz-tooltip","",1,"clear-group-btn",3,"click","nzTooltipTitle"],[1,"empty-tip"]],template:function(i,t){i&1&&(r(0,"div",1)(1,"div",2)(2,"nz-tabset",3),y("nzSelectedIndexChange",function(p){return z(t.activeTab,p)||(t.activeTab=p),p}),C("nzSelectedIndexChange",function(p){return t.onTabChange(p)}),b(3,cm,15,5,"nz-tab",4,O),l()(),r(5,"div",5)(6,"div",6)(7,"div",7)(8,"h3",8),d(9),l()(),r(10,"div",9),f(11,pm,3,0,"button",10),l()(),r(12,"div",11)(13,"div",12),b(14,fm,10,6,"div",13,t.trackByGroup,!0),l(),f(16,gm,6,2,"div",14),l()()()),i&2&&(a(2),v("nzSelectedIndex",t.activeTab),_("nzTabPosition","top")("nzType","line")("nzSize","default"),a(),S(t.tabs),a(6),N("\u5DF2\u9009",t.flowUpmsScopes.length," \u9879"),a(2),g(t.flowUpmsScopes.length>0?11:-1),a(3),S(t.getGroupedDisplayData()),a(2),g(t.flowUpmsScopes.length===0?16:-1))},dependencies:[ke,oe,re,Y,G,St,be,W,qt,$t,$e,ct,st,pt],styles:["[_nghost-%COMP%]     .upms-select-container{display:flex;min-height:520px;margin:0 auto}[_nghost-%COMP%]     .left-panel{flex:1.2;border-right:1px solid #f0f0f0;padding:0 12px}[_nghost-%COMP%]     .right-panel{flex:.8;padding:12px}[_nghost-%COMP%]     .tabs{display:flex;border-bottom:1px solid #f0f0f0;margin-bottom:16px}[_nghost-%COMP%]     .tab-item{display:flex;align-items:center;gap:6px;padding:10px 16px;cursor:pointer;border-bottom:2px solid transparent;transition:all .2s ease;color:#666;font-size:14px;font-weight:500;position:relative}[_nghost-%COMP%]     .tab-item:hover{color:#1890ff;background-color:#1890ff0a}[_nghost-%COMP%]     .tab-item.active{color:#1890ff;border-bottom-color:#1890ff;background-color:#1890ff0a}[_nghost-%COMP%]     .tab-item span[nz-icon]{font-size:14px}[_nghost-%COMP%]     .tab-item .tab-label{font-size:13px}[_nghost-%COMP%]     .search-container{margin-bottom:12px}[_nghost-%COMP%]     .search-container nz-input-group   .ant-input-group-addon{background:#f8f9fa;border-color:#e9ecef}[_nghost-%COMP%]     .search-container nz-input-group   .ant-input{border-color:#e9ecef}[_nghost-%COMP%]     .search-container nz-input-group   .ant-input:focus, [_nghost-%COMP%]     .search-container nz-input-group   .ant-input:hover{border-color:#1890ff;box-shadow:0 0 0 2px #1890ff1a}[_nghost-%COMP%]     .external-link{display:flex;align-items:center;gap:6px;margin-bottom:16px;padding:8px 10px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:1px solid #e9ecef;border-radius:8px;font-size:12px;color:#495057;transition:all .2s ease}[_nghost-%COMP%]     .external-link:hover{background:linear-gradient(135deg,#e9ecef,#dee2e6);border-color:#ced4da}[_nghost-%COMP%]     .external-link span[nz-icon]{color:#1890ff;font-size:14px}[_nghost-%COMP%]     .external-link .link-icon{margin-left:auto;cursor:pointer}[_nghost-%COMP%]     .external-link .link-icon:hover{color:#40a9ff}[_nghost-%COMP%]     .item-list{max-height:320px;border:1px solid #f0f0f0;background:#fff}[_nghost-%COMP%]     .item-list-header{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:#f8f9fa;border-bottom:1px solid #f0f0f0}[_nghost-%COMP%]     .item-list-header .item-count{font-size:12px;color:#6c757d;font-weight:500}[_nghost-%COMP%]     .item-list-header .item-tip{font-size:11px;color:#adb5bd}[_nghost-%COMP%]     .item-item{display:flex;align-items:center;gap:10px;padding:10px 12px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid #f8f9fa;position:relative}[_nghost-%COMP%]     .item-item:last-child{border-bottom:none}[_nghost-%COMP%]     .item-item:hover{background-color:#f8f9fa;transform:translate(2px)}[_nghost-%COMP%]     .item-item:active{background-color:#e9ecef}[_nghost-%COMP%]     .item-item.selected{background-color:#1890ff0d;border-left:3px solid #1890ff;padding-left:9px}[_nghost-%COMP%]     .item-item .item-extra{margin-left:auto;display:flex;gap:8px;align-items:center}[_nghost-%COMP%]     .item-item .item-extra .department{font-size:11px;color:#6c757d;background:#e9ecef;padding:2px 6px;border-radius:3px}[_nghost-%COMP%]     .item-item .item-extra .level{font-size:11px;color:#1890ff;background:#1890ff1a;padding:2px 6px;border-radius:3px}[_nghost-%COMP%]     .item-name{font-size:13px;color:#495057;font-weight:400}[_nghost-%COMP%]     .empty-state, [_nghost-%COMP%]     .empty-selected{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;color:#adb5bd}[_nghost-%COMP%]     .empty-state span[nz-icon], [_nghost-%COMP%]     .empty-selected span[nz-icon]{font-size:32px;margin-bottom:8px;opacity:.6}[_nghost-%COMP%]     .empty-state p, [_nghost-%COMP%]     .empty-selected p{margin:8px 0 4px;font-size:14px;color:#6c757d}[_nghost-%COMP%]     .empty-state .empty-tip, [_nghost-%COMP%]     .empty-selected .empty-tip{font-size:11px;color:#adb5bd}[_nghost-%COMP%]     .selected-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid #f0f0f0}[_nghost-%COMP%]     .header-info{display:flex;flex-direction:column;gap:4px}[_nghost-%COMP%]     .panel-title{margin:0;font-size:16px;font-weight:600;color:#212529}[_nghost-%COMP%]     .selected-count{font-size:12px;color:#6c757d;font-weight:400}[_nghost-%COMP%]     .header-actions{display:flex;flex-direction:column;gap:8px;align-items:flex-end}[_nghost-%COMP%]     .selected-info{flex:1}[_nghost-%COMP%]     .selected-count{display:flex;align-items:center;gap:6px;margin:0 0 4px;font-size:15px;font-weight:600;color:#212529}[_nghost-%COMP%]     .selected-count span[nz-icon]{font-size:16px}[_nghost-%COMP%]     .selected-tip{font-size:11px;color:#adb5bd;margin:0}[_nghost-%COMP%]     .clear-btn, [_nghost-%COMP%]     .clear-all-btn{font-size:12px;padding:2px 8px;height:24px;border-radius:4px;display:flex;align-items:center;gap:4px}[_nghost-%COMP%]     .clear-btn:hover, [_nghost-%COMP%]     .clear-all-btn:hover{background-color:#ff4d4f1a}[_nghost-%COMP%]     .clear-btn:disabled, [_nghost-%COMP%]     .clear-all-btn:disabled{opacity:.5;cursor:not-allowed}[_nghost-%COMP%]     .clear-btn span[nz-icon], [_nghost-%COMP%]     .clear-all-btn span[nz-icon]{font-size:12px}[_nghost-%COMP%]     .clear-all-btn{color:#ff4d4f;border-color:#ff4d4f}[_nghost-%COMP%]     .clear-all-btn:hover{background-color:#ff4d4f1a;border-color:#ff7875}[_nghost-%COMP%]     .selected-items{max-height:450px;overflow-y:auto}[_nghost-%COMP%]     .tags-container{display:flex;flex-direction:column;gap:16px;margin-bottom:16px}[_nghost-%COMP%]     .group-container{border:1px solid #f0f0f0;padding:12px;background:#fafafa;transition:all .2s ease}[_nghost-%COMP%]     .group-container:hover{border-color:#d9d9d9;box-shadow:0 2px 8px #0000001a;background:#fff}[_nghost-%COMP%]     .group-header{display:flex;align-items:center;gap:6px;padding:8px 0;border-bottom:1px solid #e9ecef;margin-bottom:12px}[_nghost-%COMP%]     .group-header span[nz-icon]{color:#6c757d;font-size:14px}[_nghost-%COMP%]     .group-header .group-label{font-size:13px;font-weight:600;color:#495057}[_nghost-%COMP%]     .group-header .group-count{font-size:11px;color:#6c757d;font-weight:400}[_nghost-%COMP%]     .group-tags{margin-bottom:12px}[_nghost-%COMP%]     .group-empty{display:flex;align-items:center;gap:6px;padding:16px 0;justify-content:center;color:#adb5bd}[_nghost-%COMP%]     .group-empty span[nz-icon]{font-size:16px;opacity:.6}[_nghost-%COMP%]     .group-empty .empty-text{font-size:12px;color:#adb5bd}[_nghost-%COMP%]     .group-actions{display:flex;justify-content:flex-end;padding-top:8px;border-top:1px solid #e9ecef}[_nghost-%COMP%]     .clear-group-btn{font-size:11px;padding:2px 8px;height:22px;border-radius:4px;display:flex;align-items:center;gap:4px;color:#ff4d4f;border-color:#ff4d4f}[_nghost-%COMP%]     .clear-group-btn:hover{background-color:#ff4d4f1a;border-color:#ff7875}[_nghost-%COMP%]     .clear-group-btn span[nz-icon]{font-size:11px}[_nghost-%COMP%]     .custom-tag.ant-tag-blue{background:linear-gradient(135deg,#1890ff,#40a9ff)}[_nghost-%COMP%]     .custom-tag.ant-tag-green{background:linear-gradient(135deg,#52c41a,#73d13d)}[_nghost-%COMP%]     .custom-tag.ant-tag-orange{background:linear-gradient(135deg,#fa8c16,#ffa940)}[_nghost-%COMP%]     .custom-tag.ant-tag-purple{background:linear-gradient(135deg,#722ed1,#9254de)}[_nghost-%COMP%]     .item-list::-webkit-scrollbar, [_nghost-%COMP%]     .selected-items::-webkit-scrollbar{width:4px}[_nghost-%COMP%]     .item-list::-webkit-scrollbar-track, [_nghost-%COMP%]     .selected-items::-webkit-scrollbar-track{background:#f8f9fa;border-radius:2px}[_nghost-%COMP%]     .item-list::-webkit-scrollbar-thumb, [_nghost-%COMP%]     .selected-items::-webkit-scrollbar-thumb{background:#ced4da;border-radius:2px}[_nghost-%COMP%]     .item-list::-webkit-scrollbar-thumb:hover, [_nghost-%COMP%]     .selected-items::-webkit-scrollbar-thumb:hover{background:#adb5bd}@media (max-width: 900px){[_nghost-%COMP%]     .upms-select-container{flex-direction:column;gap:12px;min-height:auto}[_nghost-%COMP%]     .left-panel, [_nghost-%COMP%]     .right-panel{flex:none;border-right:none;border-bottom:1px solid #f0f0f0;padding:0 8px}[_nghost-%COMP%]     .left-panel{padding-bottom:12px}[_nghost-%COMP%]     .right-panel{border-bottom:none;padding-top:12px}[_nghost-%COMP%]     .tabs{justify-content:center}[_nghost-%COMP%]     .tab-item{padding:8px 12px;font-size:13px}[_nghost-%COMP%]     .item-list, [_nghost-%COMP%]     .selected-items{max-height:200px}[_nghost-%COMP%]     .tags-container{gap:12px}[_nghost-%COMP%]     .group-container{padding:8px}[_nghost-%COMP%]     .group-header{padding:6px 0;margin-bottom:8px}[_nghost-%COMP%]     .group-header .group-label{font-size:12px}[_nghost-%COMP%]     .group-header .group-count{font-size:10px}[_nghost-%COMP%]     .group-tags{margin-bottom:8px}[_nghost-%COMP%]     .group-empty{padding:12px 0}[_nghost-%COMP%]     .group-empty span[nz-icon]{font-size:14px}[_nghost-%COMP%]     .group-empty .empty-text{font-size:11px}[_nghost-%COMP%]     .group-actions{padding-top:6px}[_nghost-%COMP%]     .clear-group-btn{font-size:10px;padding:1px 6px;height:20px}[_nghost-%COMP%]     .custom-tag{padding:4px 8px;font-size:11px}[_nghost-%COMP%]     .custom-tag .tag-text{max-width:60px}[_nghost-%COMP%]     .header-actions{flex-direction:row;gap:6px}[_nghost-%COMP%]     .item-list-header{flex-direction:column;gap:4px;align-items:flex-start}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}[_nghost-%COMP%]     .item-item, [_nghost-%COMP%]     .custom-tag{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}[_nghost-%COMP%]     .item-item nz-checkbox   .ant-checkbox-wrapper .ant-checkbox .ant-checkbox-inner{border-color:#d9d9d9;border-radius:3px}[_nghost-%COMP%]     .item-item nz-checkbox   .ant-checkbox-wrapper .ant-checkbox .ant-checkbox-inner:hover{border-color:#1890ff}[_nghost-%COMP%]     .item-item nz-checkbox   .ant-checkbox-wrapper .ant-checkbox.ant-checkbox-checked .ant-checkbox-inner{background-color:#1890ff;border-color:#1890ff}[_nghost-%COMP%]       .ant-tooltip .ant-tooltip-inner{font-size:11px;padding:4px 8px;border-radius:4px}"]})}return n})();var Fa=Wa(Ua());function Cm(n,c){if(n&1){let e=x();r(0,"div",15),C("click",function(t){let o=m(e).$implicit,p=s();return u(p.selectColor(o,t))}),l()}if(n&2){let e=c.$implicit,i=s();at(i.getIconOptionStyle(e)),L("selected",i.previewColor===e)}}function hm(n,c){if(n&1){let e=x();r(0,"div",16),C("click",function(t){let o=m(e).$implicit,p=s();return u(p.selectIcon(o,t))}),r(1,"div",17),h(2,"i"),l()()}if(n&2){let e=c.$implicit,i=s();L("selected",i.previewIcon===e),a(2),De(e)}}var Pa=(()=>{class n{selectedIcon;selectedColor;configChange=new w;previewIcon="fa fa-user";previewColor="#1890ff";bgColors=["#1890ff","#52c41a","#fa8c16","#f5222d","#722ed1","#13c2c2","#eb2f96","#8c8c8c","#096dd9","#389e0d","#d48806"];icons=["fa fa-user","fa fa-credit-card","fa fa-bell","fa fa-folder","fa fa-calendar","fa fa-car","fa fa-yen","fa fa-legal","fa fa-clock-o","fa fa-file-text","fa fa-users","fa fa-exchange","fa fa-bolt","fa fa-map-marker","fa fa-user-circle","fa fa-user-times","fa fa-file-text-o","fa fa-plane","fa fa-lightbulb-o","fa fa-pie-chart","fa fa-bullseye","fa fa-sitemap","fa fa-building","fa fa-cog","fa fa-search","fa fa-trash","fa fa-save","fa fa-print","fa fa-download","fa fa-upload","fa fa-share","fa fa-check-circle","fa fa-exclamation-triangle","fa fa-times-circle","fa fa-info-circle","fa fa-question-circle","fa fa-lock","fa fa-unlock","fa fa-eye","fa fa-eye-slash"];ngOnInit(){this.initPreview()}initPreview(){this.previewIcon=this.selectedIcon,this.previewColor=this.selectedColor}selectIcon(e,i){i.stopPropagation(),this.previewIcon=e}selectColor(e,i){i.stopPropagation(),this.previewColor=e}confirmSelection(){let e={icon:this.previewIcon,color:this.previewColor};this.configChange.emit(e)}cancelSelection(){this.previewIcon=this.selectedIcon,this.previewColor=this.selectedColor}getIconOptionStyle(e){return`background-color: ${e}`}getPreviewIconStyle(){return`background-color: ${this.previewColor}`}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["app-icon-color-picker"]],inputs:{selectedIcon:"selectedIcon",selectedColor:"selectedColor"},outputs:{configChange:"configChange"},standalone:!1,decls:24,vars:4,consts:[[1,"icon-selector-content"],[1,"preview-section"],[1,"preview-display"],[1,"preview-icon"],[1,"selection-section"],[1,"color-section"],[1,"color-grid"],[1,"color-item",3,"selected","style"],[1,"icon-section"],[1,"icon-grid"],[1,"icon-item",3,"selected"],[1,"action-buttons"],[1,"buttons"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],[1,"color-item",3,"click"],[1,"icon-item",3,"click"],[1,"icon-square",2,"color","#000"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,"i"),l()()(),r(5,"div",4)(6,"div",5)(7,"h4"),d(8,"\u9009\u62E9\u989C\u8272"),l(),r(9,"div",6),b(10,Cm,1,4,"div",7,O),l()(),r(12,"div",8)(13,"h4"),d(14,"\u9009\u62E9\u56FE\u6807"),l(),r(15,"div",9),b(16,hm,3,4,"div",10,O),l()()(),r(18,"div",11)(19,"div",12)(20,"button",13),C("click",function(){return t.cancelSelection()}),d(21," \u53D6\u6D88 "),l(),r(22,"button",14),C("click",function(){return t.confirmSelection()}),d(23," \u786E\u8BA4\u9009\u62E9 "),l()()()()),i&2&&(a(3),at(t.getPreviewIconStyle()),a(),De(t.previewIcon),a(6),S(t.bgColors),a(6),S(t.icons))},dependencies:[Y,G,X],styles:[".icon-selector-content[_ngcontent-%COMP%]{width:550px;max-width:90vw;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 8px 24px #0000001f}.icon-selector-content[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:24px 24px 20px;text-align:center}.icon-selector-content[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:600;color:#fff}.icon-selector-content[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#fffc;line-height:1.4}.icon-selector-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:15px;font-weight:600;color:#262626}.icon-selector-content[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]{padding:12px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-bottom:1px solid #e8e8e8}.icon-selector-content[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]   .preview-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px}.icon-selector-content[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]   .preview-display[_ngcontent-%COMP%]   .preview-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 4px 16px #0003;transition:all .3s ease}.icon-selector-content[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]   .preview-display[_ngcontent-%COMP%]   .preview-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px}.icon-selector-content[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]   .preview-display[_ngcontent-%COMP%]   .preview-info[_ngcontent-%COMP%]{text-align:center}.icon-selector-content[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]   .preview-display[_ngcontent-%COMP%]   .preview-info[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#262626;margin-bottom:6px}.icon-selector-content[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]   .preview-display[_ngcontent-%COMP%]   .preview-info[_ngcontent-%COMP%]   .preview-color[_ngcontent-%COMP%]{font-size:13px;color:#666;background:#fffc;padding:4px 12px;border-radius:12px;display:inline-block}.icon-selector-content[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]{padding:12px;display:flex;flex-direction:column;gap:24px}.icon-selector-content[_ngcontent-%COMP%]   .color-section[_ngcontent-%COMP%]   .color-grid[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}.icon-selector-content[_ngcontent-%COMP%]   .color-section[_ngcontent-%COMP%]   .color-grid[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:8px;cursor:pointer;border:3px solid transparent;transition:all .3s ease;position:relative}.icon-selector-content[_ngcontent-%COMP%]   .color-section[_ngcontent-%COMP%]   .color-grid[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{transform:scale(1.15);box-shadow:0 4px 12px #00000040}.icon-selector-content[_ngcontent-%COMP%]   .color-section[_ngcontent-%COMP%]   .color-grid[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{border-color:#1890ff;box-shadow:0 0 0 3px #1890ff4d}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,1fr);gap:6px;padding:2px;max-height:280px;overflow-y:auto}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]{cursor:pointer;border-radius:8px;padding:6px;transition:all .3s ease;text-align:center;border:2px solid transparent;display:flex;justify-content:center}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]:hover{background-color:#f0f8ff;transform:scale(1.08);border-color:#d6e4ff}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]   .icon-item.selected[_ngcontent-%COMP%]{background-color:#e6f7ff;border-color:#1890ff;box-shadow:0 0 0 2px #1890ff33}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]   .icon-square[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:16px;transition:all .3s ease;box-shadow:0 2px 8px #00000026}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]   .icon-square[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.icon-selector-content[_ngcontent-%COMP%]   .icon-section[_ngcontent-%COMP%]   .icon-grid[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]   .icon-name[_ngcontent-%COMP%]{font-size:11px;color:#666;line-height:1.3;word-break:break-word;max-width:100%;font-weight:500}.icon-selector-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:12px;background:#fafafa;border-top:1px solid #e8e8e8}.icon-selector-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.icon-selector-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:80px;height:36px;border-radius:6px;font-weight:500;transition:all .3s ease}.icon-selector-content[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}"]})}return n})();var wm=["iconPopover"],vm=n=>({background:n}),zm=()=>({minRows:3,maxRows:5});function ym(n,c){if(n&1){let e=x();r(0,"button",23),C("click",function(){m(e);let t=s();return u(t.shot())}),d(1," \u5BFC\u51FA\u6D41\u7A0B\u56FE "),l()}if(n&2){let e=s();_("nzLoading",e.shotLoading)}}function bm(n,c){if(n&1){let e=x();r(0,"button",24),C("click",function(){m(e);let t=s();return u(t.copyConfig())}),d(1," \u590D\u5236\u914D\u7F6E "),l()}}function Sm(n,c){if(n&1){let e=x();r(0,"app-icon-color-picker",43),C("configChange",function(t){m(e);let o=s(2);return u(o.onIconColorConfigChange(t))}),l()}if(n&2){let e=s(2);_("selectedIcon",e.flowConfig.icon)("selectedColor",e.flowConfig.color)}}function Tm(n,c){if(n&1&&h(0,"nz-option",35),n&2){let e=c.$implicit;_("nzValue",e)("nzLabel",e.name)}}function Mm(n,c){n&1&&(r(0,"span"),d(1,"\u5206\u7EC4\u4E3A\u7A7A,\u8BF7\u9009\u62E9"),l())}function Om(n,c){if(n&1&&f(0,Mm,2,0,"span"),n&2){let e=c.$implicit;g(e.hasError("required")?0:-1)}}function Em(n,c){if(n&1&&h(0,"nz-option",35),n&2){let e=c.$implicit;_("nzValue",e.value)("nzLabel",e.label)}}function Pm(n,c){if(n&1&&h(0,"nz-option",35),n&2){let e=c.$implicit;_("nzValue",e.value)("nzLabel",e.label)}}function Nm(n,c){if(n&1&&(r(0,"nz-tag",44),h(1,"span",47),r(2,"span",48),d(3),l()()),n&2){let e=c.$implicit,i=s(3);_("nzColor",i.getScopeTagColor(e.scope)),a(),_("nzType",i.getScopeIcon(e.scope)),a(2),D(i.getScopeValue(e))}}function Fm(n,c){if(n&1){let e=x();r(0,"div",41)(1,"div"),b(2,Nm,4,3,"nz-tag",44,O),r(4,"button",45),C("click",function(){m(e);let t=s(2);return u(t.changeSubmitPermission(t.FlowPermission.SPECIFIC))}),h(5,"i",46),l()()()}if(n&2){let e=s(2);a(2),S(e.flowConfig.permissionScope)}}function Dm(n,c){if(n&1){let e=x();r(0,"div",42)(1,"span",49),h(2,"span",50),d(3," \u8BF7\u9009\u62E9\u5177\u4F53\u7684\u6743\u9650\u8303\u56F4 "),r(4,"button",45),C("click",function(){m(e);let t=s(2);return u(t.changeSubmitPermission(t.FlowPermission.SPECIFIC))}),h(5,"i",46),l()()()}}function km(n,c){if(n&1){let e=x();r(0,"div",21)(1,"div",25)(2,"div",26)(3,"label",27),d(4,"\u56FE\u6807"),l(),r(5,"div",28)(6,"div",29)(7,"div",30),h(8,"i"),l()(),r(9,"button",31,1),C("nzPopoverVisibleChange",function(t){m(e);let o=s();return u(o.iconPickVisibleChange(t))}),d(11," \u4FEE\u6539 "),l()(),M(12,Sm,1,2,"ng-template",null,2,ne),l(),r(14,"div",26)(15,"label",27),d(16,"\u540D\u79F0"),l(),r(17,"nz-input-group",32)(18,"input",33),y("ngModelChange",function(t){m(e);let o=s();return z(o.flowConfig.name,t)||(o.flowConfig.name=t),u(t)}),l()()(),r(19,"div",26)(20,"label",27),d(21,"\u5206\u7EC4"),l(),r(22,"nz-select",34),y("ngModelChange",function(t){m(e);let o=s();return z(o.flowConfig.flowGroup,t)||(o.flowConfig.flowGroup=t),u(t)}),b(23,Tm,1,2,"nz-option",35,O),l(),M(25,Om,1,1,"ng-template",null,3,ne),l(),r(27,"div",26)(28,"label",27),d(29,"\u6570\u636E\u6A21\u578B"),l(),r(30,"nz-select",36),y("ngModelChange",function(t){m(e);let o=s();return z(o.flowConfig.erupt,t)||(o.flowConfig.erupt=t),u(t)}),C("ngModelChange",function(t){m(e);let o=s();return u(o.changeErupt(t))}),b(31,Em,1,2,"nz-option",35,O),l()(),r(33,"div",26)(34,"label",27),d(35,"\u901A\u77E5\u6E20\u9053"),l(),r(36,"nz-select",37),y("ngModelChange",function(t){m(e);let o=s();return z(o.flowConfig.channels,t)||(o.flowConfig.channels=t),u(t)}),b(37,Pm,1,2,"nz-option",35,O),l()(),r(39,"div",26)(40,"label",38),d(41,"\u8BF4\u660E"),l(),r(42,"textarea",39),y("ngModelChange",function(t){m(e);let o=s();return z(o.flowConfig.remark,t)||(o.flowConfig.remark=t),u(t)}),l()(),r(43,"div",26)(44,"label",27),d(45,"\u8C01\u53EF\u4EE5\u63D0\u4EA4\u8BE5\u5BA1\u6279"),l(),r(46,"nz-select",40),y("ngModelChange",function(t){m(e);let o=s();return z(o.flowConfig.permission,t)||(o.flowConfig.permission=t),u(t)}),C("ngModelChange",function(t){m(e);let o=s();return u(o.changeSubmitPermission(t))}),h(47,"nz-option",35)(48,"nz-option",35)(49,"nz-option",35)(50,"nz-option",35),l(),f(51,Fm,6,0,"div",41),f(52,Dm,6,0,"div",42),l()()()}if(n&2){let e=ae(13),i=s();a(7),at(te(25,vm,i.flowConfig.color)),a(),De(i.flowConfig.icon),a(),_("nzPopoverContent",e)("nzPopoverVisible",i.iconPickVisible),a(8),_("nzAddOnAfter",i.flowConfig.code),a(),v("ngModel",i.flowConfig.name),a(4),v("ngModel",i.flowConfig.flowGroup),a(),S(i.groupOptions),a(7),v("ngModel",i.flowConfig.erupt),_("disabled",(i.flowConfig.rule==null?null:i.flowConfig.rule.length)>2),a(),S(i.eruptFlows),a(5),v("ngModel",i.flowConfig.channels),a(),S(i.noticeChannel),a(5),v("ngModel",i.flowConfig.remark),_("nzAutosize",de(27,zm)),a(4),v("ngModel",i.flowConfig.permission),a(),_("nzValue",i.FlowPermission.ALL)("nzLabel","\u5168\u5458"),a(),_("nzValue",i.FlowPermission.MANAGER)("nzLabel","\u7EC4\u7EC7\u8D1F\u8D23\u4EBA"),a(),_("nzValue",i.FlowPermission.SPECIFIC)("nzLabel","\u6307\u5B9A\u4EBA\u5458"),a(),_("nzValue",i.FlowPermission.NO)("nzLabel","\u5747\u4E0D\u53EF\u63D0\u4EA4"),a(),g((i.flowConfig.permissionScope==null?null:i.flowConfig.permissionScope.length)>0?51:-1),a(),g(i.flowConfig.permission===i.FlowPermission.SPECIFIC&&(!i.flowConfig.permissionScope||i.flowConfig.permissionScope.length===0)?52:-1)}}function Im(n,c){n&1&&h(0,"nz-empty",51),n&2&&_("nzNotFoundContent","\u8BF7\u9009\u62E9\u6570\u636E\u6A21\u578B")}function Vm(n,c){if(n&1&&f(0,Im,1,1,"nz-empty",51),n&2){let e=s();g(e.flowConfig.erupt?-1:0)}}function Am(n,c){if(n&1&&rt(0,52),n&2){s(2);let e=ae(37);_("ngTemplateOutlet",e)}}function Bm(n,c){if(n&1&&(r(0,"div",53)(1,"div",54)(2,"div",55),h(3,"erupt-flow-form",56),l()()()),n&2){let e=s(2);a(3),_("eruptBuild",e.eruptBuild)("readonly",!1)}}function Rm(n,c){if(n&1&&(r(0,"div",22),f(1,Am,1,1,"ng-container",52),f(2,Bm,4,2,"div",53),l()),n&2){let e=s();a(),g(e.flowConfig.erupt?-1:1),a(),g(e.eruptBuild?2:-1)}}function Lm(n,c){if(n&1&&rt(0,52),n&2){s(2);let e=ae(37);_("ngTemplateOutlet",e)}}function Wm(n,c){if(n&1){let e=x();r(0,"erupt-flow",58),y("modelValueChange",function(t){m(e);let o=s(2);return z(o.flowConfig.rule,t)||(o.flowConfig.rule=t),u(t)}),l()}if(n&2){let e=s(2);v("modelValue",e.flowConfig.rule),_("eruptBuild",e.eruptBuild)}}function Um(n,c){if(n&1&&(r(0,"div",22),f(1,Lm,1,1,"ng-container",52),f(2,Wm,1,2,"erupt-flow",57),l()),n&2){let e=s();a(),g(e.flowConfig.erupt?-1:1),a(),g(e.eruptBuild?2:-1)}}function jm(n,c){n&1&&h(0,"nz-empty",51),n&2&&_("nzNotFoundContent","\u8BF7\u9009\u62E9\u6570\u636E\u6A21\u578B")}function Gm(n,c){if(n&1&&h(0,"nz-option",35),n&2){let e=s().$implicit;_("nzValue",e.fieldName)("nzLabel",e.eruptFieldJson.edit.title)}}function Hm(n,c){if(n&1&&f(0,Gm,1,2,"nz-option",35),n&2){let e=c.$implicit,i=s(4);g(e.eruptFieldJson.edit.title&&(e.eruptFieldJson.edit.type===i.EditType.INPUT||e.eruptFieldJson.edit.type===i.EditType.NUMBER||e.eruptFieldJson.edit.type===i.EditType.TEXTAREA||e.eruptFieldJson.edit.type===i.EditType.DATE)?0:-1)}}function Qm(n,c){if(n&1){let e=x();r(0,"div",26)(1,"label",38),d(2,"\u5BA1\u6279\u5B50\u6807\u9898\u5B57\u6BB5\u8BBE\u7F6E"),l(),r(3,"div",59)(4,"div",60)(5,"nz-select",61),y("ngModelChange",function(t){m(e);let o=s(3);return z(o.flowConfig.setting.subTitleFields,t)||(o.flowConfig.setting.subTitleFields=t),u(t)}),b(6,Hm,1,1,null,null,O),l()()()()}if(n&2){let e=s(3);a(5),v("ngModel",e.flowConfig.setting.subTitleFields),a(),S(e.eruptBuild.eruptModel.eruptFieldModels)}}function Ym(n,c){if(n&1&&f(0,Qm,8,1,"div",26),n&2){let e=s(2);g(e.eruptBuild?0:-1)}}function $m(n,c){if(n&1&&(r(0,"div",21)(1,"div",25),f(2,jm,1,1,"nz-empty",51),f(3,Ym,1,1),l()()),n&2){let e=s();a(2),g(e.flowConfig.erupt?-1:2),a(),g(e.flowConfig.erupt?3:-1)}}var Da=(()=>{class n{flowApiService;modal;dataHandlerService;msg;dataService;upmsDataService;flowId;flowConfig;eruptBuild;flexNodes=[];iconPickVisible=!1;currentStep=1;eruptFlows=[];groupOptions=[];noticeChannel;shotLoading=!1;iconPopover;closeConfig=new w;constructor(e,i,t,o,p,P){this.flowApiService=e,this.modal=i,this.dataHandlerService=t,this.msg=o,this.dataService=p,this.upmsDataService=P}ngOnInit(){this.flowConfig=new mi,this.flowApiService.groupList().subscribe(e=>{this.groupOptions=e.data,this.flowId&&this.flowApiService.configGet(this.flowId).subscribe(i=>{i.success&&i.data&&(this.flowConfig=i.data,this.matchFlowGroupReference(),this.flowConfig.erupt&&this.changeErupt(this.flowConfig.erupt))})}),this.flowApiService.eruptFlows().subscribe(e=>{this.eruptFlows=e.data}),this.flowApiService.flexNodes().subscribe(e=>{this.flexNodes=e.data}),this.dataService.noticeChannels().subscribe(e=>{this.noticeChannel=e.data})}ngAfterViewInit(){}changeErupt(e){this.flowApiService.eruptFlowBuild(e).subscribe(i=>{this.dataHandlerService.initErupt(i.data),this.eruptBuild=i.data,this.eruptBuild.eruptModel.eruptJson.layout.formSize=yt.FULL_LINE})}changeSubmitPermission(e){if(e==xn.SPECIFIC){let i=this.modal.create({nzTitle:"\u8BF7\u9009\u62E9\u53EF\u89C1\u8303\u56F4",nzWidth:"880px",nzStyle:{top:"30px"},nzBodyStyle:{padding:"0"},nzContent:Ea});i.getContentComponent().flowUpmsScopes=this.flowConfig.permissionScope||[],i.getContentComponent().flowUpmsScopesChange.subscribe(t=>{this.flowConfig.permissionScope=t})}else this.flowConfig.permissionScope=null}matchFlowGroupReference(){if(this.flowConfig.flowGroup&&this.groupOptions.length>0){let e=this.groupOptions.find(i=>i.id===this.flowConfig.flowGroup.id);e&&(this.flowConfig.flowGroup=e)}}onDocumentClick(e){}switchStep(e){this.currentStep=e}onIconColorConfigChange(e){this.flowConfig.icon=e.icon,this.flowConfig.color=e.color,this.iconPickVisible=!1}iconPickVisibleChange(e){this.iconPickVisible=e}preview(){console.log("\u9884\u89C8\u5BA1\u6279\u6D41\u7A0B")}publish(){if(!this.flowConfig.name){this.msg.warning("\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0");return}if(!this.flowConfig.erupt){this.msg.warning("\u8BF7\u9009\u62E9\u5173\u8054\u8868");return}if(!this.flowConfig.flowGroup){this.msg.warning("\u8BF7\u9009\u62E9\u5206\u7EC4");return}if(!this.flowConfig.permission){this.msg.warning("\u8BF7\u9009\u62E9\u63D0\u4EA4\u6743\u9650");return}if(!this.flowConfig.channels||this.flowConfig.channels.length===0){this.msg.warning("\u8BF7\u9009\u62E9\u901A\u77E5\u6E20\u9053");return}this.flowApiService.ruleCheck(this.flowConfig.rule).subscribe(e=>{e.success?this.flowId?this.flowApiService.configUpdate(this.flowConfig).subscribe(i=>{i.success&&(this.msg.success("\u53D1\u5E03\u6210\u529F"),this.closeConfig.emit())}):this.flowApiService.configCreate(this.flowConfig).subscribe(i=>{i.success&&(this.msg.success("\u53D1\u5E03\u6210\u529F"),this.closeConfig.emit())}):(this.msg.error("\u89C4\u5219\u6821\u9A8C\u5931\u8D25\u8BF7\u68C0\u67E5"),e.data&&(this.flowConfig.rule=e.data))})}copyConfig(){this.flowConfig.rule&&navigator.clipboard.writeText(JSON.stringify(this.flowConfig.rule,null,2)).then(()=>{this.msg.success("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F")})}shot(){return so(this,null,function*(){this.shotLoading=!0;let e=document.getElementById("flow-canvas"),i=yield(0,Fa.default)(e,{scale:2,useCORS:!0,allowTaint:!1}),t=document.createElement("a");t.href=i.toDataURL("image/png"),t.download=`${this.flowConfig.name||"flow"}.png`,t.click(),t.remove(),this.shotLoading=!1})}close(){this.modal.confirm({nzTitle:"\u63D0\u793A",nzContent:"\u662F\u5426\u653E\u5F03\u5F53\u524D\u7F16\u8F91\uFF1F",nzOkText:"\u786E\u5B9A",nzCancelText:"\u53D6\u6D88",nzOnOk:()=>{this.modal.closeAll(),this.closeConfig.emit()}})}FlowPermission=xn;getScopeTagColor(e){return{ORG:"blue",ROLE:"green",USER:"orange",POST:"purple"}[e]||"default"}getScopeIcon(e){return{ORG:"apartment",ROLE:"safety-certificate",USER:"user",POST:"idcard"}[e]||"question"}getScopeValue(e){if(e.scope==Z.USER){for(let i of this.upmsDataService.upmsData.users)if(i.key==e.scopeValue)return i.value}else if(e.scope==Z.ROLE){for(let i of this.upmsDataService.upmsData.roles)if(i.key==e.scopeValue)return i.value}else if(e.scope==Z.POST){for(let i of this.upmsDataService.upmsData.posts)if(i.key==e.scopeValue)return i.value}else if(e.scope==Z.ORG){for(let i of this.upmsDataService.upmsData.orgs)if(i.key==e.scopeValue)return i.value}return e.scopeValue.toString()}EditType=Rn;static \u0275fac=function(i){return new(i||n)(F(he),F(vt),F(dt),F(lt),F(qn),F(Xe))};static \u0275cmp=E({type:n,selectors:[["app-flow-config"]],viewQuery:function(i,t){if(i&1&&H(wm,5),i&2){let o;B(o=R())&&(t.iconPopover=o.first)}},hostBindings:function(i,t){i&1&&C("click",function(p){return t.onDocumentClick(p)},wo)},inputs:{flowId:"flowId"},outputs:{closeConfig:"closeConfig"},standalone:!1,decls:41,vars:14,consts:[["notFoundErupt",""],["iconPopover",""],["iconSelectorContent",""],["groupErrorTpl",""],[1,"flow-config-container"],[1,"header"],[1,"header-left"],["nz-button","","nzType","text",1,"back-btn",3,"click"],["nz-icon","","nzType","close"],[1,"title-section"],[1,"title"],[1,"header-center"],[1,"step-nav"],[1,"step-item",3,"click"],[1,"step-number"],[1,"step-text"],[1,"header-right"],["nz-button","",3,"nzLoading"],["nz-button",""],["nz-button","","nzType","primary",1,"publish-btn",3,"click"],[1,"main-content"],[1,"form-section"],[1,"step-placeholder"],["nz-button","",3,"click","nzLoading"],["nz-button","",3,"click"],[1,"flow-form"],[1,"form-item"],[1,"form-label","required"],[1,"icon-section"],[1,"icon-display"],[1,"icon-circle"],["nz-button","","nzType","link","nz-popover","","nzPopoverTrigger","click","nzPopoverPlacement","topRight",1,"modify-link",3,"nzPopoverVisibleChange","nzPopoverContent","nzPopoverVisible"],[3,"nzAddOnAfter"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u540D\u79F0","name","name",1,"form-input",3,"ngModelChange","ngModel"],["placeholder","\u8BF7\u9009\u62E9\u5206\u7EC4",1,"form-select",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"],[1,"form-select",3,"ngModelChange","ngModel","disabled"],["nzMode","multiple",1,"form-select",3,"ngModelChange","ngModel"],[1,"form-label"],["nz-input","","placeholder","\u8BF4\u660E",1,"form-textarea",3,"ngModelChange","ngModel","nzAutosize"],["placeholder","\u8BF7\u9009\u62E9\u63D0\u4EA4\u6743\u9650",1,"form-select",3,"ngModelChange","ngModel"],[1,"permission-scopes"],[1,"permission-scopes","empty"],[3,"configChange","selectedIcon","selectedColor"],["nz-tooltip","",3,"nzColor"],["nz-button","","nzType","default","nzSize","small",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-icon","","nzTheme","outline",3,"nzType"],[1,"tag-text"],[1,"empty-text"],["nz-icon","","nzType","info-circle","nzTheme","outline"],["nzNotFoundImage","simple",3,"nzNotFoundContent"],[3,"ngTemplateOutlet"],[2,"display","flex","justify-content","center","height","100%","padding","16px"],[1,"phone-wrapper"],[1,"phone-wrapper-screen"],[3,"eruptBuild","readonly"],[3,"modelValue","eruptBuild"],[3,"modelValueChange","modelValue","eruptBuild"],[1,"form-input",2,"display","block"],[2,"margin-top","12px"],["nzMode","multiple","nzPlaceHolder","\u8BF7\u9009\u62E9\u5B57\u6BB5",1,"form-select",3,"ngModelChange","ngModel"]],template:function(i,t){if(i&1){let o=x();r(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),C("click",function(){return m(o),u(t.close())}),h(4,"i",8),l(),r(5,"div",9),h(6,"h2",10),l()(),r(7,"div",11)(8,"div",12)(9,"div",13),C("click",function(){return m(o),u(t.switchStep(1))}),r(10,"span",14),d(11,"1"),l(),r(12,"span",15),d(13,"\u57FA\u7840\u4FE1\u606F"),l()(),r(14,"div",13),C("click",function(){return m(o),u(t.switchStep(2))}),r(15,"span",14),d(16,"2"),l(),r(17,"span",15),d(18,"\u8868\u5355\u9884\u89C8"),l()(),r(19,"div",13),C("click",function(){return m(o),u(t.switchStep(3))}),r(20,"span",14),d(21,"3"),l(),r(22,"span",15),d(23,"\u6D41\u7A0B\u8BBE\u8BA1"),l()(),r(24,"div",13),C("click",function(){return m(o),u(t.switchStep(4))}),r(25,"span",14),d(26,"4"),l(),r(27,"span",15),d(28,"\u66F4\u591A\u8BBE\u7F6E"),l()()()(),r(29,"div",16),f(30,ym,2,1,"button",17),f(31,bm,2,0,"button",18),r(32,"button",19),C("click",function(){return m(o),u(t.publish())}),d(33," \u53D1\u5E03 "),l()()(),r(34,"div",20),f(35,km,53,28,"div",21),M(36,Vm,1,1,"ng-template",null,0,ne),f(38,Rm,3,2,"div",22),f(39,Um,3,2,"div",22),f(40,$m,4,2,"div",21),l()()}i&2&&(a(9),L("active",t.currentStep===1),a(5),L("active",t.currentStep===2),a(5),L("active",t.currentStep===3),a(5),L("active",t.currentStep===4),a(6),g(t.currentStep===3&&(t.flowConfig!=null&&t.flowConfig.rule)?30:-1),a(),g(t.flowConfig!=null&&t.flowConfig.rule?31:-1),a(4),g(t.currentStep===1?35:-1),a(3),g(t.currentStep==2?38:-1),a(),g(t.currentStep==3?39:-1),a(),g(t.currentStep==4?40:-1))},dependencies:[Oe,ke,oe,re,Y,G,X,be,Zn,qe,Je,W,$e,ct,bt,st,Zt,rn,Pa,Et],styles:['[_nghost-%COMP%]     .flow-config-container{height:100vh;display:flex;flex-direction:column;background-color:#f5f5f5}[_nghost-%COMP%]     .header{display:flex;align-items:center;justify-content:space-between;padding:8px 16px;background-color:#fff;border-bottom:1px solid #e8e8e8;box-shadow:0 2px 8px #0000000f;z-index:1000}[_nghost-%COMP%]     .header .header-left{width:265px;display:flex;align-items:center;gap:16px}[_nghost-%COMP%]     .header .header-left .back-btn{padding:4px 8px;border:none;background:transparent;color:#666;cursor:pointer}[_nghost-%COMP%]     .header .header-left .back-btn:hover{color:#1890ff}[_nghost-%COMP%]     .header .header-left .title-section .title{margin:0;font-size:18px;font-weight:600;color:#262626}[_nghost-%COMP%]     .header .header-left .title-section .draft-status{display:flex;align-items:center;gap:4px;margin-top:4px;font-size:12px;color:#8c8c8c;cursor:pointer}[_nghost-%COMP%]     .header .header-left .title-section .draft-status:hover{color:#1890ff}[_nghost-%COMP%]     .header .header-center .step-nav{display:flex;gap:32px}[_nghost-%COMP%]     .header .header-center .step-nav .step-item{display:flex;align-items:center;gap:8px;padding:8px 16px;border-radius:6px;cursor:pointer;transition:all .3s}[_nghost-%COMP%]     .header .header-center .step-nav .step-item:hover{background-color:#f0f8ff}[_nghost-%COMP%]     .header .header-center .step-nav .step-item.active{background-color:#e6f7ff;color:#1890ff}[_nghost-%COMP%]     .header .header-center .step-nav .step-item.active .step-number{background-color:#1890ff;color:#fff}[_nghost-%COMP%]     .header .header-center .step-nav .step-item .step-number{display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;background-color:#d9d9d9;color:#666;font-size:12px;font-weight:600}[_nghost-%COMP%]     .header .header-center .step-nav .step-item .step-text{font-size:14px;font-weight:500}[_nghost-%COMP%]     .header .header-right{width:265px;display:flex;align-items:center;justify-content:flex-end}[_nghost-%COMP%]     .header .header-right .incomplete-items{display:flex;align-items:center;gap:4px;padding:4px 8px;font-size:12px;color:#ff4d4f;cursor:pointer}[_nghost-%COMP%]     .header .header-right .incomplete-items:hover{background-color:#fff2f0;border-radius:4px}[_nghost-%COMP%]     .header .header-right .preview-btn{border-color:#1890ff;color:#1890ff}[_nghost-%COMP%]     .header .header-right .publish-btn{background-color:#1890ff;border-color:#1890ff}[_nghost-%COMP%]     .main-content{flex:1;overflow-y:auto}[_nghost-%COMP%]     .main-content .step-placeholder{height:100%}[_nghost-%COMP%]     .main-content .step-placeholder[hidden]{display:none!important}[_nghost-%COMP%]     .main-content .phone-wrapper{width:340px;height:100%;background:linear-gradient(145deg,#f8f9fa,#e9ecef);border-radius:22px;border:8px solid #2c3e50;box-shadow:0 20px 40px #00000026,0 8px 16px #0000001a,inset 0 1px #fff3,inset 0 -1px #0000001a;position:relative;margin:0 auto;display:flex;flex-direction:column}[_nghost-%COMP%]     .main-content .phone-wrapper:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%);width:120px;height:24px;background:#2c3e50;border-radius:0 0 12px 12px;z-index:10;pointer-events:none}[_nghost-%COMP%]     .main-content .phone-wrapper:after{content:"";position:absolute;bottom:8px;left:50%;transform:translate(-50%);width:120px;height:4px;background:#2c3e50;border-radius:2px;z-index:10;pointer-events:none}[_nghost-%COMP%]     .main-content .phone-wrapper .phone-wrapper-screen{flex:1;background:#fff;width:100%;padding:12px;border-radius:12px;border:2px solid rgba(255,255,255,.1);box-shadow:inset 0 2px 4px #0000001a,0 4px 8px #0000001a;position:relative;overflow:auto}[_nghost-%COMP%]     .main-content .phone-wrapper .phone-wrapper-screen:before{content:"";position:absolute;top:0;left:0;right:0;height:30%;background:linear-gradient(135deg,rgba(255,255,255,.1) 0%,rgba(255,255,255,.05) 50%,transparent 100%);pointer-events:none;z-index:1}[_nghost-%COMP%]     .main-content .form-section{max-width:800px;padding:32px;background-color:#fff;margin:16px auto;box-shadow:0 2px 8px #0000000f}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item{margin-bottom:24px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .form-label{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#262626}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .form-label.required:after{content:" *";color:#ff4d4f}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section{display:flex;align-items:center;gap:16px;position:relative}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section .icon-display{display:flex;align-items:center;gap:12px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section .icon-display .icon-circle{width:50px;height:50px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:32px;color:#fff;box-shadow:0 4px 12px #00000026;transition:all .3s}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section .icon-display .icon-circle i{font-size:26px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section .icon-display .icon-info .icon-name{font-size:14px;font-weight:500;color:#262626;margin-bottom:4px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section .icon-display .icon-info .icon-color{font-size:12px;color:#8c8c8c}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section .modify-link{color:#1890ff;padding:0;height:auto;border:none;background:transparent}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section .modify-link:hover{color:#40a9ff}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .form-input, [_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .form-textarea, [_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .form-select{width:100%}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .permission-scopes{margin-top:12px;padding:8px;background-color:#fafafa;border:1px solid #e8e8e8}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .permission-scopes.empty{background-color:#fff7e6;border-color:#ffd591}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .permission-scopes.empty .empty-text{display:flex;align-items:center;gap:8px;color:#d46b08;font-size:13px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .permission-scopes.empty .empty-text span[nz-icon]{font-size:14px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .permission-scopes .scopes-header{margin-bottom:12px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .permission-scopes .scopes-header .scopes-title{font-size:13px;color:#595959;font-weight:500}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .checkbox-group{display:flex;flex-direction:column;gap:16px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .checkbox-group .checkbox-item{display:flex;align-items:center;gap:8px;font-size:14px;color:#262626}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .checkbox-group .checkbox-item .help-icon{color:#8c8c8c;cursor:pointer}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .checkbox-group .checkbox-item .help-icon:hover{color:#1890ff}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list{display:flex;flex-direction:column;gap:12px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .admin-item{display:flex;align-items:center;gap:12px;padding:12px;border:1px solid #e8e8e8;border-radius:6px;background-color:#fafafa}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .admin-item .admin-avatar{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;color:#fff}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .admin-item .admin-info{flex:1}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .admin-item .admin-info .admin-name{font-size:14px;font-weight:500;color:#262626;margin-bottom:4px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .admin-item .admin-info .admin-actions{display:flex;gap:16px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .admin-item .admin-info .admin-actions .action-link{padding:0;height:auto;border:none;background:transparent;color:#1890ff;font-size:12px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .admin-item .admin-info .admin-actions .action-link:hover{color:#40a9ff}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .admin-item .admin-info .admin-actions .action-link.delete-link{color:#ff4d4f}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .admin-item .admin-info .admin-actions .action-link.delete-link:hover{color:#ff7875}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .add-admin-btn{width:100%;height:48px;border:2px dashed #d9d9d9;border-radius:6px;background-color:transparent;color:#8c8c8c;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .add-admin-btn:hover{border-color:#1890ff;color:#1890ff}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .admin-section .admin-list .add-admin-btn i{font-size:16px}[_nghost-%COMP%]     .main-content .form-section .flow-form .action-buttons{display:flex;justify-content:flex-end;padding:12px;background:#fafafa;border-top:1px solid #e8e8e8}[_nghost-%COMP%]     .main-content .form-section .flow-form .action-buttons .buttons{display:flex;gap:12px}[_nghost-%COMP%]     .main-content .form-section .flow-form .action-buttons .buttons button{min-width:80px;height:36px;border-radius:6px;font-weight:500;transition:all .3s ease}[_nghost-%COMP%]     .main-content .form-section .flow-form .action-buttons .buttons button:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}@media (max-width: 768px){[_nghost-%COMP%]     .header{flex-direction:column;gap:16px;padding:12px 16px}[_nghost-%COMP%]     .header .header-center .step-nav{gap:16px}[_nghost-%COMP%]     .header .header-center .step-nav .step-item{padding:6px 12px}[_nghost-%COMP%]     .header .header-center .step-nav .step-item .step-text{display:none}[_nghost-%COMP%]     .header .header-right{width:100%;justify-content:space-between}[_nghost-%COMP%]     .main-content .form-section{padding:20px}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section .icon-selector{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90vw;max-width:400px;max-height:80vh;overflow-y:auto}[_nghost-%COMP%]     .main-content .form-section .flow-form .form-item .icon-section .icon-selector .icon-section-selector .icon-grid{grid-template-columns:repeat(6,1fr)}}']})}return n})();function qm(n,c){n&1&&h(0,"span",29)}function Jm(n,c){if(n&1){let e=x();r(0,"div",30),C("click",function(){let t=m(e).$implicit,o=s();return u(o.selectCategory(t.id))}),r(1,"div",31)(2,"span",18),d(3),l(),r(4,"span",19),d(5),l()(),r(6,"div",32)(7,"button",33),C("click",function(t){let o=m(e).$implicit;return s().onEditGroup(o),u(t.stopPropagation())}),h(8,"span",34),l(),r(9,"button",35),C("click",function(t){let o=m(e).$implicit;return s().onDeleteGroup(o),u(t.stopPropagation())}),h(10,"span",36),l(),r(11,"button",37),C("click",function(t){return m(e),u(t.stopPropagation())}),r(12,"span"),d(13,"\u22EE\u22EE"),l()()()()}if(n&2){let e=c.$implicit,i=s();L("active",i.selectedCategory===e.id),a(3),D(e.name),a(2),N("(",e.count,")")}}function Zm(n,c){n&1&&(r(0,"nz-tag",43),d(1," \u5DF2\u505C\u7528 "),l())}function Xm(n,c){if(n&1){let e=x();r(0,"div",24)(1,"div",38)(2,"div",39)(3,"div",40),h(4,"span"),l(),r(5,"div",41)(6,"div",42),d(7),f(8,Zm,2,0,"nz-tag",43),l(),r(9,"div",44),d(10),l()()(),r(11,"div",45)(12,"button",37),C("click",function(t){return m(e),u(t.stopPropagation())}),r(13,"span"),d(14,"\u22EE\u22EE"),l()(),r(15,"button",46),C("click",function(){let t=m(e).$implicit,o=s();return u(o.onEdit(t))}),h(16,"span",34),l(),r(17,"button",47),C("click",function(){let t=m(e).$implicit,o=s();return u(o.onDuplicate(t))}),h(18,"span",48),l(),r(19,"button",49),C("click",function(){let t=m(e).$implicit,o=s();return u(o.onToggleVisibility(t))}),h(20,"span",50),l(),r(21,"button",51),C("click",function(){let t=m(e).$implicit,o=s();return u(o.onDelete(t))}),h(22,"span",36),l()()()()}if(n&2){let e=c.$implicit;a(3),fe("background-color",e.color||"#1890ff"),a(),De(e.icon||"fa fa-dot-circle-o"),a(3),N(" ",e.name," "),a(),g(e.enable?-1:8),a(2),D(e.remark||""),a(9),_("nz-tooltip",e.enable?"\u505C\u7528":"\u542F\u7528"),a(),fe("color",e.enable?"":"#52c41a"),_("nzType",e.enable?"stop":"check")}}function Km(n,c){n&1&&(r(0,"div",25),h(1,"nz-empty",52),l()),n&2&&(a(),_("nzNotFoundImage","simple"))}function eu(n,c){if(n&1){let e=x();$(0),r(1,"div")(2,"input",53),y("ngModelChange",function(t){m(e);let o=s();return z(o.createGroupName,t)||(o.createGroupName=t),u(t)}),C("keyup.enter",function(){m(e);let t=s();return u(t.handleCreateGroup())}),l()(),q()}if(n&2){let e=s();a(2),v("ngModel",e.createGroupName)}}function tu(n,c){if(n&1){let e=x();$(0),r(1,"div")(2,"input",53),y("ngModelChange",function(t){m(e);let o=s();return z(o.editGroupName,t)||(o.editGroupName=t),u(t)}),C("keyup.enter",function(){m(e);let t=s();return u(t.handleEditGroup())}),l()(),q()}if(n&2){let e=s();a(2),v("ngModel",e.editGroupName)}}var Ia=(()=>{class n{flowApiService;message;modal;flowDataService;drawerService;searchValue="";flowConfigs=[];categories=[];selectedCategory=null;categoryItems=[];loading=!1;configLoading=!1;isCreateModalVisible=!1;isEditModalVisible=!1;createGroupName="";editGroupName="";editingGroup=null;configDrawerRef;constructor(e,i,t,o,p){this.flowApiService=e,this.message=i,this.modal=t,this.flowDataService=o,this.drawerService=p}ngOnDestroy(){this.configDrawerRef&&this.configDrawerRef.close()}ngOnInit(){this.loadGroups(),this.loadFlowConfigs()}loadGroups(){this.loading=!0,this.flowApiService.groupList().subscribe(e=>{this.categoryItems=e.data.map((i,t)=>({id:i.id,name:i.name,sort:i.sort||t,count:this.getConfigsByCategory(i.id).length})),this.categoryItems.sort((i,t)=>i.sort-t.sort),this.categories=this.categoryItems.map(i=>i.name),this.loading=!1})}loadFlowConfigs(){this.configLoading=!0,this.flowApiService.configList().subscribe({next:e=>{e.success&&(this.flowConfigs=e.data,this.updateCategoryCounts()),this.configLoading=!1},error:e=>{this.configLoading=!1}})}updateCategoryCounts(){this.categoryItems.forEach(e=>{e.count=this.getConfigsByCategory(e.id).length})}getConfigsByCategory(e){return this.flowConfigs.filter(i=>i.flowGroup?.id===e)}selectCategory(e){this.selectedCategory=e}getCurrentConfigs(){let e=this.flowConfigs;if(this.selectedCategory&&(e=this.getConfigsByCategory(this.selectedCategory)),this.searchValue.trim()){let i=this.searchValue.toLowerCase().trim();e=e.filter(t=>t.name.toLowerCase().includes(i)||t.remark&&t.remark.toLowerCase().includes(i))}return e}onSearch(){console.log("\u641C\u7D22:",this.searchValue)}onCreateGroup(){this.createGroupName="",this.isCreateModalVisible=!0}handleCreateGroup(){this.createGroupName&&this.createGroupName.trim()?this.addGroup(this.createGroupName.trim()):this.message.warning("\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0")}handleCreateCancel(){this.isCreateModalVisible=!1,this.createGroupName=""}addGroup(e){this.flowApiService.groupAdd(e).subscribe({next:i=>{i.success?(this.message.success("\u5206\u7EC4\u521B\u5EFA\u6210\u529F"),this.isCreateModalVisible=!1,this.createGroupName="",this.loadGroups()):this.message.error(i.message||"\u521B\u5EFA\u5206\u7EC4\u5931\u8D25")},error:i=>{console.error("\u521B\u5EFA\u5206\u7EC4\u5931\u8D25:",i),this.message.error("\u521B\u5EFA\u5206\u7EC4\u5931\u8D25")}})}onEditGroup(e){this.editingGroup=e,this.editGroupName=e.name,this.isEditModalVisible=!0}handleEditGroup(){this.editGroupName&&this.editGroupName.trim()&&this.editingGroup?.id?this.editGroup(this.editingGroup.id,this.editGroupName.trim()):this.message.warning("\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0")}handleEditCancel(){this.isEditModalVisible=!1,this.editGroupName="",this.editingGroup=null}editGroup(e,i){this.flowApiService.groupEdit(e,i).subscribe({next:t=>{t.success?(this.message.success("\u5206\u7EC4\u7F16\u8F91\u6210\u529F"),this.isEditModalVisible=!1,this.editGroupName="",this.editingGroup=null,this.loadGroups()):this.message.error(t.message||"\u7F16\u8F91\u5206\u7EC4\u5931\u8D25")},error:t=>{console.error("\u7F16\u8F91\u5206\u7EC4\u5931\u8D25:",t),this.message.error("\u7F16\u8F91\u5206\u7EC4\u5931\u8D25")}})}onDeleteGroup(e){e.id&&this.modal.confirm({nzTitle:"\u786E\u8BA4\u5220\u9664",nzContent:`\u786E\u5B9A\u8981\u5220\u9664\u5206\u7EC4"${e.name}"\u5417\uFF1F`,nzOkText:"\u786E\u5B9A",nzCancelText:"\u53D6\u6D88",nzOnOk:()=>{this.flowApiService.groupDelete(e.id).subscribe({next:i=>{this.message.success("\u5206\u7EC4\u5220\u9664\u6210\u529F"),this.loadGroups()}})}})}onDrop(e){Ai(this.categoryItems,e.previousIndex,e.currentIndex),this.categoryItems.forEach((i,t)=>{i.sort=t}),this.categories=this.categoryItems.map(i=>i.name),this.sortGroups()}sortGroups(){let e=this.categoryItems.map(i=>i.id).filter(i=>i!==void 0);e.length!==0&&this.flowApiService.groupSort(e).subscribe({next:i=>{i.success?console.log("\u5206\u7EC4\u6392\u5E8F\u6210\u529F"):this.message.error(i.message||"\u5206\u7EC4\u6392\u5E8F\u5931\u8D25")},error:i=>{console.error("\u5206\u7EC4\u6392\u5E8F\u5931\u8D25:",i),this.message.error("\u5206\u7EC4\u6392\u5E8F\u5931\u8D25")}})}onFlowDrop(e){if(this.selectedCategory===null){this.message.warning("\u8BF7\u5148\u9009\u62E9\u5206\u7EC4\u540E\u518D\u8FDB\u884C\u6392\u5E8F");return}let i=this.getConfigsByCategory(this.selectedCategory),t=this.getCurrentConfigs();if(i.length!==t.length){this.message.warning("\u641C\u7D22\u72B6\u6001\u4E0B\u65E0\u6CD5\u6392\u5E8F\uFF0C\u8BF7\u5148\u6E05\u9664\u641C\u7D22\u6761\u4EF6");return}let o=[];if(this.flowConfigs.forEach((ee,Le)=>{ee.flowGroup?.id===this.selectedCategory&&o.push(Le)}),o.length!==i.length){this.loadFlowConfigs();return}let p=o[e.previousIndex],P=o[e.currentIndex];Ai(this.flowConfigs,p,P),this.sortFlows()}sortFlows(){if(!this.selectedCategory)return;let i=this.getConfigsByCategory(this.selectedCategory).map(t=>t.id).filter(t=>t!==void 0);i.length!==0&&this.flowApiService.flowSort(i,this.selectedCategory).subscribe({next:t=>{t.success||(this.loadFlowConfigs(),this.message.error(t.message||"Sort Error"))},error:t=>{this.loadFlowConfigs(),this.message.error("Sort Error")}})}onCreateApproval(e){this.configDrawerRef=this.drawerService.create({nzTitle:null,nzWidth:"100%",nzClosable:!1,nzMaskClosable:!1,nzContent:Da,nzContentParams:{flowId:e},nzBodyStyle:{padding:"0px"}});let i=()=>{let t=this.configDrawerRef.getContentComponent();t?t.closeConfig.subscribe(()=>{this.configDrawerRef.close(),this.loadFlowConfigs()}):setTimeout(i,50)};i()}onEdit(e){this.onCreateApproval(e.id)}onDuplicate(e){if(!e.id){this.message.warning("\u914D\u7F6EID\u4E0D\u5B58\u5728");return}this.modal.confirm({nzTitle:"\u786E\u8BA4\u590D\u5236",nzContent:`\u786E\u5B9A\u8981\u590D\u5236\u6D41\u7A0B\u914D\u7F6E"${e.name}"\u5417\uFF1F`,nzOkText:"\u786E\u5B9A",nzCancelText:"\u53D6\u6D88",nzOnOk:()=>{this.flowApiService.configCopy(e.id).subscribe({next:i=>{i.success?(this.message.success("\u6D41\u7A0B\u914D\u7F6E\u590D\u5236\u6210\u529F"),this.loadFlowConfigs()):this.message.error(i.message||"\u590D\u5236\u6D41\u7A0B\u914D\u7F6E\u5931\u8D25")},error:i=>{console.error("\u590D\u5236\u6D41\u7A0B\u914D\u7F6E\u5931\u8D25:",i),this.message.error("\u590D\u5236\u6D41\u7A0B\u914D\u7F6E\u5931\u8D25")}})}})}onToggleVisibility(e){if(!e.id){this.message.warning("\u914D\u7F6EID\u4E0D\u5B58\u5728");return}let i=e.enable,t=!e.enable;this.flowApiService.configSwitchEnable(e.id).subscribe({next:o=>{if(o.success){e.enable=t;let p=t?"\u542F\u7528":"\u505C\u7528";this.message.success(`${e.name}${p}\u6210\u529F`)}else e.enable=i,this.message.error(o.message||`${t?"\u542F\u7528":"\u505C\u7528"}\u6D41\u7A0B\u914D\u7F6E\u5931\u8D25`)},error:o=>{e.enable=i,console.error("\u5207\u6362\u6D41\u7A0B\u914D\u7F6E\u72B6\u6001\u5931\u8D25:",o),this.message.error("\u5207\u6362\u6D41\u7A0B\u914D\u7F6E\u72B6\u6001\u5931\u8D25")}})}onDelete(e){if(!e.id){this.message.warning("\u914D\u7F6EID\u4E0D\u5B58\u5728");return}this.modal.confirm({nzTitle:"\u786E\u8BA4\u5220\u9664",nzContent:`\u786E\u5B9A\u8981\u5220\u9664\u6D41\u7A0B\u914D\u7F6E"${e.name}"\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\u3002`,nzOkText:"\u786E\u5B9A",nzCancelText:"\u53D6\u6D88",nzOkDanger:!0,nzOnOk:()=>{this.flowApiService.configDelete(e.id).subscribe({next:i=>{i.success?(this.message.success("\u6D41\u7A0B\u914D\u7F6E\u5220\u9664\u6210\u529F"),this.loadFlowConfigs()):this.message.error(i.message||"\u5220\u9664\u6D41\u7A0B\u914D\u7F6E\u5931\u8D25")},error:i=>{console.error("\u5220\u9664\u6D41\u7A0B\u914D\u7F6E\u5931\u8D25:",i),this.message.error("\u5220\u9664\u6D41\u7A0B\u914D\u7F6E\u5931\u8D25")}})}})}static \u0275fac=function(i){return new(i||n)(F(he),F(lt),F(vt),F(Ot),F(zt))};static \u0275cmp=E({type:n,selectors:[["erupt-flow-management"]],standalone:!1,decls:39,vars:10,consts:[["searchIcon",""],[1,"flow-management-container"],[1,"header-section"],[1,"search-area"],[3,"nzSuffix"],["nz-input","","placeholder","\u641C\u7D22",3,"ngModelChange","ngModel"],[1,"action-buttons"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],[1,"content-layout"],[1,"category-sidebar"],[1,"sidebar-header"],[1,"header-title"],[1,"header-actions"],["nz-button","","nzType","text","nzSize","small","nz-tooltip","\u65B0\u5EFA\u5206\u7EC4",3,"click"],["cdkDropList","",1,"category-list",3,"cdkDropListDropped"],[3,"nzSpinning"],[1,"category-item",3,"click"],[1,"category-name"],[1,"category-count"],["cdkDrag","",1,"category-item","draggable-item",3,"active"],[1,"app-content"],["cdkDropList","",1,"app-list",3,"cdkDropListDropped"],["nzSize","large",2,"height","100%",3,"nzSpinning"],["cdkDrag",""],[1,"empty-state"],["nzTitle","\u65B0\u5EFA\u5206\u7EC4",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],[4,"nzModalContent"],["nzTitle","\u7F16\u8F91\u5206\u7EC4",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],["nz-icon","","nzType","search"],["cdkDrag","",1,"category-item","draggable-item",3,"click"],[1,"category-content"],[1,"category-actions"],["nz-button","","nzType","text","nzSize","small","nz-tooltip","\u7F16\u8F91\u5206\u7EC4",3,"click"],["nz-icon","","nzType","edit"],["nz-button","","nzType","text","nzSize","small","nz-tooltip","\u5220\u9664\u5206\u7EC4",3,"click"],["nz-icon","","nzType","delete"],["nz-button","","nzType","text","nzSize","small","cdkDragHandle","",3,"click"],[1,"app-item"],[1,"app-info"],[1,"app-icon"],[1,"app-details"],[1,"app-name"],["nzColor","red"],[1,"app-description"],[1,"action-icons"],["nz-button","","nzType","text","nzSize","small","nz-tooltip","\u7F16\u8F91",3,"click"],["nz-button","","nzType","text","nzSize","small","nz-tooltip","\u590D\u5236",3,"click"],["nz-icon","","nzType","copy"],["nz-button","","nzType","text","nzSize","small",3,"click","nz-tooltip"],["nz-icon","",3,"nzType"],["nz-button","","nzType","text","nzSize","small","nz-tooltip","\u5220\u9664",3,"click"],[2,"margin-top","20%",3,"nzNotFoundImage"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0",2,"width","100%",3,"ngModelChange","keyup.enter","ngModel"]],template:function(i,t){if(i&1){let o=x();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"nz-input-group",4)(4,"input",5),y("ngModelChange",function(P){return m(o),z(t.searchValue,P)||(t.searchValue=P),u(P)}),C("ngModelChange",function(){return m(o),u(t.onSearch())}),l()(),M(5,qm,1,0,"ng-template",null,0,ne),l(),r(7,"div",6)(8,"button",7),C("click",function(){return m(o),u(t.onCreateApproval())}),h(9,"span",8),d(10," \u521B\u5EFA\u6D41\u7A0B "),l()()(),r(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"h3"),d(16,"\u6D41\u7A0B\u5206\u7C7B"),l()(),r(17,"div",13)(18,"button",14),C("click",function(){return m(o),u(t.onCreateGroup())}),h(19,"span",8),l()()(),r(20,"div",15),C("cdkDropListDropped",function(P){return m(o),u(t.onDrop(P))}),r(21,"nz-spin",16)(22,"div",17),C("click",function(){return m(o),u(t.selectCategory(null))}),r(23,"span",18),d(24,"\u5168\u90E8"),l(),r(25,"span",19),d(26),l()(),b(27,Jm,14,4,"div",20,O),l()()(),r(29,"div",21)(30,"div",22),C("cdkDropListDropped",function(P){return m(o),u(t.onFlowDrop(P))}),r(31,"nz-spin",23),b(32,Xm,23,11,"div",24,O),f(34,Km,2,1,"div",25),l()()()()(),r(35,"nz-modal",26),y("nzVisibleChange",function(P){return m(o),z(t.isCreateModalVisible,P)||(t.isCreateModalVisible=P),u(P)}),C("nzOnCancel",function(){return m(o),u(t.handleCreateCancel())})("nzOnOk",function(){return m(o),u(t.handleCreateGroup())}),M(36,eu,3,1,"ng-container",27),l(),r(37,"nz-modal",28),y("nzVisibleChange",function(P){return m(o),z(t.isEditModalVisible,P)||(t.isEditModalVisible=P),u(P)}),C("nzOnCancel",function(){return m(o),u(t.handleEditCancel())})("nzOnOk",function(){return m(o),u(t.handleEditGroup())}),M(38,tu,3,1,"ng-container",27),l()}if(i&2){let o=ae(6);a(3),_("nzSuffix",o),a(),v("ngModel",t.searchValue),a(17),_("nzSpinning",!1),a(),L("active",t.selectedCategory===null),a(4),N("(",t.flowConfigs.length,")"),a(),S(t.categoryItems),a(4),_("nzSpinning",t.configLoading),a(),S(t.getCurrentConfigs()),a(2),g(!t.configLoading&&t.getCurrentConfigs().length===0?34:-1),a(),v("nzVisible",t.isCreateModalVisible),a(2),v("nzVisible",t.isEditModalVisible)}},dependencies:[ke,oe,re,Y,G,X,be,W,In,kn,$e,ct,Qn,st,Jt,jo,Uo,Wo,Zt],styles:["[_nghost-%COMP%]     .flow-management-container{padding:16px;margin:0 auto;background:#f0f2f5;height:calc(100vh - 44px);display:flex;flex-direction:column}[_nghost-%COMP%]     .flow-management-container .header-section{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding:16px 20px;background:#fff;border:1px solid #f0f0f0;box-shadow:0 1px 2px #00000008;flex-shrink:0}[_nghost-%COMP%]     .flow-management-container .header-section .search-area{flex:1;max-width:320px}[_nghost-%COMP%]     .flow-management-container .header-section .action-buttons{display:flex;gap:8px;align-items:center}[_nghost-%COMP%]     .flow-management-container .header-section .action-buttons button{border-radius:4px;height:32px;padding:0 16px;font-weight:400;transition:all .2s ease}[_nghost-%COMP%]     .flow-management-container .header-section .action-buttons button[nzType=primary]{background:#1890ff;border-color:#1890ff;color:#fff}[_nghost-%COMP%]     .flow-management-container .header-section .action-buttons button[nzType=primary]:hover{background:#40a9ff;border-color:#40a9ff}[_nghost-%COMP%]     .flow-management-container .header-section .action-buttons button[nzType=primary] span{margin-right:4px}[_nghost-%COMP%]     .content-layout{display:flex;flex:1;gap:16px;min-height:0}[_nghost-%COMP%]     .content-layout .category-sidebar{width:260px;background:#fff;padding:16px;flex-shrink:0;border:1px solid #f0f0f0;box-shadow:0 1px 2px #00000008}[_nghost-%COMP%]     .content-layout .category-sidebar .sidebar-header{margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]     .content-layout .category-sidebar .sidebar-header .header-title h3{margin:0;font-size:16px;font-weight:500;color:#262626}[_nghost-%COMP%]     .content-layout .category-sidebar .sidebar-header .header-actions{display:flex;gap:4px}[_nghost-%COMP%]     .content-layout .category-sidebar .sidebar-header .header-actions button{width:28px;height:28px;padding:0;display:flex;align-items:center;justify-content:center;border-radius:4px;border:1px solid #d9d9d9;background:#fff;color:#595959;transition:all .2s ease}[_nghost-%COMP%]     .content-layout .category-sidebar .sidebar-header .header-actions button:hover{background:#f5f5f5;border-color:#1890ff;color:#1890ff}[_nghost-%COMP%]     .content-layout .category-sidebar .sidebar-header .header-actions button span{font-size:14px}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list{flex:1;overflow:auto;position:relative;display:flex;flex-direction:column}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;margin-bottom:6px;border-radius:4px;cursor:pointer;transition:all .2s ease;border:1px solid transparent;min-height:44px;max-height:44px;box-sizing:border-box;white-space:nowrap;overflow:visible;position:relative}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item:hover{background:#f5f5f5;z-index:5}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item.active{background:#e6f7ff;border-color:#91d5ff;z-index:5}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item.active .category-content .category-name{color:#1890ff;font-weight:500}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item.active .category-content .category-count{background:#1890ff;color:#fff}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item.draggable-item{cursor:grab;background:#fff;border:1px solid #f0f0f0}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item.draggable-item:hover{background:#fafafa;border-color:#d9d9d9}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item.draggable-item:active{cursor:grabbing}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .category-content{display:flex;justify-content:space-between;align-items:center;flex:1;min-width:0;overflow:hidden}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .category-content .category-name{font-size:14px;color:#595959;font-weight:400;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;min-width:0}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .category-content .category-count{font-size:12px;color:#8c8c8c;background:#f5f5f5;padding:2px 8px;border-radius:10px;font-weight:400;flex-shrink:0;margin-left:8px;z-index:1;position:relative}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .category-actions{display:flex;align-items:center;gap:4px;opacity:0;transition:opacity .2s ease;margin-left:8px;flex-shrink:0;white-space:nowrap;overflow:hidden;position:absolute;right:12px;top:50%;transform:translateY(-50%);background:#fff;padding:2px;border-radius:4px;box-shadow:0 2px 8px #0000001a;z-index:10;pointer-events:auto}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .category-actions button{border:none;background:transparent;color:#bfbfbf;padding:4px;border-radius:4px;transition:all .2s ease;min-width:24px;min-height:24px;max-width:24px;max-height:24px;display:flex;align-items:center;justify-content:center;flex-shrink:0;white-space:nowrap;overflow:hidden;pointer-events:auto}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .category-actions button:hover{background:#f0f0f0;color:#1890ff}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item:hover .category-actions{opacity:1}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .drag-handle-btn{margin-left:8px;border:none;background:transparent;color:#bfbfbf;cursor:grab;padding:0 4px;border-radius:4px;transition:background .2s,color .2s;min-width:28px;min-height:28px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .drag-handle-btn:hover, [_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .drag-handle-btn:focus{background:#f0f0f0;color:#1890ff}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .drag-handle-btn:active{cursor:grabbing}[_nghost-%COMP%]     .content-layout .category-sidebar .category-list .category-item .drag-handle-btn .drag-icon{font-size:14px;line-height:1;letter-spacing:-1px}[_nghost-%COMP%]     .content-layout .app-content{flex:1;background:#fff;border-radius:6px;border:1px solid #f0f0f0;box-shadow:0 1px 2px #00000008;display:flex;flex-direction:column;min-height:0}[_nghost-%COMP%]     .content-layout .app-content .content-header{padding:16px 20px;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:center;flex-shrink:0;background:#fafafa}[_nghost-%COMP%]     .content-layout .app-content .content-header h3{margin:0;font-size:16px;font-weight:500;color:#262626}[_nghost-%COMP%]     .content-layout .app-content .content-header .app-count{font-size:14px;color:#8c8c8c;background:#f5f5f5;padding:4px 12px;border-radius:12px;font-weight:400}[_nghost-%COMP%]     .content-layout .app-content .app-list{flex:1;overflow-y:auto}[_nghost-%COMP%]     .content-layout .app-content .app-list.cdk-drop-list-dragging .app-item:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]     .content-layout .app-content .app-list .cdk-drag-placeholder{opacity:.4}[_nghost-%COMP%]     .content-layout .app-content .app-list .cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;background:#fff}[_nghost-%COMP%]     .content-layout .app-content .app-list .empty-state{display:flex;justify-content:center;align-items:center;height:200px;color:#8c8c8c}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item{display:flex;align-items:center;padding:16px;transition:all .2s ease;background:#fff}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item:hover{border-color:#d9d9d9;background:#fafafa}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item.draggable-flow-item{cursor:grab;border:1px solid transparent}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item.draggable-flow-item:hover{background:#fafafa;border-color:#d9d9d9}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item.draggable-flow-item:active{cursor:grabbing}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item.draggable-flow-item.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .app-info{display:flex;align-items:center;flex:1;min-width:0}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .app-info .app-icon{width:40px;height:40px;border-radius:6px;display:flex;align-items:center;justify-content:center;margin-right:12px;flex-shrink:0}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .app-info .app-icon span{color:#fff;font-size:16px}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .app-info .app-details{flex:1;min-width:0}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .app-info .app-details .app-name{font-size:14px;font-weight:500;color:#262626;margin-bottom:4px;display:flex;align-items:center;gap:8px}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .app-info .app-details .app-description{font-size:12px;color:#8c8c8c;line-height:1.4;margin:0}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .visibility-status{width:100px;text-align:center;margin:0 16px}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .visibility-status .visibility-text{font-size:12px;color:#52c41a;font-weight:400}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .action-icons{display:flex;align-items:center;gap:4px;flex-shrink:0}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .action-icons button{width:28px;height:28px;padding:0;display:flex;align-items:center;justify-content:center;border-radius:4px;border:1px solid transparent;background:transparent;color:#8c8c8c;transition:all .2s ease}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .action-icons button:hover{background:#f5f5f5;color:#262626}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .action-icons button span{font-size:14px}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .action-icons button[cdkDragHandle]{cursor:grab;color:#bfbfbf}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .action-icons button[cdkDragHandle]:hover{background:#f0f0f0;color:#1890ff}[_nghost-%COMP%]     .content-layout .app-content .app-list .app-item .action-icons button[cdkDragHandle]:active{cursor:grabbing}@media (max-width: 768px){[_nghost-%COMP%]     .flow-management-container{padding:12px;height:auto}[_nghost-%COMP%]     .flow-management-container .header-section{flex-direction:column;gap:12px;align-items:stretch;padding:12px}[_nghost-%COMP%]     .flow-management-container .header-section .search-area{max-width:none}[_nghost-%COMP%]     .flow-management-container .header-section .action-buttons{justify-content:flex-end}[_nghost-%COMP%]     .flow-management-container .content-layout{flex-direction:column;gap:12px}[_nghost-%COMP%]     .flow-management-container .content-layout .category-sidebar{width:100%;order:2;padding:12px}[_nghost-%COMP%]     .flow-management-container .content-layout .category-sidebar .category-list{display:flex;flex-wrap:wrap;gap:6px}[_nghost-%COMP%]     .flow-management-container .content-layout .category-sidebar .category-list .category-item{flex:1;min-width:100px;margin-bottom:0}[_nghost-%COMP%]     .flow-management-container .content-layout .app-content{order:1}[_nghost-%COMP%]     .flow-management-container .content-layout .app-content .content-header{padding:12px}[_nghost-%COMP%]     .flow-management-container .content-layout .app-content .app-list{padding:12px}[_nghost-%COMP%]     .flow-management-container .content-layout .app-content .app-list .app-item{flex-direction:column;align-items:flex-start;gap:12px}[_nghost-%COMP%]     .flow-management-container .content-layout .app-content .app-list .app-item .visibility-status{width:auto;text-align:left;margin:0}[_nghost-%COMP%]     .flow-management-container .content-layout .app-content .app-list .app-item .action-icons{align-self:flex-end}}"]})}return n})();var Pt=(()=>{class n{_http;constructor(e){this._http=e}progress(e){return this._http.get(A.erupt+"/flow/instance/progress",{instanceId:e})}userFlows(){return this._http.get(A.erupt+"/flow/instance/user-flows",null)}create(e,i){return this._http.post(A.erupt+"/flow/instance/create",i,{flowId:e})}list(e){return this._http.post(A.erupt+"/flow/instance/list",e)}detail(e){return this._http.get(A.erupt+"/flow/instance/detail",{no:e})}eruptData(e){return this._http.get(A.erupt+"/flow/instance/erupt-data",{instanceId:e})}tasks(e){return this._http.get(A.erupt+"/flow/instance/tasks",{instanceId:e})}currTask(e,i){return this._http.get(A.erupt+"/flow/instance/curr-task",{instanceId:e,approvalView:i})}taskNodeInfo(e){return this._http.get(A.erupt+"/flow/instance/task-node-info",{taskId:e})}commentList(e){return this._http.get(A.erupt+"/flow/instance/comment/list",{instanceId:e})}updateData(e,i){return this._http.post(A.erupt+"/flow/instance/update-data",i,{instanceId:e})}dataHistories(e){return this._http.get(A.erupt+"/flow/instance/data-histories",{instanceId:e})}commentCreate(e,i){return this._http.post(A.erupt+"/flow/instance/comment/create",null,{instanceId:e,comment:i})}withdraw(e,i){return this._http.post(A.erupt+"/flow/instance/withdraw",null,{instanceId:e,comment:i})}urge(e,i){return this._http.post(A.erupt+"/flow/instance/urge",null,{instanceId:e,comment:i})}resubmit(e,i,t){return this._http.post(A.erupt+"/flow/instance/approval/resubmit",{comment:i,data:t},{instanceTaskId:e})}agree(e,i,t,o){return this._http.post(A.erupt+"/flow/instance/approval/agree",{comment:i,signature:t,data:o},{instanceTaskId:e})}refuse(e,i){return this._http.post(A.erupt+"/flow/instance/approval/refuse",null,{instanceTaskId:e,comment:i})}cc(e,i,t){return this._http.post(A.erupt+"/flow/instance/approval/cc",null,{instanceTaskId:e,comment:t,userIds:i})}transfer(e,i,t){return this._http.post(A.erupt+"/flow/instance/approval/transfer",null,{instanceTaskId:e,comment:t,userId:i})}addSign(e,i,t,o){return this._http.post(A.erupt+"/flow/instance/approval/add-sign",null,{instanceTaskId:e,comment:o,addSignType:i,userIds:t})}rollback(e,i,t){return this._http.post(A.erupt+"/flow/instance/approval/rollback",null,{instanceTaskId:e,rtnNode:i,comment:t})}availableReturnNodes(e){return this._http.get(A.erupt+"/flow/instance/approval/available-return-nodes",{flowInstanceTaskId:e})}static \u0275fac=function(i){return new(i||n)(ot(Yt))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nu(n,c){if(n&1){let e=x();r(0,"div",1),h(1,"erupt-flow-form",2),l(),r(2,"div",3)(3,"button",4),C("click",function(){m(e);let t=s();return u(t.onCancel())}),d(4,"\u53D6\u6D88"),l(),r(5,"button",5),C("click",function(){m(e);let t=s();return u(t.onViewFlow())}),d(6,"\u67E5\u770B\u6D41\u7A0B"),l(),r(7,"button",6),C("click",function(){m(e);let t=s();return u(t.onSubmit())}),d(8,"\u53D1\u8D77\u5BA1\u6279"),l()()}if(n&2){let e=s();a(),_("eruptBuild",e.eruptBuild)("formAccesses",e.startNode==null?null:e.startNode.formAccesses)}}var Va=(()=>{class n{msg;modal;dataHandlerService;drawerService;flowApiService;flowInstanceApiService;flow;erupt;onClose;close=new w;startNode;loading=!1;eruptBuild;constructor(e,i,t,o,p,P){this.msg=e,this.modal=i,this.dataHandlerService=t,this.drawerService=o,this.flowApiService=p,this.flowInstanceApiService=P}ngOnInit(){this.loading=!0,this.erupt&&(Promise.all([this.flowApiService.eruptFlowBuild(this.erupt)]).then(([e])=>{e.subscribe(i=>{this.dataHandlerService.initErupt(i.data),i.data.eruptModel.eruptJson.layout.formSize=yt.FULL_LINE,this.eruptBuild=i.data}),this.loading=!1}),this.startNode=this.flow.rule[0].prop)}onViewFlow(){this.drawerService.create({nzTitle:"\u67E5\u770B\u6D41\u7A0B",nzContent:rn,nzContentParams:{eruptBuild:this.eruptBuild,modelValue:this.flow.rule,readonly:!0},nzBodyStyle:{padding:"0",background:"rgb(245 245 245)"},nzPlacement:"bottom",nzHeight:"85%",nzFooter:null})}onSubmit(){let e=this.dataHandlerService.eruptValueToObject(this.eruptBuild);this.flowInstanceApiService.create(this.flow.id,e).subscribe(i=>{i.success&&(this.msg.success("\u53D1\u8D77\u6210\u529F"),this.close.emit(),this.onClose&&this.onClose())})}onCancel(){this.close.emit(),this.onClose&&this.onClose()}static \u0275fac=function(i){return new(i||n)(F(lt),F(vt),F(dt),F(zt),F(he),F(Pt))};static \u0275cmp=E({type:n,selectors:[["app-create-instance"]],inputs:{flow:"flow",erupt:"erupt",onClose:"onClose"},outputs:{close:"close"},standalone:!1,decls:2,vars:2,consts:[[2,"width","100%","min-height","300px",3,"nzSpinning"],[2,"padding","16px","height","calc(100vh - 108px)","overflow","auto"],[3,"eruptBuild","formAccesses"],[2,"text-align","right","position","sticky","bottom","0","padding","10px 16px","border-top","1px solid rgba(0,0,0,.06)","z-index","999"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","default",2,"margin-left","8px",3,"click"],["nz-button","","nzType","primary",2,"margin-left","8px",3,"click"]],template:function(i,t){i&1&&(r(0,"nz-spin",0),f(1,nu,9,2),l()),i&2&&(_("nzSpinning",t.loading),a(),g(t.eruptBuild?1:-1))},dependencies:[Y,G,X,Jt,Et],encapsulation:2})}return n})();var iu=n=>({"flow-disabled":n}),ou=n=>({background:n});function ru(n,c){if(n&1&&(r(0,"span",14),d(1),l()),n&2){let e=s().$implicit,i=s();a(),N(" (",i.getCategoryFlowCount(e.key),") ")}}function au(n,c){if(n&1){let e=x();r(0,"div",12),C("click",function(){let t=m(e).$implicit,o=s();return u(o.onCategorySelect(t.key))}),r(1,"span",13),d(2),l(),f(3,ru,2,1,"span",14),l()}if(n&2){let e=c.$implicit,i=s();L("active",i.selectedCategory===e.key),a(2),D(e.name),a(),g(e.key?3:-1)}}function lu(n,c){if(n&1){let e=x();r(0,"div",9)(1,"nz-input-group",15)(2,"input",16),y("ngModelChange",function(t){m(e);let o=s();return z(o.searchKeyword,t)||(o.searchKeyword=t),u(t)}),C("ngModelChange",function(){m(e);let t=s();return u(t.onSearchChange())}),l()()()}if(n&2){let e=s();a(2),v("ngModel",e.searchKeyword)}}function su(n,c){n&1&&(r(0,"div",10)(1,"nz-spin",17)(2,"div",18),d(3,"\u52A0\u8F7D\u4E2D..."),l()()())}function cu(n,c){n&1&&(r(0,"p"),d(1,"\u6682\u65E0\u6D41\u7A0B\u6570\u636E"),l())}function pu(n,c){n&1&&(r(0,"p"),d(1,"\u672A\u627E\u5230\u5339\u914D\u7684\u6D41\u7A0B"),l())}function du(n,c){if(n&1){let e=x();r(0,"button",24),C("click",function(){m(e);let t=s(3);return u(t.refreshData())}),d(1," \u5237\u65B0\u6570\u636E "),l()}}function mu(n,c){if(n&1){let e=x();r(0,"button",25),C("click",function(){m(e);let t=s(3);return t.searchKeyword="",u(t.onSearchChange())}),d(1," \u6E05\u9664\u641C\u7D22 "),l()}}function uu(n,c){if(n&1&&(r(0,"div",19),h(1,"i",21),f(2,cu,2,0,"p"),f(3,pu,2,0,"p"),f(4,du,2,0,"button",22),f(5,mu,2,0,"button",23),l()),n&2){let e=s(2);a(2),g(e.searchKeyword?-1:2),a(),g(e.searchKeyword?3:-1),a(),g(e.searchKeyword?-1:4),a(),g(e.searchKeyword?5:-1)}}function _u(n,c){if(n&1&&(r(0,"div",35),d(1),l()),n&2){let e=s(2).$implicit;a(),D(e.remark)}}function fu(n,c){if(n&1){let e=x();r(0,"div",30),C("click",function(){m(e);let t=s().$implicit,o=s(3);return u(o.launchFlow(t))}),r(1,"div",31),h(2,"span",32),l(),r(3,"div",33)(4,"div",34),d(5),l(),f(6,_u,2,1,"div",35),l()()}if(n&2){let e=s().$implicit;_("ngClass",te(6,iu,!e.enable)),a(),at(te(8,ou,e.color)),a(),_("classList",e.icon),a(3),D(e.name),a(),g(e.remark?6:-1)}}function gu(n,c){if(n&1&&f(0,fu,7,10,"div",29),n&2){let e=c.$implicit;g(e.enable?0:-1)}}function Cu(n,c){if(n&1&&(r(0,"div",20)(1,"h3",26),d(2),r(3,"span",27),d(4),l()(),r(5,"div",28),b(6,gu,1,1,null,null,O),l()()),n&2){let e=c.$implicit;a(2),N(" ",e.title," "),a(2),N("(",e.flows.length,")"),a(2),S(e.flows)}}function hu(n,c){if(n&1&&(r(0,"div",11),f(1,uu,6,4,"div",19),b(2,Cu,8,2,"div",20,O),l()),n&2){let e=s();a(),g(e.filteredFlowGroups.length===0?1:-1),a(),S(e.filteredFlowGroups)}}var Aa=(()=>{class n{flowApiService;instanceApiService;drawerService;destroy$=new Rt;categories=[{key:"",name:"\u5168\u90E8"}];flowGroups=[];flowConfigs=[];selectedCategory="";searchKeyword="";loading=!1;flowGroupsCache=[];categoryFlowGroupsCache=new Map;filteredFlowGroups=[];constructor(e,i,t){this.flowApiService=e,this.instanceApiService=i,this.drawerService=t}ngOnInit(){this.loadData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flowGroupsCache=[],this.categoryFlowGroupsCache.clear()}loadData(){this.loading=!0,Promise.all([this.loadFlowGroups(),this.loadFlowConfigs()]).finally(()=>{this.loading=!1,this.updateFlowGroupsCache()})}loadFlowGroups(){return new Promise(e=>{this.flowApiService.groupList().pipe(Ei(this.destroy$)).subscribe({next:i=>{i.success&&i.data&&(this.flowGroups=i.data,this.generateCategories()),e()},error:i=>{console.error("\u52A0\u8F7D\u6D41\u7A0B\u5206\u7EC4\u5931\u8D25:",i),e()}})})}loadFlowConfigs(){return new Promise(e=>{this.instanceApiService.userFlows().pipe(Ei(this.destroy$)).subscribe({next:i=>{i.success&&i.data&&(this.flowConfigs=i.data),e()},error:i=>{console.error("\u52A0\u8F7D\u6D41\u7A0B\u914D\u7F6E\u5931\u8D25:",i),e()}})})}generateCategories(){this.categories=[{key:"",name:"\u5168\u90E8"}],this.flowGroups.forEach(e=>{this.categories.push({key:e.name,name:e.name})})}updateFlowGroupsCache(){this.flowGroupsCache=this.groupFlows(this.flowConfigs),this.categories.forEach(e=>{if(e.key){let i=this.flowConfigs.filter(t=>t.flowGroup?.name===e.key);this.categoryFlowGroupsCache.set(e.key,this.groupFlows(i))}}),this.updateFilteredFlowGroups()}onCategorySelect(e){this.selectedCategory=e,this.updateFilteredFlowGroups()}updateFilteredFlowGroups(){let e=[];if(this.selectedCategory?e=this.categoryFlowGroupsCache.get(this.selectedCategory)||[]:e=this.flowGroupsCache,this.searchKeyword&&this.searchKeyword.trim()){let i=this.searchKeyword.trim().toLowerCase();this.filteredFlowGroups=e.map(t=>({title:t.title,flows:t.flows.filter(o=>o.name.toLowerCase().includes(i)||o.remark&&o.remark.toLowerCase().includes(i))})).filter(t=>t.flows.length>0)}else this.filteredFlowGroups=e}groupFlows(e){let i=new Map;return e.forEach(t=>{let o=t.flowGroup?.name||"\u5176\u4ED6";i.has(o)||i.set(o,[]),i.get(o).push(t)}),Array.from(i.entries()).map(([t,o])=>({title:t,flows:o}))}launchFlow(e){if(e.enable){let i=this.drawerService.create({nzTitle:e.name,nzContent:Va,nzContentParams:{erupt:e.erupt,flow:e,onClose:()=>i.close()},nzWidth:"520px",nzBodyStyle:{padding:"0"},nzMaskClosable:!1})}}getCategoryFlowCount(e){return e?this.flowConfigs.filter(i=>i.flowGroup?.name===e).length:this.flowConfigs.length}refreshData(){this.loadData()}onSearchChange(){this.updateFilteredFlowGroups()}static \u0275fac=function(i){return new(i||n)(F(he),F(Pt),F(zt))};static \u0275cmp=E({type:n,selectors:[["app-flow-dashboard"]],standalone:!1,decls:15,vars:4,consts:[[1,"flow-dashboard"],[1,"main-content"],[1,"category-sidebar"],[1,"category-header"],["nz-button","","nzType","text","nzSize","small",3,"click","nzLoading"],["nz-icon","","nzType","reload"],[1,"category-list"],[1,"category-item",3,"active"],[1,"content-area"],[1,"search-container"],[1,"loading-container"],[1,"flow-groups"],[1,"category-item",3,"click"],[1,"category-name"],[1,"category-count"],["nzPrefixIcon","search","nzSize","default"],["type","text","nz-input","","placeholder","\u641C\u7D22\u6D41\u7A0B\u540D\u79F0...",2,"width","200px",3,"ngModelChange","ngModel"],["nzSize","large"],[1,"loading-text"],[1,"empty-state"],[1,"group-section"],["nz-icon","","nzType","inbox","nzTheme","outline"],["nz-button","","nzType","primary"],["nz-button","","nzType","default"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","default",3,"click"],[1,"group-title"],[1,"group-count"],[1,"flow-grid"],[1,"flow-item",3,"ngClass"],[1,"flow-item",3,"click","ngClass"],[1,"flow-icon"],[3,"classList"],[1,"flow-info"],[1,"flow-name"],[1,"flow-desc"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),d(5,"\u6D41\u7A0B\u5206\u7C7B"),l(),r(6,"button",4),C("click",function(){return t.refreshData()}),h(7,"i",5),l()(),r(8,"div",6),b(9,au,4,4,"div",7,O),l()(),r(11,"div",8),f(12,lu,3,1,"div",9),f(13,su,4,0,"div",10),f(14,hu,4,1,"div",11),l()()()),i&2&&(a(6),_("nzLoading",t.loading),a(3),S(t.categories),a(3),g(t.loading?-1:12),a(),g(t.loading?13:-1),a(),g(t.loading?-1:14))},dependencies:[et,ke,oe,re,Y,G,X,W,$e,ct,Jt],styles:["[_nghost-%COMP%]     .flow-dashboard{padding:16px;background:#f5f5f5}[_nghost-%COMP%]     .flow-dashboard .overview-section{margin-bottom:24px}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000000f;border:1px solid #f0f0f0;display:flex;align-items:center;transition:all .3s ease}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card:hover{box-shadow:0 4px 16px #0000001f;transform:translateY(-2px)}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-icon{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;margin-right:16px;font-size:24px}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-icon:nth-child(1){background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-icon:nth-child(2){background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-icon:nth-child(3){background:linear-gradient(135deg,#4facfe,#00f2fe);color:#fff}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-icon:nth-child(4){background:linear-gradient(135deg,#43e97b,#38f9d7);color:#fff}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-content{flex:1}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-content .card-number{font-size:28px;font-weight:700;color:#262626;line-height:1;margin-bottom:4px}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-content .card-label{font-size:14px;color:#8c8c8c;margin:0}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-trend{display:flex;align-items:center;font-size:12px;font-weight:500;padding:4px 8px;border-radius:6px}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-trend.up{color:#52c41a;background:#f6ffed}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-trend.down{color:#ff4d4f;background:#fff2f0}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards .overview-card .card-trend i{margin-right:4px}[_nghost-%COMP%]     .flow-dashboard .main-content{display:grid;grid-template-columns:240px 1fr;gap:0;background:#fff;border-radius:3px;overflow:hidden;box-shadow:0 2px 8px #0000000f;border:1px solid #f0f0f0}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar{background:#fafafa;border-right:1px solid #f0f0f0}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-header{padding:16px 20px;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-header h3{margin:0;font-size:16px;font-weight:600;color:#262626}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-list .category-item{padding:16px 20px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-list .category-item:hover{background:#f5f5f5}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-list .category-item.active{background:#1890ff;color:#fff;font-weight:500}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-list .category-item .category-name{font-size:14px}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-list .category-item .category-count{font-size:12px;color:#8c8c8c;background:#0000001a;padding:2px 6px;border-radius:10px}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-list .category-item.active .category-count{color:#fffc;background:#fff3}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area{padding:16px;background:#fff;position:relative}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .search-container{position:absolute;right:16px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .search-container nz-input-group{max-width:600px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .loading-container{display:flex;justify-content:center;align-items:center;min-height:200px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .loading-container .loading-text{margin-top:16px;color:#8c8c8c}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;color:#8c8c8c}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .empty-state i{font-size:48px;margin-bottom:16px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .empty-state p{margin-bottom:16px;font-size:16px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section{margin-bottom:32px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section:last-child{margin-bottom:0}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .group-title{font-size:18px;font-weight:600;color:#262626;margin:0 0 16px;padding-bottom:8px;border-bottom:2px solid #f0f0f0;display:flex;align-items:center;gap:8px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .group-title .group-count{font-size:14px;color:#8c8c8c;font-weight:400}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid .flow-item{background:#fff;border:1px solid #f0f0f0;border-radius:8px;padding:16px;cursor:pointer;transition:all .3s ease;display:flex;align-items:flex-start;gap:12px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid .flow-item:hover{box-shadow:0 4px 12px #0000001a;transform:translateY(-2px);border-color:#1890ff}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid .flow-item.flow-disabled{opacity:.6;cursor:not-allowed}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid .flow-item.flow-disabled:hover{transform:none;box-shadow:none;border-color:#f0f0f0}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid .flow-item .flow-icon{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0;color:#fff}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid .flow-item .flow-info{flex:1;min-width:0}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid .flow-item .flow-info .flow-name{font-size:14px;font-weight:500;color:#262626;line-height:1.4;margin-bottom:4px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid .flow-item .flow-info .flow-desc{font-size:12px;color:#8c8c8c;line-height:1.4;margin-bottom:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid .flow-item .flow-info .flow-status{display:flex;align-items:center}@media (max-width: 1200px){[_nghost-%COMP%]     .flow-dashboard .main-content{grid-template-columns:200px 1fr}}@media (max-width: 768px){[_nghost-%COMP%]     .flow-dashboard{padding:16px}[_nghost-%COMP%]     .flow-dashboard .overview-section .overview-cards{grid-template-columns:1fr;gap:12px}[_nghost-%COMP%]     .flow-dashboard .main-content{grid-template-columns:1fr;border-radius:6px}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar{order:2;border-right:none;border-top:1px solid #f0f0f0}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-list{display:flex;overflow-x:auto}[_nghost-%COMP%]     .flow-dashboard .main-content .category-sidebar .category-list .category-item{flex-shrink:0;border-bottom:none;border-right:1px solid #f0f0f0;min-width:120px;text-align:center}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area{order:1;padding:16px}[_nghost-%COMP%]     .flow-dashboard .main-content .content-area .flow-groups .group-section .flow-grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}}"]})}return n})();var Ba=()=>({}),Mi=n=>({backgroundColor:n}),At=()=>({minRows:3,maxRows:6});function wu(n,c){if(n&1&&h(0,"erupt-flow-form",44),n&2){let e=s(4);_("eruptBuild",e.eruptBuild)("readonly",e.ApprovalView.TODO!==e.approvalView)("formAccesses",(e.nodeInfo==null||e.nodeInfo.prop==null?null:e.nodeInfo.prop.formAccesses)||de(4,Ba))("defaultFormAccess",(e.nodeInfo==null?null:e.nodeInfo.type)==e.NodeType.START?e.FormAccessEnum.DEFAULT:e.FormAccessEnum.READONLY)}}function vu(n,c){n&1&&(r(0,"div",45),d(1," Date deleted "),l())}function zu(n,c){if(n&1&&(r(0,"div",33),f(1,wu,1,5,"erupt-flow-form",44),f(2,vu,2,0,"div",45),l()),n&2){let e=s(3);a(),g(e.dataDeleted?-1:1),a(),g(e.dataDeleted?2:-1)}}function yu(n,c){if(n&1&&(r(0,"td",47),d(1),l()),n&2){let e=s().$implicit;_("rowSpan",e.nodeRowspan||1),a(),N(" ",e.nodeId," ")}}function bu(n,c){if(n&1&&h(0,"nz-avatar",49),n&2){let e=s().$implicit,i=s(4);_("nzText",e==null||e.assigneeUser==null||e.assigneeUser.name==null?null:e.assigneeUser.name.substring(0,1))("ngStyle",te(3,Mi,i.getAvatarColor(e==null||e.assigneeUser==null||e.assigneeUser.name==null?null:e.assigneeUser.name.substring(0,1))))("nzSrc",(e==null?null:e.assigneeUser.avatar)||null)}}function Su(n,c){if(n&1&&h(0,"nz-avatar",49),n&2){let e=s(2).$implicit,i=s(4);_("nzText",e.parentTask.assigneeUser==null||e.parentTask.assigneeUser.name==null?null:e.parentTask.assigneeUser.name.substring(0,1))("ngStyle",te(3,Mi,i.getAvatarColor(e.parentTask.assigneeUser==null||e.parentTask.assigneeUser.name==null?null:e.parentTask.assigneeUser.name.substring(0,1))))("nzSrc",e.parentTask.assigneeUser.avatar||null)}}function Tu(n,c){if(n&1&&(r(0,"div"),d(1,"\xA0\u2190\xA0"),l(),f(2,Su,1,5,"nz-avatar",49),r(3,"span",50),d(4),l()),n&2){let e=s().$implicit;a(2),g(e.parentTask.assigneeUser!=null&&e.parentTask.assigneeUser.id?2:-1),a(2),D((e.parentTask.assigneeUser==null?null:e.parentTask.assigneeUser.name)||"-")}}function Mu(n,c){if(n&1&&(r(0,"div"),h(1,"img",52),l()),n&2){let e=s().$implicit;a(),_("nzSrc",e.signature)}}function Ou(n,c){if(n&1&&(r(0,"tr"),f(1,yu,2,2,"td",47),r(2,"td")(3,"div",48),f(4,bu,1,5,"nz-avatar",49),r(5,"span",50),d(6),l(),f(7,Tu,5,2),l()(),r(8,"td"),d(9),ge(10,"translate"),l(),r(11,"td")(12,"nz-tag"),d(13),ge(14,"translate"),l()(),r(15,"td")(16,"div"),d(17),l(),f(18,Mu,2,1,"div"),l(),r(19,"td")(20,"div",51)(21,"div"),d(22),ge(23,"date"),l()()(),r(24,"td")(25,"div",51)(26,"div"),d(27),ge(28,"date"),l()()()()),n&2){let e=c.$implicit;a(),g(e.nodeId||e.nodeId===null?1:-1),a(3),g(e.assigneeUser!=null&&e.assigneeUser.id?4:-1),a(2),D((e.assigneeUser==null?null:e.assigneeUser.name)||"-"),a(),g(e.parentTask?7:-1),a(2),D(ye(10,10,e.taskType||"-")),a(4),N(" ",ye(14,12,e.taskStatus)," "),a(4),D(e.comment||"-"),a(),g(e.signature?18:-1),a(4),D(Gt(23,14,e.createTime,"yyyy-MM-dd HH:mm:ss")),a(5),D(Gt(28,17,e.completedAt,"yyyy-MM-dd HH:mm:ss"))}}function Eu(n,c){if(n&1&&(r(0,"div")(1,"nz-table",46,1)(3,"thead")(4,"tr")(5,"th"),d(6,"\u8282\u70B9 ID"),l(),r(7,"th"),d(8,"\u5BA1\u6279\u4EBA"),l(),r(9,"th"),d(10,"\u4EFB\u52A1\u7C7B\u578B"),l(),r(11,"th"),d(12,"\u4EFB\u52A1\u72B6\u6001"),l(),r(13,"th"),d(14,"\u5BA1\u6279\u610F\u89C1"),l(),r(15,"th"),d(16,"\u521B\u5EFA\u65F6\u95F4"),l(),r(17,"th"),d(18,"\u5BA1\u6279\u65F6\u95F4"),l()()(),r(19,"tbody"),b(20,Ou,29,20,"tr",null,O),l()()()),n&2){let e=s(3);a(),_("nzData",e.instanceTasks)("nzShowPagination",!1)("nzSize","small"),a(19),S(e.instanceTasks)}}function Pu(n,c){n&1&&h(0,"nz-empty",35)}function Nu(n,c){if(n&1){let e=x();r(0,"button",53),C("click",function(){m(e);let t=s(3);return u(t.submitComment())}),h(1,"span",54),d(2),l()}if(n&2){let e=s(3);_("disabled",!e.newComment.trim()||e.isSubmittingComment),a(2),N(" ",e.isSubmittingComment?"\u63D0\u4EA4\u4E2D...":"\u53D1\u9001"," ")}}function Fu(n,c){if(n&1&&(r(0,"div",55)(1,"div",56)(2,"div",57),h(3,"nz-avatar",58),r(4,"span",59),d(5),l()(),r(6,"span",60),d(7),ge(8,"date"),l()(),r(9,"div",61),d(10),l()()),n&2){let e=c.$implicit,i=s(4);a(3),_("nzText",e.createUser==null||e.createUser.name==null?null:e.createUser.name.substring(0,1))("ngStyle",te(9,Mi,i.getAvatarColor(e.createUser==null||e.createUser.name==null?null:e.createUser.name.substring(0,1))))("nzSrc",e.createUser.avatar||null),a(2),D((e.createUser==null?null:e.createUser.name)||"-"),a(2),D(Gt(8,6,e.createTime,"yyyy-MM-dd HH:mm:ss")),a(3),N(" ",e.comment," ")}}function Du(n,c){if(n&1&&(r(0,"div",40),b(1,Fu,11,11,"div",55,O),l()),n&2){let e=s(3);a(),S(e.comments)}}function ku(n,c){n&1&&h(0,"nz-empty",41)}function Iu(n,c){if(n&1&&h(0,"nz-avatar",49),n&2){let e=s().$implicit,i=s(3);_("nzText",e.createUser==null||e.createUser.name==null?null:e.createUser.name.substring(0,1))("ngStyle",te(3,Mi,i.getAvatarColor(e.createUser==null||e.createUser.name==null?null:e.createUser.name.substring(0,1))))("nzSrc",e.createUser.avatar||null)}}function Vu(n,c){if(n&1){let e=x();r(0,"tr")(1,"td")(2,"div",48),f(3,Iu,1,5,"nz-avatar",49),r(4,"span",50),d(5),l()()(),r(6,"td"),d(7),l(),r(8,"td")(9,"button",62),C("click",function(){let t=m(e).$implicit,o=s(3);return u(o.showDiff(t))}),d(10,"\u67E5\u770B\u8BE6\u60C5"),l()()()}if(n&2){let e=c.$implicit;a(3),g(e.createUser!=null&&e.createUser.id?3:-1),a(2),D((e.createUser==null?null:e.createUser.name)||"-"),a(2),N(" ",e.createTime," ")}}function Au(n,c){if(n&1){let e=x();r(0,"div",21)(1,"div",23)(2,"h1",24),d(3),l(),r(4,"nz-tag"),d(5),ge(6,"translate"),l(),r(7,"button",25),C("click",function(){m(e);let t=s(2);return u(t.viewFlow())}),d(8," \u67E5\u770B\u6D41\u7A0B\u56FE "),l()(),r(9,"div",26)(10,"div",27)(11,"span",28),d(12),l(),d(13,"\xA0\xA0 "),r(14,"span",29),d(15),l()()(),r(16,"nz-tabset",30),C("nzSelectedIndexChange",function(t){m(e);let o=s(2);return u(o.onTabChange(t))}),r(17,"nz-tab",31)(18,"div",32),f(19,zu,3,2,"div",33),l()(),r(20,"nz-tab",34)(21,"div",32)(22,"div",33),f(23,Eu,22,3,"div")(24,Pu,1,0,"nz-empty",35),l()()(),r(25,"nz-tab",36)(26,"div",32)(27,"div",33)(28,"div",37)(29,"nz-input-group",38)(30,"input",39),y("ngModelChange",function(t){m(e);let o=s(2);return z(o.newComment,t)||(o.newComment=t),u(t)}),C("keyup.enter",function(){m(e);let t=s(2);return u(t.submitComment())}),l()(),M(31,Nu,3,2,"ng-template",null,0,ne),l(),f(33,Du,3,0,"div",40)(34,ku,1,0,"nz-empty",41),l()()(),r(35,"nz-tab",42)(36,"div",32)(37,"div",33)(38,"div")(39,"nz-table",43)(40,"thead")(41,"tr")(42,"th"),d(43,"\u64CD\u4F5C\u4EBA"),l(),r(44,"th"),d(45,"\u64CD\u4F5C\u65F6\u95F4"),l(),r(46,"th"),d(47,"\u53D8\u66F4\u5185\u5BB9"),l()()(),r(48,"tbody"),b(49,Vu,11,3,"tr",null,O),l()()()()()()()()}if(n&2){let e=ae(32),i=s(2);a(3),D(i.selectedInstance==null||i.selectedInstance.eruptFlowConfig==null?null:i.selectedInstance.eruptFlowConfig.name),a(2),N(" ",ye(6,14,i.selectedInstance==null?null:i.selectedInstance.status)," "),a(7),D(i.selectedInstance==null||i.selectedInstance.initiatorUser==null?null:i.selectedInstance.initiatorUser.name),a(3),N("\u63D0\u4EA4\u4E8E ",i.selectedInstance==null?null:i.selectedInstance.createTime),a(),_("nzSelectedIndex",i.activeTabIndex),a(3),g(i.eruptBuild?19:-1),a(4),g(i.instanceTasks.length>0?23:24),a(2),_("nzTitle","\u8BC4\u8BBA\u5217\u8868 ("+i.comments.length+")"),a(4),_("nzSuffix",e),a(),v("ngModel",i.newComment),a(3),g(i.comments.length>0?33:34),a(6),_("nzShowPagination",!1)("nzSize","small")("nzData",i.dataHistories),a(10),S(i.dataHistories)}}function Bu(n,c){if(n&1){let e=x();r(0,"button",65),C("click",function(){m(e);let t=s(4);return u(t.resubmit())}),h(1,"span",66),d(2," \u91CD\u65B0\u63D0\u4EA4 "),l()}}function Ru(n,c){if(n&1){let e=x();r(0,"button",70),C("click",function(){m(e);let t=s(5);return u(t.cc())}),h(1,"span",54),d(2," \u6284\u9001 "),l()}}function Lu(n,c){if(n&1){let e=x();r(0,"button",70),C("click",function(){m(e);let t=s(5);return u(t.transfer())}),h(1,"span",71),d(2," \u8F6C\u4EA4 "),l()}}function Wu(n,c){if(n&1){let e=x();r(0,"button",70),C("click",function(){m(e);let t=s(5);return u(t.addSigner())}),h(1,"span",72),d(2," \u52A0\u7B7E "),l()}}function Uu(n,c){if(n&1){let e=x();r(0,"button",70),C("click",function(){m(e);let t=s(5);return u(t.return())}),h(1,"span",73),d(2," \u9000\u56DE "),l()}}function ju(n,c){if(n&1){let e=x();r(0,"button",70),C("click",function(){m(e);let t=s(5);return u(t.modify())}),h(1,"span",74),d(2," \u4FEE\u6539 "),l()}}function Gu(n,c){if(n&1){let e=x();r(0,"button",65),C("click",function(){m(e);let t=s(4);return u(t.approve())}),h(1,"span",66),d(2," \u540C\u610F "),l(),r(3,"button",67),C("click",function(){m(e);let t=s(4);return u(t.reject())}),h(4,"span",68),d(5," \u62D2\u7EDD "),l(),f(6,Ru,3,0,"button",69),f(7,Lu,3,0,"button",69),f(8,Wu,3,0,"button",69),f(9,Uu,3,0,"button",69),f(10,ju,3,0,"button",69)}if(n&2){let e=s(4);a(6),g(!(e.nodeInfo==null||e.nodeInfo.prop==null)&&e.nodeInfo.prop.allowCc?6:-1),a(),g(!(e.nodeInfo==null||e.nodeInfo.prop==null)&&e.nodeInfo.prop.allowTransfer?7:-1),a(),g(!(e.nodeInfo==null||e.nodeInfo.prop==null)&&e.nodeInfo.prop.allowAddSign?8:-1),a(),g(!(e.nodeInfo==null||e.nodeInfo.prop==null)&&e.nodeInfo.prop.allowReturn?9:-1),a(),g(e.Object.keys((e.nodeInfo==null||e.nodeInfo.prop==null?null:e.nodeInfo.prop.formAccesses)||de(5,Ba)).length?10:-1)}}function Hu(n,c){if(n&1&&(f(0,Bu,3,0,"button",64),f(1,Gu,11,6)),n&2){let e=s(3);g((e.nodeInfo==null?null:e.nodeInfo.type)==e.NodeType.START?0:-1),a(),g((e.nodeInfo==null?null:e.nodeInfo.type)==e.NodeType.APPROVAL?1:-1)}}function Qu(n,c){if(n&1){let e=x();r(0,"button",70),C("click",function(){m(e);let t=s(4);return u(t.urge())}),h(1,"span",75),d(2," \u50AC\u529E "),l()}}function Yu(n,c){if(n&1){let e=x();r(0,"button",70),C("click",function(){m(e);let t=s(4);return u(t.withdraw())}),h(1,"span",76),d(2," \u64A4\u9500 "),l()}}function $u(n,c){if(n&1&&(f(0,Qu,3,0,"button",69),f(1,Yu,3,0,"button",69)),n&2){let e=s(3);g(e.selectedInstance.finishTime?-1:0),a(),g(e.selectedInstance.finishTime?-1:1)}}function qu(n,c){if(n&1&&(r(0,"div",22)(1,"div",63),f(2,Hu,2,2),f(3,$u,2,2),l()()),n&2){let e=s(2);a(2),g(e.ApprovalView.TODO===e.approvalView&&e.currTask?2:-1),a(),g(e.ApprovalView.CREATED===e.approvalView?3:-1)}}function Ju(n,c){if(n&1){let e=x();r(0,"div",2)(1,"div",12)(2,"div",13)(3,"span",14),C("click",function(){m(e);let t=s();return u(t.copyToClipboard(t.selectedInstance==null?null:t.selectedInstance.no))}),d(4),h(5,"span",15),l()(),r(6,"div",16)(7,"button",17),C("click",function(){m(e);let t=s();return u(t.copyLink())}),h(8,"span",18),l(),r(9,"button",19),C("click",function(){m(e);let t=s();return u(t.loadInstanceDetail(t.selectedInstance))}),h(10,"span",20),l()()(),f(11,Au,51,16,"div",21),f(12,qu,4,2,"div",22),l()}if(n&2){let e=s();a(4),N(" \u7F16\u53F7: ",e.selectedInstance==null?null:e.selectedInstance.no," "),a(7),g(e.selectedInstance?11:-1),a(),g(e.dataDeleted?-1:12)}}function Zu(n,c){n&1&&(r(0,"div",3)(1,"div",77),h(2,"nz-empty",78),l()())}function Xu(n,c){if(n&1){let e=x();r(0,"button",86),C("click",function(){m(e);let t=s(3);return u(t.approveSignature=null)}),h(1,"span",87),l(),h(2,"img",88)}if(n&2){let e=s(3);a(2),_("src",e.approveSignature,xo)}}function Ku(n,c){if(n&1){let e=x();r(0,"button",89),C("click",function(){m(e);let t=s(3);return u(t.openSign())}),h(1,"span",74),l()}}function e0(n,c){if(n&1&&(r(0,"div",80)(1,"p",81)(2,"span",82),d(3,"*"),l(),d(4," \u540C\u610F\u7B7E\u540D\uFF1A"),l(),r(5,"div",84),f(6,Xu,3,1),f(7,Ku,2,0,"button",85),l()()),n&2){let e=s(2);a(6),g(e.approveSignature?6:-1),a(),g(e.approveSignature?-1:7)}}function t0(n,c){n&1&&(r(0,"span",82),d(1,"*"),l())}function n0(n,c){if(n&1){let e=x();r(0,"div")(1,"div",79),f(2,e0,8,2,"div",80),r(3,"p",81),f(4,t0,2,0,"span",82),d(5," \u8BF7\u586B\u5199\u540C\u610F\u539F\u56E0\uFF1A "),l(),r(6,"nz-input-group")(7,"textarea",83),y("ngModelChange",function(t){m(e);let o=s();return z(o.reason,t)||(o.reason=t),u(t)}),l()()()()}if(n&2){let e=s();a(2),g(!(e.nodeInfo==null||e.nodeInfo.prop==null)&&e.nodeInfo.prop.requireSignature?2:-1),a(2),g(!(e.nodeInfo==null||e.nodeInfo.prop==null)&&e.nodeInfo.prop.requireApprovalNote?4:-1),a(3),v("ngModel",e.reason),_("nzAutosize",de(4,At))}}function i0(n,c){if(n&1){let e=x();r(0,"div")(1,"div",79)(2,"p",81)(3,"span",82),d(4,"*"),l(),d(5," \u8BF7\u586B\u5199\u62D2\u7EDD\u539F\u56E0\uFF1A"),l(),r(6,"nz-input-group")(7,"textarea",90),y("ngModelChange",function(t){m(e);let o=s();return z(o.reason,t)||(o.reason=t),u(t)}),l()()()()}if(n&2){let e=s();a(7),v("ngModel",e.reason),_("nzAutosize",de(2,At))}}function o0(n,c){if(n&1&&h(0,"nz-option",94),n&2){let e=c.$implicit;_("nzValue",e.key)("nzLabel",e.value)}}function r0(n,c){if(n&1){let e=x();r(0,"div")(1,"div",79)(2,"div",91)(3,"label",92)(4,"span",82),d(5,"*"),l(),d(6," \u6284\u9001\u4EBA\u5458\uFF1A"),l(),r(7,"nz-select",93),y("ngModelChange",function(t){m(e);let o=s();return z(o.ccUsers,t)||(o.ccUsers=t),u(t)}),b(8,o0,1,2,"nz-option",94,O),l()(),r(10,"div",91)(11,"label",92)(12,"span",82),d(13,"*"),l(),d(14," \u6284\u9001\u8BF4\u660E\uFF1A"),l(),r(15,"nz-input-group")(16,"textarea",95),y("ngModelChange",function(t){m(e);let o=s();return z(o.reason,t)||(o.reason=t),u(t)}),l()()()()()}if(n&2){let e=s();a(7),v("ngModel",e.ccUsers),_("nzMode","multiple")("nzPlaceHolder","\u8BF7\u9009\u62E9\u6284\u9001\u4EBA\u5458")("nzShowSearch",!0)("nzAllowClear",!0),a(),S(e.availableUsers),a(8),v("ngModel",e.reason),_("nzAutosize",de(7,At))}}function a0(n,c){if(n&1&&h(0,"nz-option",94),n&2){let e=c.$implicit;_("nzValue",e.key)("nzLabel",e.value)}}function l0(n,c){if(n&1){let e=x();r(0,"div")(1,"div",79)(2,"div",91)(3,"label",92)(4,"span",82),d(5,"*"),l(),d(6," \u8F6C\u4EA4\u4EBA\u5458\uFF1A"),l(),r(7,"nz-select",96),y("ngModelChange",function(t){m(e);let o=s();return z(o.transferUser,t)||(o.transferUser=t),u(t)}),b(8,a0,1,2,"nz-option",94,O),l()(),r(10,"div",91)(11,"label",92)(12,"span",82),d(13,"*"),l(),d(14," \u8F6C\u4EA4\u8BF4\u660E\uFF1A"),l(),r(15,"nz-input-group")(16,"textarea",97),y("ngModelChange",function(t){m(e);let o=s();return z(o.reason,t)||(o.reason=t),u(t)}),l()()()()()}if(n&2){let e=s();a(7),v("ngModel",e.transferUser),_("nzPlaceHolder","\u8BF7\u9009\u62E9\u8F6C\u4EA4\u4EBA\u5458")("nzShowSearch",!0)("nzAllowClear",!0),a(),S(e.availableUsers),a(8),v("ngModel",e.reason),_("nzAutosize",de(6,At))}}function s0(n,c){if(n&1&&h(0,"nz-option",94),n&2){let e=c.$implicit;_("nzValue",e.key)("nzLabel",e.value)}}function c0(n,c){if(n&1){let e=x();r(0,"div")(1,"div",79)(2,"div",91)(3,"label",92)(4,"span",82),d(5,"*"),l(),d(6," \u52A0\u7B7E\u7C7B\u578B\uFF1A"),l(),r(7,"nz-radio-group",98),y("ngModelChange",function(t){m(e);let o=s();return z(o.addSignType,t)||(o.addSignType=t),u(t)}),r(8,"label",99),d(9,"\u524D\u52A0\u7B7E"),l(),r(10,"label",99),d(11,"\u540E\u52A0\u7B7E"),l()()(),r(12,"div",91)(13,"label",92)(14,"span",82),d(15,"*"),l(),d(16," \u52A0\u7B7E\u4EBA\u5458\uFF1A"),l(),r(17,"nz-select",100),y("ngModelChange",function(t){m(e);let o=s();return z(o.addSignUsers,t)||(o.addSignUsers=t),u(t)}),b(18,s0,1,2,"nz-option",94,O),l()(),r(20,"div",91)(21,"label",92)(22,"span",82),d(23,"*"),l(),d(24," \u52A0\u7B7E\u8BF4\u660E\uFF1A"),l(),r(25,"nz-input-group")(26,"textarea",101),y("ngModelChange",function(t){m(e);let o=s();return z(o.reason,t)||(o.reason=t),u(t)}),l()()()()()}if(n&2){let e=s();a(7),v("ngModel",e.addSignType),a(),_("nzValue",e.AddSignType.PRE_SIGN),a(2),_("nzValue",e.AddSignType.POST_SIGN),a(7),v("ngModel",e.addSignUsers),_("nzMode","multiple")("nzPlaceHolder","\u8BF7\u9009\u62E9\u52A0\u7B7E\u4EBA\u5458")("nzShowSearch",!0)("nzAllowClear",!0),a(),S(e.availableUsers),a(8),v("ngModel",e.reason),_("nzAutosize",de(10,At))}}function p0(n,c){if(n&1&&h(0,"nz-option",94),n&2){let e=c.$implicit;_("nzValue",e.key)("nzLabel",e.value)}}function d0(n,c){if(n&1){let e=x();r(0,"div")(1,"div",79)(2,"div",91)(3,"label",92)(4,"span",82),d(5,"*"),l(),d(6," \u9000\u56DE\u8282\u70B9\uFF1A"),l(),r(7,"nz-select",102),y("ngModelChange",function(t){m(e);let o=s();return z(o.returnNode,t)||(o.returnNode=t),u(t)}),b(8,p0,1,2,"nz-option",94,O),l()(),r(10,"div",91)(11,"label",92)(12,"span",82),d(13,"*"),l(),d(14," \u9000\u56DE\u8BF4\u660E\uFF1A"),l(),r(15,"nz-input-group")(16,"textarea",103),y("ngModelChange",function(t){m(e);let o=s();return z(o.reason,t)||(o.reason=t),u(t)}),l()()()()()}if(n&2){let e=s();a(7),v("ngModel",e.returnNode),_("nzPlaceHolder","\u8BF7\u9009\u62E9\u9000\u56DE\u8282\u70B9")("nzShowSearch",!0)("nzAllowClear",!0),a(),S(e.availableReturnNodes),a(8),v("ngModel",e.reason),_("nzAutosize",de(6,At))}}function m0(n,c){if(n&1){let e=x();r(0,"div")(1,"div",79)(2,"p",81),d(3,"\u63D0\u4EA4\u8BF4\u660E\uFF1A"),l(),r(4,"nz-input-group")(5,"textarea",104),y("ngModelChange",function(t){m(e);let o=s();return z(o.reason,t)||(o.reason=t),u(t)}),l()()()()}if(n&2){let e=s();a(5),v("ngModel",e.reason),_("nzAutosize",de(2,At))}}var an=(()=>{class n{modal;message;upmsApiService;flowApiService;dataHandlerService;flowInstanceApiService;drawerService;route;activeTabIndex=0;dataHistories=[];instanceDetail=null;instanceTasks=[];nodeInfo=null;currTask=null;comments=[];newComment="";isSubmittingComment=!1;eruptBuild;approveModalVisible=!1;rejectModalVisible=!1;ccModalVisible=!1;transferModalVisible=!1;addSignModalVisible=!1;returnModalVisible=!1;resubmitModalVisible=!1;reason;approveSignature=null;ccUsers=[];transferUser=null;addSignUsers=[];addSignType=hn.PRE_SIGN;returnNode;availableUsers=[];availableReturnNodes=[];dataDeleted=!1;selectedInstance;approvalView=nt.TODO;reloadFlows=new w;constructor(e,i,t,o,p,P,ee,Le){this.modal=e,this.message=i,this.upmsApiService=t,this.flowApiService=o,this.dataHandlerService=p,this.flowInstanceApiService=P,this.drawerService=ee,this.route=Le;let Ge=this.route.snapshot.paramMap.get("no");Ge&&P.detail(Ge).subscribe({next:ut=>{this.onSelectFlow(nt.TODO,ut.data)}})}ngOnInit(){}onSelectFlow(e,i){this.approvalView=e,this.selectedInstance=i,this.selectedInstance&&this.loadInstanceDetail(i)}loadInstanceDetail(e,i=!1){i&&this.reloadFlows.emit(),this.flowInstanceApiService.detail(e.no).subscribe({next:t=>{this.instanceDetail=t.data,this.flowApiService.eruptFlowBuild(this.instanceDetail.erupt).subscribe({next:o=>{this.eruptBuild=null,setTimeout(()=>{this.dataHandlerService.initErupt(o.data),this.eruptBuild=o.data,this.flowInstanceApiService.eruptData(e.id).subscribe({next:p=>{p.success?(this.dataHandlerService.objectToEruptValue(p.data,this.eruptBuild),this.dataDeleted=!1):this.dataDeleted=!0}})},30)}})}}),this.flowInstanceApiService.tasks(e.id).subscribe({next:t=>{let o=t.data||[];for(let p=0;p<o.length;){if(!o[p].nodeId){p++;continue}let P=1;for(;p+P<o.length&&o[p+P].nodeId===o[p].nodeId;)P++;if(P>1){o[p].nodeRowspan=P;for(let ee=1;ee<P;ee++)o[p+ee].nodeId=""}p+=P}this.instanceTasks=o}}),this.flowInstanceApiService.commentList(e.id).subscribe({next:t=>{this.comments=t.data||[]}}),this.getDataHistories(e.id),this.approvalView==nt.TODO&&this.flowInstanceApiService.currTask(e.id,this.approvalView).subscribe({next:t=>{this.currTask=t.data,this.flowInstanceApiService.taskNodeInfo(t.data.id).subscribe({next:o=>{this.nodeInfo=o.data}})}})}approve(){this.reason=null,this.approveModalVisible=!0}reject(){this.reason=null,this.rejectModalVisible=!0}cc(){this.reason=null,this.ccUsers=[],this.loadAvailableUsers(),this.ccModalVisible=!0}submitApprove(){if(this.nodeInfo?.prop?.requireApprovalNote&&!this.reason?.trim()){this.message.warning("\u8BF7\u586B\u5199\u540C\u610F\u539F\u56E0");return}this.approveModalVisible=!0;let e;Object.keys(this.nodeInfo?.prop?.formAccesses||{}).length&&(e=this.dataHandlerService.eruptValueToObject(this.eruptBuild)),this.flowInstanceApiService.agree(this.currTask.id,this.reason,this.approveSignature,e).subscribe(i=>{this.approveModalVisible=!1,this.reason=null,this.message.success("\u5BA1\u6279\u5DF2\u540C\u610F"),this.selectedInstance=null,this.loadInstanceDetail(this.selectedInstance,!0)})}submitReject(){if(!this.reason?.trim()){this.message.warning("\u8BF7\u586B\u5199\u62D2\u7EDD\u539F\u56E0");return}this.flowInstanceApiService.refuse(this.currTask.id,this.reason).subscribe(e=>{this.rejectModalVisible=!1,this.reason=null,this.message.success("\u5BA1\u6279\u5DF2\u62D2\u7EDD"),this.selectedInstance=null,this.loadInstanceDetail(this.selectedInstance,!0)})}submitCc(){if(this.ccUsers.length===0){this.message.warning("\u8BF7\u9009\u62E9\u6284\u9001\u4EBA\u5458");return}if(!this.reason?.trim()){this.message.warning("\u8BF7\u586B\u5199\u6284\u9001\u8BF4\u660E");return}this.flowInstanceApiService.cc(this.currTask.id,this.ccUsers,this.reason).subscribe(e=>{this.reason=null,this.ccUsers=[],this.ccModalVisible=!1,this.message.success("\u6284\u9001\u6210\u529F"),this.selectedInstance?.id&&this.loadInstanceDetail(this.selectedInstance)})}submitTransfer(){if(!this.transferUser){this.message.warning("\u8BF7\u9009\u62E9\u8F6C\u4EA4\u4EBA\u5458");return}if(!this.reason?.trim()){this.message.warning("\u8BF7\u586B\u5199\u8F6C\u4EA4\u8BF4\u660E");return}this.flowInstanceApiService.transfer(this.currTask.id,this.transferUser,this.reason).subscribe(e=>{this.transferModalVisible=!1,this.message.success("\u8F6C\u4EA4\u6210\u529F"),this.transferModalVisible=!1,this.reason=null,this.transferUser=null,this.selectedInstance?.id&&this.loadInstanceDetail(this.selectedInstance)})}submitAddSign(){if(!this.addSignType){this.message.warning("\u8BF7\u9009\u62E9\u52A0\u7B7E\u7C7B\u578B");return}if(this.addSignUsers.length===0){this.message.warning("\u8BF7\u9009\u62E9\u52A0\u7B7E\u4EBA\u5458");return}if(!this.reason?.trim()){this.message.warning("\u8BF7\u586B\u5199\u52A0\u7B7E\u8BF4\u660E");return}this.flowInstanceApiService.addSign(this.currTask.id,this.addSignType,this.addSignUsers,this.reason).subscribe(e=>{this.message.success("\u52A0\u7B7E\u6210\u529F"),this.addSignModalVisible=!1,this.selectedInstance?.id&&this.loadInstanceDetail(this.selectedInstance)})}submitReturn(){if(!this.returnNode){this.message.warning("\u8BF7\u9009\u62E9\u9000\u56DE\u8282\u70B9");return}if(!this.reason.trim()){this.message.warning("\u8BF7\u586B\u5199\u9000\u56DE\u8BF4\u660E");return}this.flowInstanceApiService.rollback(this.currTask.id,this.returnNode,this.reason).subscribe(e=>{this.message.success("\u9000\u56DE\u6210\u529F"),this.returnModalVisible=!1,this.reason=null,this.returnNode=null,this.loadInstanceDetail(this.selectedInstance)})}transfer(){this.transferUser=null,this.reason=null,this.loadAvailableUsers(),this.transferModalVisible=!0}addSigner(){this.addSignUsers=[],this.reason=null,this.addSignType=hn.PRE_SIGN,this.loadAvailableUsers(),this.addSignModalVisible=!0}return(){this.returnNode=null,this.reason=null,this.returnModalVisible=!0,this.flowInstanceApiService.availableReturnNodes(this.currTask.id).subscribe({next:e=>{this.availableReturnNodes=e.data||[]}})}resubmit(){this.reason=null,this.resubmitModalVisible=!0}submitResubmit(){let e=this.dataHandlerService.eruptValueToObject(this.eruptBuild);this.flowInstanceApiService.resubmit(this.currTask.id,this.reason,e).subscribe(i=>{this.resubmitModalVisible=!1,this.reason=null,this.message.success("\u63D0\u4EA4\u6210\u529F"),this.selectedInstance=null,this.loadInstanceDetail(this.selectedInstance,!0)})}modify(){let e=this.dataHandlerService.eruptValueToObject(this.eruptBuild);this.flowInstanceApiService.updateData(this.selectedInstance.id,e).subscribe({next:i=>{this.message.success("\u4FEE\u6539\u6210\u529F"),this.getDataHistories(this.selectedInstance.id)}})}getDataHistories(e){this.flowInstanceApiService.dataHistories(e).subscribe({next:i=>{this.dataHistories=i.data}})}copyToClipboard(e){e&&navigator.clipboard.writeText(e).then(()=>{this.message.success("\u7F16\u53F7\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F")})}withdraw(){this.flowInstanceApiService.withdraw(this.selectedInstance.id,"\u64A4\u56DE").subscribe({next:e=>{this.message.success("\u64A4\u56DE\u6210\u529F"),this.loadInstanceDetail(this.selectedInstance)}})}urge(){this.flowInstanceApiService.urge(this.selectedInstance.id,"\u50AC\u529E").subscribe({next:e=>{this.message.success("\u50AC\u529E\u6210\u529F"),this.loadInstanceDetail(this.selectedInstance)}})}onTabChange(e){this.activeTabIndex=e}submitComment(){!this.newComment.trim()||!this.selectedInstance?.id||(this.isSubmittingComment=!0,this.flowInstanceApiService.commentCreate(Number(this.selectedInstance.id),this.newComment).subscribe({next:()=>{this.message.success("\u8BC4\u8BBA\u63D0\u4EA4\u6210\u529F"),this.newComment="",this.selectedInstance?.id&&this.flowInstanceApiService.commentList(Number(this.selectedInstance.id)).subscribe(e=>{this.comments=e.data||[]})},complete:()=>{this.isSubmittingComment=!1}}))}openSign(){this.modal.create({nzTitle:"\u7B7E\u540D",nzContent:na,nzMaskClosable:!1,nzWidth:"50%",nzOkText:"\u4FDD\u5B58",nzCancelText:"\u53D6\u6D88",nzOnOk:e=>{this.approveSignature=e.getSign()},nzOnCancel:()=>{}})}viewFlow(){let e=this.drawerService.create({nzTitle:"\u67E5\u770B\u6D41\u7A0B",nzContent:rn,nzContentParams:{eruptBuild:this.eruptBuild,modelValue:this.selectedInstance.rule,readonly:!0},nzBodyStyle:{padding:"0",background:"rgb(245 245 245)"},nzPlacement:"bottom",nzHeight:"85%",nzFooter:null});this.flowInstanceApiService.progress(this.selectedInstance.id).subscribe(i=>{e.getContentComponent().progress=i.data})}showDiff(e){let i=this.modal.create({nzTitle:"\u53D8\u66F4\u8BE6\u60C5",nzContent:oa,nzBodyStyle:{height:"500px"},nzWidth:"60%",nzFooter:null,nzCancelText:null});i.componentInstance.nzEditorMode="diff",i.componentInstance.nzEditorOption={language:"json",readOnly:!0},i.componentInstance.nzOriginalText=e.beforeData,i.componentInstance.writeValue(e.afterData)}loadAvailableUsers(){this.upmsApiService.users().subscribe(e=>{this.availableUsers=e.data})}copyLink(){let e=location.origin+"/#/fill/flow/approval-detail/"+this.selectedInstance.no;navigator.clipboard.writeText(e).then(()=>{this.message.success("\u5730\u5740\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F")})}AddSignType=hn;ApprovalView=nt;Object=Object;getAvatarColor=ci;FormAccessEnum=Te;NodeType=U;static \u0275fac=function(i){return new(i||n)(F(vt),F(lt),F(nn),F(he),F(dt),F(Pt),F(zt),F(ko))};static \u0275cmp=E({type:n,selectors:[["flow-approval-detail"]],inputs:{selectedInstance:"selectedInstance",approvalView:"approvalView"},outputs:{reloadFlows:"reloadFlows"},standalone:!1,decls:16,vars:8,consts:[["commentSuffix",""],["recordsTable",""],[1,"approval-detail"],[1,"detail-section","empty-detail"],["nzTitle","\u540C\u610F\u5BA1\u6279","nzOkText","\u786E\u5B9A","nzCancelText","\u53D6\u6D88",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible"],[4,"nzModalContent"],["nzTitle","\u62D2\u7EDD\u5BA1\u6279","nzOkText","\u786E\u5B9A","nzCancelText","\u53D6\u6D88","nzOkDanger","true",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible"],["nzTitle","\u6284\u9001\u5BA1\u6279","nzOkText","\u786E\u5B9A","nzCancelText","\u53D6\u6D88",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible"],["nzTitle","\u8F6C\u4EA4\u5BA1\u6279","nzOkText","\u786E\u5B9A","nzCancelText","\u53D6\u6D88",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible"],["nzTitle","\u52A0\u7B7E\u5BA1\u6279","nzOkText","\u786E\u5B9A","nzCancelText","\u53D6\u6D88",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible"],["nzTitle","\u9000\u56DE\u5BA1\u6279","nzOkText","\u786E\u5B9A","nzCancelText","\u53D6\u6D88","nzOkDanger","true",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible"],["nzTitle","\u91CD\u65B0\u63D0\u4EA4","nzOkText","\u786E\u5B9A","nzCancelText","\u53D6\u6D88",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible"],[1,"detail-header"],[1,"header-left"],[1,"item-id",2,"cursor","pointer",3,"click"],["nz-icon","","nzType","copy","nzTheme","outline",1,"copy-icon"],[1,"header-right"],["nz-button","","nzType","text","nzSize","small","nz-tooltip","","nzTooltipTitle","\u94FE\u63A5",3,"click"],["nz-icon","","nzType","link","nzTheme","outline"],["nz-button","","nzType","text","nzSize","small","nz-tooltip","","nzTooltipTitle","\u5237\u65B0",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],[1,"detail-content"],[1,"fixed-bottom-actions"],[1,"content-header"],[1,"content-title"],["nz-button","",2,"margin-left","auto",3,"click"],[1,"submitter-info-large"],[1,"submitter-details"],[1,"submitter-name-large"],[1,"submit-time"],[1,"detail-tabs",3,"nzSelectedIndexChange","nzSelectedIndex"],["nzTitle","\u5BA1\u6279\u4FE1\u606F"],[1,"tab-content"],[1,"section"],["nzTitle","\u5BA1\u6279\u8BB0\u5F55"],["nzNotFoundImage","simple","nzNotFoundContent","\u6682\u65E0\u5BA1\u6279\u8BB0\u5F55"],[3,"nzTitle"],[1,"comment-form"],[3,"nzSuffix"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u8BC4\u8BBA\u5185\u5BB9...",3,"ngModelChange","keyup.enter","ngModel"],[1,"comments-list"],["nzNotFoundImage","simple","nzNotFoundContent","\u6682\u65E0\u8BC4\u8BBA\u5185\u5BB9"],["nzTitle","\u6570\u636E\u53D8\u66F4\u8BB0\u5F55"],[1,"records-table",3,"nzShowPagination","nzSize","nzData"],[3,"eruptBuild","readonly","formAccesses","defaultFormAccess"],[2,"text-align","center","margin","100px 0","color","#F44336"],[1,"records-table",3,"nzData","nzShowPagination","nzSize"],[3,"rowSpan"],[1,"approval-info"],["nzSize","small",1,"mr-sm",3,"nzText","ngStyle","nzSrc"],[1,"approval-name"],[1,"time-info"],["nz-image","","alt","signature",2,"cursor","pointer","margin-top","4px","width","100px","border","1px solid #f0f0f0",3,"nzSrc"],["nz-button","","nzType","primary","nzSize","small",3,"click","disabled"],["nz-icon","","nzType","send","nzTheme","outline"],[1,"comment-item"],[1,"comment-header"],[1,"comment-user"],["nzSize","small",3,"nzText","ngStyle","nzSrc"],[1,"comment-username"],[1,"comment-time"],[1,"comment-content"],["nz-button","","nzSize","small",3,"click"],[1,"action-buttons"],["nz-button","","nzSize","default","nzType","primary","nzGhost","",1,"action-button"],["nz-button","","nzSize","default","nzType","primary","nzGhost","",1,"action-button",3,"click"],["nz-icon","","nzType","check","nzTheme","outline"],["nz-button","","nzSize","default","nzDanger","",1,"action-button",3,"click"],["nz-icon","","nzType","close","nzTheme","outline"],["nz-button","","nzSize","default",1,"action-button"],["nz-button","","nzSize","default",1,"action-button",3,"click"],["nz-icon","","nzType","swap","nzTheme","outline"],["nz-icon","","nzType","user-add","nzTheme","outline"],["nz-icon","","nzType","rollback","nzTheme","outline"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","bell","nzTheme","outline"],["nz-icon","","nzType","undo","nzTheme","outline"],[1,"empty-content",2,"margin-top","20%"],["nzNotFoundImage","simple"],[1,"modal-content"],[2,"margin-bottom","16px"],[1,"modal-description"],[2,"color","#f00"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u540C\u610F\u539F\u56E0...",1,"reason-textarea",3,"ngModelChange","ngModel","nzAutosize"],[2,"width","100%","height","200px","position","relative","border","1px solid #d9d9d9","border-radius","2px"],["nz-button","","nzType","default","nzShape","circle",2,"position","absolute",";top","42%","left","50%","transform","translate(-50%)"],["nz-button","","nzType","default","nzShape","circle",2,"position","absolute","right","16px","top","16px",3,"click"],["nz-icon","","nzType","clear","nzTheme","outline"],["alt","",2,"height","200px","width","100%",3,"src"],["nz-button","","nzType","default","nzShape","circle",2,"position","absolute",";top","42%","left","50%","transform","translate(-50%)",3,"click"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u62D2\u7EDD\u539F\u56E0...",1,"reason-textarea",3,"ngModelChange","ngModel","nzAutosize"],[1,"form-item"],[1,"form-label"],[1,"cc-user-select",3,"ngModelChange","ngModel","nzMode","nzPlaceHolder","nzShowSearch","nzAllowClear"],[3,"nzValue","nzLabel"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u6284\u9001\u8BF4\u660E...",1,"reason-textarea",3,"ngModelChange","ngModel","nzAutosize"],[1,"transfer-user-select",3,"ngModelChange","ngModel","nzPlaceHolder","nzShowSearch","nzAllowClear"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u8F6C\u4EA4\u8BF4\u660E...",1,"reason-textarea",3,"ngModelChange","ngModel","nzAutosize"],[1,"add-sign-type-group",3,"ngModelChange","ngModel"],["nz-radio","",3,"nzValue"],[1,"add-sign-user-select",3,"ngModelChange","ngModel","nzMode","nzPlaceHolder","nzShowSearch","nzAllowClear"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u52A0\u7B7E\u8BF4\u660E...",1,"reason-textarea",3,"ngModelChange","ngModel","nzAutosize"],[1,"return-node-select",3,"ngModelChange","ngModel","nzPlaceHolder","nzShowSearch","nzAllowClear"],["nz-input","","placeholder","\u8BF7\u8F93\u5165\u9000\u56DE\u8BF4\u660E...",1,"reason-textarea",3,"ngModelChange","ngModel","nzAutosize"],["nz-input","","placeholder","\u63D0\u4EA4\u8BF4\u660E...",1,"reason-textarea",3,"ngModelChange","ngModel","nzAutosize"]],template:function(i,t){i&1&&(f(0,Ju,13,3,"div",2)(1,Zu,3,0,"div",3),r(2,"nz-modal",4),y("nzVisibleChange",function(p){return z(t.approveModalVisible,p)||(t.approveModalVisible=p),p}),C("nzOnOk",function(){return t.submitApprove()})("nzOnCancel",function(){return t.approveModalVisible=!1}),M(3,n0,8,5,"div",5),l(),r(4,"nz-modal",6),y("nzVisibleChange",function(p){return z(t.rejectModalVisible,p)||(t.rejectModalVisible=p),p}),C("nzOnOk",function(){return t.submitReject()})("nzOnCancel",function(){return t.rejectModalVisible=!1}),M(5,i0,8,3,"div",5),l(),r(6,"nz-modal",7),y("nzVisibleChange",function(p){return z(t.ccModalVisible,p)||(t.ccModalVisible=p),p}),C("nzOnOk",function(){return t.submitCc()})("nzOnCancel",function(){return t.ccModalVisible=!1}),M(7,r0,17,8,"div",5),l(),r(8,"nz-modal",8),y("nzVisibleChange",function(p){return z(t.transferModalVisible,p)||(t.transferModalVisible=p),p}),C("nzOnOk",function(){return t.submitTransfer()})("nzOnCancel",function(){return t.transferModalVisible=!1}),M(9,l0,17,7,"div",5),l(),r(10,"nz-modal",9),y("nzVisibleChange",function(p){return z(t.addSignModalVisible,p)||(t.addSignModalVisible=p),p}),C("nzOnOk",function(){return t.submitAddSign()})("nzOnCancel",function(){return t.addSignModalVisible=!1}),M(11,c0,27,11,"div",5),l(),r(12,"nz-modal",10),y("nzVisibleChange",function(p){return z(t.returnModalVisible,p)||(t.returnModalVisible=p),p}),C("nzOnOk",function(){return t.submitReturn()})("nzOnCancel",function(){return t.returnModalVisible=!1}),M(13,d0,17,7,"div",5),l(),r(14,"nz-modal",11),y("nzVisibleChange",function(p){return z(t.resubmitModalVisible,p)||(t.resubmitModalVisible=p),p}),C("nzOnOk",function(){return t.submitResubmit()})("nzOnCancel",function(){return t.resubmitModalVisible=!1}),M(15,m0,6,3,"div",5),l()),i&2&&(g(t.selectedInstance?0:1),a(2),v("nzVisible",t.approveModalVisible),a(2),v("nzVisible",t.rejectModalVisible),a(2),v("nzVisible",t.ccModalVisible),a(2),v("nzVisible",t.transferModalVisible),a(2),v("nzVisible",t.addSignModalVisible),a(2),v("nzVisible",t.returnModalVisible),a(2),v("nzVisible",t.resubmitModalVisible))},dependencies:[Nn,ke,oe,re,Y,G,X,be,qe,Je,W,In,kn,ii,ei,ti,ri,ni,oi,qt,$t,$e,ct,bt,Qn,st,Mt,Tt,Un,Zt,Wr,Et,Po,pt],styles:["[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]{background:#fff;display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #e5e5e5;display:flex;justify-content:space-between;align-items:center;flex-shrink:0}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .item-id[_ngcontent-%COMP%]{font-size:14px;color:#666}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;gap:8px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 16px 70px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]{margin:0;font-size:25px;font-weight:600;color:#333}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .submitter-info-large[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px;padding:12px;background-color:#fafafa;border-radius:4px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .submitter-info-large[_ngcontent-%COMP%]   .avatar-large[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:18px;font-weight:600}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .submitter-info-large[_ngcontent-%COMP%]   .submitter-details[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:center;gap:4px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .submitter-info-large[_ngcontent-%COMP%]   .submitter-details[_ngcontent-%COMP%]   .submitter-name-large[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .submitter-info-large[_ngcontent-%COMP%]   .submitter-details[_ngcontent-%COMP%]   .submitter-dept[_ngcontent-%COMP%]{font-size:14px;color:#666}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .submitter-info-large[_ngcontent-%COMP%]   .submitter-details[_ngcontent-%COMP%]   .submit-time[_ngcontent-%COMP%]{font-size:13px;color:#999}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]     .ant-tabs-nav{margin-bottom:16px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #e5e5e5}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .detail-descriptions[_ngcontent-%COMP%]     .ant-descriptions-item-label{font-weight:500;color:#666}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]{margin-bottom:16px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]     .ant-table-thead>tr>th{background-color:#fafafa;font-weight:600;color:#333}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]{background-color:#fafafa;padding:16px;border-radius:6px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]   .summary-descriptions[_ngcontent-%COMP%]     .ant-descriptions-item-label{font-weight:500;color:#666}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .records-table[_ngcontent-%COMP%]     .ant-table-thead>tr>th{background-color:#fafafa;font-weight:600;color:#333}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .records-table[_ngcontent-%COMP%]   .approval-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .records-table[_ngcontent-%COMP%]   .approval-info[_ngcontent-%COMP%]   .avatar-small[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:10px;font-weight:500}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .records-table[_ngcontent-%COMP%]   .approval-info[_ngcontent-%COMP%]   .approval-name[_ngcontent-%COMP%]{font-size:13px;color:#333}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .records-table[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .time-detail[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-top:2px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .fixed-bottom-actions[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:#fff;border-top:1px solid #e5e5e5;display:flex;box-shadow:0 -2px 8px #0000000f;z-index:10;flex-shrink:0;padding:0 16px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .fixed-bottom-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .fixed-bottom-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{margin:12px 4px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]{margin-bottom:0;padding:16px;background-color:#fafafa}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]     .ant-input-group-wrapper{width:100%}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]     .ant-input{border-radius:6px 0 0 6px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]     .ant-btn{border-radius:0 6px 6px 0;height:32px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]{transition:background-color .3s ease;padding:16px;border-bottom:1px solid #f0f0f0}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]   .avatar-small[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:500}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]   .comment-username[_ngcontent-%COMP%]{font-weight:500;color:#333}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-time[_ngcontent-%COMP%]{font-size:12px;color:#999}[_nghost-%COMP%]   .approval-detail[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{color:#333;line-height:1.5;padding-left:32px}  .ant-modal .modal-content .modal-description{margin-bottom:16px;color:#666;font-size:14px}  .ant-modal .modal-content .form-item{margin-bottom:16px}  .ant-modal .modal-content .form-item .form-label{display:block;margin-bottom:8px;font-weight:500;color:#333}  .ant-modal .modal-content .form-item .cc-user-select,   .ant-modal .modal-content .form-item .transfer-user-select,   .ant-modal .modal-content .form-item .add-sign-user-select,   .ant-modal .modal-content .form-item .return-node-select{width:100%}  .ant-modal .modal-content .form-item .add-sign-type-group{width:100%}  .ant-modal .modal-content .form-item .add-sign-type-group label{margin-right:16px;margin-bottom:0}  .ant-modal .modal-content .reason-textarea{width:100%;resize:vertical}  .ant-avatar-string{transform:scale(1) translate(-50%)}  .ant-modal-footer .ant-btn{min-width:80px}@media (max-width: 768px){  .ant-modal{width:90%!important;max-width:400px}  .ant-modal .ant-modal-body{padding:16px}  .ant-modal .ant-modal-footer{padding:12px 16px}  .ant-modal .ant-modal-footer .ant-btn{min-width:70px;height:32px;font-size:14px}.modal-content[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]{margin-bottom:12px}.modal-content[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:6px}.modal-content[_ngcontent-%COMP%]   .reason-textarea[_ngcontent-%COMP%]{font-size:14px}}"]})}return n})();var _0=n=>({backgroundColor:n});function f0(n,c){if(n&1&&h(0,"nz-option",16),n&2){let e=c.$implicit;_("nzValue",e.eruptFlowConfig.id)("nzLabel",e.eruptFlowConfig.name)}}function g0(n,c){n&1&&(r(0,"nz-tag",24),d(1),ge(2,"translate"),l()),n&2&&(a(),N(" ",ye(2,1,"SUB_FLOW")," "))}function C0(n,c){if(n&1&&(r(0,"p",33),d(1),l()),n&2){let e,i=c.$implicit,t=s(2).$implicit,o=s();a(),D((e=o.JSON.parse(t==null?null:t.data))==null?null:e[i])}}function h0(n,c){if(n&1&&(r(0,"p",26),b(1,C0,2,1,"p",33,O),l()),n&2){let e=s().$implicit;a(),S(e==null||e.eruptFlowConfig==null||e.eruptFlowConfig.setting==null?null:e.eruptFlowConfig.setting.subTitleFields)}}function x0(n,c){if(n&1){let e=x();r(0,"div",20),C("click",function(){let t=m(e).$implicit,o=s();return u(o.selectInstance(t))}),r(1,"div",21)(2,"h3",22)(3,"p",23),d(4),l()(),r(5,"div"),f(6,g0,3,3,"nz-tag",24),r(7,"nz-tag",25),d(8),ge(9,"translate"),l()()(),f(10,h0,3,0,"p",26),r(11,"div",27)(12,"div",28),h(13,"nz-avatar",29),r(14,"span",30),d(15),l()(),r(16,"div",31)(17,"span",32),d(18),l()()()()}if(n&2){let e=c.$implicit,i=s();L("active",(e==null?null:e.id)===(i.selectedInstance==null?null:i.selectedInstance.id)),a(4),D(e==null||e.eruptFlowConfig==null?null:e.eruptFlowConfig.name),a(2),g(e!=null&&e.parent?6:-1),a(2),N(" ",ye(9,11,e==null?null:e.status)," "),a(2),g(!(e==null||e.eruptFlowConfig==null||e.eruptFlowConfig.setting==null||e.eruptFlowConfig.setting.subTitleFields==null)&&e.eruptFlowConfig.setting.subTitleFields.length&&(e!=null&&e.data)?10:-1),a(3),_("nzText",e==null||e.initiatorUser==null?null:e.initiatorUser.name.substring(0,1))("ngStyle",te(13,_0,i.getAvatarColor(e==null||e.initiatorUser.name==null?null:e.initiatorUser.name.substring(0,1))))("nzSrc",e==null||e.initiatorUser==null?null:e.initiatorUser.avatar),a(2),D(e==null||e.initiatorUser==null?null:e.initiatorUser.name),a(3),N(" ",e==null?null:e.createTime," ")}}var Ra=(()=>{class n{settingSrv;flowInstanceApiService;selectedView=nt.TODO;flowInstances=[];selectedInstance;todoCount=0;selectFlow=null;approvalDetail;constructor(e,i){this.settingSrv=e,this.flowInstanceApiService=i}ngOnInit(){this.loadFlows(nt.TODO)}uniqFlowInstances=e=>[...new Map(e.map(i=>[i.eruptFlowConfig.id,i])).values()];selectInstance(e){this.selectedInstance=e,this.approvalDetail.onSelectFlow(this.selectedView,this.selectedInstance)}onSelectFlow(e){this.loadFlows(this.selectedView,e)}loadFlows(e,i=null,t=!0){this.selectedView=e,this.selectFlow=i,this.selectedInstance=null,this.flowInstanceApiService.list({approvalView:this.selectedView,flowId:i}).subscribe({next:o=>{this.flowInstances=o.data,t&&(this.selectedInstance=this.flowInstances[0]||null,this.selectInstance(this.selectedInstance)),this.selectedView==nt.TODO&&(this.todoCount=this.flowInstances.length)}})}reloadFlows(){this.loadFlows(this.selectedView,null,!0)}ApprovalView=nt;NodeType=U;getAvatarColor=ci;JSON=JSON;static \u0275fac=function(i){return new(i||n)(F(nr),F(Pt))};static \u0275cmp=E({type:n,selectors:[["app-flow-approval"]],viewQuery:function(i,t){if(i&1&&H(an,5),i&2){let o;B(o=R())&&(t.approvalDetail=o.first)}},standalone:!1,decls:36,vars:21,consts:[[1,"flow-approval-container"],[1,"sidebar"],[1,"navigation-menu"],["nz-menu","","nzMode","inline",1,"approval-menu"],["nz-menu-item","",3,"click","nzSelected"],[2,"display","flex","align-items","center"],["nz-icon","","nzType","clock-circle","nzTheme","outline"],[1,"menu-title"],[1,"menu-badge",2,"margin-left","auto",3,"nzCount"],["nz-icon","","nzType","check-circle","nzTheme","outline"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-icon","","nzType","rocket","nzTheme","outline"],[1,"main-content"],[1,"list-section"],[1,"list-header"],["nzBorderless","","nzAllowClear","",2,"width","100%",3,"ngModelChange","ngModel","nzPlaceHolder"],[3,"nzValue","nzLabel"],[1,"approval-list"],[1,"approval-item",3,"active"],[1,"detail-section",3,"reloadFlows"],[1,"approval-item",3,"click"],[1,"item-header"],[1,"item-title"],[2,"margin-bottom","0"],["nzColor","orange",2,"margin-right","6px"],[2,"margin-right","0"],[2,"margin-bottom","8px"],[1,"item-footer"],[1,"submitter-info"],["nzSize","small",3,"nzText","ngStyle","nzSrc"],[1,"submitter-name"],[1,"time-info"],[1,"process-time"],[2,"margin-bottom","0.25em"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4),C("click",function(){return t.loadFlows(t.ApprovalView.TODO)}),r(5,"div",5),h(6,"span",6),r(7,"span",7),d(8),ge(9,"translate"),l(),h(10,"nz-badge",8),l()(),r(11,"li",4),C("click",function(){return t.loadFlows(t.ApprovalView.DONE)}),h(12,"span",9),r(13,"span",7),d(14),ge(15,"translate"),l()(),r(16,"li",4),C("click",function(){return t.loadFlows(t.ApprovalView.CC)}),h(17,"span",10),r(18,"span",7),d(19),ge(20,"translate"),l()(),r(21,"li",4),C("click",function(){return t.loadFlows(t.ApprovalView.CREATED)}),h(22,"span",11),r(23,"span",7),d(24),ge(25,"translate"),l()()()()(),r(26,"div",12)(27,"div",13)(28,"div",14)(29,"nz-select",15),y("ngModelChange",function(p){return z(t.selectFlow,p)||(t.selectFlow=p),p}),C("ngModelChange",function(p){return t.onSelectFlow(p)}),b(30,f0,1,2,"nz-option",16,O),l()(),r(32,"div",17),b(33,x0,19,15,"div",18,O),l()(),r(35,"flow-approval-detail",19),C("reloadFlows",function(){return t.reloadFlows()}),l()()()),i&2&&(fe("height","calc(100vh - "+(t.settingSrv.layout.reuse?"84px":"44px")+")"),a(4),_("nzSelected",t.ApprovalView.TODO===t.selectedView),a(4),D(ye(9,13,"FLOW_TODO")),a(2),_("nzCount",t.todoCount),a(),_("nzSelected",t.ApprovalView.DONE===t.selectedView),a(3),D(ye(15,15,"FLOW_DONE")),a(2),_("nzSelected",t.ApprovalView.CC===t.selectedView),a(3),D(ye(20,17,"CC")),a(2),_("nzSelected",t.ApprovalView.CREATED===t.selectedView),a(3),D(ye(25,19,"CREATED")),a(5),v("ngModel",t.selectFlow),_("nzPlaceHolder","\u6D41\u7A0B\u7B5B\u9009"),a(),S(t.uniqFlowInstances(t.flowInstances)),a(3),S(t.flowInstances))},dependencies:[Nn,oe,re,G,Ln,sr,qe,Je,W,wr,st,Un,an,pt],styles:["[_nghost-%COMP%]     .flow-approval-container{display:flex;background-color:#f5f5f5;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;overflow:hidden}[_nghost-%COMP%]     .flow-approval-container .sidebar{width:180px;height:100%;background:#fff;border-right:1px solid #e5e5e5;display:flex;flex-direction:column;transition:all .3s ease;flex-shrink:0}[_nghost-%COMP%]     .flow-approval-container .sidebar.collapsed{width:80px}[_nghost-%COMP%]     .flow-approval-container .sidebar.collapsed .search-text, [_nghost-%COMP%]     .flow-approval-container .sidebar.collapsed .menu-title, [_nghost-%COMP%]     .flow-approval-container .sidebar.collapsed .collapse-text{display:none}[_nghost-%COMP%]     .flow-approval-container .sidebar.collapsed .approval-menu .ant-menu-item, [_nghost-%COMP%]     .flow-approval-container .sidebar.collapsed .approval-menu .ant-menu-submenu-title{justify-content:center;padding:0}[_nghost-%COMP%]     .flow-approval-container .sidebar .sidebar-header{padding:13px;border-bottom:1px solid #e5e5e5;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}[_nghost-%COMP%]     .flow-approval-container .sidebar .sidebar-header .search-section{display:flex;align-items:center;gap:8px;color:#666;font-size:14px}[_nghost-%COMP%]     .flow-approval-container .sidebar .sidebar-header .menu-toggle{color:#666}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu{flex:1}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu{border:none;background:transparent}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-item{height:48px;line-height:48px;margin:0;padding:0 16px;display:flex;align-items:center;gap:12px;transition:all .3s ease}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-item:hover{background-color:#f5f5f5}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-item.ant-menu-item-selected{background-color:#e6f7ff;color:#1890ff;font-weight:500}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-item .menu-title{flex:1;font-size:14px;color:inherit}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-item .menu-badge{margin-left:auto}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-submenu .ant-menu-submenu-title{height:48px;line-height:48px;margin:0;padding:0 16px;display:flex;align-items:center;gap:12px;transition:all .3s ease}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-submenu .ant-menu-submenu-title:hover{background-color:#f5f5f5}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-submenu .ant-menu-submenu-title .ant-menu-title-content{flex:1;font-size:14px;color:#333}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-submenu .ant-menu-sub{background-color:#fafafa;border-left:2px solid #e6f7ff}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-submenu .ant-menu-sub .ant-menu-item{padding-left:48px;font-size:13px;color:#666}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-submenu .ant-menu-sub .ant-menu-item:hover{background-color:#e5e5e5}[_nghost-%COMP%]     .flow-approval-container .sidebar .navigation-menu .approval-menu .ant-menu-submenu .ant-menu-sub .ant-menu-item.ant-menu-item-selected{background-color:#e6f7ff;color:#1890ff;font-weight:500}[_nghost-%COMP%]     .flow-approval-container .sidebar .sidebar-footer{padding:16px;border-top:1px solid #e5e5e5;flex-shrink:0}[_nghost-%COMP%]     .flow-approval-container .sidebar .sidebar-footer .collapse-text{margin-left:8px;font-size:14px;color:#666}[_nghost-%COMP%]     .flow-approval-container .main-content{flex:1;height:100%;display:flex;overflow:hidden}[_nghost-%COMP%]     .flow-approval-container .main-content .list-section{width:260px;height:100%;background:#fff;border-right:1px solid #e5e5e5;display:flex;flex-direction:column;flex-shrink:0}[_nghost-%COMP%]     .flow-approval-container .main-content .list-section .list-header{padding:8px 0;border-bottom:1px solid #e5e5e5;display:flex;align-items:center;gap:12px;flex-shrink:0}[_nghost-%COMP%]     .flow-approval-container .main-content .list-section .copy-icon{margin-left:6px;font-size:14px;color:#8c8c8c;vertical-align:middle;transition:color .2s}[_nghost-%COMP%]     .flow-approval-container .main-content .list-section .item-id:hover .copy-icon{color:#1890ff}[_nghost-%COMP%]     .flow-approval-container .main-content .list-section .time-filter{display:flex;align-items:center;gap:8px;font-size:14px;color:#333;cursor:pointer}[_nghost-%COMP%]     .flow-approval-container .main-content .list-section .separator{width:1px;height:16px;background-color:#d9d9d9}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list{flex:1;overflow-y:auto}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item{padding:12px;cursor:pointer;transition:all .3s ease;border-bottom:1px solid #e5e5e5}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item:hover{background-color:#fafafa}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item.active{background-color:#e6f7ff;box-shadow:0 2px 8px #1890ff26}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-header .item-title{margin:0;font-size:16px;font-weight:600;color:#333}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-header .status-tag{font-size:12px}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-content{margin-bottom:12px}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-content .item-field{display:flex;margin-bottom:6px;font-size:13px}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-content .item-field .field-label{color:#666;min-width:80px;flex-shrink:0}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-content .item-field .field-value{color:#333;flex:1}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-footer{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-footer .submitter-info{display:flex;align-items:center;gap:8px}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-footer .submitter-info .submitter-name{font-size:13px;color:#333}[_nghost-%COMP%]     .flow-approval-container .main-content .approval-list .approval-item .item-footer .time-info .process-time{font-size:12px;color:#999}[_nghost-%COMP%]     .flow-approval-container .detail-section{flex:1;height:100%;background:#fff;display:flex;flex-direction:column;overflow-y:auto;position:relative}[_nghost-%COMP%]   .node-info[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background-color:#f8f9fa;border-radius:6px;margin-bottom:12px}[_nghost-%COMP%]   .node-info[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]   .node-name[_ngcontent-%COMP%]{font-weight:500;color:#333}[_nghost-%COMP%]   .node-info[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]   .node-type[_ngcontent-%COMP%]{padding:4px 8px;background-color:#e6f7ff;color:#1890ff;border-radius:4px;font-size:12px}[_nghost-%COMP%]   .node-info[_ngcontent-%COMP%]   .node-branches[_ngcontent-%COMP%]{margin-left:24px}[_nghost-%COMP%]   .node-info[_ngcontent-%COMP%]   .node-branches[_ngcontent-%COMP%]   .branch-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;margin-bottom:8px;background-color:#fafafa;border-radius:4px;border-left:3px solid #d9d9d9}[_nghost-%COMP%]   .node-info[_ngcontent-%COMP%]   .node-branches[_ngcontent-%COMP%]   .branch-item[_ngcontent-%COMP%]   .branch-name[_ngcontent-%COMP%]{font-weight:500;color:#333}[_nghost-%COMP%]   .node-info[_ngcontent-%COMP%]   .node-branches[_ngcontent-%COMP%]   .branch-item[_ngcontent-%COMP%]   .branch-type[_ngcontent-%COMP%]{padding:2px 6px;background-color:#f0f0f0;color:#666;border-radius:3px;font-size:11px}"]})}return n})();var w0=[{path:"management",component:Ia},{path:"dashboard",component:Aa},{path:"approval",component:Ra},{path:"approval-detail/:no",pathMatch:"full",component:an}],La=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({imports:[ki.forChild(w0),ki]})}return n})();var vv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=_e({type:n});static \u0275inj=ue({providers:[he,Ot,Xe,nn],imports:[Vr,Zr,La,Fo,Wn,_r,Do,Go,dn,Yn,tr,we,sa,kr,Ir,Kn,Rr,Hr,Gr,Mr,Yr,Xr,Qr,er,jr,zr,Ar,Dr,Pr,Zo,gr,pa,cr,da,mr,Lr,hr,fr,vr,xr,Xn,Cr,Fr,Or,Kr,Xt,ma,ga,Ca,$r,qr,va,ea,za,Nr,Sr,dr,ra,Ur]})}return n})();Fi(Fe,[et,ke,oe,re,Y,G,X,be,W,An,Vn,lo],[]);Fi(Ci,[et,ke,oe,re,G,be,W,Qi,lo],[]);export{vv as FlowModule};
