import{a as lm,b as sm,f as cm,g as dm,h as um,i as pm,j as xm,k as Tm}from"./chunk-H6LG3V7N.js";import{a as Eu,b as vr,d as Pm,e as _o}from"./chunk-AZU6JLO5.js";import{a as gc}from"./chunk-AG4Q6ZLO.js";import{A as Ge,Aa as hm,Ac as $r,B as Bt,C as cc,Ca as _m,Cc as Su,D as em,Da as gm,Db as hi,Dc as Mu,E as ra,Ec as Nm,F as dc,Fb as bm,Fc as Dm,G as Cr,Gc as Om,H as yr,Hc as Im,I as _u,J as tm,Jc as Rm,K as oa,Ka as Dn,L as aa,La as Cm,M as gu,Nb as Sm,O as nm,P as im,Qa as vl,Ra as vu,S as rm,Sa as wu,Sb as Cc,T as om,Ta as Xt,Tb as Ur,U as am,Ua as Gi,Va as fi,Vb as mo,W as Cu,Wa as bu,Wb as ho,X as yu,Ya as ua,Yb as Mm,a as Ui,ab as pc,ac as Em,ca as fm,cb as wl,da as on,dc as yc,eb as fc,fa as Et,fb as mc,fc as zm,g as qt,ga as la,gb as hc,ha as sa,hc as km,ia as zt,ib as ym,j as Nn,ja as ca,jb as pa,jc as vc,kc as Lm,lc as wc,ma as da,mc as Am,nc as Fm,pc as bc,qb as vm,qc as xu,r as It,rb as Pe,rc as Tu,sc as xl,ta as Sn,tb as hn,ua as Kn,ub as wm,uc as xc,v as $i,vb as bl,w as ji,wa as Pt,wb as fo,wc as Tl,x as be,xa as mm,xb as Ki,xc as Sl,y as mn,ya as uc,yb as mi,z as Zf}from"./chunk-F4VO4WWO.js";import{$h as fn,$i as gr,Aa as Mi,Ab as du,Bb as uu,Ca as Qo,Cd as ac,Ch as qf,Da as Yo,Db as kt,Eb as Lt,Fb as At,Fc as ic,Ga as A,Gc as rc,Ha as Nt,Hc as Hr,Ia as Af,Ic as yl,Id as fu,Jb as Ue,Kb as Ji,Kd as Hf,Lb as gl,Na as Zo,Nb as Cl,Nd as ta,Oa as le,Ob as he,Oc as Pf,Pb as Dt,Pc as Gn,Ph as Xf,Qa as Fe,Qb as $e,Qc as Wr,Qh as Qf,Ra as Wi,Sb as Nf,Tb as ge,Ub as Ce,Ue as mu,Vb as ye,Wa as nt,Wc as oc,Yc as Vf,Yd as na,Ze as Jf,_a as Ff,_e as hu,ab as X,bc as Df,be as Wf,cb as Q,cc as ea,da as kf,dc as at,e as ec,ea as tc,eb as Ie,ec as $t,fa as Hi,fb as De,fc as Ei,gb as Oe,gc as pu,gf as Uf,gh as pt,ha as _r,hb as k,hh as ia,ia as pi,ib as R,ic as Of,ih as Kf,ij as Yf,ja as j,jb as V,jc as If,jf as $f,ka as G,kb as te,kc as Se,kd as Bf,kf as jf,lc as Ee,lf as Gf,nc as Rf,o as cu,ob as Vr,oh as Ct,p as _l,pa as nc,pb as Br,pc as Qe,ph as dn,qb as Tn,rh as tn,sh as lc,ta as Xo,tb as ne,ti as sc,va as Pr,vj as _c,wb as se,xa as Lf,xj as Jr,zb as S}from"./chunk-LH5JAFL2.js";import{a as su,e as zf,g as hl,h as hr}from"./chunk-WWX6BADO.js";var Jm=zf((ga,El)=>{(function(){var o,g="4.17.21",e=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="Invalid `variable` option passed into `_.template`",b="__lodash_hash_undefined__",N=500,M="__lodash_placeholder__",m=1,h=2,T=4,y=1,x=2,v=1,O=2,H=4,P=8,B=16,w=32,W=64,ee=128,ie=256,Y=512,me=30,ke="...",Ne=800,Ye=16,it=1,xt=2,jt=3,ht=1/0,st=9007199254740991,Qt=17976931348623157e292,an=NaN,Tt=4294967295,Z=Tt-1,oi=Tt>>>1,wo=[["ary",ee],["bind",v],["bindKey",O],["curry",P],["curryRight",B],["flip",Y],["partial",w],["partialRight",W],["rearg",ie]],Ci="[object Arguments]",Xn="[object Array]",pe="[object AsyncFunction]",rt="[object Boolean]",xe="[object Date]",_e="[object DOMException]",Ft="[object Error]",Ae="[object Function]",Ht="[object GeneratorFunction]",Ke="[object Map]",Wt="[object Number]",Be="[object Null]",mt="[object Object]",Cn="[object Promise]",Rn="[object Proxy]",ki="[object RegExp]",Pn="[object Set]",Tr="[object String]",bo="[object Symbol]",Gr="[object Undefined]",_t="[object WeakMap]",Pc="[object WeakSet]",Kr="[object ArrayBuffer]",Qi="[object DataView]",xo="[object Float32Array]",ba="[object Float64Array]",xa="[object Int8Array]",qr="[object Int16Array]",Sr="[object Int32Array]",Xr="[object Uint8Array]",Yi="[object Uint8ClampedArray]",Ta="[object Uint16Array]",un="[object Uint32Array]",Zi=/\b__p \+= '';/g,Vn=/\b(__p \+=) '' \+/g,Vl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,er=/&(?:amp|lt|gt|quot|#39);/g,tr=/[&<>"']/g,Bn=RegExp(er.source),Qr=RegExp(tr.source),Sa=/<%-([\s\S]+?)%>/g,Vc=/<%([\s\S]+?)%>/g,Qn=/<%=([\s\S]+?)%>/g,Mr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bl=/^\w*$/,Bc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ma=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(Ma.source),Ea=/^\s+/,nr=/\s/,Hc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yr=/\{\n\/\* \[wrapped with (.+)\] \*/,za=/,? & /,Hl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ka=/[()=,{}\[\]\/\s]/,La=/\\(\\)?/g,Aa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,To=/\w*$/,Gt=/^[-+]0x[0-9a-f]+$/i,Fa=/^0b[01]+$/i,Na=/^\[object .+?Constructor\]$/,Da=/^0o[0-7]+$/i,So=/^(?:0|[1-9]\d*)$/,Wl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mo=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,Zr="\\ud800-\\udfff",Wc="\\u0300-\\u036f",Jl="\\ufe20-\\ufe2f",Ul="\\u20d0-\\u20ff",$l=Wc+Jl+Ul,jl="\\u2700-\\u27bf",Gl="a-z\\xdf-\\xf6\\xf8-\\xff",Jc="\\xac\\xb1\\xd7\\xf7",Uc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Oa="\\u2000-\\u206f",Eo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kl="A-Z\\xc0-\\xd6\\xd8-\\xde",ql="\\ufe0e\\ufe0f",Xl=Jc+Uc+Oa+Eo,zo="['\u2019]",Ql="["+Zr+"]",Ia="["+Xl+"]",Li="["+$l+"]",Yl="\\d+",$c="["+jl+"]",Ra="["+Gl+"]",Er="[^"+Zr+Xl+Yl+jl+Gl+Kl+"]",Ai="\\ud83c[\\udffb-\\udfff]",ko="(?:"+Li+"|"+Ai+")",Pa="[^"+Zr+"]",eo="(?:\\ud83c[\\udde6-\\uddff]){2}",zr="[\\ud800-\\udbff][\\udc00-\\udfff]",Fi="["+Kl+"]",Lo="\\u200d",qe="(?:"+Ra+"|"+Er+")",Zl="(?:"+Fi+"|"+Er+")",Ao="(?:"+zo+"(?:d|ll|m|re|s|t|ve))?",Va="(?:"+zo+"(?:D|LL|M|RE|S|T|VE))?",Ba=ko+"?",Ha="["+ql+"]?",Fo="(?:"+Lo+"(?:"+[Pa,eo,zr].join("|")+")"+Ha+Ba+")*",es="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ts="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Wa=Ha+Ba+Fo,ns="(?:"+[$c,eo,zr].join("|")+")"+Wa,is="(?:"+[Pa+Li+"?",Li,eo,zr,Ql].join("|")+")",rs=RegExp(zo,"g"),os=RegExp(Li,"g"),No=RegExp(Ai+"(?="+Ai+")|"+is+Wa,"g"),as=RegExp([Fi+"?"+Ra+"+"+Ao+"(?="+[Ia,Fi,"$"].join("|")+")",Zl+"+"+Va+"(?="+[Ia,Fi+qe,"$"].join("|")+")",Fi+"?"+qe+"+"+Ao,Fi+"+"+Va,ts,es,Yl,ns].join("|"),"g"),Do=RegExp("["+Lo+Zr+$l+ql+"]"),ls=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ss=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yi=-1,yt={};yt[xo]=yt[ba]=yt[xa]=yt[qr]=yt[Sr]=yt[Xr]=yt[Yi]=yt[Ta]=yt[un]=!0,yt[Ci]=yt[Xn]=yt[Kr]=yt[rt]=yt[Qi]=yt[xe]=yt[Ft]=yt[Ae]=yt[Ke]=yt[Wt]=yt[mt]=yt[ki]=yt[Pn]=yt[Tr]=yt[_t]=!1;var vt={};vt[Ci]=vt[Xn]=vt[Kr]=vt[Qi]=vt[rt]=vt[xe]=vt[xo]=vt[ba]=vt[xa]=vt[qr]=vt[Sr]=vt[Ke]=vt[Wt]=vt[mt]=vt[ki]=vt[Pn]=vt[Tr]=vt[bo]=vt[Xr]=vt[Yi]=vt[Ta]=vt[un]=!0,vt[Ft]=vt[Ae]=vt[_t]=!1;var jc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Gc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xc=parseFloat,cs=parseInt,ds=typeof global=="object"&&global&&global.Object===Object&&global,us=typeof self=="object"&&self&&self.Object===Object&&self,rn=ds||us||Function("return this")(),Ja=typeof ga=="object"&&ga&&!ga.nodeType&&ga,ir=Ja&&typeof El=="object"&&El&&!El.nodeType&&El,ps=ir&&ir.exports===Ja,Ua=ps&&ds.process,En=(function(){try{var s=ir&&ir.require&&ir.require("util").types;return s||Ua&&Ua.binding&&Ua.binding("util")}catch{}})(),Oo=En&&En.isArrayBuffer,fs=En&&En.isDate,ms=En&&En.isMap,hs=En&&En.isRegExp,$a=En&&En.isSet,_s=En&&En.isTypedArray;function zn(s,p,_){switch(_.length){case 0:return s.call(p);case 1:return s.call(p,_[0]);case 2:return s.call(p,_[0],_[1]);case 3:return s.call(p,_[0],_[1],_[2])}return s.apply(p,_)}function Qc(s,p,_,E){for(var F=-1,L=s==null?0:s.length;++F<L;){var J=s[F];p(E,J,_(J),s)}return E}function Hn(s,p){for(var _=-1,E=s==null?0:s.length;++_<E&&p(s[_],_,s)!==!1;);return s}function Yc(s,p){for(var _=s==null?0:s.length;_--&&p(s[_],_,s)!==!1;);return s}function gs(s,p){for(var _=-1,E=s==null?0:s.length;++_<E;)if(!p(s[_],_,s))return!1;return!0}function Ni(s,p){for(var _=-1,E=s==null?0:s.length,F=0,L=[];++_<E;){var J=s[_];p(J,_,s)&&(L[F++]=J)}return L}function Io(s,p){var _=s==null?0:s.length;return!!_&&kr(s,p,0)>-1}function ja(s,p,_){for(var E=-1,F=s==null?0:s.length;++E<F;)if(_(p,s[E]))return!0;return!1}function Ot(s,p){for(var _=-1,E=s==null?0:s.length,F=Array(E);++_<E;)F[_]=p(s[_],_,s);return F}function Di(s,p){for(var _=-1,E=p.length,F=s.length;++_<E;)s[F+_]=p[_];return s}function Ga(s,p,_,E){var F=-1,L=s==null?0:s.length;for(E&&L&&(_=s[++F]);++F<L;)_=p(_,s[F],F,s);return _}function Cs(s,p,_,E){var F=s==null?0:s.length;for(E&&F&&(_=s[--F]);F--;)_=p(_,s[F],F,s);return _}function Ka(s,p){for(var _=-1,E=s==null?0:s.length;++_<E;)if(p(s[_],_,s))return!0;return!1}var Zc=qa("length");function ed(s){return s.split("")}function td(s){return s.match(Hl)||[]}function ys(s,p,_){var E;return _(s,function(F,L,J){if(p(F,L,J))return E=L,!1}),E}function Ro(s,p,_,E){for(var F=s.length,L=_+(E?1:-1);E?L--:++L<F;)if(p(s[L],L,s))return L;return-1}function kr(s,p,_){return p===p?fd(s,p,_):Ro(s,vs,_)}function nd(s,p,_,E){for(var F=_-1,L=s.length;++F<L;)if(E(s[F],p))return F;return-1}function vs(s){return s!==s}function ws(s,p){var _=s==null?0:s.length;return _?Qa(s,p)/_:an}function qa(s){return function(p){return p==null?o:p[s]}}function Xa(s){return function(p){return s==null?o:s[p]}}function bs(s,p,_,E,F){return F(s,function(L,J,K){_=E?(E=!1,L):p(_,L,J,K)}),_}function id(s,p){var _=s.length;for(s.sort(p);_--;)s[_]=s[_].value;return s}function Qa(s,p){for(var _,E=-1,F=s.length;++E<F;){var L=p(s[E]);L!==o&&(_=_===o?L:_+L)}return _}function Ya(s,p){for(var _=-1,E=Array(s);++_<s;)E[_]=p(_);return E}function rd(s,p){return Ot(p,function(_){return[_,s[_]]})}function xs(s){return s&&s.slice(0,Es(s)+1).replace(Ea,"")}function kn(s){return function(p){return s(p)}}function Za(s,p){return Ot(p,function(_){return s[_]})}function to(s,p){return s.has(p)}function Ts(s,p){for(var _=-1,E=s.length;++_<E&&kr(p,s[_],0)>-1;);return _}function Ss(s,p){for(var _=s.length;_--&&kr(p,s[_],0)>-1;);return _}function od(s,p){for(var _=s.length,E=0;_--;)s[_]===p&&++E;return E}var ad=Xa(jc),ld=Xa(Gc);function sd(s){return"\\"+qc[s]}function cd(s,p){return s==null?o:s[p]}function Lr(s){return Do.test(s)}function dd(s){return ls.test(s)}function ud(s){for(var p,_=[];!(p=s.next()).done;)_.push(p.value);return _}function el(s){var p=-1,_=Array(s.size);return s.forEach(function(E,F){_[++p]=[F,E]}),_}function Ms(s,p){return function(_){return s(p(_))}}function Oi(s,p){for(var _=-1,E=s.length,F=0,L=[];++_<E;){var J=s[_];(J===p||J===M)&&(s[_]=M,L[F++]=_)}return L}function Po(s){var p=-1,_=Array(s.size);return s.forEach(function(E){_[++p]=E}),_}function pd(s){var p=-1,_=Array(s.size);return s.forEach(function(E){_[++p]=[E,E]}),_}function fd(s,p,_){for(var E=_-1,F=s.length;++E<F;)if(s[E]===p)return E;return-1}function md(s,p,_){for(var E=_+1;E--;)if(s[E]===p)return E;return E}function Ar(s){return Lr(s)?_d(s):Zc(s)}function Yn(s){return Lr(s)?n(s):ed(s)}function Es(s){for(var p=s.length;p--&&nr.test(s.charAt(p)););return p}var hd=Xa(Kc);function _d(s){for(var p=No.lastIndex=0;No.test(s);)++p;return p}function n(s){return s.match(No)||[]}function i(s){return s.match(as)||[]}var r=function s(p){p=p==null?rn:d.defaults(rn.Object(),p,d.pick(rn,ss));var _=p.Array,E=p.Date,F=p.Error,L=p.Function,J=p.Math,K=p.Object,fe=p.RegExp,ue=p.String,ae=p.TypeError,Me=_.prototype,ve=L.prototype,ce=K.prototype,Ve=p["__core-js_shared__"],Le=ve.toString,we=ce.hasOwnProperty,gt=0,ct=(function(){var t=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})(),wt=ce.toString,yn=Le.call(K),ln=rn._,vn=fe("^"+Le.call(we).replace(Ma,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=ps?p.Buffer:o,Jt=p.Symbol,sn=p.Uint8Array,wn=et?et.allocUnsafe:o,rr=Ms(K.getPrototypeOf,K),bn=K.create,Vo=ce.propertyIsEnumerable,vi=Me.splice,ai=Jt?Jt.isConcatSpreadable:o,Vt=Jt?Jt.iterator:o,Ii=Jt?Jt.toStringTag:o,or=(function(){try{var t=co(K,"defineProperty");return t({},"",{}),t}catch{}})(),Zn=p.clearTimeout!==rn.clearTimeout&&p.clearTimeout,no=E&&E.now!==rn.Date.now&&E.now,Ri=p.setTimeout!==rn.setTimeout&&p.setTimeout,wi=J.ceil,io=J.floor,ze=K.getOwnPropertySymbols,dt=et?et.isBuffer:o,bi=p.isFinite,Wn=Me.join,ro=Ms(K.keys,K),St=J.max,cn=J.min,tl=E.now,zs=p.parseInt,Bo=J.random,Fr=Me.reverse,Ho=co(p,"DataView"),nl=co(p,"Map"),gd=co(p,"Promise"),Wo=co(p,"Set"),il=co(p,"WeakMap"),rl=co(K,"create"),ks=il&&new il,Jo={},hh=uo(Ho),_h=uo(nl),gh=uo(gd),Ch=uo(Wo),yh=uo(il),Ls=Jt?Jt.prototype:o,ol=Ls?Ls.valueOf:o,$u=Ls?Ls.toString:o;function D(t){if(Kt(t)&&!je(t)&&!(t instanceof lt)){if(t instanceof li)return t;if(we.call(t,"__wrapped__"))return jp(t)}return new li(t)}var Uo=(function(){function t(){}return function(a){if(!Ut(a))return{};if(bn)return bn(a);t.prototype=a;var f=new t;return t.prototype=o,f}})();function As(){}function li(t,a){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=o}D.templateSettings={escape:Sa,evaluate:Vc,interpolate:Qn,variable:"",imports:{_:D}},D.prototype=As.prototype,D.prototype.constructor=D,li.prototype=Uo(As.prototype),li.prototype.constructor=li;function lt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Tt,this.__views__=[]}function vh(){var t=new lt(this.__wrapped__);return t.__actions__=Jn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Jn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Jn(this.__views__),t}function wh(){if(this.__filtered__){var t=new lt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function bh(){var t=this.__wrapped__.value(),a=this.__dir__,f=je(t),C=a<0,z=f?t.length:0,I=D0(0,z,this.__views__),U=I.start,$=I.end,q=$-U,re=C?$:U-1,oe=this.__iteratees__,de=oe.length,Te=0,Re=cn(q,this.__takeCount__);if(!f||!C&&z==q&&Re==q)return hp(t,this.__actions__);var We=[];e:for(;q--&&Te<Re;){re+=a;for(var Ze=-1,Je=t[re];++Ze<de;){var ot=oe[Ze],ut=ot.iteratee,ni=ot.type,Fn=ut(Je);if(ni==xt)Je=Fn;else if(!Fn){if(ni==it)continue e;break e}}We[Te++]=Je}return We}lt.prototype=Uo(As.prototype),lt.prototype.constructor=lt;function oo(t){var a=-1,f=t==null?0:t.length;for(this.clear();++a<f;){var C=t[a];this.set(C[0],C[1])}}function xh(){this.__data__=rl?rl(null):{},this.size=0}function Th(t){var a=this.has(t)&&delete this.__data__[t];return this.size-=a?1:0,a}function Sh(t){var a=this.__data__;if(rl){var f=a[t];return f===b?o:f}return we.call(a,t)?a[t]:o}function Mh(t){var a=this.__data__;return rl?a[t]!==o:we.call(a,t)}function Eh(t,a){var f=this.__data__;return this.size+=this.has(t)?0:1,f[t]=rl&&a===o?b:a,this}oo.prototype.clear=xh,oo.prototype.delete=Th,oo.prototype.get=Sh,oo.prototype.has=Mh,oo.prototype.set=Eh;function ar(t){var a=-1,f=t==null?0:t.length;for(this.clear();++a<f;){var C=t[a];this.set(C[0],C[1])}}function zh(){this.__data__=[],this.size=0}function kh(t){var a=this.__data__,f=Fs(a,t);if(f<0)return!1;var C=a.length-1;return f==C?a.pop():vi.call(a,f,1),--this.size,!0}function Lh(t){var a=this.__data__,f=Fs(a,t);return f<0?o:a[f][1]}function Ah(t){return Fs(this.__data__,t)>-1}function Fh(t,a){var f=this.__data__,C=Fs(f,t);return C<0?(++this.size,f.push([t,a])):f[C][1]=a,this}ar.prototype.clear=zh,ar.prototype.delete=kh,ar.prototype.get=Lh,ar.prototype.has=Ah,ar.prototype.set=Fh;function lr(t){var a=-1,f=t==null?0:t.length;for(this.clear();++a<f;){var C=t[a];this.set(C[0],C[1])}}function Nh(){this.size=0,this.__data__={hash:new oo,map:new(nl||ar),string:new oo}}function Dh(t){var a=Us(this,t).delete(t);return this.size-=a?1:0,a}function Oh(t){return Us(this,t).get(t)}function Ih(t){return Us(this,t).has(t)}function Rh(t,a){var f=Us(this,t),C=f.size;return f.set(t,a),this.size+=f.size==C?0:1,this}lr.prototype.clear=Nh,lr.prototype.delete=Dh,lr.prototype.get=Oh,lr.prototype.has=Ih,lr.prototype.set=Rh;function ao(t){var a=-1,f=t==null?0:t.length;for(this.__data__=new lr;++a<f;)this.add(t[a])}function Ph(t){return this.__data__.set(t,b),this}function Vh(t){return this.__data__.has(t)}ao.prototype.add=ao.prototype.push=Ph,ao.prototype.has=Vh;function xi(t){var a=this.__data__=new ar(t);this.size=a.size}function Bh(){this.__data__=new ar,this.size=0}function Hh(t){var a=this.__data__,f=a.delete(t);return this.size=a.size,f}function Wh(t){return this.__data__.get(t)}function Jh(t){return this.__data__.has(t)}function Uh(t,a){var f=this.__data__;if(f instanceof ar){var C=f.__data__;if(!nl||C.length<e-1)return C.push([t,a]),this.size=++f.size,this;f=this.__data__=new lr(C)}return f.set(t,a),this.size=f.size,this}xi.prototype.clear=Bh,xi.prototype.delete=Hh,xi.prototype.get=Wh,xi.prototype.has=Jh,xi.prototype.set=Uh;function ju(t,a){var f=je(t),C=!f&&po(t),z=!f&&!C&&Rr(t),I=!f&&!C&&!z&&Ko(t),U=f||C||z||I,$=U?Ya(t.length,ue):[],q=$.length;for(var re in t)(a||we.call(t,re))&&!(U&&(re=="length"||z&&(re=="offset"||re=="parent")||I&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||ur(re,q)))&&$.push(re);return $}function Gu(t){var a=t.length;return a?t[zd(0,a-1)]:o}function $h(t,a){return $s(Jn(t),lo(a,0,t.length))}function jh(t){return $s(Jn(t))}function Cd(t,a,f){(f!==o&&!Ti(t[a],f)||f===o&&!(a in t))&&sr(t,a,f)}function al(t,a,f){var C=t[a];(!(we.call(t,a)&&Ti(C,f))||f===o&&!(a in t))&&sr(t,a,f)}function Fs(t,a){for(var f=t.length;f--;)if(Ti(t[f][0],a))return f;return-1}function Gh(t,a,f,C){return Nr(t,function(z,I,U){a(C,z,f(z),U)}),C}function Ku(t,a){return t&&Vi(a,pn(a),t)}function Kh(t,a){return t&&Vi(a,$n(a),t)}function sr(t,a,f){a=="__proto__"&&or?or(t,a,{configurable:!0,enumerable:!0,value:f,writable:!0}):t[a]=f}function yd(t,a){for(var f=-1,C=a.length,z=_(C),I=t==null;++f<C;)z[f]=I?o:Zd(t,a[f]);return z}function lo(t,a,f){return t===t&&(f!==o&&(t=t<=f?t:f),a!==o&&(t=t>=a?t:a)),t}function si(t,a,f,C,z,I){var U,$=a&m,q=a&h,re=a&T;if(f&&(U=z?f(t,C,z,I):f(t)),U!==o)return U;if(!Ut(t))return t;var oe=je(t);if(oe){if(U=I0(t),!$)return Jn(t,U)}else{var de=xn(t),Te=de==Ae||de==Ht;if(Rr(t))return Cp(t,$);if(de==mt||de==Ci||Te&&!z){if(U=q||Te?{}:Rp(t),!$)return q?S0(t,Kh(U,t)):T0(t,Ku(U,t))}else{if(!vt[de])return z?t:{};U=R0(t,de,$)}}I||(I=new xi);var Re=I.get(t);if(Re)return Re;I.set(t,U),ff(t)?t.forEach(function(Je){U.add(si(Je,a,f,Je,t,I))}):uf(t)&&t.forEach(function(Je,ot){U.set(ot,si(Je,a,f,ot,t,I))});var We=re?q?Vd:Pd:q?$n:pn,Ze=oe?o:We(t);return Hn(Ze||t,function(Je,ot){Ze&&(ot=Je,Je=t[ot]),al(U,ot,si(Je,a,f,ot,t,I))}),U}function qh(t){var a=pn(t);return function(f){return qu(f,t,a)}}function qu(t,a,f){var C=f.length;if(t==null)return!C;for(t=K(t);C--;){var z=f[C],I=a[z],U=t[z];if(U===o&&!(z in t)||!I(U))return!1}return!0}function Xu(t,a,f){if(typeof t!="function")throw new ae(c);return fl(function(){t.apply(o,f)},a)}function ll(t,a,f,C){var z=-1,I=Io,U=!0,$=t.length,q=[],re=a.length;if(!$)return q;f&&(a=Ot(a,kn(f))),C?(I=ja,U=!1):a.length>=e&&(I=to,U=!1,a=new ao(a));e:for(;++z<$;){var oe=t[z],de=f==null?oe:f(oe);if(oe=C||oe!==0?oe:0,U&&de===de){for(var Te=re;Te--;)if(a[Te]===de)continue e;q.push(oe)}else I(a,de,C)||q.push(oe)}return q}var Nr=xp(Pi),Qu=xp(wd,!0);function Xh(t,a){var f=!0;return Nr(t,function(C,z,I){return f=!!a(C,z,I),f}),f}function Ns(t,a,f){for(var C=-1,z=t.length;++C<z;){var I=t[C],U=a(I);if(U!=null&&($===o?U===U&&!ti(U):f(U,$)))var $=U,q=I}return q}function Qh(t,a,f,C){var z=t.length;for(f=Xe(f),f<0&&(f=-f>z?0:z+f),C=C===o||C>z?z:Xe(C),C<0&&(C+=z),C=f>C?0:hf(C);f<C;)t[f++]=a;return t}function Yu(t,a){var f=[];return Nr(t,function(C,z,I){a(C,z,I)&&f.push(C)}),f}function _n(t,a,f,C,z){var I=-1,U=t.length;for(f||(f=V0),z||(z=[]);++I<U;){var $=t[I];a>0&&f($)?a>1?_n($,a-1,f,C,z):Di(z,$):C||(z[z.length]=$)}return z}var vd=Tp(),Zu=Tp(!0);function Pi(t,a){return t&&vd(t,a,pn)}function wd(t,a){return t&&Zu(t,a,pn)}function Ds(t,a){return Ni(a,function(f){return pr(t[f])})}function so(t,a){a=Or(a,t);for(var f=0,C=a.length;t!=null&&f<C;)t=t[Bi(a[f++])];return f&&f==C?t:o}function ep(t,a,f){var C=a(t);return je(t)?C:Di(C,f(t))}function Ln(t){return t==null?t===o?Gr:Be:Ii&&Ii in K(t)?N0(t):j0(t)}function bd(t,a){return t>a}function Yh(t,a){return t!=null&&we.call(t,a)}function Zh(t,a){return t!=null&&a in K(t)}function e0(t,a,f){return t>=cn(a,f)&&t<St(a,f)}function xd(t,a,f){for(var C=f?ja:Io,z=t[0].length,I=t.length,U=I,$=_(I),q=1/0,re=[];U--;){var oe=t[U];U&&a&&(oe=Ot(oe,kn(a))),q=cn(oe.length,q),$[U]=!f&&(a||z>=120&&oe.length>=120)?new ao(U&&oe):o}oe=t[0];var de=-1,Te=$[0];e:for(;++de<z&&re.length<q;){var Re=oe[de],We=a?a(Re):Re;if(Re=f||Re!==0?Re:0,!(Te?to(Te,We):C(re,We,f))){for(U=I;--U;){var Ze=$[U];if(!(Ze?to(Ze,We):C(t[U],We,f)))continue e}Te&&Te.push(We),re.push(Re)}}return re}function t0(t,a,f,C){return Pi(t,function(z,I,U){a(C,f(z),I,U)}),C}function sl(t,a,f){a=Or(a,t),t=Hp(t,a);var C=t==null?t:t[Bi(di(a))];return C==null?o:zn(C,t,f)}function tp(t){return Kt(t)&&Ln(t)==Ci}function n0(t){return Kt(t)&&Ln(t)==Kr}function i0(t){return Kt(t)&&Ln(t)==xe}function cl(t,a,f,C,z){return t===a?!0:t==null||a==null||!Kt(t)&&!Kt(a)?t!==t&&a!==a:r0(t,a,f,C,cl,z)}function r0(t,a,f,C,z,I){var U=je(t),$=je(a),q=U?Xn:xn(t),re=$?Xn:xn(a);q=q==Ci?mt:q,re=re==Ci?mt:re;var oe=q==mt,de=re==mt,Te=q==re;if(Te&&Rr(t)){if(!Rr(a))return!1;U=!0,oe=!1}if(Te&&!oe)return I||(I=new xi),U||Ko(t)?Dp(t,a,f,C,z,I):A0(t,a,q,f,C,z,I);if(!(f&y)){var Re=oe&&we.call(t,"__wrapped__"),We=de&&we.call(a,"__wrapped__");if(Re||We){var Ze=Re?t.value():t,Je=We?a.value():a;return I||(I=new xi),z(Ze,Je,f,C,I)}}return Te?(I||(I=new xi),F0(t,a,f,C,z,I)):!1}function o0(t){return Kt(t)&&xn(t)==Ke}function Td(t,a,f,C){var z=f.length,I=z,U=!C;if(t==null)return!I;for(t=K(t);z--;){var $=f[z];if(U&&$[2]?$[1]!==t[$[0]]:!($[0]in t))return!1}for(;++z<I;){$=f[z];var q=$[0],re=t[q],oe=$[1];if(U&&$[2]){if(re===o&&!(q in t))return!1}else{var de=new xi;if(C)var Te=C(re,oe,q,t,a,de);if(!(Te===o?cl(oe,re,y|x,C,de):Te))return!1}}return!0}function np(t){if(!Ut(t)||H0(t))return!1;var a=pr(t)?vn:Na;return a.test(uo(t))}function a0(t){return Kt(t)&&Ln(t)==ki}function l0(t){return Kt(t)&&xn(t)==Pn}function s0(t){return Kt(t)&&Qs(t.length)&&!!yt[Ln(t)]}function ip(t){return typeof t=="function"?t:t==null?jn:typeof t=="object"?je(t)?ap(t[0],t[1]):op(t):Mf(t)}function Sd(t){if(!pl(t))return ro(t);var a=[];for(var f in K(t))we.call(t,f)&&f!="constructor"&&a.push(f);return a}function c0(t){if(!Ut(t))return $0(t);var a=pl(t),f=[];for(var C in t)C=="constructor"&&(a||!we.call(t,C))||f.push(C);return f}function Md(t,a){return t<a}function rp(t,a){var f=-1,C=Un(t)?_(t.length):[];return Nr(t,function(z,I,U){C[++f]=a(z,I,U)}),C}function op(t){var a=Hd(t);return a.length==1&&a[0][2]?Vp(a[0][0],a[0][1]):function(f){return f===t||Td(f,t,a)}}function ap(t,a){return Jd(t)&&Pp(a)?Vp(Bi(t),a):function(f){var C=Zd(f,t);return C===o&&C===a?eu(f,t):cl(a,C,y|x)}}function Os(t,a,f,C,z){t!==a&&vd(a,function(I,U){if(z||(z=new xi),Ut(I))d0(t,a,U,f,Os,C,z);else{var $=C?C($d(t,U),I,U+"",t,a,z):o;$===o&&($=I),Cd(t,U,$)}},$n)}function d0(t,a,f,C,z,I,U){var $=$d(t,f),q=$d(a,f),re=U.get(q);if(re){Cd(t,f,re);return}var oe=I?I($,q,f+"",t,a,U):o,de=oe===o;if(de){var Te=je(q),Re=!Te&&Rr(q),We=!Te&&!Re&&Ko(q);oe=q,Te||Re||We?je($)?oe=$:Zt($)?oe=Jn($):Re?(de=!1,oe=Cp(q,!0)):We?(de=!1,oe=yp(q,!0)):oe=[]:ml(q)||po(q)?(oe=$,po($)?oe=_f($):(!Ut($)||pr($))&&(oe=Rp(q))):de=!1}de&&(U.set(q,oe),z(oe,q,C,I,U),U.delete(q)),Cd(t,f,oe)}function lp(t,a){var f=t.length;if(f)return a+=a<0?f:0,ur(a,f)?t[a]:o}function sp(t,a,f){a.length?a=Ot(a,function(I){return je(I)?function(U){return so(U,I.length===1?I[0]:I)}:I}):a=[jn];var C=-1;a=Ot(a,kn(He()));var z=rp(t,function(I,U,$){var q=Ot(a,function(re){return re(I)});return{criteria:q,index:++C,value:I}});return id(z,function(I,U){return x0(I,U,f)})}function u0(t,a){return cp(t,a,function(f,C){return eu(t,C)})}function cp(t,a,f){for(var C=-1,z=a.length,I={};++C<z;){var U=a[C],$=so(t,U);f($,U)&&dl(I,Or(U,t),$)}return I}function p0(t){return function(a){return so(a,t)}}function Ed(t,a,f,C){var z=C?nd:kr,I=-1,U=a.length,$=t;for(t===a&&(a=Jn(a)),f&&($=Ot(t,kn(f)));++I<U;)for(var q=0,re=a[I],oe=f?f(re):re;(q=z($,oe,q,C))>-1;)$!==t&&vi.call($,q,1),vi.call(t,q,1);return t}function dp(t,a){for(var f=t?a.length:0,C=f-1;f--;){var z=a[f];if(f==C||z!==I){var I=z;ur(z)?vi.call(t,z,1):Ad(t,z)}}return t}function zd(t,a){return t+io(Bo()*(a-t+1))}function f0(t,a,f,C){for(var z=-1,I=St(wi((a-t)/(f||1)),0),U=_(I);I--;)U[C?I:++z]=t,t+=f;return U}function kd(t,a){var f="";if(!t||a<1||a>st)return f;do a%2&&(f+=t),a=io(a/2),a&&(t+=t);while(a);return f}function tt(t,a){return jd(Bp(t,a,jn),t+"")}function m0(t){return Gu(qo(t))}function h0(t,a){var f=qo(t);return $s(f,lo(a,0,f.length))}function dl(t,a,f,C){if(!Ut(t))return t;a=Or(a,t);for(var z=-1,I=a.length,U=I-1,$=t;$!=null&&++z<I;){var q=Bi(a[z]),re=f;if(q==="__proto__"||q==="constructor"||q==="prototype")return t;if(z!=U){var oe=$[q];re=C?C(oe,q,$):o,re===o&&(re=Ut(oe)?oe:ur(a[z+1])?[]:{})}al($,q,re),$=$[q]}return t}var up=ks?function(t,a){return ks.set(t,a),t}:jn,_0=or?function(t,a){return or(t,"toString",{configurable:!0,enumerable:!1,value:nu(a),writable:!0})}:jn;function g0(t){return $s(qo(t))}function ci(t,a,f){var C=-1,z=t.length;a<0&&(a=-a>z?0:z+a),f=f>z?z:f,f<0&&(f+=z),z=a>f?0:f-a>>>0,a>>>=0;for(var I=_(z);++C<z;)I[C]=t[C+a];return I}function C0(t,a){var f;return Nr(t,function(C,z,I){return f=a(C,z,I),!f}),!!f}function Is(t,a,f){var C=0,z=t==null?C:t.length;if(typeof a=="number"&&a===a&&z<=oi){for(;C<z;){var I=C+z>>>1,U=t[I];U!==null&&!ti(U)&&(f?U<=a:U<a)?C=I+1:z=I}return z}return Ld(t,a,jn,f)}function Ld(t,a,f,C){var z=0,I=t==null?0:t.length;if(I===0)return 0;a=f(a);for(var U=a!==a,$=a===null,q=ti(a),re=a===o;z<I;){var oe=io((z+I)/2),de=f(t[oe]),Te=de!==o,Re=de===null,We=de===de,Ze=ti(de);if(U)var Je=C||We;else re?Je=We&&(C||Te):$?Je=We&&Te&&(C||!Re):q?Je=We&&Te&&!Re&&(C||!Ze):Re||Ze?Je=!1:Je=C?de<=a:de<a;Je?z=oe+1:I=oe}return cn(I,Z)}function pp(t,a){for(var f=-1,C=t.length,z=0,I=[];++f<C;){var U=t[f],$=a?a(U):U;if(!f||!Ti($,q)){var q=$;I[z++]=U===0?0:U}}return I}function fp(t){return typeof t=="number"?t:ti(t)?an:+t}function ei(t){if(typeof t=="string")return t;if(je(t))return Ot(t,ei)+"";if(ti(t))return $u?$u.call(t):"";var a=t+"";return a=="0"&&1/t==-ht?"-0":a}function Dr(t,a,f){var C=-1,z=Io,I=t.length,U=!0,$=[],q=$;if(f)U=!1,z=ja;else if(I>=e){var re=a?null:k0(t);if(re)return Po(re);U=!1,z=to,q=new ao}else q=a?[]:$;e:for(;++C<I;){var oe=t[C],de=a?a(oe):oe;if(oe=f||oe!==0?oe:0,U&&de===de){for(var Te=q.length;Te--;)if(q[Te]===de)continue e;a&&q.push(de),$.push(oe)}else z(q,de,f)||(q!==$&&q.push(de),$.push(oe))}return $}function Ad(t,a){return a=Or(a,t),t=Hp(t,a),t==null||delete t[Bi(di(a))]}function mp(t,a,f,C){return dl(t,a,f(so(t,a)),C)}function Rs(t,a,f,C){for(var z=t.length,I=C?z:-1;(C?I--:++I<z)&&a(t[I],I,t););return f?ci(t,C?0:I,C?I+1:z):ci(t,C?I+1:0,C?z:I)}function hp(t,a){var f=t;return f instanceof lt&&(f=f.value()),Ga(a,function(C,z){return z.func.apply(z.thisArg,Di([C],z.args))},f)}function Fd(t,a,f){var C=t.length;if(C<2)return C?Dr(t[0]):[];for(var z=-1,I=_(C);++z<C;)for(var U=t[z],$=-1;++$<C;)$!=z&&(I[z]=ll(I[z]||U,t[$],a,f));return Dr(_n(I,1),a,f)}function _p(t,a,f){for(var C=-1,z=t.length,I=a.length,U={};++C<z;){var $=C<I?a[C]:o;f(U,t[C],$)}return U}function Nd(t){return Zt(t)?t:[]}function Dd(t){return typeof t=="function"?t:jn}function Or(t,a){return je(t)?t:Jd(t,a)?[t]:$p(Mt(t))}var y0=tt;function Ir(t,a,f){var C=t.length;return f=f===o?C:f,!a&&f>=C?t:ci(t,a,f)}var gp=Zn||function(t){return rn.clearTimeout(t)};function Cp(t,a){if(a)return t.slice();var f=t.length,C=wn?wn(f):new t.constructor(f);return t.copy(C),C}function Od(t){var a=new t.constructor(t.byteLength);return new sn(a).set(new sn(t)),a}function v0(t,a){var f=a?Od(t.buffer):t.buffer;return new t.constructor(f,t.byteOffset,t.byteLength)}function w0(t){var a=new t.constructor(t.source,To.exec(t));return a.lastIndex=t.lastIndex,a}function b0(t){return ol?K(ol.call(t)):{}}function yp(t,a){var f=a?Od(t.buffer):t.buffer;return new t.constructor(f,t.byteOffset,t.length)}function vp(t,a){if(t!==a){var f=t!==o,C=t===null,z=t===t,I=ti(t),U=a!==o,$=a===null,q=a===a,re=ti(a);if(!$&&!re&&!I&&t>a||I&&U&&q&&!$&&!re||C&&U&&q||!f&&q||!z)return 1;if(!C&&!I&&!re&&t<a||re&&f&&z&&!C&&!I||$&&f&&z||!U&&z||!q)return-1}return 0}function x0(t,a,f){for(var C=-1,z=t.criteria,I=a.criteria,U=z.length,$=f.length;++C<U;){var q=vp(z[C],I[C]);if(q){if(C>=$)return q;var re=f[C];return q*(re=="desc"?-1:1)}}return t.index-a.index}function wp(t,a,f,C){for(var z=-1,I=t.length,U=f.length,$=-1,q=a.length,re=St(I-U,0),oe=_(q+re),de=!C;++$<q;)oe[$]=a[$];for(;++z<U;)(de||z<I)&&(oe[f[z]]=t[z]);for(;re--;)oe[$++]=t[z++];return oe}function bp(t,a,f,C){for(var z=-1,I=t.length,U=-1,$=f.length,q=-1,re=a.length,oe=St(I-$,0),de=_(oe+re),Te=!C;++z<oe;)de[z]=t[z];for(var Re=z;++q<re;)de[Re+q]=a[q];for(;++U<$;)(Te||z<I)&&(de[Re+f[U]]=t[z++]);return de}function Jn(t,a){var f=-1,C=t.length;for(a||(a=_(C));++f<C;)a[f]=t[f];return a}function Vi(t,a,f,C){var z=!f;f||(f={});for(var I=-1,U=a.length;++I<U;){var $=a[I],q=C?C(f[$],t[$],$,f,t):o;q===o&&(q=t[$]),z?sr(f,$,q):al(f,$,q)}return f}function T0(t,a){return Vi(t,Wd(t),a)}function S0(t,a){return Vi(t,Op(t),a)}function Ps(t,a){return function(f,C){var z=je(f)?Qc:Gh,I=a?a():{};return z(f,t,He(C,2),I)}}function $o(t){return tt(function(a,f){var C=-1,z=f.length,I=z>1?f[z-1]:o,U=z>2?f[2]:o;for(I=t.length>3&&typeof I=="function"?(z--,I):o,U&&An(f[0],f[1],U)&&(I=z<3?o:I,z=1),a=K(a);++C<z;){var $=f[C];$&&t(a,$,C,I)}return a})}function xp(t,a){return function(f,C){if(f==null)return f;if(!Un(f))return t(f,C);for(var z=f.length,I=a?z:-1,U=K(f);(a?I--:++I<z)&&C(U[I],I,U)!==!1;);return f}}function Tp(t){return function(a,f,C){for(var z=-1,I=K(a),U=C(a),$=U.length;$--;){var q=U[t?$:++z];if(f(I[q],q,I)===!1)break}return a}}function M0(t,a,f){var C=a&v,z=ul(t);function I(){var U=this&&this!==rn&&this instanceof I?z:t;return U.apply(C?f:this,arguments)}return I}function Sp(t){return function(a){a=Mt(a);var f=Lr(a)?Yn(a):o,C=f?f[0]:a.charAt(0),z=f?Ir(f,1).join(""):a.slice(1);return C[t]()+z}}function jo(t){return function(a){return Ga(Tf(xf(a).replace(rs,"")),t,"")}}function ul(t){return function(){var a=arguments;switch(a.length){case 0:return new t;case 1:return new t(a[0]);case 2:return new t(a[0],a[1]);case 3:return new t(a[0],a[1],a[2]);case 4:return new t(a[0],a[1],a[2],a[3]);case 5:return new t(a[0],a[1],a[2],a[3],a[4]);case 6:return new t(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new t(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var f=Uo(t.prototype),C=t.apply(f,a);return Ut(C)?C:f}}function E0(t,a,f){var C=ul(t);function z(){for(var I=arguments.length,U=_(I),$=I,q=Go(z);$--;)U[$]=arguments[$];var re=I<3&&U[0]!==q&&U[I-1]!==q?[]:Oi(U,q);if(I-=re.length,I<f)return Lp(t,a,Vs,z.placeholder,o,U,re,o,o,f-I);var oe=this&&this!==rn&&this instanceof z?C:t;return zn(oe,this,U)}return z}function Mp(t){return function(a,f,C){var z=K(a);if(!Un(a)){var I=He(f,3);a=pn(a),f=function($){return I(z[$],$,z)}}var U=t(a,f,C);return U>-1?z[I?a[U]:U]:o}}function Ep(t){return dr(function(a){var f=a.length,C=f,z=li.prototype.thru;for(t&&a.reverse();C--;){var I=a[C];if(typeof I!="function")throw new ae(c);if(z&&!U&&Js(I)=="wrapper")var U=new li([],!0)}for(C=U?C:f;++C<f;){I=a[C];var $=Js(I),q=$=="wrapper"?Bd(I):o;q&&Ud(q[0])&&q[1]==(ee|P|w|ie)&&!q[4].length&&q[9]==1?U=U[Js(q[0])].apply(U,q[3]):U=I.length==1&&Ud(I)?U[$]():U.thru(I)}return function(){var re=arguments,oe=re[0];if(U&&re.length==1&&je(oe))return U.plant(oe).value();for(var de=0,Te=f?a[de].apply(this,re):oe;++de<f;)Te=a[de].call(this,Te);return Te}})}function Vs(t,a,f,C,z,I,U,$,q,re){var oe=a&ee,de=a&v,Te=a&O,Re=a&(P|B),We=a&Y,Ze=Te?o:ul(t);function Je(){for(var ot=arguments.length,ut=_(ot),ni=ot;ni--;)ut[ni]=arguments[ni];if(Re)var Fn=Go(Je),ii=od(ut,Fn);if(C&&(ut=wp(ut,C,z,Re)),I&&(ut=bp(ut,I,U,Re)),ot-=ii,Re&&ot<re){var en=Oi(ut,Fn);return Lp(t,a,Vs,Je.placeholder,f,ut,en,$,q,re-ot)}var Si=de?f:this,mr=Te?Si[t]:t;return ot=ut.length,$?ut=G0(ut,$):We&&ot>1&&ut.reverse(),oe&&q<ot&&(ut.length=q),this&&this!==rn&&this instanceof Je&&(mr=Ze||ul(mr)),mr.apply(Si,ut)}return Je}function zp(t,a){return function(f,C){return t0(f,t,a(C),{})}}function Bs(t,a){return function(f,C){var z;if(f===o&&C===o)return a;if(f!==o&&(z=f),C!==o){if(z===o)return C;typeof f=="string"||typeof C=="string"?(f=ei(f),C=ei(C)):(f=fp(f),C=fp(C)),z=t(f,C)}return z}}function Id(t){return dr(function(a){return a=Ot(a,kn(He())),tt(function(f){var C=this;return t(a,function(z){return zn(z,C,f)})})})}function Hs(t,a){a=a===o?" ":ei(a);var f=a.length;if(f<2)return f?kd(a,t):a;var C=kd(a,wi(t/Ar(a)));return Lr(a)?Ir(Yn(C),0,t).join(""):C.slice(0,t)}function z0(t,a,f,C){var z=a&v,I=ul(t);function U(){for(var $=-1,q=arguments.length,re=-1,oe=C.length,de=_(oe+q),Te=this&&this!==rn&&this instanceof U?I:t;++re<oe;)de[re]=C[re];for(;q--;)de[re++]=arguments[++$];return zn(Te,z?f:this,de)}return U}function kp(t){return function(a,f,C){return C&&typeof C!="number"&&An(a,f,C)&&(f=C=o),a=fr(a),f===o?(f=a,a=0):f=fr(f),C=C===o?a<f?1:-1:fr(C),f0(a,f,C,t)}}function Ws(t){return function(a,f){return typeof a=="string"&&typeof f=="string"||(a=ui(a),f=ui(f)),t(a,f)}}function Lp(t,a,f,C,z,I,U,$,q,re){var oe=a&P,de=oe?U:o,Te=oe?o:U,Re=oe?I:o,We=oe?o:I;a|=oe?w:W,a&=~(oe?W:w),a&H||(a&=~(v|O));var Ze=[t,a,z,Re,de,We,Te,$,q,re],Je=f.apply(o,Ze);return Ud(t)&&Wp(Je,Ze),Je.placeholder=C,Jp(Je,t,a)}function Rd(t){var a=J[t];return function(f,C){if(f=ui(f),C=C==null?0:cn(Xe(C),292),C&&bi(f)){var z=(Mt(f)+"e").split("e"),I=a(z[0]+"e"+(+z[1]+C));return z=(Mt(I)+"e").split("e"),+(z[0]+"e"+(+z[1]-C))}return a(f)}}var k0=Wo&&1/Po(new Wo([,-0]))[1]==ht?function(t){return new Wo(t)}:ou;function Ap(t){return function(a){var f=xn(a);return f==Ke?el(a):f==Pn?pd(a):rd(a,t(a))}}function cr(t,a,f,C,z,I,U,$){var q=a&O;if(!q&&typeof t!="function")throw new ae(c);var re=C?C.length:0;if(re||(a&=~(w|W),C=z=o),U=U===o?U:St(Xe(U),0),$=$===o?$:Xe($),re-=z?z.length:0,a&W){var oe=C,de=z;C=z=o}var Te=q?o:Bd(t),Re=[t,a,f,C,z,oe,de,I,U,$];if(Te&&U0(Re,Te),t=Re[0],a=Re[1],f=Re[2],C=Re[3],z=Re[4],$=Re[9]=Re[9]===o?q?0:t.length:St(Re[9]-re,0),!$&&a&(P|B)&&(a&=~(P|B)),!a||a==v)var We=M0(t,a,f);else a==P||a==B?We=E0(t,a,$):(a==w||a==(v|w))&&!z.length?We=z0(t,a,f,C):We=Vs.apply(o,Re);var Ze=Te?up:Wp;return Jp(Ze(We,Re),t,a)}function Fp(t,a,f,C){return t===o||Ti(t,ce[f])&&!we.call(C,f)?a:t}function Np(t,a,f,C,z,I){return Ut(t)&&Ut(a)&&(I.set(a,t),Os(t,a,o,Np,I),I.delete(a)),t}function L0(t){return ml(t)?o:t}function Dp(t,a,f,C,z,I){var U=f&y,$=t.length,q=a.length;if($!=q&&!(U&&q>$))return!1;var re=I.get(t),oe=I.get(a);if(re&&oe)return re==a&&oe==t;var de=-1,Te=!0,Re=f&x?new ao:o;for(I.set(t,a),I.set(a,t);++de<$;){var We=t[de],Ze=a[de];if(C)var Je=U?C(Ze,We,de,a,t,I):C(We,Ze,de,t,a,I);if(Je!==o){if(Je)continue;Te=!1;break}if(Re){if(!Ka(a,function(ot,ut){if(!to(Re,ut)&&(We===ot||z(We,ot,f,C,I)))return Re.push(ut)})){Te=!1;break}}else if(!(We===Ze||z(We,Ze,f,C,I))){Te=!1;break}}return I.delete(t),I.delete(a),Te}function A0(t,a,f,C,z,I,U){switch(f){case Qi:if(t.byteLength!=a.byteLength||t.byteOffset!=a.byteOffset)return!1;t=t.buffer,a=a.buffer;case Kr:return!(t.byteLength!=a.byteLength||!I(new sn(t),new sn(a)));case rt:case xe:case Wt:return Ti(+t,+a);case Ft:return t.name==a.name&&t.message==a.message;case ki:case Tr:return t==a+"";case Ke:var $=el;case Pn:var q=C&y;if($||($=Po),t.size!=a.size&&!q)return!1;var re=U.get(t);if(re)return re==a;C|=x,U.set(t,a);var oe=Dp($(t),$(a),C,z,I,U);return U.delete(t),oe;case bo:if(ol)return ol.call(t)==ol.call(a)}return!1}function F0(t,a,f,C,z,I){var U=f&y,$=Pd(t),q=$.length,re=Pd(a),oe=re.length;if(q!=oe&&!U)return!1;for(var de=q;de--;){var Te=$[de];if(!(U?Te in a:we.call(a,Te)))return!1}var Re=I.get(t),We=I.get(a);if(Re&&We)return Re==a&&We==t;var Ze=!0;I.set(t,a),I.set(a,t);for(var Je=U;++de<q;){Te=$[de];var ot=t[Te],ut=a[Te];if(C)var ni=U?C(ut,ot,Te,a,t,I):C(ot,ut,Te,t,a,I);if(!(ni===o?ot===ut||z(ot,ut,f,C,I):ni)){Ze=!1;break}Je||(Je=Te=="constructor")}if(Ze&&!Je){var Fn=t.constructor,ii=a.constructor;Fn!=ii&&"constructor"in t&&"constructor"in a&&!(typeof Fn=="function"&&Fn instanceof Fn&&typeof ii=="function"&&ii instanceof ii)&&(Ze=!1)}return I.delete(t),I.delete(a),Ze}function dr(t){return jd(Bp(t,o,qp),t+"")}function Pd(t){return ep(t,pn,Wd)}function Vd(t){return ep(t,$n,Op)}var Bd=ks?function(t){return ks.get(t)}:ou;function Js(t){for(var a=t.name+"",f=Jo[a],C=we.call(Jo,a)?f.length:0;C--;){var z=f[C],I=z.func;if(I==null||I==t)return z.name}return a}function Go(t){var a=we.call(D,"placeholder")?D:t;return a.placeholder}function He(){var t=D.iteratee||iu;return t=t===iu?ip:t,arguments.length?t(arguments[0],arguments[1]):t}function Us(t,a){var f=t.__data__;return B0(a)?f[typeof a=="string"?"string":"hash"]:f.map}function Hd(t){for(var a=pn(t),f=a.length;f--;){var C=a[f],z=t[C];a[f]=[C,z,Pp(z)]}return a}function co(t,a){var f=cd(t,a);return np(f)?f:o}function N0(t){var a=we.call(t,Ii),f=t[Ii];try{t[Ii]=o;var C=!0}catch{}var z=wt.call(t);return C&&(a?t[Ii]=f:delete t[Ii]),z}var Wd=ze?function(t){return t==null?[]:(t=K(t),Ni(ze(t),function(a){return Vo.call(t,a)}))}:au,Op=ze?function(t){for(var a=[];t;)Di(a,Wd(t)),t=rr(t);return a}:au,xn=Ln;(Ho&&xn(new Ho(new ArrayBuffer(1)))!=Qi||nl&&xn(new nl)!=Ke||gd&&xn(gd.resolve())!=Cn||Wo&&xn(new Wo)!=Pn||il&&xn(new il)!=_t)&&(xn=function(t){var a=Ln(t),f=a==mt?t.constructor:o,C=f?uo(f):"";if(C)switch(C){case hh:return Qi;case _h:return Ke;case gh:return Cn;case Ch:return Pn;case yh:return _t}return a});function D0(t,a,f){for(var C=-1,z=f.length;++C<z;){var I=f[C],U=I.size;switch(I.type){case"drop":t+=U;break;case"dropRight":a-=U;break;case"take":a=cn(a,t+U);break;case"takeRight":t=St(t,a-U);break}}return{start:t,end:a}}function O0(t){var a=t.match(Yr);return a?a[1].split(za):[]}function Ip(t,a,f){a=Or(a,t);for(var C=-1,z=a.length,I=!1;++C<z;){var U=Bi(a[C]);if(!(I=t!=null&&f(t,U)))break;t=t[U]}return I||++C!=z?I:(z=t==null?0:t.length,!!z&&Qs(z)&&ur(U,z)&&(je(t)||po(t)))}function I0(t){var a=t.length,f=new t.constructor(a);return a&&typeof t[0]=="string"&&we.call(t,"index")&&(f.index=t.index,f.input=t.input),f}function Rp(t){return typeof t.constructor=="function"&&!pl(t)?Uo(rr(t)):{}}function R0(t,a,f){var C=t.constructor;switch(a){case Kr:return Od(t);case rt:case xe:return new C(+t);case Qi:return v0(t,f);case xo:case ba:case xa:case qr:case Sr:case Xr:case Yi:case Ta:case un:return yp(t,f);case Ke:return new C;case Wt:case Tr:return new C(t);case ki:return w0(t);case Pn:return new C;case bo:return b0(t)}}function P0(t,a){var f=a.length;if(!f)return t;var C=f-1;return a[C]=(f>1?"& ":"")+a[C],a=a.join(f>2?", ":" "),t.replace(Hc,`{
/* [wrapped with `+a+`] */
`)}function V0(t){return je(t)||po(t)||!!(ai&&t&&t[ai])}function ur(t,a){var f=typeof t;return a=a??st,!!a&&(f=="number"||f!="symbol"&&So.test(t))&&t>-1&&t%1==0&&t<a}function An(t,a,f){if(!Ut(f))return!1;var C=typeof a;return(C=="number"?Un(f)&&ur(a,f.length):C=="string"&&a in f)?Ti(f[a],t):!1}function Jd(t,a){if(je(t))return!1;var f=typeof t;return f=="number"||f=="symbol"||f=="boolean"||t==null||ti(t)?!0:Bl.test(t)||!Mr.test(t)||a!=null&&t in K(a)}function B0(t){var a=typeof t;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?t!=="__proto__":t===null}function Ud(t){var a=Js(t),f=D[a];if(typeof f!="function"||!(a in lt.prototype))return!1;if(t===f)return!0;var C=Bd(f);return!!C&&t===C[0]}function H0(t){return!!ct&&ct in t}var W0=Ve?pr:lu;function pl(t){var a=t&&t.constructor,f=typeof a=="function"&&a.prototype||ce;return t===f}function Pp(t){return t===t&&!Ut(t)}function Vp(t,a){return function(f){return f==null?!1:f[t]===a&&(a!==o||t in K(f))}}function J0(t){var a=qs(t,function(C){return f.size===N&&f.clear(),C}),f=a.cache;return a}function U0(t,a){var f=t[1],C=a[1],z=f|C,I=z<(v|O|ee),U=C==ee&&f==P||C==ee&&f==ie&&t[7].length<=a[8]||C==(ee|ie)&&a[7].length<=a[8]&&f==P;if(!(I||U))return t;C&v&&(t[2]=a[2],z|=f&v?0:H);var $=a[3];if($){var q=t[3];t[3]=q?wp(q,$,a[4]):$,t[4]=q?Oi(t[3],M):a[4]}return $=a[5],$&&(q=t[5],t[5]=q?bp(q,$,a[6]):$,t[6]=q?Oi(t[5],M):a[6]),$=a[7],$&&(t[7]=$),C&ee&&(t[8]=t[8]==null?a[8]:cn(t[8],a[8])),t[9]==null&&(t[9]=a[9]),t[0]=a[0],t[1]=z,t}function $0(t){var a=[];if(t!=null)for(var f in K(t))a.push(f);return a}function j0(t){return wt.call(t)}function Bp(t,a,f){return a=St(a===o?t.length-1:a,0),function(){for(var C=arguments,z=-1,I=St(C.length-a,0),U=_(I);++z<I;)U[z]=C[a+z];z=-1;for(var $=_(a+1);++z<a;)$[z]=C[z];return $[a]=f(U),zn(t,this,$)}}function Hp(t,a){return a.length<2?t:so(t,ci(a,0,-1))}function G0(t,a){for(var f=t.length,C=cn(a.length,f),z=Jn(t);C--;){var I=a[C];t[C]=ur(I,f)?z[I]:o}return t}function $d(t,a){if(!(a==="constructor"&&typeof t[a]=="function")&&a!="__proto__")return t[a]}var Wp=Up(up),fl=Ri||function(t,a){return rn.setTimeout(t,a)},jd=Up(_0);function Jp(t,a,f){var C=a+"";return jd(t,P0(C,K0(O0(C),f)))}function Up(t){var a=0,f=0;return function(){var C=tl(),z=Ye-(C-f);if(f=C,z>0){if(++a>=Ne)return arguments[0]}else a=0;return t.apply(o,arguments)}}function $s(t,a){var f=-1,C=t.length,z=C-1;for(a=a===o?C:a;++f<a;){var I=zd(f,z),U=t[I];t[I]=t[f],t[f]=U}return t.length=a,t}var $p=J0(function(t){var a=[];return t.charCodeAt(0)===46&&a.push(""),t.replace(Bc,function(f,C,z,I){a.push(z?I.replace(La,"$1"):C||f)}),a});function Bi(t){if(typeof t=="string"||ti(t))return t;var a=t+"";return a=="0"&&1/t==-ht?"-0":a}function uo(t){if(t!=null){try{return Le.call(t)}catch{}try{return t+""}catch{}}return""}function K0(t,a){return Hn(wo,function(f){var C="_."+f[0];a&f[1]&&!Io(t,C)&&t.push(C)}),t.sort()}function jp(t){if(t instanceof lt)return t.clone();var a=new li(t.__wrapped__,t.__chain__);return a.__actions__=Jn(t.__actions__),a.__index__=t.__index__,a.__values__=t.__values__,a}function q0(t,a,f){(f?An(t,a,f):a===o)?a=1:a=St(Xe(a),0);var C=t==null?0:t.length;if(!C||a<1)return[];for(var z=0,I=0,U=_(wi(C/a));z<C;)U[I++]=ci(t,z,z+=a);return U}function X0(t){for(var a=-1,f=t==null?0:t.length,C=0,z=[];++a<f;){var I=t[a];I&&(z[C++]=I)}return z}function Q0(){var t=arguments.length;if(!t)return[];for(var a=_(t-1),f=arguments[0],C=t;C--;)a[C-1]=arguments[C];return Di(je(f)?Jn(f):[f],_n(a,1))}var Y0=tt(function(t,a){return Zt(t)?ll(t,_n(a,1,Zt,!0)):[]}),Z0=tt(function(t,a){var f=di(a);return Zt(f)&&(f=o),Zt(t)?ll(t,_n(a,1,Zt,!0),He(f,2)):[]}),e_=tt(function(t,a){var f=di(a);return Zt(f)&&(f=o),Zt(t)?ll(t,_n(a,1,Zt,!0),o,f):[]});function t_(t,a,f){var C=t==null?0:t.length;return C?(a=f||a===o?1:Xe(a),ci(t,a<0?0:a,C)):[]}function n_(t,a,f){var C=t==null?0:t.length;return C?(a=f||a===o?1:Xe(a),a=C-a,ci(t,0,a<0?0:a)):[]}function i_(t,a){return t&&t.length?Rs(t,He(a,3),!0,!0):[]}function r_(t,a){return t&&t.length?Rs(t,He(a,3),!0):[]}function o_(t,a,f,C){var z=t==null?0:t.length;return z?(f&&typeof f!="number"&&An(t,a,f)&&(f=0,C=z),Qh(t,a,f,C)):[]}function Gp(t,a,f){var C=t==null?0:t.length;if(!C)return-1;var z=f==null?0:Xe(f);return z<0&&(z=St(C+z,0)),Ro(t,He(a,3),z)}function Kp(t,a,f){var C=t==null?0:t.length;if(!C)return-1;var z=C-1;return f!==o&&(z=Xe(f),z=f<0?St(C+z,0):cn(z,C-1)),Ro(t,He(a,3),z,!0)}function qp(t){var a=t==null?0:t.length;return a?_n(t,1):[]}function a_(t){var a=t==null?0:t.length;return a?_n(t,ht):[]}function l_(t,a){var f=t==null?0:t.length;return f?(a=a===o?1:Xe(a),_n(t,a)):[]}function s_(t){for(var a=-1,f=t==null?0:t.length,C={};++a<f;){var z=t[a];C[z[0]]=z[1]}return C}function Xp(t){return t&&t.length?t[0]:o}function c_(t,a,f){var C=t==null?0:t.length;if(!C)return-1;var z=f==null?0:Xe(f);return z<0&&(z=St(C+z,0)),kr(t,a,z)}function d_(t){var a=t==null?0:t.length;return a?ci(t,0,-1):[]}var u_=tt(function(t){var a=Ot(t,Nd);return a.length&&a[0]===t[0]?xd(a):[]}),p_=tt(function(t){var a=di(t),f=Ot(t,Nd);return a===di(f)?a=o:f.pop(),f.length&&f[0]===t[0]?xd(f,He(a,2)):[]}),f_=tt(function(t){var a=di(t),f=Ot(t,Nd);return a=typeof a=="function"?a:o,a&&f.pop(),f.length&&f[0]===t[0]?xd(f,o,a):[]});function m_(t,a){return t==null?"":Wn.call(t,a)}function di(t){var a=t==null?0:t.length;return a?t[a-1]:o}function h_(t,a,f){var C=t==null?0:t.length;if(!C)return-1;var z=C;return f!==o&&(z=Xe(f),z=z<0?St(C+z,0):cn(z,C-1)),a===a?md(t,a,z):Ro(t,vs,z,!0)}function __(t,a){return t&&t.length?lp(t,Xe(a)):o}var g_=tt(Qp);function Qp(t,a){return t&&t.length&&a&&a.length?Ed(t,a):t}function C_(t,a,f){return t&&t.length&&a&&a.length?Ed(t,a,He(f,2)):t}function y_(t,a,f){return t&&t.length&&a&&a.length?Ed(t,a,o,f):t}var v_=dr(function(t,a){var f=t==null?0:t.length,C=yd(t,a);return dp(t,Ot(a,function(z){return ur(z,f)?+z:z}).sort(vp)),C});function w_(t,a){var f=[];if(!(t&&t.length))return f;var C=-1,z=[],I=t.length;for(a=He(a,3);++C<I;){var U=t[C];a(U,C,t)&&(f.push(U),z.push(C))}return dp(t,z),f}function Gd(t){return t==null?t:Fr.call(t)}function b_(t,a,f){var C=t==null?0:t.length;return C?(f&&typeof f!="number"&&An(t,a,f)?(a=0,f=C):(a=a==null?0:Xe(a),f=f===o?C:Xe(f)),ci(t,a,f)):[]}function x_(t,a){return Is(t,a)}function T_(t,a,f){return Ld(t,a,He(f,2))}function S_(t,a){var f=t==null?0:t.length;if(f){var C=Is(t,a);if(C<f&&Ti(t[C],a))return C}return-1}function M_(t,a){return Is(t,a,!0)}function E_(t,a,f){return Ld(t,a,He(f,2),!0)}function z_(t,a){var f=t==null?0:t.length;if(f){var C=Is(t,a,!0)-1;if(Ti(t[C],a))return C}return-1}function k_(t){return t&&t.length?pp(t):[]}function L_(t,a){return t&&t.length?pp(t,He(a,2)):[]}function A_(t){var a=t==null?0:t.length;return a?ci(t,1,a):[]}function F_(t,a,f){return t&&t.length?(a=f||a===o?1:Xe(a),ci(t,0,a<0?0:a)):[]}function N_(t,a,f){var C=t==null?0:t.length;return C?(a=f||a===o?1:Xe(a),a=C-a,ci(t,a<0?0:a,C)):[]}function D_(t,a){return t&&t.length?Rs(t,He(a,3),!1,!0):[]}function O_(t,a){return t&&t.length?Rs(t,He(a,3)):[]}var I_=tt(function(t){return Dr(_n(t,1,Zt,!0))}),R_=tt(function(t){var a=di(t);return Zt(a)&&(a=o),Dr(_n(t,1,Zt,!0),He(a,2))}),P_=tt(function(t){var a=di(t);return a=typeof a=="function"?a:o,Dr(_n(t,1,Zt,!0),o,a)});function V_(t){return t&&t.length?Dr(t):[]}function B_(t,a){return t&&t.length?Dr(t,He(a,2)):[]}function H_(t,a){return a=typeof a=="function"?a:o,t&&t.length?Dr(t,o,a):[]}function Kd(t){if(!(t&&t.length))return[];var a=0;return t=Ni(t,function(f){if(Zt(f))return a=St(f.length,a),!0}),Ya(a,function(f){return Ot(t,qa(f))})}function Yp(t,a){if(!(t&&t.length))return[];var f=Kd(t);return a==null?f:Ot(f,function(C){return zn(a,o,C)})}var W_=tt(function(t,a){return Zt(t)?ll(t,a):[]}),J_=tt(function(t){return Fd(Ni(t,Zt))}),U_=tt(function(t){var a=di(t);return Zt(a)&&(a=o),Fd(Ni(t,Zt),He(a,2))}),$_=tt(function(t){var a=di(t);return a=typeof a=="function"?a:o,Fd(Ni(t,Zt),o,a)}),j_=tt(Kd);function G_(t,a){return _p(t||[],a||[],al)}function K_(t,a){return _p(t||[],a||[],dl)}var q_=tt(function(t){var a=t.length,f=a>1?t[a-1]:o;return f=typeof f=="function"?(t.pop(),f):o,Yp(t,f)});function Zp(t){var a=D(t);return a.__chain__=!0,a}function X_(t,a){return a(t),t}function js(t,a){return a(t)}var Q_=dr(function(t){var a=t.length,f=a?t[0]:0,C=this.__wrapped__,z=function(I){return yd(I,t)};return a>1||this.__actions__.length||!(C instanceof lt)||!ur(f)?this.thru(z):(C=C.slice(f,+f+(a?1:0)),C.__actions__.push({func:js,args:[z],thisArg:o}),new li(C,this.__chain__).thru(function(I){return a&&!I.length&&I.push(o),I}))});function Y_(){return Zp(this)}function Z_(){return new li(this.value(),this.__chain__)}function eg(){this.__values__===o&&(this.__values__=mf(this.value()));var t=this.__index__>=this.__values__.length,a=t?o:this.__values__[this.__index__++];return{done:t,value:a}}function tg(){return this}function ng(t){for(var a,f=this;f instanceof As;){var C=jp(f);C.__index__=0,C.__values__=o,a?z.__wrapped__=C:a=C;var z=C;f=f.__wrapped__}return z.__wrapped__=t,a}function ig(){var t=this.__wrapped__;if(t instanceof lt){var a=t;return this.__actions__.length&&(a=new lt(this)),a=a.reverse(),a.__actions__.push({func:js,args:[Gd],thisArg:o}),new li(a,this.__chain__)}return this.thru(Gd)}function rg(){return hp(this.__wrapped__,this.__actions__)}var og=Ps(function(t,a,f){we.call(t,f)?++t[f]:sr(t,f,1)});function ag(t,a,f){var C=je(t)?gs:Xh;return f&&An(t,a,f)&&(a=o),C(t,He(a,3))}function lg(t,a){var f=je(t)?Ni:Yu;return f(t,He(a,3))}var sg=Mp(Gp),cg=Mp(Kp);function dg(t,a){return _n(Gs(t,a),1)}function ug(t,a){return _n(Gs(t,a),ht)}function pg(t,a,f){return f=f===o?1:Xe(f),_n(Gs(t,a),f)}function ef(t,a){var f=je(t)?Hn:Nr;return f(t,He(a,3))}function tf(t,a){var f=je(t)?Yc:Qu;return f(t,He(a,3))}var fg=Ps(function(t,a,f){we.call(t,f)?t[f].push(a):sr(t,f,[a])});function mg(t,a,f,C){t=Un(t)?t:qo(t),f=f&&!C?Xe(f):0;var z=t.length;return f<0&&(f=St(z+f,0)),Ys(t)?f<=z&&t.indexOf(a,f)>-1:!!z&&kr(t,a,f)>-1}var hg=tt(function(t,a,f){var C=-1,z=typeof a=="function",I=Un(t)?_(t.length):[];return Nr(t,function(U){I[++C]=z?zn(a,U,f):sl(U,a,f)}),I}),_g=Ps(function(t,a,f){sr(t,f,a)});function Gs(t,a){var f=je(t)?Ot:rp;return f(t,He(a,3))}function gg(t,a,f,C){return t==null?[]:(je(a)||(a=a==null?[]:[a]),f=C?o:f,je(f)||(f=f==null?[]:[f]),sp(t,a,f))}var Cg=Ps(function(t,a,f){t[f?0:1].push(a)},function(){return[[],[]]});function yg(t,a,f){var C=je(t)?Ga:bs,z=arguments.length<3;return C(t,He(a,4),f,z,Nr)}function vg(t,a,f){var C=je(t)?Cs:bs,z=arguments.length<3;return C(t,He(a,4),f,z,Qu)}function wg(t,a){var f=je(t)?Ni:Yu;return f(t,Xs(He(a,3)))}function bg(t){var a=je(t)?Gu:m0;return a(t)}function xg(t,a,f){(f?An(t,a,f):a===o)?a=1:a=Xe(a);var C=je(t)?$h:h0;return C(t,a)}function Tg(t){var a=je(t)?jh:g0;return a(t)}function Sg(t){if(t==null)return 0;if(Un(t))return Ys(t)?Ar(t):t.length;var a=xn(t);return a==Ke||a==Pn?t.size:Sd(t).length}function Mg(t,a,f){var C=je(t)?Ka:C0;return f&&An(t,a,f)&&(a=o),C(t,He(a,3))}var Eg=tt(function(t,a){if(t==null)return[];var f=a.length;return f>1&&An(t,a[0],a[1])?a=[]:f>2&&An(a[0],a[1],a[2])&&(a=[a[0]]),sp(t,_n(a,1),[])}),Ks=no||function(){return rn.Date.now()};function zg(t,a){if(typeof a!="function")throw new ae(c);return t=Xe(t),function(){if(--t<1)return a.apply(this,arguments)}}function nf(t,a,f){return a=f?o:a,a=t&&a==null?t.length:a,cr(t,ee,o,o,o,o,a)}function rf(t,a){var f;if(typeof a!="function")throw new ae(c);return t=Xe(t),function(){return--t>0&&(f=a.apply(this,arguments)),t<=1&&(a=o),f}}var qd=tt(function(t,a,f){var C=v;if(f.length){var z=Oi(f,Go(qd));C|=w}return cr(t,C,a,f,z)}),of=tt(function(t,a,f){var C=v|O;if(f.length){var z=Oi(f,Go(of));C|=w}return cr(a,C,t,f,z)});function af(t,a,f){a=f?o:a;var C=cr(t,P,o,o,o,o,o,a);return C.placeholder=af.placeholder,C}function lf(t,a,f){a=f?o:a;var C=cr(t,B,o,o,o,o,o,a);return C.placeholder=lf.placeholder,C}function sf(t,a,f){var C,z,I,U,$,q,re=0,oe=!1,de=!1,Te=!0;if(typeof t!="function")throw new ae(c);a=ui(a)||0,Ut(f)&&(oe=!!f.leading,de="maxWait"in f,I=de?St(ui(f.maxWait)||0,a):I,Te="trailing"in f?!!f.trailing:Te);function Re(en){var Si=C,mr=z;return C=z=o,re=en,U=t.apply(mr,Si),U}function We(en){return re=en,$=fl(ot,a),oe?Re(en):U}function Ze(en){var Si=en-q,mr=en-re,Ef=a-Si;return de?cn(Ef,I-mr):Ef}function Je(en){var Si=en-q,mr=en-re;return q===o||Si>=a||Si<0||de&&mr>=I}function ot(){var en=Ks();if(Je(en))return ut(en);$=fl(ot,Ze(en))}function ut(en){return $=o,Te&&C?Re(en):(C=z=o,U)}function ni(){$!==o&&gp($),re=0,C=q=z=$=o}function Fn(){return $===o?U:ut(Ks())}function ii(){var en=Ks(),Si=Je(en);if(C=arguments,z=this,q=en,Si){if($===o)return We(q);if(de)return gp($),$=fl(ot,a),Re(q)}return $===o&&($=fl(ot,a)),U}return ii.cancel=ni,ii.flush=Fn,ii}var kg=tt(function(t,a){return Xu(t,1,a)}),Lg=tt(function(t,a,f){return Xu(t,ui(a)||0,f)});function Ag(t){return cr(t,Y)}function qs(t,a){if(typeof t!="function"||a!=null&&typeof a!="function")throw new ae(c);var f=function(){var C=arguments,z=a?a.apply(this,C):C[0],I=f.cache;if(I.has(z))return I.get(z);var U=t.apply(this,C);return f.cache=I.set(z,U)||I,U};return f.cache=new(qs.Cache||lr),f}qs.Cache=lr;function Xs(t){if(typeof t!="function")throw new ae(c);return function(){var a=arguments;switch(a.length){case 0:return!t.call(this);case 1:return!t.call(this,a[0]);case 2:return!t.call(this,a[0],a[1]);case 3:return!t.call(this,a[0],a[1],a[2])}return!t.apply(this,a)}}function Fg(t){return rf(2,t)}var Ng=y0(function(t,a){a=a.length==1&&je(a[0])?Ot(a[0],kn(He())):Ot(_n(a,1),kn(He()));var f=a.length;return tt(function(C){for(var z=-1,I=cn(C.length,f);++z<I;)C[z]=a[z].call(this,C[z]);return zn(t,this,C)})}),Xd=tt(function(t,a){var f=Oi(a,Go(Xd));return cr(t,w,o,a,f)}),cf=tt(function(t,a){var f=Oi(a,Go(cf));return cr(t,W,o,a,f)}),Dg=dr(function(t,a){return cr(t,ie,o,o,o,a)});function Og(t,a){if(typeof t!="function")throw new ae(c);return a=a===o?a:Xe(a),tt(t,a)}function Ig(t,a){if(typeof t!="function")throw new ae(c);return a=a==null?0:St(Xe(a),0),tt(function(f){var C=f[a],z=Ir(f,0,a);return C&&Di(z,C),zn(t,this,z)})}function Rg(t,a,f){var C=!0,z=!0;if(typeof t!="function")throw new ae(c);return Ut(f)&&(C="leading"in f?!!f.leading:C,z="trailing"in f?!!f.trailing:z),sf(t,a,{leading:C,maxWait:a,trailing:z})}function Pg(t){return nf(t,1)}function Vg(t,a){return Xd(Dd(a),t)}function Bg(){if(!arguments.length)return[];var t=arguments[0];return je(t)?t:[t]}function Hg(t){return si(t,T)}function Wg(t,a){return a=typeof a=="function"?a:o,si(t,T,a)}function Jg(t){return si(t,m|T)}function Ug(t,a){return a=typeof a=="function"?a:o,si(t,m|T,a)}function $g(t,a){return a==null||qu(t,a,pn(a))}function Ti(t,a){return t===a||t!==t&&a!==a}var jg=Ws(bd),Gg=Ws(function(t,a){return t>=a}),po=tp((function(){return arguments})())?tp:function(t){return Kt(t)&&we.call(t,"callee")&&!Vo.call(t,"callee")},je=_.isArray,Kg=Oo?kn(Oo):n0;function Un(t){return t!=null&&Qs(t.length)&&!pr(t)}function Zt(t){return Kt(t)&&Un(t)}function qg(t){return t===!0||t===!1||Kt(t)&&Ln(t)==rt}var Rr=dt||lu,Xg=fs?kn(fs):i0;function Qg(t){return Kt(t)&&t.nodeType===1&&!ml(t)}function Yg(t){if(t==null)return!0;if(Un(t)&&(je(t)||typeof t=="string"||typeof t.splice=="function"||Rr(t)||Ko(t)||po(t)))return!t.length;var a=xn(t);if(a==Ke||a==Pn)return!t.size;if(pl(t))return!Sd(t).length;for(var f in t)if(we.call(t,f))return!1;return!0}function Zg(t,a){return cl(t,a)}function eC(t,a,f){f=typeof f=="function"?f:o;var C=f?f(t,a):o;return C===o?cl(t,a,o,f):!!C}function Qd(t){if(!Kt(t))return!1;var a=Ln(t);return a==Ft||a==_e||typeof t.message=="string"&&typeof t.name=="string"&&!ml(t)}function tC(t){return typeof t=="number"&&bi(t)}function pr(t){if(!Ut(t))return!1;var a=Ln(t);return a==Ae||a==Ht||a==pe||a==Rn}function df(t){return typeof t=="number"&&t==Xe(t)}function Qs(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=st}function Ut(t){var a=typeof t;return t!=null&&(a=="object"||a=="function")}function Kt(t){return t!=null&&typeof t=="object"}var uf=ms?kn(ms):o0;function nC(t,a){return t===a||Td(t,a,Hd(a))}function iC(t,a,f){return f=typeof f=="function"?f:o,Td(t,a,Hd(a),f)}function rC(t){return pf(t)&&t!=+t}function oC(t){if(W0(t))throw new F(l);return np(t)}function aC(t){return t===null}function lC(t){return t==null}function pf(t){return typeof t=="number"||Kt(t)&&Ln(t)==Wt}function ml(t){if(!Kt(t)||Ln(t)!=mt)return!1;var a=rr(t);if(a===null)return!0;var f=we.call(a,"constructor")&&a.constructor;return typeof f=="function"&&f instanceof f&&Le.call(f)==yn}var Yd=hs?kn(hs):a0;function sC(t){return df(t)&&t>=-st&&t<=st}var ff=$a?kn($a):l0;function Ys(t){return typeof t=="string"||!je(t)&&Kt(t)&&Ln(t)==Tr}function ti(t){return typeof t=="symbol"||Kt(t)&&Ln(t)==bo}var Ko=_s?kn(_s):s0;function cC(t){return t===o}function dC(t){return Kt(t)&&xn(t)==_t}function uC(t){return Kt(t)&&Ln(t)==Pc}var pC=Ws(Md),fC=Ws(function(t,a){return t<=a});function mf(t){if(!t)return[];if(Un(t))return Ys(t)?Yn(t):Jn(t);if(Vt&&t[Vt])return ud(t[Vt]());var a=xn(t),f=a==Ke?el:a==Pn?Po:qo;return f(t)}function fr(t){if(!t)return t===0?t:0;if(t=ui(t),t===ht||t===-ht){var a=t<0?-1:1;return a*Qt}return t===t?t:0}function Xe(t){var a=fr(t),f=a%1;return a===a?f?a-f:a:0}function hf(t){return t?lo(Xe(t),0,Tt):0}function ui(t){if(typeof t=="number")return t;if(ti(t))return an;if(Ut(t)){var a=typeof t.valueOf=="function"?t.valueOf():t;t=Ut(a)?a+"":a}if(typeof t!="string")return t===0?t:+t;t=xs(t);var f=Fa.test(t);return f||Da.test(t)?cs(t.slice(2),f?2:8):Gt.test(t)?an:+t}function _f(t){return Vi(t,$n(t))}function mC(t){return t?lo(Xe(t),-st,st):t===0?t:0}function Mt(t){return t==null?"":ei(t)}var hC=$o(function(t,a){if(pl(a)||Un(a)){Vi(a,pn(a),t);return}for(var f in a)we.call(a,f)&&al(t,f,a[f])}),gf=$o(function(t,a){Vi(a,$n(a),t)}),Zs=$o(function(t,a,f,C){Vi(a,$n(a),t,C)}),_C=$o(function(t,a,f,C){Vi(a,pn(a),t,C)}),gC=dr(yd);function CC(t,a){var f=Uo(t);return a==null?f:Ku(f,a)}var yC=tt(function(t,a){t=K(t);var f=-1,C=a.length,z=C>2?a[2]:o;for(z&&An(a[0],a[1],z)&&(C=1);++f<C;)for(var I=a[f],U=$n(I),$=-1,q=U.length;++$<q;){var re=U[$],oe=t[re];(oe===o||Ti(oe,ce[re])&&!we.call(t,re))&&(t[re]=I[re])}return t}),vC=tt(function(t){return t.push(o,Np),zn(Cf,o,t)});function wC(t,a){return ys(t,He(a,3),Pi)}function bC(t,a){return ys(t,He(a,3),wd)}function xC(t,a){return t==null?t:vd(t,He(a,3),$n)}function TC(t,a){return t==null?t:Zu(t,He(a,3),$n)}function SC(t,a){return t&&Pi(t,He(a,3))}function MC(t,a){return t&&wd(t,He(a,3))}function EC(t){return t==null?[]:Ds(t,pn(t))}function zC(t){return t==null?[]:Ds(t,$n(t))}function Zd(t,a,f){var C=t==null?o:so(t,a);return C===o?f:C}function kC(t,a){return t!=null&&Ip(t,a,Yh)}function eu(t,a){return t!=null&&Ip(t,a,Zh)}var LC=zp(function(t,a,f){a!=null&&typeof a.toString!="function"&&(a=wt.call(a)),t[a]=f},nu(jn)),AC=zp(function(t,a,f){a!=null&&typeof a.toString!="function"&&(a=wt.call(a)),we.call(t,a)?t[a].push(f):t[a]=[f]},He),FC=tt(sl);function pn(t){return Un(t)?ju(t):Sd(t)}function $n(t){return Un(t)?ju(t,!0):c0(t)}function NC(t,a){var f={};return a=He(a,3),Pi(t,function(C,z,I){sr(f,a(C,z,I),C)}),f}function DC(t,a){var f={};return a=He(a,3),Pi(t,function(C,z,I){sr(f,z,a(C,z,I))}),f}var OC=$o(function(t,a,f){Os(t,a,f)}),Cf=$o(function(t,a,f,C){Os(t,a,f,C)}),IC=dr(function(t,a){var f={};if(t==null)return f;var C=!1;a=Ot(a,function(I){return I=Or(I,t),C||(C=I.length>1),I}),Vi(t,Vd(t),f),C&&(f=si(f,m|h|T,L0));for(var z=a.length;z--;)Ad(f,a[z]);return f});function RC(t,a){return yf(t,Xs(He(a)))}var PC=dr(function(t,a){return t==null?{}:u0(t,a)});function yf(t,a){if(t==null)return{};var f=Ot(Vd(t),function(C){return[C]});return a=He(a),cp(t,f,function(C,z){return a(C,z[0])})}function VC(t,a,f){a=Or(a,t);var C=-1,z=a.length;for(z||(z=1,t=o);++C<z;){var I=t==null?o:t[Bi(a[C])];I===o&&(C=z,I=f),t=pr(I)?I.call(t):I}return t}function BC(t,a,f){return t==null?t:dl(t,a,f)}function HC(t,a,f,C){return C=typeof C=="function"?C:o,t==null?t:dl(t,a,f,C)}var vf=Ap(pn),wf=Ap($n);function WC(t,a,f){var C=je(t),z=C||Rr(t)||Ko(t);if(a=He(a,4),f==null){var I=t&&t.constructor;z?f=C?new I:[]:Ut(t)?f=pr(I)?Uo(rr(t)):{}:f={}}return(z?Hn:Pi)(t,function(U,$,q){return a(f,U,$,q)}),f}function JC(t,a){return t==null?!0:Ad(t,a)}function UC(t,a,f){return t==null?t:mp(t,a,Dd(f))}function $C(t,a,f,C){return C=typeof C=="function"?C:o,t==null?t:mp(t,a,Dd(f),C)}function qo(t){return t==null?[]:Za(t,pn(t))}function jC(t){return t==null?[]:Za(t,$n(t))}function GC(t,a,f){return f===o&&(f=a,a=o),f!==o&&(f=ui(f),f=f===f?f:0),a!==o&&(a=ui(a),a=a===a?a:0),lo(ui(t),a,f)}function KC(t,a,f){return a=fr(a),f===o?(f=a,a=0):f=fr(f),t=ui(t),e0(t,a,f)}function qC(t,a,f){if(f&&typeof f!="boolean"&&An(t,a,f)&&(a=f=o),f===o&&(typeof a=="boolean"?(f=a,a=o):typeof t=="boolean"&&(f=t,t=o)),t===o&&a===o?(t=0,a=1):(t=fr(t),a===o?(a=t,t=0):a=fr(a)),t>a){var C=t;t=a,a=C}if(f||t%1||a%1){var z=Bo();return cn(t+z*(a-t+Xc("1e-"+((z+"").length-1))),a)}return zd(t,a)}var XC=jo(function(t,a,f){return a=a.toLowerCase(),t+(f?bf(a):a)});function bf(t){return tu(Mt(t).toLowerCase())}function xf(t){return t=Mt(t),t&&t.replace(Wl,ad).replace(os,"")}function QC(t,a,f){t=Mt(t),a=ei(a);var C=t.length;f=f===o?C:lo(Xe(f),0,C);var z=f;return f-=a.length,f>=0&&t.slice(f,z)==a}function YC(t){return t=Mt(t),t&&Qr.test(t)?t.replace(tr,ld):t}function ZC(t){return t=Mt(t),t&&Rt.test(t)?t.replace(Ma,"\\$&"):t}var ey=jo(function(t,a,f){return t+(f?"-":"")+a.toLowerCase()}),ty=jo(function(t,a,f){return t+(f?" ":"")+a.toLowerCase()}),ny=Sp("toLowerCase");function iy(t,a,f){t=Mt(t),a=Xe(a);var C=a?Ar(t):0;if(!a||C>=a)return t;var z=(a-C)/2;return Hs(io(z),f)+t+Hs(wi(z),f)}function ry(t,a,f){t=Mt(t),a=Xe(a);var C=a?Ar(t):0;return a&&C<a?t+Hs(a-C,f):t}function oy(t,a,f){t=Mt(t),a=Xe(a);var C=a?Ar(t):0;return a&&C<a?Hs(a-C,f)+t:t}function ay(t,a,f){return f||a==null?a=0:a&&(a=+a),zs(Mt(t).replace(Ea,""),a||0)}function ly(t,a,f){return(f?An(t,a,f):a===o)?a=1:a=Xe(a),kd(Mt(t),a)}function sy(){var t=arguments,a=Mt(t[0]);return t.length<3?a:a.replace(t[1],t[2])}var cy=jo(function(t,a,f){return t+(f?"_":"")+a.toLowerCase()});function dy(t,a,f){return f&&typeof f!="number"&&An(t,a,f)&&(a=f=o),f=f===o?Tt:f>>>0,f?(t=Mt(t),t&&(typeof a=="string"||a!=null&&!Yd(a))&&(a=ei(a),!a&&Lr(t))?Ir(Yn(t),0,f):t.split(a,f)):[]}var uy=jo(function(t,a,f){return t+(f?" ":"")+tu(a)});function py(t,a,f){return t=Mt(t),f=f==null?0:lo(Xe(f),0,t.length),a=ei(a),t.slice(f,f+a.length)==a}function fy(t,a,f){var C=D.templateSettings;f&&An(t,a,f)&&(a=o),t=Mt(t),a=Zs({},a,C,Fp);var z=Zs({},a.imports,C.imports,Fp),I=pn(z),U=Za(z,I),$,q,re=0,oe=a.interpolate||Mo,de="__p += '",Te=fe((a.escape||Mo).source+"|"+oe.source+"|"+(oe===Qn?Aa:Mo).source+"|"+(a.evaluate||Mo).source+"|$","g"),Re="//# sourceURL="+(we.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yi+"]")+`
`;t.replace(Te,function(Je,ot,ut,ni,Fn,ii){return ut||(ut=ni),de+=t.slice(re,ii).replace(Yt,sd),ot&&($=!0,de+=`' +
__e(`+ot+`) +
'`),Fn&&(q=!0,de+=`';
`+Fn+`;
__p += '`),ut&&(de+=`' +
((__t = (`+ut+`)) == null ? '' : __t) +
'`),re=ii+Je.length,Je}),de+=`';
`;var We=we.call(a,"variable")&&a.variable;if(!We)de=`with (obj) {
`+de+`
}
`;else if(ka.test(We))throw new F(u);de=(q?de.replace(Zi,""):de).replace(Vn,"$1").replace(Vl,"$1;"),de="function("+(We||"obj")+`) {
`+(We?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+de+`return __p
}`;var Ze=Sf(function(){return L(I,Re+"return "+de).apply(o,U)});if(Ze.source=de,Qd(Ze))throw Ze;return Ze}function my(t){return Mt(t).toLowerCase()}function hy(t){return Mt(t).toUpperCase()}function _y(t,a,f){if(t=Mt(t),t&&(f||a===o))return xs(t);if(!t||!(a=ei(a)))return t;var C=Yn(t),z=Yn(a),I=Ts(C,z),U=Ss(C,z)+1;return Ir(C,I,U).join("")}function gy(t,a,f){if(t=Mt(t),t&&(f||a===o))return t.slice(0,Es(t)+1);if(!t||!(a=ei(a)))return t;var C=Yn(t),z=Ss(C,Yn(a))+1;return Ir(C,0,z).join("")}function Cy(t,a,f){if(t=Mt(t),t&&(f||a===o))return t.replace(Ea,"");if(!t||!(a=ei(a)))return t;var C=Yn(t),z=Ts(C,Yn(a));return Ir(C,z).join("")}function yy(t,a){var f=me,C=ke;if(Ut(a)){var z="separator"in a?a.separator:z;f="length"in a?Xe(a.length):f,C="omission"in a?ei(a.omission):C}t=Mt(t);var I=t.length;if(Lr(t)){var U=Yn(t);I=U.length}if(f>=I)return t;var $=f-Ar(C);if($<1)return C;var q=U?Ir(U,0,$).join(""):t.slice(0,$);if(z===o)return q+C;if(U&&($+=q.length-$),Yd(z)){if(t.slice($).search(z)){var re,oe=q;for(z.global||(z=fe(z.source,Mt(To.exec(z))+"g")),z.lastIndex=0;re=z.exec(oe);)var de=re.index;q=q.slice(0,de===o?$:de)}}else if(t.indexOf(ei(z),$)!=$){var Te=q.lastIndexOf(z);Te>-1&&(q=q.slice(0,Te))}return q+C}function vy(t){return t=Mt(t),t&&Bn.test(t)?t.replace(er,hd):t}var wy=jo(function(t,a,f){return t+(f?" ":"")+a.toUpperCase()}),tu=Sp("toUpperCase");function Tf(t,a,f){return t=Mt(t),a=f?o:a,a===o?dd(t)?i(t):td(t):t.match(a)||[]}var Sf=tt(function(t,a){try{return zn(t,o,a)}catch(f){return Qd(f)?f:new F(f)}}),by=dr(function(t,a){return Hn(a,function(f){f=Bi(f),sr(t,f,qd(t[f],t))}),t});function xy(t){var a=t==null?0:t.length,f=He();return t=a?Ot(t,function(C){if(typeof C[1]!="function")throw new ae(c);return[f(C[0]),C[1]]}):[],tt(function(C){for(var z=-1;++z<a;){var I=t[z];if(zn(I[0],this,C))return zn(I[1],this,C)}})}function Ty(t){return qh(si(t,m))}function nu(t){return function(){return t}}function Sy(t,a){return t==null||t!==t?a:t}var My=Ep(),Ey=Ep(!0);function jn(t){return t}function iu(t){return ip(typeof t=="function"?t:si(t,m))}function zy(t){return op(si(t,m))}function ky(t,a){return ap(t,si(a,m))}var Ly=tt(function(t,a){return function(f){return sl(f,t,a)}}),Ay=tt(function(t,a){return function(f){return sl(t,f,a)}});function ru(t,a,f){var C=pn(a),z=Ds(a,C);f==null&&!(Ut(a)&&(z.length||!C.length))&&(f=a,a=t,t=this,z=Ds(a,pn(a)));var I=!(Ut(f)&&"chain"in f)||!!f.chain,U=pr(t);return Hn(z,function($){var q=a[$];t[$]=q,U&&(t.prototype[$]=function(){var re=this.__chain__;if(I||re){var oe=t(this.__wrapped__),de=oe.__actions__=Jn(this.__actions__);return de.push({func:q,args:arguments,thisArg:t}),oe.__chain__=re,oe}return q.apply(t,Di([this.value()],arguments))})}),t}function Fy(){return rn._===this&&(rn._=ln),this}function ou(){}function Ny(t){return t=Xe(t),tt(function(a){return lp(a,t)})}var Dy=Id(Ot),Oy=Id(gs),Iy=Id(Ka);function Mf(t){return Jd(t)?qa(Bi(t)):p0(t)}function Ry(t){return function(a){return t==null?o:so(t,a)}}var Py=kp(),Vy=kp(!0);function au(){return[]}function lu(){return!1}function By(){return{}}function Hy(){return""}function Wy(){return!0}function Jy(t,a){if(t=Xe(t),t<1||t>st)return[];var f=Tt,C=cn(t,Tt);a=He(a),t-=Tt;for(var z=Ya(C,a);++f<t;)a(f);return z}function Uy(t){return je(t)?Ot(t,Bi):ti(t)?[t]:Jn($p(Mt(t)))}function $y(t){var a=++gt;return Mt(t)+a}var jy=Bs(function(t,a){return t+a},0),Gy=Rd("ceil"),Ky=Bs(function(t,a){return t/a},1),qy=Rd("floor");function Xy(t){return t&&t.length?Ns(t,jn,bd):o}function Qy(t,a){return t&&t.length?Ns(t,He(a,2),bd):o}function Yy(t){return ws(t,jn)}function Zy(t,a){return ws(t,He(a,2))}function e1(t){return t&&t.length?Ns(t,jn,Md):o}function t1(t,a){return t&&t.length?Ns(t,He(a,2),Md):o}var n1=Bs(function(t,a){return t*a},1),i1=Rd("round"),r1=Bs(function(t,a){return t-a},0);function o1(t){return t&&t.length?Qa(t,jn):0}function a1(t,a){return t&&t.length?Qa(t,He(a,2)):0}return D.after=zg,D.ary=nf,D.assign=hC,D.assignIn=gf,D.assignInWith=Zs,D.assignWith=_C,D.at=gC,D.before=rf,D.bind=qd,D.bindAll=by,D.bindKey=of,D.castArray=Bg,D.chain=Zp,D.chunk=q0,D.compact=X0,D.concat=Q0,D.cond=xy,D.conforms=Ty,D.constant=nu,D.countBy=og,D.create=CC,D.curry=af,D.curryRight=lf,D.debounce=sf,D.defaults=yC,D.defaultsDeep=vC,D.defer=kg,D.delay=Lg,D.difference=Y0,D.differenceBy=Z0,D.differenceWith=e_,D.drop=t_,D.dropRight=n_,D.dropRightWhile=i_,D.dropWhile=r_,D.fill=o_,D.filter=lg,D.flatMap=dg,D.flatMapDeep=ug,D.flatMapDepth=pg,D.flatten=qp,D.flattenDeep=a_,D.flattenDepth=l_,D.flip=Ag,D.flow=My,D.flowRight=Ey,D.fromPairs=s_,D.functions=EC,D.functionsIn=zC,D.groupBy=fg,D.initial=d_,D.intersection=u_,D.intersectionBy=p_,D.intersectionWith=f_,D.invert=LC,D.invertBy=AC,D.invokeMap=hg,D.iteratee=iu,D.keyBy=_g,D.keys=pn,D.keysIn=$n,D.map=Gs,D.mapKeys=NC,D.mapValues=DC,D.matches=zy,D.matchesProperty=ky,D.memoize=qs,D.merge=OC,D.mergeWith=Cf,D.method=Ly,D.methodOf=Ay,D.mixin=ru,D.negate=Xs,D.nthArg=Ny,D.omit=IC,D.omitBy=RC,D.once=Fg,D.orderBy=gg,D.over=Dy,D.overArgs=Ng,D.overEvery=Oy,D.overSome=Iy,D.partial=Xd,D.partialRight=cf,D.partition=Cg,D.pick=PC,D.pickBy=yf,D.property=Mf,D.propertyOf=Ry,D.pull=g_,D.pullAll=Qp,D.pullAllBy=C_,D.pullAllWith=y_,D.pullAt=v_,D.range=Py,D.rangeRight=Vy,D.rearg=Dg,D.reject=wg,D.remove=w_,D.rest=Og,D.reverse=Gd,D.sampleSize=xg,D.set=BC,D.setWith=HC,D.shuffle=Tg,D.slice=b_,D.sortBy=Eg,D.sortedUniq=k_,D.sortedUniqBy=L_,D.split=dy,D.spread=Ig,D.tail=A_,D.take=F_,D.takeRight=N_,D.takeRightWhile=D_,D.takeWhile=O_,D.tap=X_,D.throttle=Rg,D.thru=js,D.toArray=mf,D.toPairs=vf,D.toPairsIn=wf,D.toPath=Uy,D.toPlainObject=_f,D.transform=WC,D.unary=Pg,D.union=I_,D.unionBy=R_,D.unionWith=P_,D.uniq=V_,D.uniqBy=B_,D.uniqWith=H_,D.unset=JC,D.unzip=Kd,D.unzipWith=Yp,D.update=UC,D.updateWith=$C,D.values=qo,D.valuesIn=jC,D.without=W_,D.words=Tf,D.wrap=Vg,D.xor=J_,D.xorBy=U_,D.xorWith=$_,D.zip=j_,D.zipObject=G_,D.zipObjectDeep=K_,D.zipWith=q_,D.entries=vf,D.entriesIn=wf,D.extend=gf,D.extendWith=Zs,ru(D,D),D.add=jy,D.attempt=Sf,D.camelCase=XC,D.capitalize=bf,D.ceil=Gy,D.clamp=GC,D.clone=Hg,D.cloneDeep=Jg,D.cloneDeepWith=Ug,D.cloneWith=Wg,D.conformsTo=$g,D.deburr=xf,D.defaultTo=Sy,D.divide=Ky,D.endsWith=QC,D.eq=Ti,D.escape=YC,D.escapeRegExp=ZC,D.every=ag,D.find=sg,D.findIndex=Gp,D.findKey=wC,D.findLast=cg,D.findLastIndex=Kp,D.findLastKey=bC,D.floor=qy,D.forEach=ef,D.forEachRight=tf,D.forIn=xC,D.forInRight=TC,D.forOwn=SC,D.forOwnRight=MC,D.get=Zd,D.gt=jg,D.gte=Gg,D.has=kC,D.hasIn=eu,D.head=Xp,D.identity=jn,D.includes=mg,D.indexOf=c_,D.inRange=KC,D.invoke=FC,D.isArguments=po,D.isArray=je,D.isArrayBuffer=Kg,D.isArrayLike=Un,D.isArrayLikeObject=Zt,D.isBoolean=qg,D.isBuffer=Rr,D.isDate=Xg,D.isElement=Qg,D.isEmpty=Yg,D.isEqual=Zg,D.isEqualWith=eC,D.isError=Qd,D.isFinite=tC,D.isFunction=pr,D.isInteger=df,D.isLength=Qs,D.isMap=uf,D.isMatch=nC,D.isMatchWith=iC,D.isNaN=rC,D.isNative=oC,D.isNil=lC,D.isNull=aC,D.isNumber=pf,D.isObject=Ut,D.isObjectLike=Kt,D.isPlainObject=ml,D.isRegExp=Yd,D.isSafeInteger=sC,D.isSet=ff,D.isString=Ys,D.isSymbol=ti,D.isTypedArray=Ko,D.isUndefined=cC,D.isWeakMap=dC,D.isWeakSet=uC,D.join=m_,D.kebabCase=ey,D.last=di,D.lastIndexOf=h_,D.lowerCase=ty,D.lowerFirst=ny,D.lt=pC,D.lte=fC,D.max=Xy,D.maxBy=Qy,D.mean=Yy,D.meanBy=Zy,D.min=e1,D.minBy=t1,D.stubArray=au,D.stubFalse=lu,D.stubObject=By,D.stubString=Hy,D.stubTrue=Wy,D.multiply=n1,D.nth=__,D.noConflict=Fy,D.noop=ou,D.now=Ks,D.pad=iy,D.padEnd=ry,D.padStart=oy,D.parseInt=ay,D.random=qC,D.reduce=yg,D.reduceRight=vg,D.repeat=ly,D.replace=sy,D.result=VC,D.round=i1,D.runInContext=s,D.sample=bg,D.size=Sg,D.snakeCase=cy,D.some=Mg,D.sortedIndex=x_,D.sortedIndexBy=T_,D.sortedIndexOf=S_,D.sortedLastIndex=M_,D.sortedLastIndexBy=E_,D.sortedLastIndexOf=z_,D.startCase=uy,D.startsWith=py,D.subtract=r1,D.sum=o1,D.sumBy=a1,D.template=fy,D.times=Jy,D.toFinite=fr,D.toInteger=Xe,D.toLength=hf,D.toLower=my,D.toNumber=ui,D.toSafeInteger=mC,D.toString=Mt,D.toUpper=hy,D.trim=_y,D.trimEnd=gy,D.trimStart=Cy,D.truncate=yy,D.unescape=vy,D.uniqueId=$y,D.upperCase=wy,D.upperFirst=tu,D.each=ef,D.eachRight=tf,D.first=Xp,ru(D,(function(){var t={};return Pi(D,function(a,f){we.call(D.prototype,f)||(t[f]=a)}),t})(),{chain:!1}),D.VERSION=g,Hn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){D[t].placeholder=D}),Hn(["drop","take"],function(t,a){lt.prototype[t]=function(f){f=f===o?1:St(Xe(f),0);var C=this.__filtered__&&!a?new lt(this):this.clone();return C.__filtered__?C.__takeCount__=cn(f,C.__takeCount__):C.__views__.push({size:cn(f,Tt),type:t+(C.__dir__<0?"Right":"")}),C},lt.prototype[t+"Right"]=function(f){return this.reverse()[t](f).reverse()}}),Hn(["filter","map","takeWhile"],function(t,a){var f=a+1,C=f==it||f==jt;lt.prototype[t]=function(z){var I=this.clone();return I.__iteratees__.push({iteratee:He(z,3),type:f}),I.__filtered__=I.__filtered__||C,I}}),Hn(["head","last"],function(t,a){var f="take"+(a?"Right":"");lt.prototype[t]=function(){return this[f](1).value()[0]}}),Hn(["initial","tail"],function(t,a){var f="drop"+(a?"":"Right");lt.prototype[t]=function(){return this.__filtered__?new lt(this):this[f](1)}}),lt.prototype.compact=function(){return this.filter(jn)},lt.prototype.find=function(t){return this.filter(t).head()},lt.prototype.findLast=function(t){return this.reverse().find(t)},lt.prototype.invokeMap=tt(function(t,a){return typeof t=="function"?new lt(this):this.map(function(f){return sl(f,t,a)})}),lt.prototype.reject=function(t){return this.filter(Xs(He(t)))},lt.prototype.slice=function(t,a){t=Xe(t);var f=this;return f.__filtered__&&(t>0||a<0)?new lt(f):(t<0?f=f.takeRight(-t):t&&(f=f.drop(t)),a!==o&&(a=Xe(a),f=a<0?f.dropRight(-a):f.take(a-t)),f)},lt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},lt.prototype.toArray=function(){return this.take(Tt)},Pi(lt.prototype,function(t,a){var f=/^(?:filter|find|map|reject)|While$/.test(a),C=/^(?:head|last)$/.test(a),z=D[C?"take"+(a=="last"?"Right":""):a],I=C||/^find/.test(a);z&&(D.prototype[a]=function(){var U=this.__wrapped__,$=C?[1]:arguments,q=U instanceof lt,re=$[0],oe=q||je(U),de=function(ot){var ut=z.apply(D,Di([ot],$));return C&&Te?ut[0]:ut};oe&&f&&typeof re=="function"&&re.length!=1&&(q=oe=!1);var Te=this.__chain__,Re=!!this.__actions__.length,We=I&&!Te,Ze=q&&!Re;if(!I&&oe){U=Ze?U:new lt(this);var Je=t.apply(U,$);return Je.__actions__.push({func:js,args:[de],thisArg:o}),new li(Je,Te)}return We&&Ze?t.apply(this,$):(Je=this.thru(de),We?C?Je.value()[0]:Je.value():Je)})}),Hn(["pop","push","shift","sort","splice","unshift"],function(t){var a=Me[t],f=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",C=/^(?:pop|shift)$/.test(t);D.prototype[t]=function(){var z=arguments;if(C&&!this.__chain__){var I=this.value();return a.apply(je(I)?I:[],z)}return this[f](function(U){return a.apply(je(U)?U:[],z)})}}),Pi(lt.prototype,function(t,a){var f=D[a];if(f){var C=f.name+"";we.call(Jo,C)||(Jo[C]=[]),Jo[C].push({name:a,func:f})}}),Jo[Vs(o,O).name]=[{name:"wrapper",func:o}],lt.prototype.clone=vh,lt.prototype.reverse=wh,lt.prototype.value=bh,D.prototype.at=Q_,D.prototype.chain=Y_,D.prototype.commit=Z_,D.prototype.next=eg,D.prototype.plant=ng,D.prototype.reverse=ig,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=rg,D.prototype.first=D.prototype.head,Vt&&(D.prototype[Vt]=tg),D},d=r();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(rn._=d,define(function(){return d})):ir?((ir.exports=d)._=d,Ja._=d):rn._=d}).call(ga)});var $m=zf((zl,Nu)=>{(function(g,e){typeof zl=="object"&&typeof Nu=="object"?Nu.exports=e():typeof define=="function"&&define.amd?define([],e):typeof zl=="object"?zl.Vditor=e():g.Vditor=e()})(zl,function(){return(()=>{var o={173:(c=>{var u=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},b=-1,N=1,M=0;u.Diff=function(m,h){return[m,h]},u.prototype.diff_main=function(m,h,T,y){typeof y>"u"&&(this.Diff_Timeout<=0?y=Number.MAX_VALUE:y=new Date().getTime()+this.Diff_Timeout*1e3);var x=y;if(m==null||h==null)throw new Error("Null input. (diff_main)");if(m==h)return m?[new u.Diff(M,m)]:[];typeof T>"u"&&(T=!0);var v=T,O=this.diff_commonPrefix(m,h),H=m.substring(0,O);m=m.substring(O),h=h.substring(O),O=this.diff_commonSuffix(m,h);var P=m.substring(m.length-O);m=m.substring(0,m.length-O),h=h.substring(0,h.length-O);var B=this.diff_compute_(m,h,v,x);return H&&B.unshift(new u.Diff(M,H)),P&&B.push(new u.Diff(M,P)),this.diff_cleanupMerge(B),B},u.prototype.diff_compute_=function(m,h,T,y){var x;if(!m)return[new u.Diff(N,h)];if(!h)return[new u.Diff(b,m)];var v=m.length>h.length?m:h,O=m.length>h.length?h:m,H=v.indexOf(O);if(H!=-1)return x=[new u.Diff(N,v.substring(0,H)),new u.Diff(M,O),new u.Diff(N,v.substring(H+O.length))],m.length>h.length&&(x[0][0]=x[2][0]=b),x;if(O.length==1)return[new u.Diff(b,m),new u.Diff(N,h)];var P=this.diff_halfMatch_(m,h);if(P){var B=P[0],w=P[1],W=P[2],ee=P[3],ie=P[4],Y=this.diff_main(B,W,T,y),me=this.diff_main(w,ee,T,y);return Y.concat([new u.Diff(M,ie)],me)}return T&&m.length>100&&h.length>100?this.diff_lineMode_(m,h,y):this.diff_bisect_(m,h,y)},u.prototype.diff_lineMode_=function(m,h,T){var y=this.diff_linesToChars_(m,h);m=y.chars1,h=y.chars2;var x=y.lineArray,v=this.diff_main(m,h,!1,T);this.diff_charsToLines_(v,x),this.diff_cleanupSemantic(v),v.push(new u.Diff(M,""));for(var O=0,H=0,P=0,B="",w="";O<v.length;){switch(v[O][0]){case N:P++,w+=v[O][1];break;case b:H++,B+=v[O][1];break;case M:if(H>=1&&P>=1){v.splice(O-H-P,H+P),O=O-H-P;for(var W=this.diff_main(B,w,!1,T),ee=W.length-1;ee>=0;ee--)v.splice(O,0,W[ee]);O=O+W.length}P=0,H=0,B="",w="";break}O++}return v.pop(),v},u.prototype.diff_bisect_=function(m,h,T){for(var y=m.length,x=h.length,v=Math.ceil((y+x)/2),O=v,H=2*v,P=new Array(H),B=new Array(H),w=0;w<H;w++)P[w]=-1,B[w]=-1;P[O+1]=0,B[O+1]=0;for(var W=y-x,ee=W%2!=0,ie=0,Y=0,me=0,ke=0,Ne=0;Ne<v&&!(new Date().getTime()>T);Ne++){for(var Ye=-Ne+ie;Ye<=Ne-Y;Ye+=2){var it=O+Ye,xt;Ye==-Ne||Ye!=Ne&&P[it-1]<P[it+1]?xt=P[it+1]:xt=P[it-1]+1;for(var jt=xt-Ye;xt<y&&jt<x&&m.charAt(xt)==h.charAt(jt);)xt++,jt++;if(P[it]=xt,xt>y)Y+=2;else if(jt>x)ie+=2;else if(ee){var ht=O+W-Ye;if(ht>=0&&ht<H&&B[ht]!=-1){var st=y-B[ht];if(xt>=st)return this.diff_bisectSplit_(m,h,xt,jt,T)}}}for(var Qt=-Ne+me;Qt<=Ne-ke;Qt+=2){var ht=O+Qt,st;Qt==-Ne||Qt!=Ne&&B[ht-1]<B[ht+1]?st=B[ht+1]:st=B[ht-1]+1;for(var an=st-Qt;st<y&&an<x&&m.charAt(y-st-1)==h.charAt(x-an-1);)st++,an++;if(B[ht]=st,st>y)ke+=2;else if(an>x)me+=2;else if(!ee){var it=O+W-Qt;if(it>=0&&it<H&&P[it]!=-1){var xt=P[it],jt=O+xt-it;if(st=y-st,xt>=st)return this.diff_bisectSplit_(m,h,xt,jt,T)}}}}return[new u.Diff(b,m),new u.Diff(N,h)]},u.prototype.diff_bisectSplit_=function(m,h,T,y,x){var v=m.substring(0,T),O=h.substring(0,y),H=m.substring(T),P=h.substring(y),B=this.diff_main(v,O,!1,x),w=this.diff_main(H,P,!1,x);return B.concat(w)},u.prototype.diff_linesToChars_=function(m,h){var T=[],y={};T[0]="";function x(P){for(var B="",w=0,W=-1,ee=T.length;W<P.length-1;){W=P.indexOf(`
`,w),W==-1&&(W=P.length-1);var ie=P.substring(w,W+1);(y.hasOwnProperty?y.hasOwnProperty(ie):y[ie]!==void 0)?B+=String.fromCharCode(y[ie]):(ee==v&&(ie=P.substring(w),W=P.length),B+=String.fromCharCode(ee),y[ie]=ee,T[ee++]=ie),w=W+1}return B}var v=4e4,O=x(m);v=65535;var H=x(h);return{chars1:O,chars2:H,lineArray:T}},u.prototype.diff_charsToLines_=function(m,h){for(var T=0;T<m.length;T++){for(var y=m[T][1],x=[],v=0;v<y.length;v++)x[v]=h[y.charCodeAt(v)];m[T][1]=x.join("")}},u.prototype.diff_commonPrefix=function(m,h){if(!m||!h||m.charAt(0)!=h.charAt(0))return 0;for(var T=0,y=Math.min(m.length,h.length),x=y,v=0;T<x;)m.substring(v,x)==h.substring(v,x)?(T=x,v=T):y=x,x=Math.floor((y-T)/2+T);return x},u.prototype.diff_commonSuffix=function(m,h){if(!m||!h||m.charAt(m.length-1)!=h.charAt(h.length-1))return 0;for(var T=0,y=Math.min(m.length,h.length),x=y,v=0;T<x;)m.substring(m.length-x,m.length-v)==h.substring(h.length-x,h.length-v)?(T=x,v=T):y=x,x=Math.floor((y-T)/2+T);return x},u.prototype.diff_commonOverlap_=function(m,h){var T=m.length,y=h.length;if(T==0||y==0)return 0;T>y?m=m.substring(T-y):T<y&&(h=h.substring(0,T));var x=Math.min(T,y);if(m==h)return x;for(var v=0,O=1;;){var H=m.substring(x-O),P=h.indexOf(H);if(P==-1)return v;O+=P,(P==0||m.substring(x-O)==h.substring(0,O))&&(v=O,O++)}},u.prototype.diff_halfMatch_=function(m,h){if(this.Diff_Timeout<=0)return null;var T=m.length>h.length?m:h,y=m.length>h.length?h:m;if(T.length<4||y.length*2<T.length)return null;var x=this;function v(Y,me,ke){for(var Ne=Y.substring(ke,ke+Math.floor(Y.length/4)),Ye=-1,it="",xt,jt,ht,st;(Ye=me.indexOf(Ne,Ye+1))!=-1;){var Qt=x.diff_commonPrefix(Y.substring(ke),me.substring(Ye)),an=x.diff_commonSuffix(Y.substring(0,ke),me.substring(0,Ye));it.length<an+Qt&&(it=me.substring(Ye-an,Ye)+me.substring(Ye,Ye+Qt),xt=Y.substring(0,ke-an),jt=Y.substring(ke+Qt),ht=me.substring(0,Ye-an),st=me.substring(Ye+Qt))}return it.length*2>=Y.length?[xt,jt,ht,st,it]:null}var O=v(T,y,Math.ceil(T.length/4)),H=v(T,y,Math.ceil(T.length/2)),P;if(!O&&!H)return null;H?O?P=O[4].length>H[4].length?O:H:P=H:P=O;var B,w,W,ee;m.length>h.length?(B=P[0],w=P[1],W=P[2],ee=P[3]):(W=P[0],ee=P[1],B=P[2],w=P[3]);var ie=P[4];return[B,w,W,ee,ie]},u.prototype.diff_cleanupSemantic=function(m){for(var h=!1,T=[],y=0,x=null,v=0,O=0,H=0,P=0,B=0;v<m.length;)m[v][0]==M?(T[y++]=v,O=P,H=B,P=0,B=0,x=m[v][1]):(m[v][0]==N?P+=m[v][1].length:B+=m[v][1].length,x&&x.length<=Math.max(O,H)&&x.length<=Math.max(P,B)&&(m.splice(T[y-1],0,new u.Diff(b,x)),m[T[y-1]+1][0]=N,y--,y--,v=y>0?T[y-1]:-1,O=0,H=0,P=0,B=0,x=null,h=!0)),v++;for(h&&this.diff_cleanupMerge(m),this.diff_cleanupSemanticLossless(m),v=1;v<m.length;){if(m[v-1][0]==b&&m[v][0]==N){var w=m[v-1][1],W=m[v][1],ee=this.diff_commonOverlap_(w,W),ie=this.diff_commonOverlap_(W,w);ee>=ie?(ee>=w.length/2||ee>=W.length/2)&&(m.splice(v,0,new u.Diff(M,W.substring(0,ee))),m[v-1][1]=w.substring(0,w.length-ee),m[v+1][1]=W.substring(ee),v++):(ie>=w.length/2||ie>=W.length/2)&&(m.splice(v,0,new u.Diff(M,w.substring(0,ie))),m[v-1][0]=N,m[v-1][1]=W.substring(0,W.length-ie),m[v+1][0]=b,m[v+1][1]=w.substring(ie),v++),v++}v++}},u.prototype.diff_cleanupSemanticLossless=function(m){function h(ie,Y){if(!ie||!Y)return 6;var me=ie.charAt(ie.length-1),ke=Y.charAt(0),Ne=me.match(u.nonAlphaNumericRegex_),Ye=ke.match(u.nonAlphaNumericRegex_),it=Ne&&me.match(u.whitespaceRegex_),xt=Ye&&ke.match(u.whitespaceRegex_),jt=it&&me.match(u.linebreakRegex_),ht=xt&&ke.match(u.linebreakRegex_),st=jt&&ie.match(u.blanklineEndRegex_),Qt=ht&&Y.match(u.blanklineStartRegex_);return st||Qt?5:jt||ht?4:Ne&&!it&&xt?3:it||xt?2:Ne||Ye?1:0}for(var T=1;T<m.length-1;){if(m[T-1][0]==M&&m[T+1][0]==M){var y=m[T-1][1],x=m[T][1],v=m[T+1][1],O=this.diff_commonSuffix(y,x);if(O){var H=x.substring(x.length-O);y=y.substring(0,y.length-O),x=H+x.substring(0,x.length-O),v=H+v}for(var P=y,B=x,w=v,W=h(y,x)+h(x,v);x.charAt(0)===v.charAt(0);){y+=x.charAt(0),x=x.substring(1)+v.charAt(0),v=v.substring(1);var ee=h(y,x)+h(x,v);ee>=W&&(W=ee,P=y,B=x,w=v)}m[T-1][1]!=P&&(P?m[T-1][1]=P:(m.splice(T-1,1),T--),m[T][1]=B,w?m[T+1][1]=w:(m.splice(T+1,1),T--))}T++}},u.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,u.whitespaceRegex_=/\s/,u.linebreakRegex_=/[\r\n]/,u.blanklineEndRegex_=/\n\r?\n$/,u.blanklineStartRegex_=/^\r?\n\r?\n/,u.prototype.diff_cleanupEfficiency=function(m){for(var h=!1,T=[],y=0,x=null,v=0,O=!1,H=!1,P=!1,B=!1;v<m.length;)m[v][0]==M?(m[v][1].length<this.Diff_EditCost&&(P||B)?(T[y++]=v,O=P,H=B,x=m[v][1]):(y=0,x=null),P=B=!1):(m[v][0]==b?B=!0:P=!0,x&&(O&&H&&P&&B||x.length<this.Diff_EditCost/2&&O+H+P+B==3)&&(m.splice(T[y-1],0,new u.Diff(b,x)),m[T[y-1]+1][0]=N,y--,x=null,O&&H?(P=B=!0,y=0):(y--,v=y>0?T[y-1]:-1,P=B=!1),h=!0)),v++;h&&this.diff_cleanupMerge(m)},u.prototype.diff_cleanupMerge=function(m){m.push(new u.Diff(M,""));for(var h=0,T=0,y=0,x="",v="",O;h<m.length;)switch(m[h][0]){case N:y++,v+=m[h][1],h++;break;case b:T++,x+=m[h][1],h++;break;case M:T+y>1?(T!==0&&y!==0&&(O=this.diff_commonPrefix(v,x),O!==0&&(h-T-y>0&&m[h-T-y-1][0]==M?m[h-T-y-1][1]+=v.substring(0,O):(m.splice(0,0,new u.Diff(M,v.substring(0,O))),h++),v=v.substring(O),x=x.substring(O)),O=this.diff_commonSuffix(v,x),O!==0&&(m[h][1]=v.substring(v.length-O)+m[h][1],v=v.substring(0,v.length-O),x=x.substring(0,x.length-O))),h-=T+y,m.splice(h,T+y),x.length&&(m.splice(h,0,new u.Diff(b,x)),h++),v.length&&(m.splice(h,0,new u.Diff(N,v)),h++),h++):h!==0&&m[h-1][0]==M?(m[h-1][1]+=m[h][1],m.splice(h,1)):h++,y=0,T=0,x="",v="";break}m[m.length-1][1]===""&&m.pop();var H=!1;for(h=1;h<m.length-1;)m[h-1][0]==M&&m[h+1][0]==M&&(m[h][1].substring(m[h][1].length-m[h-1][1].length)==m[h-1][1]?(m[h][1]=m[h-1][1]+m[h][1].substring(0,m[h][1].length-m[h-1][1].length),m[h+1][1]=m[h-1][1]+m[h+1][1],m.splice(h-1,1),H=!0):m[h][1].substring(0,m[h+1][1].length)==m[h+1][1]&&(m[h-1][1]+=m[h+1][1],m[h][1]=m[h][1].substring(m[h+1][1].length)+m[h+1][1],m.splice(h+1,1),H=!0)),h++;H&&this.diff_cleanupMerge(m)},u.prototype.diff_xIndex=function(m,h){var T=0,y=0,x=0,v=0,O;for(O=0;O<m.length&&(m[O][0]!==N&&(T+=m[O][1].length),m[O][0]!==b&&(y+=m[O][1].length),!(T>h));O++)x=T,v=y;return m.length!=O&&m[O][0]===b?v:v+(h-x)},u.prototype.diff_prettyHtml=function(m){for(var h=[],T=/&/g,y=/</g,x=/>/g,v=/\n/g,O=0;O<m.length;O++){var H=m[O][0],P=m[O][1],B=P.replace(T,"&amp;").replace(y,"&lt;").replace(x,"&gt;").replace(v,"&para;<br>");switch(H){case N:h[O]='<ins style="background:#e6ffe6;">'+B+"</ins>";break;case b:h[O]='<del style="background:#ffe6e6;">'+B+"</del>";break;case M:h[O]="<span>"+B+"</span>";break}}return h.join("")},u.prototype.diff_text1=function(m){for(var h=[],T=0;T<m.length;T++)m[T][0]!==N&&(h[T]=m[T][1]);return h.join("")},u.prototype.diff_text2=function(m){for(var h=[],T=0;T<m.length;T++)m[T][0]!==b&&(h[T]=m[T][1]);return h.join("")},u.prototype.diff_levenshtein=function(m){for(var h=0,T=0,y=0,x=0;x<m.length;x++){var v=m[x][0],O=m[x][1];switch(v){case N:T+=O.length;break;case b:y+=O.length;break;case M:h+=Math.max(T,y),T=0,y=0;break}}return h+=Math.max(T,y),h},u.prototype.diff_toDelta=function(m){for(var h=[],T=0;T<m.length;T++)switch(m[T][0]){case N:h[T]="+"+encodeURI(m[T][1]);break;case b:h[T]="-"+m[T][1].length;break;case M:h[T]="="+m[T][1].length;break}return h.join("	").replace(/%20/g," ")},u.prototype.diff_fromDelta=function(m,h){for(var T=[],y=0,x=0,v=h.split(/\t/g),O=0;O<v.length;O++){var H=v[O].substring(1);switch(v[O].charAt(0)){case"+":try{T[y++]=new u.Diff(N,decodeURI(H))}catch{throw new Error("Illegal escape in diff_fromDelta: "+H)}break;case"-":case"=":var P=parseInt(H,10);if(isNaN(P)||P<0)throw new Error("Invalid number in diff_fromDelta: "+H);var B=m.substring(x,x+=P);v[O].charAt(0)=="="?T[y++]=new u.Diff(M,B):T[y++]=new u.Diff(b,B);break;default:if(v[O])throw new Error("Invalid diff operation in diff_fromDelta: "+v[O])}}if(x!=m.length)throw new Error("Delta length ("+x+") does not equal source text length ("+m.length+").");return T},u.prototype.match_main=function(m,h,T){if(m==null||h==null||T==null)throw new Error("Null input. (match_main)");return T=Math.max(0,Math.min(T,m.length)),m==h?0:m.length?m.substring(T,T+h.length)==h?T:this.match_bitap_(m,h,T):-1},u.prototype.match_bitap_=function(m,h,T){if(h.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var y=this.match_alphabet_(h),x=this;function v(xt,jt){var ht=xt/h.length,st=Math.abs(T-jt);return x.Match_Distance?ht+st/x.Match_Distance:st?1:ht}var O=this.Match_Threshold,H=m.indexOf(h,T);H!=-1&&(O=Math.min(v(0,H),O),H=m.lastIndexOf(h,T+h.length),H!=-1&&(O=Math.min(v(0,H),O)));var P=1<<h.length-1;H=-1;for(var B,w,W=h.length+m.length,ee,ie=0;ie<h.length;ie++){for(B=0,w=W;B<w;)v(ie,T+w)<=O?B=w:W=w,w=Math.floor((W-B)/2+B);W=w;var Y=Math.max(1,T-w+1),me=Math.min(T+w,m.length)+h.length,ke=Array(me+2);ke[me+1]=(1<<ie)-1;for(var Ne=me;Ne>=Y;Ne--){var Ye=y[m.charAt(Ne-1)];if(ie===0?ke[Ne]=(ke[Ne+1]<<1|1)&Ye:ke[Ne]=(ke[Ne+1]<<1|1)&Ye|((ee[Ne+1]|ee[Ne])<<1|1)|ee[Ne+1],ke[Ne]&P){var it=v(ie,Ne-1);if(it<=O)if(O=it,H=Ne-1,H>T)Y=Math.max(1,2*T-H);else break}}if(v(ie+1,T)>O)break;ee=ke}return H},u.prototype.match_alphabet_=function(m){for(var h={},T=0;T<m.length;T++)h[m.charAt(T)]=0;for(var T=0;T<m.length;T++)h[m.charAt(T)]|=1<<m.length-T-1;return h},u.prototype.patch_addContext_=function(m,h){if(h.length!=0){if(m.start2===null)throw Error("patch not initialized");for(var T=h.substring(m.start2,m.start2+m.length1),y=0;h.indexOf(T)!=h.lastIndexOf(T)&&T.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)y+=this.Patch_Margin,T=h.substring(m.start2-y,m.start2+m.length1+y);y+=this.Patch_Margin;var x=h.substring(m.start2-y,m.start2);x&&m.diffs.unshift(new u.Diff(M,x));var v=h.substring(m.start2+m.length1,m.start2+m.length1+y);v&&m.diffs.push(new u.Diff(M,v)),m.start1-=x.length,m.start2-=x.length,m.length1+=x.length+v.length,m.length2+=x.length+v.length}},u.prototype.patch_make=function(m,h,T){var y,x;if(typeof m=="string"&&typeof h=="string"&&typeof T>"u")y=m,x=this.diff_main(y,h,!0),x.length>2&&(this.diff_cleanupSemantic(x),this.diff_cleanupEfficiency(x));else if(m&&typeof m=="object"&&typeof h>"u"&&typeof T>"u")x=m,y=this.diff_text1(x);else if(typeof m=="string"&&h&&typeof h=="object"&&typeof T>"u")y=m,x=h;else if(typeof m=="string"&&typeof h=="string"&&T&&typeof T=="object")y=m,x=T;else throw new Error("Unknown call format to patch_make.");if(x.length===0)return[];for(var v=[],O=new u.patch_obj,H=0,P=0,B=0,w=y,W=y,ee=0;ee<x.length;ee++){var ie=x[ee][0],Y=x[ee][1];switch(!H&&ie!==M&&(O.start1=P,O.start2=B),ie){case N:O.diffs[H++]=x[ee],O.length2+=Y.length,W=W.substring(0,B)+Y+W.substring(B);break;case b:O.length1+=Y.length,O.diffs[H++]=x[ee],W=W.substring(0,B)+W.substring(B+Y.length);break;case M:Y.length<=2*this.Patch_Margin&&H&&x.length!=ee+1?(O.diffs[H++]=x[ee],O.length1+=Y.length,O.length2+=Y.length):Y.length>=2*this.Patch_Margin&&H&&(this.patch_addContext_(O,w),v.push(O),O=new u.patch_obj,H=0,w=W,P=B);break}ie!==N&&(P+=Y.length),ie!==b&&(B+=Y.length)}return H&&(this.patch_addContext_(O,w),v.push(O)),v},u.prototype.patch_deepCopy=function(m){for(var h=[],T=0;T<m.length;T++){var y=m[T],x=new u.patch_obj;x.diffs=[];for(var v=0;v<y.diffs.length;v++)x.diffs[v]=new u.Diff(y.diffs[v][0],y.diffs[v][1]);x.start1=y.start1,x.start2=y.start2,x.length1=y.length1,x.length2=y.length2,h[T]=x}return h},u.prototype.patch_apply=function(m,h){if(m.length==0)return[h,[]];m=this.patch_deepCopy(m);var T=this.patch_addPadding(m);h=T+h+T,this.patch_splitMax(m);for(var y=0,x=[],v=0;v<m.length;v++){var O=m[v].start2+y,H=this.diff_text1(m[v].diffs),P,B=-1;if(H.length>this.Match_MaxBits?(P=this.match_main(h,H.substring(0,this.Match_MaxBits),O),P!=-1&&(B=this.match_main(h,H.substring(H.length-this.Match_MaxBits),O+H.length-this.Match_MaxBits),(B==-1||P>=B)&&(P=-1))):P=this.match_main(h,H,O),P==-1)x[v]=!1,y-=m[v].length2-m[v].length1;else{x[v]=!0,y=P-O;var w;if(B==-1?w=h.substring(P,P+H.length):w=h.substring(P,B+this.Match_MaxBits),H==w)h=h.substring(0,P)+this.diff_text2(m[v].diffs)+h.substring(P+H.length);else{var W=this.diff_main(H,w,!1);if(H.length>this.Match_MaxBits&&this.diff_levenshtein(W)/H.length>this.Patch_DeleteThreshold)x[v]=!1;else{this.diff_cleanupSemanticLossless(W);for(var ee=0,ie,Y=0;Y<m[v].diffs.length;Y++){var me=m[v].diffs[Y];me[0]!==M&&(ie=this.diff_xIndex(W,ee)),me[0]===N?h=h.substring(0,P+ie)+me[1]+h.substring(P+ie):me[0]===b&&(h=h.substring(0,P+ie)+h.substring(P+this.diff_xIndex(W,ee+me[1].length))),me[0]!==b&&(ee+=me[1].length)}}}}}return h=h.substring(T.length,h.length-T.length),[h,x]},u.prototype.patch_addPadding=function(m){for(var h=this.Patch_Margin,T="",y=1;y<=h;y++)T+=String.fromCharCode(y);for(var y=0;y<m.length;y++)m[y].start1+=h,m[y].start2+=h;var x=m[0],v=x.diffs;if(v.length==0||v[0][0]!=M)v.unshift(new u.Diff(M,T)),x.start1-=h,x.start2-=h,x.length1+=h,x.length2+=h;else if(h>v[0][1].length){var O=h-v[0][1].length;v[0][1]=T.substring(v[0][1].length)+v[0][1],x.start1-=O,x.start2-=O,x.length1+=O,x.length2+=O}if(x=m[m.length-1],v=x.diffs,v.length==0||v[v.length-1][0]!=M)v.push(new u.Diff(M,T)),x.length1+=h,x.length2+=h;else if(h>v[v.length-1][1].length){var O=h-v[v.length-1][1].length;v[v.length-1][1]+=T.substring(0,O),x.length1+=O,x.length2+=O}return T},u.prototype.patch_splitMax=function(m){for(var h=this.Match_MaxBits,T=0;T<m.length;T++)if(!(m[T].length1<=h)){var y=m[T];m.splice(T--,1);for(var x=y.start1,v=y.start2,O="";y.diffs.length!==0;){var H=new u.patch_obj,P=!0;for(H.start1=x-O.length,H.start2=v-O.length,O!==""&&(H.length1=H.length2=O.length,H.diffs.push(new u.Diff(M,O)));y.diffs.length!==0&&H.length1<h-this.Patch_Margin;){var B=y.diffs[0][0],w=y.diffs[0][1];B===N?(H.length2+=w.length,v+=w.length,H.diffs.push(y.diffs.shift()),P=!1):B===b&&H.diffs.length==1&&H.diffs[0][0]==M&&w.length>2*h?(H.length1+=w.length,x+=w.length,P=!1,H.diffs.push(new u.Diff(B,w)),y.diffs.shift()):(w=w.substring(0,h-H.length1-this.Patch_Margin),H.length1+=w.length,x+=w.length,B===M?(H.length2+=w.length,v+=w.length):P=!1,H.diffs.push(new u.Diff(B,w)),w==y.diffs[0][1]?y.diffs.shift():y.diffs[0][1]=y.diffs[0][1].substring(w.length))}O=this.diff_text2(H.diffs),O=O.substring(O.length-this.Patch_Margin);var W=this.diff_text1(y.diffs).substring(0,this.Patch_Margin);W!==""&&(H.length1+=W.length,H.length2+=W.length,H.diffs.length!==0&&H.diffs[H.diffs.length-1][0]===M?H.diffs[H.diffs.length-1][1]+=W:H.diffs.push(new u.Diff(M,W))),P||m.splice(++T,0,H)}}},u.prototype.patch_toText=function(m){for(var h=[],T=0;T<m.length;T++)h[T]=m[T];return h.join("")},u.prototype.patch_fromText=function(m){var h=[];if(!m)return h;for(var T=m.split(`
`),y=0,x=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;y<T.length;){var v=T[y].match(x);if(!v)throw new Error("Invalid patch string: "+T[y]);var O=new u.patch_obj;for(h.push(O),O.start1=parseInt(v[1],10),v[2]===""?(O.start1--,O.length1=1):v[2]=="0"?O.length1=0:(O.start1--,O.length1=parseInt(v[2],10)),O.start2=parseInt(v[3],10),v[4]===""?(O.start2--,O.length2=1):v[4]=="0"?O.length2=0:(O.start2--,O.length2=parseInt(v[4],10)),y++;y<T.length;){var H=T[y].charAt(0);try{var P=decodeURI(T[y].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+P)}if(H=="-")O.diffs.push(new u.Diff(b,P));else if(H=="+")O.diffs.push(new u.Diff(N,P));else if(H==" ")O.diffs.push(new u.Diff(M,P));else{if(H=="@")break;if(H!=="")throw new Error('Invalid patch mode "'+H+'" in: '+P)}y++}}return h},u.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},u.patch_obj.prototype.toString=function(){var m,h;this.length1===0?m=this.start1+",0":this.length1==1?m=this.start1+1:m=this.start1+1+","+this.length1,this.length2===0?h=this.start2+",0":this.length2==1?h=this.start2+1:h=this.start2+1+","+this.length2;for(var T=["@@ -"+m+" +"+h+` @@
`],y,x=0;x<this.diffs.length;x++){switch(this.diffs[x][0]){case N:y="+";break;case b:y="-";break;case M:y=" ";break}T[x+1]=y+encodeURI(this.diffs[x][1])+`
`}return T.join("").replace(/%20/g," ")},c.exports=u,c.exports.diff_match_patch=u,c.exports.DIFF_DELETE=b,c.exports.DIFF_INSERT=N,c.exports.DIFF_EQUAL=M}),408:((c,u,b)=>{"use strict";b.d(u,{default:()=>Xn});var N=b(135),M=b(840),m=b(775),h=b(428),T=b(325),y=b(483),x=b(999),v=function(pe){pe===void 0&&(pe=document);var rt=function(xe){var _e=document.createElement("img");_e.src=xe.getAttribute("data-src"),_e.addEventListener("load",function(){!xe.getAttribute("style")&&!xe.getAttribute("class")&&!xe.getAttribute("width")&&!xe.getAttribute("height")&&_e.naturalHeight>_e.naturalWidth&&_e.naturalWidth/_e.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&_e.naturalHeight>window.innerHeight-40&&(xe.style.height=window.innerHeight-40+"px"),xe.src=_e.src}),xe.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return pe.querySelectorAll("img").forEach(function(xe){xe.getAttribute("data-src")&&rt(xe)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),pe.querySelectorAll("img").forEach(function(xe){window.vditorImageIntersectionObserver.observe(xe)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(xe){xe.forEach(function(_e){(typeof _e.isIntersecting>"u"?_e.intersectionRatio!==0:_e.isIntersecting)&&_e.target.getAttribute("data-src")&&rt(_e.target)})}),pe.querySelectorAll("img").forEach(function(xe){window.vditorImageIntersectionObserver.observe(xe)}))},O=b(472),H=b(280),P=b(637),B=b(825),w=b(11),W=b(194),ee=b(436),ie=b(229),Y=b(145),me=b(538),ke=b(413),Ne=b(106),Ye=b(673),it=function(pe){document.querySelectorAll(".vditor-anchor").forEach(function(rt){pe===1&&rt.classList.add("vditor-anchor--left"),rt.onclick=function(){var xe=rt.getAttribute("href").substr(1),_e=document.getElementById("vditorAnchor-"+xe).offsetTop;document.querySelector("html").scrollTop=_e}}),window.onhashchange=function(){var rt=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));rt&&(document.querySelector("html").scrollTop=rt.offsetTop)}},xt=b(214),jt=b(810),ht=function(pe,rt){if(rt===void 0&&(rt="zh_CN"),!(typeof speechSynthesis>"u"||typeof SpeechSynthesisUtterance>"u")){var xe=function(){var Wt=speechSynthesis.getVoices(),Be,mt;return Wt.forEach(function(Cn){Cn.lang===rt.replace("_","-")&&(Be=Cn),Cn.default&&(mt=Cn)}),Be||(Be=mt),Be},_e='<svg><use xlink:href="#vditor-icon-play"></use></svg>',Ft='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(_e='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',Ft='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var Ae=document.querySelector(".vditor-speech");Ae||(Ae=document.createElement("button"),Ae.className="vditor-speech",pe.insertAdjacentElement("beforeend",Ae),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=xe));var Ht=xe(),Ke=new SpeechSynthesisUtterance;Ke.voice=Ht,Ke.onend=Ke.onerror=function(){Ae.style.display="none",speechSynthesis.cancel(),Ae.classList.remove("vditor-speech--current"),Ae.innerHTML=_e},pe.addEventListener(window.ontouchstart!==void 0?"touchend":"click",function(Wt){var Be=Wt.target;if(Be.classList.contains("vditor-speech")||Be.parentElement.classList.contains("vditor-speech")){Ae.classList.contains("vditor-speech--current")?speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),Ae.innerHTML=Ft):(speechSynthesis.pause(),Ae.innerHTML=_e)):(Ke.text=Ae.getAttribute("data-text"),speechSynthesis.speak(Ke),Ae.classList.add("vditor-speech--current"),Ae.innerHTML=Ft),(0,jt.Hc)(window.vditorSpeechRange),pe.focus();return}if(Ae.style.display="none",speechSynthesis.cancel(),Ae.classList.remove("vditor-speech--current"),Ae.innerHTML=_e,getSelection().rangeCount!==0){var mt=getSelection().getRangeAt(0),Cn=mt.toString().trim();if(Cn){window.vditorSpeechRange=mt.cloneRange();var Rn=mt.getBoundingClientRect();Ae.innerHTML=_e,Ae.style.display="block",Ae.style.top=Rn.top+Rn.height+document.querySelector("html").scrollTop-20+"px",window.ontouchstart!==void 0?Ae.style.left=Wt.changedTouches[Wt.changedTouches.length-1].pageX+2+"px":Ae.style.left=Wt.clientX+2+"px",Ae.setAttribute("data-text",Cn)}}})}},st=function(pe,rt,xe,_e){function Ft(Ae){return Ae instanceof xe?Ae:new xe(function(Ht){Ht(Ae)})}return new(xe||(xe=Promise))(function(Ae,Ht){function Ke(mt){try{Be(_e.next(mt))}catch(Cn){Ht(Cn)}}function Wt(mt){try{Be(_e.throw(mt))}catch(Cn){Ht(Cn)}}function Be(mt){mt.done?Ae(mt.value):Ft(mt.value).then(Ke,Wt)}Be((_e=_e.apply(pe,rt||[])).next())})},Qt=function(pe,rt){var xe={label:0,sent:function(){if(Ae[0]&1)throw Ae[1];return Ae[1]},trys:[],ops:[]},_e,Ft,Ae,Ht;return Ht={next:Ke(0),throw:Ke(1),return:Ke(2)},typeof Symbol=="function"&&(Ht[Symbol.iterator]=function(){return this}),Ht;function Ke(Be){return function(mt){return Wt([Be,mt])}}function Wt(Be){if(_e)throw new TypeError("Generator is already executing.");for(;Ht&&(Ht=0,Be[0]&&(xe=0)),xe;)try{if(_e=1,Ft&&(Ae=Be[0]&2?Ft.return:Be[0]?Ft.throw||((Ae=Ft.return)&&Ae.call(Ft),0):Ft.next)&&!(Ae=Ae.call(Ft,Be[1])).done)return Ae;switch(Ft=0,Ae&&(Be=[Be[0]&2,Ae.value]),Be[0]){case 0:case 1:Ae=Be;break;case 4:return xe.label++,{value:Be[1],done:!1};case 5:xe.label++,Ft=Be[1],Be=[0];continue;case 7:Be=xe.ops.pop(),xe.trys.pop();continue;default:if(Ae=xe.trys,!(Ae=Ae.length>0&&Ae[Ae.length-1])&&(Be[0]===6||Be[0]===2)){xe=0;continue}if(Be[0]===3&&(!Ae||Be[1]>Ae[0]&&Be[1]<Ae[3])){xe.label=Be[1];break}if(Be[0]===6&&xe.label<Ae[1]){xe.label=Ae[1],Ae=Be;break}if(Ae&&xe.label<Ae[2]){xe.label=Ae[2],xe.ops.push(Be);break}Ae[2]&&xe.ops.pop(),xe.trys.pop();continue}Be=rt.call(pe,xe)}catch(mt){Be=[6,mt],Ft=0}finally{_e=Ae=0}if(Be[0]&5)throw Be[1];return{value:Be[0]?Be[1]:void 0,done:!0}}},an=function(pe){var rt,xe={anchor:0,cdn:Y.g.CDN,customEmoji:{},emojiPath:"".concat(Y.g.CDN,"/dist/images/emoji"),hljs:Y.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:Y.g.MARKDOWN_OPTIONS,math:Y.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},render:{media:{enable:!0}},theme:Y.g.THEME_OPTIONS};return pe.cdn&&(!((rt=pe.theme)===null||rt===void 0)&&rt.path||(xe.theme.path="".concat(pe.cdn,"/dist/css/content-theme")),pe.emojiPath||(xe.emojiPath="".concat(pe.cdn,"/dist/images/emoji"))),(0,Ye.T)(xe,pe)},Tt=function(pe,rt){var xe=an(rt);return(0,ke.G)("".concat(xe.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){var _e=(0,xt.X)({autoSpace:xe.markdown.autoSpace,gfmAutoLink:xe.markdown.gfmAutoLink,codeBlockPreview:xe.markdown.codeBlockPreview,emojiSite:xe.emojiPath,emojis:xe.customEmoji,fixTermTypo:xe.markdown.fixTermTypo,footnotes:xe.markdown.footnotes,headingAnchor:xe.anchor!==0,inlineMathDigit:xe.math.inlineDigit,lazyLoadImage:xe.lazyLoadImage,linkBase:xe.markdown.linkBase,linkPrefix:xe.markdown.linkPrefix,listStyle:xe.markdown.listStyle,mark:xe.markdown.mark,mathBlockPreview:xe.markdown.mathBlockPreview,paragraphBeginningSpace:xe.markdown.paragraphBeginningSpace,sanitize:xe.markdown.sanitize,toc:xe.markdown.toc});return rt?.renderers&&_e.SetJSRenderers({renderers:{Md2HTML:rt.renderers}}),_e.SetHeadingID(!0),_e.Md2HTML(pe)})},Z=function(pe,rt,xe){return st(void 0,void 0,void 0,function(){var _e,Ft,Ae,Ht;return Qt(this,function(Ke){switch(Ke.label){case 0:return _e=an(xe),[4,Tt(rt,_e)];case 1:if(Ft=Ke.sent(),_e.transform&&(Ft=_e.transform(Ft)),pe.innerHTML=Ft,pe.classList.add("vditor-reset"),_e.i18n)return[3,5];if(["de_DE","en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(_e.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return Ae="vditorI18nScript",Ht=Ae+_e.lang,document.querySelectorAll('head script[id^="'.concat(Ae,'"]')).forEach(function(Wt){Wt.id!==Ht&&document.head.removeChild(Wt)}),[4,(0,ke.G)("".concat(_e.cdn,"/dist/js/i18n/").concat(_e.lang,".js"),Ht)];case 3:Ke.sent(),Ke.label=4;case 4:return[3,6];case 5:window.VditorI18n=_e.i18n,Ke.label=6;case 6:return _e.icon?[4,(0,ke.G)("".concat(_e.cdn,"/dist/js/icons/").concat(_e.icon,".js"),"vditorIconScript")]:[3,8];case 7:Ke.sent(),Ke.label=8;case 8:return(0,me.Z)(_e.theme.current,_e.theme.path),_e.anchor===1&&pe.classList.add("vditor-reset--anchor"),(0,h.O)(pe,_e.hljs),(0,x.s)(_e.hljs,pe,_e.cdn),(0,O.H)(pe,{cdn:_e.cdn,math:_e.math}),(0,P.i)(pe,_e.cdn,_e.mode),(0,B.J)(pe,_e.cdn,_e.mode),(0,w.K)(pe,_e.cdn),(0,T.P)(pe,_e.cdn),(0,y.v)(pe,_e.cdn),(0,m.p)(pe,_e.cdn,_e.mode),(0,W.P)(pe,_e.cdn,_e.mode),(0,ie.B)(pe,_e.cdn),(0,N.Q)(pe,_e.cdn),_e.render.media.enable&&(0,H.Y)(pe),_e.speech.enable&&ht(pe),_e.anchor!==0&&it(_e.anchor),_e.after&&_e.after(),_e.lazyLoadImage&&v(pe),pe.addEventListener("click",function(Wt){var Be=(0,Ne.lG)(Wt.target,"SPAN");if(Be&&(0,Ne.fb)(Be,"vditor-toc")){var mt=pe.querySelector("#"+Be.getAttribute("data-target-id"));mt&&window.scrollTo(window.scrollX,mt.offsetTop);return}}),[2]}})})},oi=b(190),wo=b(580),Ci=(function(){function pe(){}return pe.adapterRender=M,pe.previewImage=oi.E,pe.codeRender=h.O,pe.graphvizRender=y.v,pe.highlightRender=x.s,pe.mathRender=O.H,pe.mermaidRender=P.i,pe.SMILESRender=B.J,pe.markmapRender=w.K,pe.flowchartRender=T.P,pe.chartRender=m.p,pe.abcRender=N.Q,pe.mindmapRender=W.P,pe.plantumlRender=ie.B,pe.outlineRender=ee.k,pe.mediaRender=H.Y,pe.speechRender=ht,pe.lazyLoadImageRender=v,pe.md2html=Tt,pe.preview=Z,pe.setCodeTheme=wo.Y,pe.setContentTheme=me.Z,pe})();let Xn=Ci}),145:((c,u,b)=>{"use strict";b.d(u,{H:()=>N,g:()=>M});var N="3.11.1",M=(function(){function m(){}return m.ZWSP="\u200B",m.DROP_EDITOR="application/editor",m.MOBILE_WIDTH=520,m.CLASS_MENU_DISABLED="vditor-menu--disabled",m.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],m.CODE_THEME=["a11y-dark","agate","an-old-hope","androidstudio","arta","atom-one-dark","atom-one-dark-reasonable","base16/3024","base16/apathy","base16/apprentice","base16/ashes","base16/atelier-cave","base16/atelier-dune","base16/atelier-estuary","base16/atelier-forest","base16/atelier-heath","base16/atelier-lakeside","base16/atelier-plateau","base16/atelier-savanna","base16/atelier-seaside","base16/atelier-sulphurpool","base16/atlas","base16/bespin","base16/black-metal","base16/black-metal-bathory","base16/black-metal-burzum","base16/black-metal-dark-funeral","base16/black-metal-gorgoroth","base16/black-metal-immortal","base16/black-metal-khold","base16/black-metal-marduk","base16/black-metal-mayhem","base16/black-metal-nile","base16/black-metal-venom","base16/brewer","base16/bright","base16/brogrammer","base16/brush-trees-dark","base16/chalk","base16/circus","base16/classic-dark","base16/codeschool","base16/colors","base16/danqing","base16/darcula","base16/dark-violet","base16/darkmoss","base16/darktooth","base16/decaf","base16/default-dark","base16/dracula","base16/edge-dark","base16/eighties","base16/embers","base16/equilibrium-dark","base16/equilibrium-gray-dark","base16/espresso","base16/eva","base16/eva-dim","base16/flat","base16/framer","base16/gigavolt","base16/google-dark","base16/grayscale-dark","base16/green-screen","base16/gruvbox-dark-hard","base16/gruvbox-dark-medium","base16/gruvbox-dark-pale","base16/gruvbox-dark-soft","base16/hardcore","base16/harmonic16-dark","base16/heetch-dark","base16/helios","base16/hopscotch","base16/horizon-dark","base16/humanoid-dark","base16/ia-dark","base16/icy-dark","base16/ir-black","base16/isotope","base16/kimber","base16/london-tube","base16/macintosh","base16/marrakesh","base16/materia","base16/material","base16/material-darker","base16/material-palenight","base16/material-vivid","base16/mellow-purple","base16/mocha","base16/monokai","base16/nebula","base16/nord","base16/nova","base16/ocean","base16/oceanicnext","base16/onedark","base16/outrun-dark","base16/papercolor-dark","base16/paraiso","base16/pasque","base16/phd","base16/pico","base16/pop","base16/porple","base16/qualia","base16/railscasts","base16/rebecca","base16/ros-pine","base16/ros-pine-moon","base16/sandcastle","base16/seti-ui","base16/silk-dark","base16/snazzy","base16/solar-flare","base16/solarized-dark","base16/spacemacs","base16/summercamp","base16/summerfruit-dark","base16/synth-midnight-terminal-dark","base16/tango","base16/tender","base16/tomorrow-night","base16/twilight","base16/unikitty-dark","base16/vulcan","base16/windows-10","base16/windows-95","base16/windows-high-contrast","base16/windows-nt","base16/woodland","base16/xcode-dusk","base16/zenburn","codepen-embed","dark","devibeans","far","felipec","github-dark","github-dark-dimmed","gml","gradient-dark","hybrid","ir-black","isbl-editor-dark","kimbie-dark","lioshi","monokai","monokai-sublime","night-owl","nnfx-dark","nord","obsidian","panda-syntax-dark","paraiso-dark","pojoaque","qtcreator-dark","rainbow","shades-of-purple","srcery","stackoverflow-dark","sunburst","tomorrow-night-blue","tomorrow-night-bright","tokyo-night-dark","vs2015","xt256","ant-design","a11y-light","arduino-light","ascetic","atom-one-light","base16/atelier-cave-light","base16/atelier-dune-light","base16/atelier-estuary-light","base16/atelier-forest-light","base16/atelier-heath-light","base16/atelier-lakeside-light","base16/atelier-plateau-light","base16/atelier-savanna-light","base16/atelier-seaside-light","base16/atelier-sulphurpool-light","base16/brush-trees","base16/classic-light","base16/cupcake","base16/cupertino","base16/default-light","base16/dirtysea","base16/edge-light","base16/equilibrium-gray-light","base16/equilibrium-light","base16/fruit-soda","base16/github","base16/google-light","base16/grayscale-light","base16/gruvbox-light-hard","base16/gruvbox-light-medium","base16/gruvbox-light-soft","base16/harmonic16-light","base16/heetch-light","base16/humanoid-light","base16/horizon-light","base16/ia-light","base16/material-lighter","base16/mexico-light","base16/one-light","base16/papercolor-light","base16/ros-pine-dawn","base16/sagelight","base16/shapeshifter","base16/silk-light","base16/solar-flare-light","base16/solarized-light","base16/summerfruit-light","base16/synth-midnight-terminal-light","base16/tomorrow","base16/unikitty-light","base16/windows-10-light","base16/windows-95-light","base16/windows-high-contrast-light","brown-paper","base16/windows-nt-light","color-brewer","docco","foundation","github","googlecode","gradient-light","grayscale","idea","intellij-light","isbl-editor-light","kimbie-light","lightfair","magula","mono-blue","nnfx-light","panda-syntax-light","paraiso-light","purebasic","qtcreator-light","routeros","school-book","stackoverflow-light","tokyo-night-light","vs","xcode","default"],m.ALIAS_CODE_LANGUAGES=["abc","plantuml","mermaid","flowchart","echarts","mindmap","graphviz","math","markmap","smiles","js","ts","html","toml","c#","bat"],m.CDN="https://unpkg.com/vditor@".concat("3.11.1"),m.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},m.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},m.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},m.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:"".concat(m.CDN,"/dist/css/content-theme")},m})()}),825:((c,u,b)=>{"use strict";b.d(u,{J:()=>T});var N=b(145),M=b(413),m=b(840),h=b(494),T=function(y,x,v){y===void 0&&(y=document),x===void 0&&(x=N.g.CDN);var O=m.SMILESRenderAdapter.getElements(y);O.length>0&&(0,M.G)("".concat(x,"/dist/js/smiles-drawer/smiles-drawer.min.js?v=2.1.7"),"vditorAbcjsScript").then(function(){var H=new SmiDrawer({},{});O.forEach(function(P){var B=m.SMILESRenderAdapter.getCode(P).trim();if(!(P.getAttribute("data-processed")==="true"||B.trim()==="")){var w="smiles"+(0,h.Wb)();P.innerHTML='<svg id="'.concat(w,'"></svg>'),H.draw(B,"#"+w,v==="dark"?"dark":void 0),P.setAttribute("data-processed","true")}})})}}),135:((c,u,b)=>{"use strict";b.d(u,{Q:()=>h});var N=b(145),M=b(413),m=b(840),h=function(T,y){T===void 0&&(T=document),y===void 0&&(y=N.g.CDN);var x=m.abcRenderAdapter.getElements(T);x.length>0&&(0,M.G)("".concat(y,"/dist/js/abcjs/abcjs_basic.min.js"),"vditorAbcjsScript").then(function(){x.forEach(function(v){v.parentElement.classList.contains("vditor-wysiwyg__pre")||v.parentElement.classList.contains("vditor-ir__marker--pre")||v.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(v,m.abcRenderAdapter.getCode(v).trim()),v.style.overflowX="auto",v.setAttribute("data-processed","true"))})})}}),840:((c,u,b)=>{"use strict";b.r(u),b.d(u,{mathRenderAdapter:()=>N,SMILESRenderAdapter:()=>M,mermaidRenderAdapter:()=>m,markmapRenderAdapter:()=>h,mindmapRenderAdapter:()=>T,chartRenderAdapter:()=>y,abcRenderAdapter:()=>x,graphvizRenderAdapter:()=>v,flowchartRenderAdapter:()=>O,plantumlRenderAdapter:()=>H});var N={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-math")}},M={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-smiles")}},m={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-mermaid")}},h={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-markmap")}},T={getCode:function(P){return P.getAttribute("data-code")},getElements:function(P){return P.querySelectorAll(".language-mindmap")}},y={getCode:function(P){return P.innerText},getElements:function(P){return P.querySelectorAll(".language-echarts")}},x={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-abc")}},v={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-graphviz")}},O={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-flowchart")}},H={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-plantuml")}}}),775:((c,u,b)=>{"use strict";b.d(u,{p:()=>x});var N=b(145),M=b(413),m=b(840),h=b(494),T=function(v,O,H,P){function B(w){return w instanceof H?w:new H(function(W){W(w)})}return new(H||(H=Promise))(function(w,W){function ee(me){try{Y(P.next(me))}catch(ke){W(ke)}}function ie(me){try{Y(P.throw(me))}catch(ke){W(ke)}}function Y(me){me.done?w(me.value):B(me.value).then(ee,ie)}Y((P=P.apply(v,O||[])).next())})},y=function(v,O){var H={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},P,B,w,W;return W={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function ee(Y){return function(me){return ie([Y,me])}}function ie(Y){if(P)throw new TypeError("Generator is already executing.");for(;W&&(W=0,Y[0]&&(H=0)),H;)try{if(P=1,B&&(w=Y[0]&2?B.return:Y[0]?B.throw||((w=B.return)&&w.call(B),0):B.next)&&!(w=w.call(B,Y[1])).done)return w;switch(B=0,w&&(Y=[Y[0]&2,w.value]),Y[0]){case 0:case 1:w=Y;break;case 4:return H.label++,{value:Y[1],done:!1};case 5:H.label++,B=Y[1],Y=[0];continue;case 7:Y=H.ops.pop(),H.trys.pop();continue;default:if(w=H.trys,!(w=w.length>0&&w[w.length-1])&&(Y[0]===6||Y[0]===2)){H=0;continue}if(Y[0]===3&&(!w||Y[1]>w[0]&&Y[1]<w[3])){H.label=Y[1];break}if(Y[0]===6&&H.label<w[1]){H.label=w[1],w=Y;break}if(w&&H.label<w[2]){H.label=w[2],H.ops.push(Y);break}w[2]&&H.ops.pop(),H.trys.pop();continue}Y=O.call(v,H)}catch(me){Y=[6,me],B=0}finally{P=w=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}},x=function(v,O,H){v===void 0&&(v=document),O===void 0&&(O=N.g.CDN);var P=m.chartRenderAdapter.getElements(v);P.length>0&&(0,M.G)("".concat(O,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){P.forEach(function(B){return T(void 0,void 0,void 0,function(){var w,W,ee;return y(this,function(ie){switch(ie.label){case 0:if(B.parentElement.classList.contains("vditor-wysiwyg__pre")||B.parentElement.classList.contains("vditor-ir__marker--pre"))return[2];if(w=m.chartRenderAdapter.getCode(B).trim(),!w)return[2];ie.label=1;case 1:return ie.trys.push([1,3,,4]),B.getAttribute("data-processed")==="true"?[2]:[4,(0,h.Qf)(w)];case 2:return W=ie.sent(),echarts.init(B,H==="dark"?"dark":void 0).setOption(W),B.setAttribute("data-processed","true"),[3,4];case 3:return ee=ie.sent(),B.className="vditor-reset--error",B.innerHTML="echarts render error: <br>".concat(ee),[3,4];case 4:return[2]}})})})})}}),428:((c,u,b)=>{"use strict";b.d(u,{O:()=>m});var N=b(105),M=b(145),m=function(h,T){Array.from(h.querySelectorAll("pre > code")).filter(function(y,x){return!(y.parentElement.classList.contains("vditor-wysiwyg__pre")||y.parentElement.classList.contains("vditor-ir__marker--pre")||y.classList.contains("language-mermaid")||y.classList.contains("language-flowchart")||y.classList.contains("language-echarts")||y.classList.contains("language-mindmap")||y.classList.contains("language-plantuml")||y.classList.contains("language-markmap")||y.classList.contains("language-abc")||y.classList.contains("language-graphviz")||y.classList.contains("language-math")||y.classList.contains("language-smiles")||y.style.maxHeight.indexOf("px")>-1||h.classList.contains("vditor-preview")&&x>5)}).forEach(function(y){var x,v,O,H=y.innerText;if(y.classList.contains("highlight-chroma")){var P=y.cloneNode(!0);P.querySelectorAll(".highlight-ln").forEach(function(ee){ee.remove()}),H=P.innerText}else H.endsWith(`
`)&&(H=H.substr(0,H.length-1));var B='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(B='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var w=document.createElement("div");w.className="vditor-copy",w.innerHTML='<span aria-label="'.concat(((x=window.VditorI18n)===null||x===void 0?void 0:x.copy)||"\u590D\u5236",`"
onmouseover="this.setAttribute('aria-label', '`).concat(((v=window.VditorI18n)===null||v===void 0?void 0:v.copy)||"\u590D\u5236",`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="event.stopPropagation();this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`).concat(((O=window.VditorI18n)===null||O===void 0?void 0:O.copied)||"\u5DF2\u590D\u5236",`');this.previousElementSibling.blur()">`).concat(B,"</span>");var W=document.createElement("textarea");W.value=(0,N.X)(H),w.insertAdjacentElement("afterbegin",W),T&&T.renderMenu&&T.renderMenu(y,w),y.before(w),y.style.maxHeight=window.outerHeight-40+"px",y.insertAdjacentHTML("afterend",'<span style="position: absolute">'.concat(M.g.ZWSP,"</span>"))})}}),325:((c,u,b)=>{"use strict";b.d(u,{P:()=>h});var N=b(145),M=b(413),m=b(840),h=function(T,y){y===void 0&&(y=N.g.CDN);var x=m.flowchartRenderAdapter.getElements(T);x.length!==0&&(0,M.G)("".concat(y,"/dist/js/flowchart.js/flowchart.min.js"),"vditorFlowchartScript").then(function(){x.forEach(function(v){if(v.getAttribute("data-processed")!=="true"){var O=flowchart.parse(m.flowchartRenderAdapter.getCode(v));v.innerHTML="",O.drawSVG(v),v.setAttribute("data-processed","true")}})})}}),483:((c,u,b)=>{"use strict";b.d(u,{v:()=>h});var N=b(145),M=b(413),m=b(840),h=function(T,y){y===void 0&&(y=N.g.CDN);var x=m.graphvizRenderAdapter.getElements(T);x.length!==0&&(0,M.G)("".concat(y,"/dist/js/graphviz/viz.js"),"vditorGraphVizScript").then(function(){x.forEach(function(v){var O=m.graphvizRenderAdapter.getCode(v);if(!(v.parentElement.classList.contains("vditor-wysiwyg__pre")||v.parentElement.classList.contains("vditor-ir__marker--pre"))&&!(v.getAttribute("data-processed")==="true"||O.trim()==="")){try{var H=new Blob(["importScripts('".concat(document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js"),"');")],{type:"application/javascript"}),P=window.URL||window.webkitURL,B=P.createObjectURL(H),w=new Worker(B);new Viz({worker:w}).renderSVGElement(O).then(function(W){v.innerHTML=W.outerHTML}).catch(function(W){v.innerHTML="graphviz render error: <br>".concat(W),v.className="vditor-reset--error"})}catch(W){console.error("graphviz error",W)}v.setAttribute("data-processed","true")}})})}}),999:((c,u,b)=>{"use strict";b.d(u,{s:()=>h});var N=b(145),M=b(413),m=b(290),h=function(T,y,x){y===void 0&&(y=document),x===void 0&&(x=N.g.CDN);var v=T.style;N.g.CODE_THEME.includes(v)||(v="github");var O=document.getElementById("vditorHljsStyle"),H="".concat(x,"/dist/js/highlight.js/styles/").concat(v,".min.css");if(O&&O.getAttribute("href")!==H&&O.remove(),(0,m.c)("".concat(x,"/dist/js/highlight.js/styles/").concat(v,".min.css"),"vditorHljsStyle"),T.enable!==!1){var P=y.querySelectorAll("pre > code");P.length!==0&&(0,M.G)("".concat(x,"/dist/js/highlight.js/highlight.min.js?v=11.7.0"),"vditorHljsScript").then(function(){(0,M.G)("".concat(x,"/dist/js/highlight.js/third-languages.js?v=1.0.1"),"vditorHljsThirdScript").then(function(){y.querySelectorAll("pre > code").forEach(function(B){if(!(B.parentElement.classList.contains("vditor-ir__marker--pre")||B.parentElement.classList.contains("vditor-wysiwyg__pre"))&&!(B.classList.contains("language-mermaid")||B.classList.contains("language-flowchart")||B.classList.contains("language-echarts")||B.classList.contains("language-mindmap")||B.classList.contains("language-plantuml")||B.classList.contains("language-smiles")||B.classList.contains("language-abc")||B.classList.contains("language-graphviz")||B.classList.contains("language-math"))){T.defaultLang!==""&&B.className.indexOf("language-")===-1&&B.classList.add("language-"+T.defaultLang);var w=B.className.replace("language-","");if(window.hljs.getLanguage(w)||(w="plaintext"),B.innerHTML=window.hljs.highlight(B.textContent,{language:w,ignoreIllegals:!0}).value,B.classList.add("hljs"),!!T.lineNumber){B.classList.add("vditor-linenumber");var W=B.querySelector(".vditor-linenumber__temp");W||(W=document.createElement("div"),W.className="vditor-linenumber__temp",B.insertAdjacentElement("beforeend",W));var ee=getComputedStyle(B).whiteSpace,ie=!1;(ee==="pre-wrap"||ee==="pre-line")&&(ie=!0);var Y="",me=B.textContent.split(/\r\n|\r|\n/g);me.pop(),me.map(function(ke){var Ne="";ie&&(W.textContent=ke||`
`,Ne=' style="height:'.concat(W.getBoundingClientRect().height,'px"')),Y+="<span".concat(Ne,"></span>")}),W.style.display="none",Y='<span class="vditor-linenumber__rows">'.concat(Y,"</span>"),B.insertAdjacentHTML("beforeend",Y)}}})})})}}}),11:((c,u,b)=>{"use strict";b.d(u,{K:()=>x});var N=b(145),M=b(413),m=b(840),h={},T=function(v,O){var H=v.transform(O),P=Object.keys(H.features).filter(function(ie){return!h[ie]});P.forEach(function(ie){h[ie]=!0});var B=v.getAssets(P),w=B.styles,W=B.scripts,ee=window.markmap;return w&&ee.loadCSS(w),W&&ee.loadJS(W),H},y=function(v,O){var H=window.markmap,P=H.Transformer,B=H.Markmap,w=H.deriveOptions,W=H.globalCSS,ee=new P;v.innerHTML='<svg style="width:100%"></svg>';var ie=v.firstChild,Y=B.create(ie,null),me=T(ee,O),ke=me.root,Ne=me.frontmatter,Ye=Ne?.markmap,it=w(Ye);Y.setData(ke,it),Y.fit()},x=function(v,O){v===void 0&&(v=document),O===void 0&&(O=N.g.CDN);var H=m.markmapRenderAdapter.getElements(v);H.length!==0&&(0,M.G)("".concat(O,"/dist/js/markmap/markmap.min.js"),"vditorMarkerScript").then(function(){H.forEach(function(P){var B=m.markmapRenderAdapter.getCode(P);if(!(P.getAttribute("data-processed")==="true"||B.trim()==="")){var w=document.createElement("div");w.className="language-markmap",P.parentNode.appendChild(w),y(w,B),P.parentNode.childNodes[0].nodeName=="CODE"&&P.parentNode.removeChild(P.parentNode.childNodes[0])}})})}}),472:((c,u,b)=>{"use strict";b.d(u,{H:()=>y});var N=b(145),M=b(413),m=b(290),h=b(105),T=b(840),y=function(x,v){x===void 0&&(x=document);var O=T.mathRenderAdapter.getElements(x);if(O.length!==0){var H={cdn:N.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(v&&v.math&&(v.math=Object.assign({},H.math,v.math)),v=Object.assign({},H,v),v.math.engine==="KaTeX")(0,m.c)("".concat(v.cdn,"/dist/js/katex/katex.min.css?v=0.16.9"),"vditorKatexStyle"),(0,M.G)("".concat(v.cdn,"/dist/js/katex/katex.min.js?v=0.16.9"),"vditorKatexScript").then(function(){(0,M.G)("".concat(v.cdn,"/dist/js/katex/mhchem.min.js?v=0.16.9"),"vditorKatexChemScript").then(function(){O.forEach(function(w){if(!(w.parentElement.classList.contains("vditor-wysiwyg__pre")||w.parentElement.classList.contains("vditor-ir__marker--pre"))&&!w.getAttribute("data-math")){var W=(0,h.X)(T.mathRenderAdapter.getCode(w));w.setAttribute("data-math",W);try{w.innerHTML=katex.renderToString(W,{displayMode:w.tagName==="DIV",output:"html",macros:v.math.macros})}catch(ee){w.innerHTML=ee.message,w.className="language-math vditor-reset--error"}w.addEventListener("copy",function(ee){ee.stopPropagation(),ee.preventDefault();var ie=ee.currentTarget.closest(".language-math");ee.clipboardData.setData("text/html",ie.innerHTML),ee.clipboardData.setData("text/plain",ie.getAttribute("data-math"))})}})})});else if(v.math.engine==="MathJax"){var P=function(w){if(w.length!==0){var W=0,ee=w[w.length-1],ie=function(){var Y=w[W++];Y===ee?Y():Y(ie)};ie()}};window.MathJax||(window.MathJax={loader:{paths:{mathjax:"".concat(v.cdn,"/dist/js/mathjax")}},startup:{typeset:!1},tex:{macros:v.math.macros}},Object.assign(window.MathJax,v.math.mathJaxOptions)),(0,M.J)("".concat(v.cdn,"/dist/js/mathjax/tex-svg-full.js"),"protyleMathJaxScript");var B=function(w,W){var ee=(0,h.X)(w.textContent).trim(),ie=window.MathJax.getMetricsFor(w);ie.display=w.tagName==="DIV",window.MathJax.tex2svgPromise(ee,ie).then(function(Y){w.innerHTML="",w.setAttribute("data-math",ee),w.append(Y),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var me=Y.querySelector('[data-mml-node="merror"]');me&&me.textContent.trim()!==""&&(w.innerHTML=me.textContent.trim(),w.className="vditor-reset--error"),W&&W()})};window.MathJax.startup.promise.then(function(){for(var w=[],W=function(ie){var Y=O[ie];!Y.parentElement.classList.contains("vditor-wysiwyg__pre")&&!Y.parentElement.classList.contains("vditor-ir__marker--pre")&&!Y.getAttribute("data-math")&&(0,h.X)(Y.textContent).trim()&&w.push(function(me){ie===O.length-1?B(Y):B(Y,me)})},ee=0;ee<O.length;ee++)W(ee);P(w)})}}}}),280:((c,u,b)=>{"use strict";b.d(u,{Y:()=>T});var N=b(494),M=function(y,x){y.insertAdjacentHTML("afterend",'<video controls="controls" src="'.concat(x,'"></video>')),y.remove()},m=function(y,x){y.insertAdjacentHTML("afterend",'<audio controls="controls" src="'.concat(x,'"></audio>')),y.remove()},h=function(y,x){var v=x.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),O=x.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),H=x.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),P=x.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),B=x.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),w=x.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),W=x.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),ee=x.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);if(v&&v[1].length===11)y.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'.concat(v[1]+(v[2]?"?start="+v[2]:""),'"></iframe>')),y.remove();else if(O&&O[1])y.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'.concat(O[1],'"></iframe>')),y.remove();else if(H&&H[1])y.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='.concat(H[1],'"></iframe>')),y.remove();else if(P&&P[1])y.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`.concat(P[1],'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>')),y.remove();else if(B&&B[0])y.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`.concat(encodeURIComponent(B[0]),'"></iframe>')),y.remove();else if(w&&w[2])y.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`.concat(w[2],'"></iframe>')),y.remove();else if(x.indexOf("bilibili.com")>-1&&(x.indexOf("bvid=")>-1||W&&W[1])){var ie={bvid:(0,N.on)("bvid",x)||W&&W[1],page:"1",high_quality:"1",as_wide:"1",allowfullscreen:"true",autoplay:"0"};new URL(x.startsWith("http")?x:"https:"+x).search.split("&").forEach(function(ke,Ne){if(ke){Ne===0&&(ke=ke.substr(1));var Ye=ke.split("=");ie[Ye[0]]=Ye[1]}});var Y="https://player.bilibili.com/player.html?",me=Object.keys(ie);me.forEach(function(ke,Ne){Y+="".concat(ke,"=").concat(ie[ke]),Ne<me.length-1&&(Y+="&")}),y.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="'.concat(Y,'"></iframe>')),y.remove()}else ee&&ee[1]&&(y.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'.concat(ee[1],'"></iframe>')),y.remove())},T=function(y){y&&y.querySelectorAll("a").forEach(function(x){var v=x.getAttribute("href");v&&(v.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?M(x,v):v.match(/^.+.(mp3|wav|flac)$/)?m(x,v):h(x,v))})}}),637:((c,u,b)=>{"use strict";b.d(u,{i:()=>x});var N=b(145),M=b(413),m=b(840),h=b(494),T=function(v,O,H,P){function B(w){return w instanceof H?w:new H(function(W){W(w)})}return new(H||(H=Promise))(function(w,W){function ee(me){try{Y(P.next(me))}catch(ke){W(ke)}}function ie(me){try{Y(P.throw(me))}catch(ke){W(ke)}}function Y(me){me.done?w(me.value):B(me.value).then(ee,ie)}Y((P=P.apply(v,O||[])).next())})},y=function(v,O){var H={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},P,B,w,W;return W={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function ee(Y){return function(me){return ie([Y,me])}}function ie(Y){if(P)throw new TypeError("Generator is already executing.");for(;W&&(W=0,Y[0]&&(H=0)),H;)try{if(P=1,B&&(w=Y[0]&2?B.return:Y[0]?B.throw||((w=B.return)&&w.call(B),0):B.next)&&!(w=w.call(B,Y[1])).done)return w;switch(B=0,w&&(Y=[Y[0]&2,w.value]),Y[0]){case 0:case 1:w=Y;break;case 4:return H.label++,{value:Y[1],done:!1};case 5:H.label++,B=Y[1],Y=[0];continue;case 7:Y=H.ops.pop(),H.trys.pop();continue;default:if(w=H.trys,!(w=w.length>0&&w[w.length-1])&&(Y[0]===6||Y[0]===2)){H=0;continue}if(Y[0]===3&&(!w||Y[1]>w[0]&&Y[1]<w[3])){H.label=Y[1];break}if(Y[0]===6&&H.label<w[1]){H.label=w[1],w=Y;break}if(w&&H.label<w[2]){H.label=w[2],H.ops.push(Y);break}w[2]&&H.ops.pop(),H.trys.pop();continue}Y=O.call(v,H)}catch(me){Y=[6,me],B=0}finally{P=w=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}},x=function(v,O,H){v===void 0&&(v=document),O===void 0&&(O=N.g.CDN);var P=m.mermaidRenderAdapter.getElements(v);P.length!==0&&(0,M.G)("".concat(O,"/dist/js/mermaid/mermaid.min.js?v=11.6.0"),"vditorMermaidScript").then(function(){var B={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8,showSequenceNumbers:!0},gantt:{leftPadding:75,rightPadding:20}};H==="dark"&&(B.theme="dark"),mermaid.initialize(B),P.forEach(function(w){return T(void 0,void 0,void 0,function(){var W,ee,ie,Y,me;return y(this,function(ke){switch(ke.label){case 0:if(W=m.mermaidRenderAdapter.getCode(w),w.getAttribute("data-processed")==="true"||W.trim()==="")return[2];ee="mermaid"+(0,h.Wb)(),ke.label=1;case 1:return ke.trys.push([1,3,,4]),[4,mermaid.render(ee,w.textContent)];case 2:return ie=ke.sent(),w.innerHTML=ie.svg,[3,4];case 3:return Y=ke.sent(),me=document.querySelector("#"+ee),w.innerHTML="".concat(me.outerHTML,`<br>
<div style="text-align: left"><small>`).concat(Y.message.replace(/\n/,"<br>"),"</small></div>"),me.parentElement.remove(),[3,4];case 4:return w.setAttribute("data-processed","true"),[2]}})})})})}}),194:((c,u,b)=>{"use strict";b.d(u,{P:()=>h});var N=b(145),M=b(413),m=b(840),h=function(T,y,x){T===void 0&&(T=document),y===void 0&&(y=N.g.CDN);var v=m.mindmapRenderAdapter.getElements(T);v.length>0&&(0,M.G)("".concat(y,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){v.forEach(function(O){if(!(O.parentElement.classList.contains("vditor-wysiwyg__pre")||O.parentElement.classList.contains("vditor-ir__marker--pre"))){var H=m.mindmapRenderAdapter.getCode(O);if(H)try{if(O.getAttribute("data-processed")==="true")return;echarts.init(O,x==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(H))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(P,B){var w;return!((w=B?.data)===null||w===void 0)&&w.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),O.setAttribute("data-processed","true")}catch(P){O.className="vditor-reset--error",O.innerHTML="mindmap render error: <br>".concat(P)}}})})}}),436:((c,u,b)=>{"use strict";b.d(u,{k:()=>m});var N=b(771),M=b(472),m=function(h,T,y){var x="",v=[];if(Array.from(h.children).forEach(function(B,w){if((0,N.W)(B)){if(y){var W=B.id.lastIndexOf("_");B.id=B.id.substring(0,W===-1?void 0:W)+"_"+w}v.push(B.id),x+=B.outerHTML.replace("<wbr>","")}}),x==="")return T.innerHTML="","";var O=document.createElement("div");if(y)y.lute.SetToC(!0),y.currentMode==="wysiwyg"&&!y.preview.element.contains(h)?O.innerHTML=y.lute.SpinVditorDOM("<p>[ToC]</p>"+x):y.currentMode==="ir"&&!y.preview.element.contains(h)?O.innerHTML=y.lute.SpinVditorIRDOM("<p>[ToC]</p>"+x):O.innerHTML=y.lute.HTML2VditorDOM("<p>[ToC]</p>"+x),y.lute.SetToC(y.options.preview.markdown.toc);else{T.classList.add("vditor-outline");var H=Lute.New();H.SetToC(!0),O.innerHTML=H.HTML2VditorDOM("<p>[ToC]</p>"+x)}var P=O.firstElementChild.querySelectorAll("li > span[data-target-id]");return P.forEach(function(B,w){if(B.nextElementSibling&&B.nextElementSibling.tagName==="UL"){var W="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(W='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),B.innerHTML="".concat(W,"<span>").concat(B.innerHTML,"</span>")}else B.innerHTML="<svg></svg><span>".concat(B.innerHTML,"</span>");B.setAttribute("data-target-id",v[w])}),x=O.firstElementChild.innerHTML,P.length===0?(T.innerHTML="",x):(T.innerHTML=x,y&&(0,M.H)(T,{cdn:y.options.cdn,math:y.options.preview.math}),T.firstElementChild.addEventListener("click",function(B){for(var w=B.target;w&&!w.isEqualNode(T);){if(w.classList.contains("vditor-outline__action")){w.classList.contains("vditor-outline__action--close")?(w.classList.remove("vditor-outline__action--close"),w.parentElement.nextElementSibling.setAttribute("style","display:block")):(w.classList.add("vditor-outline__action--close"),w.parentElement.nextElementSibling.setAttribute("style","display:none")),B.preventDefault(),B.stopPropagation();break}else if(w.getAttribute("data-target-id")){B.preventDefault(),B.stopPropagation();var W=document.getElementById(w.getAttribute("data-target-id"));if(!W)return;if(y)if(y.options.height==="auto"){var ee=W.offsetTop+y.element.offsetTop;y.options.toolbarConfig.pin||(ee+=y.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,ee)}else y.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,y.element.offsetTop),y.preview.element.contains(h)?h.parentElement.scrollTop=W.offsetTop:h.scrollTop=W.offsetTop;else window.scrollTo(window.scrollX,W.offsetTop);break}w=w.parentElement}}),x)}}),229:((c,u,b)=>{"use strict";b.d(u,{B:()=>h});var N=b(145),M=b(413),m=b(840),h=function(T,y){T===void 0&&(T=document),y===void 0&&(y=N.g.CDN);var x=m.plantumlRenderAdapter.getElements(T);x.length!==0&&(0,M.G)("".concat(y,"/dist/js/plantuml/plantuml-encoder.min.js"),"vditorPlantumlScript").then(function(){x.forEach(function(v){if(!(v.parentElement.classList.contains("vditor-wysiwyg__pre")||v.parentElement.classList.contains("vditor-ir__marker--pre"))){var O=m.plantumlRenderAdapter.getCode(v).trim();if(O)try{v.innerHTML='<object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/~1'.concat(plantumlEncoder.encode(O),'"/>')}catch(H){v.className="vditor-reset--error",v.innerHTML="plantuml render error: <br>".concat(H)}}})})}}),214:((c,u,b)=>{"use strict";b.d(u,{X:()=>N});var N=function(M){var m=Lute.New();return m.PutEmojis(M.emojis),m.SetEmojiSite(M.emojiSite),m.SetHeadingAnchor(M.headingAnchor),m.SetInlineMathAllowDigitAfterOpenMarker(M.inlineMathDigit),m.SetAutoSpace(M.autoSpace),m.SetToC(M.toc),m.SetFootnotes(M.footnotes),m.SetFixTermTypo(M.fixTermTypo),m.SetVditorCodeBlockPreview(M.codeBlockPreview),m.SetVditorMathBlockPreview(M.mathBlockPreview),m.SetSanitize(M.sanitize),m.SetChineseParagraphBeginningSpace(M.paragraphBeginningSpace),m.SetRenderListStyle(M.listStyle),m.SetLinkBase(M.linkBase),m.SetLinkPrefix(M.linkPrefix),m.SetMark(M.mark),m.SetGFMAutoLink(M.gfmAutoLink),M.lazyLoadImage&&m.SetImageLazyLoading(M.lazyLoadImage),m}}),190:((c,u,b)=>{"use strict";b.d(u,{E:()=>N});var N=function(M,m,h){m===void 0&&(m="zh_CN"),h===void 0&&(h="classic");var T=M.getBoundingClientRect(),y=36;document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'.concat(h==="dark"?" vditor--dark":"",`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `).concat(window.VditorI18n.spin,`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`).concat(window.VditorI18n.close,`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `).concat(M.width,"px;height:").concat(M.height,"px;transform: translate3d(").concat(T.left,"px, ").concat(T.top-y,'px, 0)" src="').concat(M.getAttribute("src"),`">
    </div>
</div>`)),document.body.style.overflow="hidden";var x=document.querySelector(".vditor-img img"),v="translate3d(".concat(Math.max(0,window.innerWidth-M.naturalWidth)/2,"px, ").concat(Math.max(0,window.innerHeight-y-M.naturalHeight)/2,"px, 0)");setTimeout(function(){x.setAttribute("style","transition: transform .3s ease-in-out;transform: ".concat(v)),setTimeout(function(){x.parentElement.scrollTo((x.parentElement.scrollWidth-x.parentElement.clientWidth)/2,(x.parentElement.scrollHeight-x.parentElement.clientHeight)/2)},400)});var O=document.querySelector(".vditor-img__btn");O.addEventListener("click",function(){var H=parseInt(O.getAttribute("data-deg"),10)+90;H/90%2===1&&M.naturalWidth>x.parentElement.clientHeight?x.style.transform="translate3d(".concat(Math.max(0,window.innerWidth-M.naturalWidth)/2,"px, ").concat(M.naturalWidth/2-M.naturalHeight/2,"px, 0) rotateZ(").concat(H,"deg)"):x.style.transform="".concat(v," rotateZ(").concat(H,"deg)"),O.setAttribute("data-deg",H.toString()),setTimeout(function(){x.parentElement.scrollTo((x.parentElement.scrollWidth-x.parentElement.clientWidth)/2,(x.parentElement.scrollHeight-x.parentElement.clientHeight)/2)},400)})}}),580:((c,u,b)=>{"use strict";b.d(u,{Y:()=>m});var N=b(145),M=b(290),m=function(h,T){T===void 0&&(T=N.g.CDN),N.g.CODE_THEME.includes(h)||(h="github");var y=document.getElementById("vditorHljsStyle"),x="".concat(T,"/dist/js/highlight.js/styles/").concat(h,".min.css");y?y.getAttribute("href")!==x&&(y.remove(),(0,M.c)(x,"vditorHljsStyle")):(0,M.c)(x,"vditorHljsStyle")}}),538:((c,u,b)=>{"use strict";b.d(u,{Z:()=>M});var N=b(290),M=function(m,h){if(!(!m||!h)){var T=document.getElementById("vditorContentTheme"),y="".concat(h,"/").concat(m,".css");T?T.getAttribute("href")!==y&&(T.remove(),(0,N.c)(y,"vditorContentTheme")):(0,N.c)(y,"vditorContentTheme")}}}),413:((c,u,b)=>{"use strict";b.d(u,{J:()=>N,G:()=>M});var N=function(m,h){if(document.getElementById(h))return!1;var T=new XMLHttpRequest;T.open("GET",m,!1),T.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),T.send("");var y=document.createElement("script");y.type="text/javascript",y.text=T.responseText,y.id=h,document.head.appendChild(y)},M=function(m,h){return new Promise(function(T,y){if(document.getElementById(h))return T(!0),!1;var x=document.createElement("script");x.src=m,x.async=!0,document.head.appendChild(x),x.onerror=function(v){y(v)},x.onload=function(){if(document.getElementById(h))return x.remove(),T(!0),!1;x.id=h,T(!0)}})}}),290:((c,u,b)=>{"use strict";b.d(u,{c:()=>N});var N=function(M,m){if(!document.getElementById(m)){var h=document.createElement("link");h.id=m,h.rel="stylesheet",h.type="text/css",h.href=M,document.getElementsByTagName("head")[0].appendChild(h)}}}),105:((c,u,b)=>{"use strict";b.d(u,{X:()=>N});var N=function(M){return M.replace(/\u00a0/g," ")}}),410:((c,u,b)=>{"use strict";b.d(u,{G6:()=>N,vU:()=>M,pK:()=>m,Le:()=>h,yl:()=>T,ns:()=>y,i7:()=>x});var N=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},M=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},m=function(){try{return typeof localStorage<"u"}catch{return!1}},h=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},T=function(v){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!!(v.metaKey&&!v.ctrlKey):!!(!v.metaKey&&v.ctrlKey)},y=function(v){return/Mac/.test(navigator.platform)||navigator.platform==="iPhone"?v.indexOf("\u21E7")>-1&&M()&&(v=v.replace(";",":").replace("=","+").replace("-","_")):(v.startsWith("\u2318")?v=v.replace("\u2318","\u2318+"):v.startsWith("\u2325")&&v.substr(1,1)!=="\u2318"?v=v.replace("\u2325","\u2325+"):v=v.replace("\u21E7\u2318","\u2318+\u21E7+").replace("\u2325\u2318","\u2325+\u2318+"),v=v.replace("\u2318","Ctrl").replace("\u21E7","Shift").replace("\u2325","Alt"),v.indexOf("Shift")>-1&&(v=v.replace(";",":").replace("=","+").replace("-","_"))),v},x=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}}),494:((c,u,b)=>{"use strict";b.d(u,{Wb:()=>N,on:()=>M,Qf:()=>m});var N=function(){return([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(h){return(parseInt(h,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(h,10)/4).toString(16)})},M=function(h,T){T===void 0&&(T=window.location.search);var y=T.substring(T.indexOf("?")),x=y.indexOf("#"),v=new URLSearchParams(y.substring(0,x>=0?x:void 0));return v.get(h)},m=function(h){return Function('"use strict";return ('.concat(h,")"))()}}),106:((c,u,b)=>{"use strict";b.d(u,{JQ:()=>M,E2:()=>h,O9:()=>T,a1:()=>y,F9:()=>x,lG:()=>v,fb:()=>O,DX:()=>H});var N=b(771),M=function(P,B){for(var w=O(P,B),W=!1,ee=!1;w&&!w.classList.contains("vditor-reset")&&!ee;)W=O(w.parentElement,B),W?w=W:ee=!0;return w||!1},m=function(P,B,w){for(var W=y(P,B,w),ee=!1,ie=!1;W&&!W.classList.contains("vditor-reset")&&!ie;)ee=y(W.parentElement,B,w),ee?W=ee:ie=!0;return W||!1},h=function(P,B){for(var w=(0,N.S)(P,B),W=!1,ee=!1;w&&!w.classList.contains("vditor-reset")&&!ee;)W=(0,N.S)(w.parentElement,B),W?w=W:ee=!0;return w||!1},T=function(P){var B=h(P,"UL"),w=h(P,"OL"),W=B;return w&&(!B||B&&w.contains(B))&&(W=w),W},y=function(P,B,w){if(!P)return!1;P.nodeType===3&&(P=P.parentElement);for(var W=P,ee=!1;W&&!ee&&!W.classList.contains("vditor-reset");)W.getAttribute(B)===w?ee=!0:W=W.parentElement;return ee&&W},x=function(P){if(!P)return!1;P.nodeType===3&&(P=P.parentElement);var B=P,w=!1,W=y(P,"data-block","0");if(W)return W;for(;B&&!w&&!B.classList.contains("vditor-reset");)B.tagName==="H1"||B.tagName==="H2"||B.tagName==="H3"||B.tagName==="H4"||B.tagName==="H5"||B.tagName==="H6"||B.tagName==="P"||B.tagName==="BLOCKQUOTE"||B.tagName==="OL"||B.tagName==="UL"?w=!0:B=B.parentElement;return w&&B},v=function(P,B){if(!P)return!1;P.nodeType===3&&(P=P.parentElement);for(var w=P,W=!1;w&&!W&&!w.classList.contains("vditor-reset");)w.nodeName===B?W=!0:w=w.parentElement;return W&&w},O=function(P,B){if(!P)return!1;P.nodeType===3&&(P=P.parentElement);for(var w=P,W=!1;w&&!W&&!w.classList.contains("vditor-reset");)w.classList.contains(B)?W=!0:w=w.parentElement;return W&&w},H=function(P){for(;P&&P.lastChild;)P=P.lastChild;return P}}),771:((c,u,b)=>{"use strict";b.d(u,{S:()=>N,W:()=>M});var N=function(m,h){if(!m)return!1;m.nodeType===3&&(m=m.parentElement);for(var T=m,y=!1;T&&!y&&!T.classList.contains("vditor-reset");)T.nodeName.indexOf(h)===0?y=!0:T=T.parentElement;return y&&T},M=function(m){var h=N(m,"H");return h&&h.tagName.length===2&&h.tagName!=="HR"?h:!1}}),673:((c,u,b)=>{"use strict";b.d(u,{T:()=>N});var N=function(){for(var M=[],m=0;m<arguments.length;m++)M[m]=arguments[m];for(var h={},T=function(x){for(var v in x)x.hasOwnProperty(v)&&(Object.prototype.toString.call(x[v])==="[object Object]"?h[v]=N(h[v],x[v]):h[v]=x[v])},y=0;y<M.length;y++)T(M[y]);return h}}),810:((c,u,b)=>{"use strict";b.d(u,{zh:()=>h,Ny:()=>T,Gb:()=>y,Hc:()=>x,im:()=>v,$j:()=>O,ib:()=>H,oC:()=>P});var N=b(145),M=b(410),m=b(106),h=function(B){var w,W=B[B.currentMode].element;return getSelection().rangeCount>0&&(w=getSelection().getRangeAt(0),W.isEqualNode(w.startContainer)||W.contains(w.startContainer))?w:B[B.currentMode].range?B[B.currentMode].range:(W.focus(),w=W.ownerDocument.createRange(),w.setStart(W,0),w.collapse(!0),w)},T=function(B){var w=window.getSelection().getRangeAt(0);if(!B.contains(w.startContainer)&&!(0,m.fb)(w.startContainer,"vditor-panel--none"))return{left:0,top:0};var W=B.parentElement.getBoundingClientRect(),ee;if(w.getClientRects().length===0)if(w.startContainer.nodeType===3){var ie=w.startContainer.parentElement;if(ie&&ie.getClientRects().length>0)ee=ie.getClientRects()[0];else return{left:0,top:0}}else{var Y=w.startContainer.children;if(Y[w.startOffset]&&Y[w.startOffset].getClientRects().length>0)ee=Y[w.startOffset].getClientRects()[0];else if(w.startContainer.childNodes.length>0){var me=w.cloneRange();w.selectNode(w.startContainer.childNodes[Math.max(0,w.startOffset-1)]),ee=w.getClientRects()[0],w.setEnd(me.endContainer,me.endOffset),w.setStart(me.startContainer,me.startOffset)}else ee=w.startContainer.getClientRects()[0];if(!ee){for(var ke=w.startContainer.childNodes[w.startOffset];!ke.getClientRects||ke.getClientRects&&ke.getClientRects().length===0;)ke=ke.parentElement;ee=ke.getClientRects()[0]}}else ee=w.getClientRects()[0];return{left:ee.left-W.left,top:ee.top-W.top}},y=function(B,w){if(!w){if(getSelection().rangeCount===0)return!1;w=getSelection().getRangeAt(0)}var W=w.commonAncestorContainer;return B.isEqualNode(W)||B.contains(W)},x=function(B){var w=window.getSelection();w.removeAllRanges(),w.addRange(B)},v=function(B,w,W){var ee={end:0,start:0};if(!W){if(getSelection().rangeCount===0)return ee;W=window.getSelection().getRangeAt(0)}if(y(w,W)){var ie=W.cloneRange();B.childNodes[0]&&B.childNodes[0].childNodes[0]?ie.setStart(B.childNodes[0].childNodes[0],0):ie.selectNodeContents(B),ie.setEnd(W.startContainer,W.startOffset),ee.start=ie.toString().length,ee.end=ee.start+W.toString().length}return ee},O=function(B,w,W){var ee=0,ie=0,Y=W.childNodes[ie],me=!1,ke=!1;B=Math.max(0,B),w=Math.max(0,w);var Ne=W.ownerDocument.createRange();for(Ne.setStart(Y||W,0),Ne.collapse(!0);!ke&&Y;){var Ye=ee+Y.textContent.length;if(!me&&B>=ee&&B<=Ye&&(B===0?Ne.setStart(Y,0):Y.childNodes[0].nodeType===3?Ne.setStart(Y.childNodes[0],B-ee):Y.nextSibling?Ne.setStartBefore(Y.nextSibling):Ne.setStartAfter(Y),me=!0,B===w)){ke=!0;break}me&&w>=ee&&w<=Ye&&(w===0?Ne.setEnd(Y,0):Y.childNodes[0].nodeType===3?Ne.setEnd(Y.childNodes[0],w-ee):Y.nextSibling?Ne.setEndBefore(Y.nextSibling):Ne.setEndAfter(Y),ke=!0),ee=Ye,Y=W.childNodes[++ie]}return!ke&&W.childNodes[ie-1]&&Ne.setStartBefore(W.childNodes[ie-1]),x(Ne),Ne},H=function(B,w){var W=B.querySelector("wbr");if(W){if(!W.previousElementSibling)W.previousSibling?w.setStart(W.previousSibling,W.previousSibling.textContent.length):W.nextSibling?W.nextSibling.nodeType===3?w.setStart(W.nextSibling,0):w.setStartBefore(W.nextSibling):w.setStart(W.parentElement,0);else if(W.previousElementSibling.isSameNode(W.previousSibling))if(W.previousElementSibling.lastChild){w.setStartBefore(W),w.collapse(!0),x(w),(0,M.i7)()&&(W.previousElementSibling.tagName==="EM"||W.previousElementSibling.tagName==="STRONG"||W.previousElementSibling.tagName==="S")&&(w.insertNode(document.createTextNode(N.g.ZWSP)),w.collapse(!1)),W.remove();return}else w.setStartAfter(W.previousElementSibling);else w.setStart(W.previousSibling,W.previousSibling.textContent.length);w.collapse(!0),W.remove(),x(w)}},P=function(B,w){var W=document.createElement("div");W.innerHTML=B;var ee=W.querySelectorAll("p");ee.length===1&&!ee[0].previousSibling&&!ee[0].nextSibling&&w[w.currentMode].element.children.length>0&&W.firstElementChild.tagName==="P"&&(B=ee[0].innerHTML.trim());var ie=document.createElement("div");ie.innerHTML=B;var Y=h(w);if(Y.toString()!==""&&(w[w.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),ie.firstElementChild&&ie.firstElementChild.getAttribute("data-block")==="0"){ie.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var me=(0,m.F9)(Y.startContainer);me?me.insertAdjacentHTML("afterend",ie.innerHTML):w[w.currentMode].element.insertAdjacentHTML("beforeend",ie.innerHTML),H(w[w.currentMode].element,Y)}else{var ke=document.createElement("template");ke.innerHTML=B,Y.insertNode(ke.content.cloneNode(!0)),Y.collapse(!1),x(Y)}}})},g={};function e(c){var u=g[c];if(u!==void 0)return u.exports;var b=g[c]={exports:{}};return o[c](b,b.exports,e),b.exports}e.d=(c,u)=>{for(var b in u)e.o(u,b)&&!e.o(c,b)&&Object.defineProperty(c,b,{enumerable:!0,get:u[b]})},e.o=(c,u)=>Object.prototype.hasOwnProperty.call(c,u),e.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var l={};return(()=>{"use strict";e.d(l,{default:()=>_d});var c=e(408),u=e(145),b=e(105),N=function(n){return n.currentMode==="sv"?(0,b.X)("".concat(n.sv.element.textContent,`
`).replace(/\n\n$/,`
`)):n.currentMode==="wysiwyg"?n.lute.VditorDOM2Md(n.wysiwyg.element.innerHTML):n.currentMode==="ir"?n.lute.VditorIRDOM2Md(n.ir.element.innerHTML):""},M=e(413),m=(function(){function n(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return n.prototype.renderEchart=function(i){var r=this;i.devtools.element.style.display==="block"&&(0,M.G)("".concat(i.options.cdn,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){r.ASTChart||(r.ASTChart=echarts.init(i.devtools.element.lastElementChild));try{r.element.lastElementChild.style.display="block",r.element.firstElementChild.innerHTML="",r.ASTChart.setOption({series:[{data:JSON.parse(i.lute.RenderEChartsJSON(N(i))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),r.ASTChart.resize()}catch(d){r.element.lastElementChild.style.display="none",r.element.firstElementChild.innerHTML=d}})},n})(),h=e(410),T=function(n,i){i.forEach(function(r){if(n[r]){var d=n[r].children[0];d&&d.classList.contains("vditor-menu--current")&&d.classList.remove("vditor-menu--current")}})},y=function(n,i){i.forEach(function(r){if(n[r]){var d=n[r].children[0];d&&!d.classList.contains("vditor-menu--current")&&d.classList.add("vditor-menu--current")}})},x=function(n,i){i.forEach(function(r){if(n[r]){var d=n[r].children[0];d&&d.classList.contains(u.g.CLASS_MENU_DISABLED)&&d.classList.remove(u.g.CLASS_MENU_DISABLED)}})},v=function(n,i){i.forEach(function(r){if(n[r]){var d=n[r].children[0];d&&!d.classList.contains(u.g.CLASS_MENU_DISABLED)&&d.classList.add(u.g.CLASS_MENU_DISABLED)}})},O=function(n,i){i.forEach(function(r){n[r]&&n[r]&&(n[r].style.display="none")})},H=function(n,i){i.forEach(function(r){n[r]&&n[r]&&(n[r].style.display="block")})},P=function(n,i,r){i.includes("subToolbar")&&(n.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(d){r&&d.isEqualNode(r)||(d.style.display="none")}),n.toolbar.elements.emoji&&(n.toolbar.elements.emoji.lastElementChild.style.display="none")),i.includes("hint")&&(n.hint.element.style.display="none"),n.wysiwyg.popover&&i.includes("popover")&&(n.wysiwyg.popover.style.display="none")},B=function(n,i,r,d){r.addEventListener((0,h.Le)(),function(s){s.preventDefault(),s.stopPropagation(),!r.classList.contains(u.g.CLASS_MENU_DISABLED)&&(n.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(p){p.classList.remove("vditor-hint--current")}),i.style.display==="block"?i.style.display="none":(P(n,["subToolbar","hint","popover"],r.parentElement.parentElement),r.classList.contains("vditor-tooltipped")||r.classList.add("vditor-hint--current"),i.style.display="block",n.toolbar.element.getBoundingClientRect().right-r.getBoundingClientRect().right<250?i.classList.add("vditor-panel--left"):i.classList.remove("vditor-panel--left")))})},w=e(106),W=e(771),ee=function(n,i,r,d){d&&console.log("".concat(n," - ").concat(r,": ").concat(i))},ie=e(135),Y=e(775),me=e(428),ke=e(325),Ne=e(483),Ye=e(999),it=e(472),xt=e(637),jt=e(11),ht=e(194),st=e(229),Qt=e(825),an=function(n,i,r){r===void 0&&(r="sv");var d=document.createElement("div");d.innerHTML=n;var s=!1;d.childElementCount===1&&d.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(s=!0);var p=d.querySelectorAll("pre");if(d.childElementCount===1&&p.length===1&&p[0].className!=="vditor-wysiwyg"&&p[0].className!=="vditor-sv"&&(s=!0),n.indexOf(`
<p class="p1">`)===0&&(s=!0),d.childElementCount===1&&d.firstElementChild.tagName==="TABLE"&&d.querySelector(".line-number")&&d.querySelector(".line-content")&&(s=!0),s){var _=i||n;return/\n/.test(_)||p.length===1?r==="wysiwyg"?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'.concat(_.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"<wbr></code></pre></div>"):"\n```\n"+_.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":r==="wysiwyg"?"<code>".concat(_.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"</code><wbr>"):"`".concat(_,"`")}return!1},Tt=function(n,i){if(n){if(n.parentElement.getAttribute("data-type")==="html-block"){n.setAttribute("data-render","1");return}var r=n.firstElementChild.className.replace("language-","");if(r==="abc")(0,ie.Q)(n,i.options.cdn);else if(r==="mermaid")(0,xt.i)(n,i.options.cdn,i.options.theme);else if(r==="smiles")(0,Qt.J)(n,i.options.cdn,i.options.theme);else if(r==="markmap")(0,jt.K)(n,i.options.cdn);else if(r==="flowchart")(0,ke.P)(n,i.options.cdn);else if(r==="echarts")(0,Y.p)(n,i.options.cdn,i.options.theme);else if(r==="mindmap")(0,ht.P)(n,i.options.cdn,i.options.theme);else if(r==="plantuml")(0,st.B)(n,i.options.cdn);else if(r==="graphviz")(0,Ne.v)(n,i.options.cdn);else if(r==="math")(0,it.H)(n,{cdn:i.options.cdn,math:i.options.preview.math});else{var d=i.options.customRenders.find(function(s){if(s.language===r)return s.render(n,i),!0});d||((0,Ye.s)(Object.assign({},i.options.preview.hljs),n,i.options.cdn),(0,me.O)(n,i.options.preview.hljs))}n.setAttribute("data-render","1")}},Z=e(810),oi=function(n){if(n.currentMode!=="sv"){var i=n[n.currentMode].element,r=n.outline.render(n);r===""&&(r="[ToC]"),i.querySelectorAll('[data-type="toc-block"]').forEach(function(d){d.innerHTML=r,(0,it.H)(d,{cdn:n.options.cdn,math:n.options.preview.math})})}},wo=function(n,i){var r=(0,w.lG)(n.target,"SPAN");if(r&&(0,w.fb)(r,"vditor-toc")){var d=i[i.currentMode].element.querySelector("#"+r.getAttribute("data-target-id"));if(d)if(i.options.height==="auto"){var s=d.offsetTop+i.element.offsetTop;i.options.toolbarConfig.pin||(s+=i.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,s)}else i.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,i.element.offsetTop),i[i.currentMode].element.scrollTop=d.offsetTop;return}},Ci=function(n,i,r,d){if(n.previousElementSibling&&n.previousElementSibling.classList.contains("vditor-toc")){if(r.key==="Backspace"&&(0,Z.im)(n,i[i.currentMode].element,d).start===0)return n.previousElementSibling.remove(),qe(i),!0;if(Ai(i,r,d,n,n.previousElementSibling))return!0}if(n.nextElementSibling&&n.nextElementSibling.classList.contains("vditor-toc")){if(r.key==="Delete"&&(0,Z.im)(n,i[i.currentMode].element,d).start>=n.textContent.trimRight().length)return n.nextElementSibling.remove(),qe(i),!0;if(Er(i,r,d,n,n.nextElementSibling))return!0}if(r.key==="Backspace"||r.key==="Delete"){var s=(0,w.fb)(d.startContainer,"vditor-toc");if(s)return s.remove(),qe(i),!0}},Xn=function(n,i,r,d){r===void 0&&(r=!1);var s=(0,w.F9)(i.startContainer);if(s&&!r&&s.getAttribute("data-type")!=="code-block"){if(Fi(s.innerHTML)&&s.previousElementSibling||Lo(s.innerHTML))return;for(var p=(0,Z.im)(s,n.ir.element,i).start,_=!0,E=p-1;E>s.textContent.substr(0,p).lastIndexOf(`
`);E--)if(s.textContent.charAt(E)!==" "&&s.textContent.charAt(E)!=="	"){_=!1;break}p===0&&(_=!1);for(var F=!0,E=p-1;E<s.textContent.length;E++)if(s.textContent.charAt(E)!==" "&&s.textContent.charAt(E)!==`
`){F=!1;break}if(_){typeof n.options.input=="function"&&n.options.input(N(n));return}if(F&&/^#{1,6} $/.test(s.textContent)&&(F=!1),F){var L=(0,w.fb)(i.startContainer,"vditor-ir__marker");if(!L){var J=i.startContainer.previousSibling;J&&J.nodeType!==3&&J.classList.contains("vditor-ir__node--expand")&&J.classList.remove("vditor-ir__node--expand"),typeof n.options.input=="function"&&n.options.input(N(n));return}}}if(n.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(et){et.classList.remove("vditor-ir__node--expand")}),s||(s=n.ir.element),!s.querySelector("wbr")){var K=(0,w.fb)(i.startContainer,"vditor-ir__preview");K?K.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):i.insertNode(document.createElement("wbr"))}s.querySelectorAll("[style]").forEach(function(et){et.removeAttribute("style")}),s.getAttribute("data-type")==="link-ref-defs-block"&&(s=n.ir.element);var fe=s.isEqualNode(n.ir.element),ue=(0,w.a1)(s,"data-type","footnotes-block"),ae="";if(fe)ae=s.innerHTML;else{var Me=(0,W.S)(i.startContainer,"BLOCKQUOTE"),ve=(0,w.O9)(i.startContainer);if(ve&&(s=ve),Me&&(!ve||ve&&!Me.contains(ve))&&(s=Me),ue&&(s=ue),ae=s.outerHTML,s.tagName==="UL"||s.tagName==="OL"){var ce=s.previousElementSibling,Ve=s.nextElementSibling;ce&&(ce.tagName==="UL"||ce.tagName==="OL")&&(ae=ce.outerHTML+ae,ce.remove()),Ve&&(Ve.tagName==="UL"||Ve.tagName==="OL")&&(ae=ae+Ve.outerHTML,Ve.remove()),ae=ae.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else s.previousElementSibling&&s.previousElementSibling.textContent.replace(u.g.ZWSP,"")!==""&&d&&d.inputType==="insertParagraph"&&(ae=s.previousElementSibling.outerHTML+ae,s.previousElementSibling.remove());s.innerText.startsWith("```")||(n.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(et){et&&!s.isEqualNode(et)&&(ae+=et.outerHTML,et.remove())}),n.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(et){et&&!s.isEqualNode(et)&&(ae+=et.outerHTML,et.remove())}))}if(ee("SpinVditorIRDOM",ae,"argument",n.options.debugger),ae=n.lute.SpinVditorIRDOM(ae),ee("SpinVditorIRDOM",ae,"result",n.options.debugger),fe)s.innerHTML=ae;else if(s.outerHTML=ae,ue){var Le=(0,w.a1)(n.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(Le){var we=Le.textContent,gt=we.substring(1,we.indexOf("]:")),ct=n.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(gt,'"]'));ct&&ct.setAttribute("aria-label",we.substr(gt.length+3).trim().substr(0,24))}}var wt,yn=n.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");yn.forEach(function(et,Jt){Jt===0?wt=et:(wt.insertAdjacentHTML("beforeend",et.innerHTML),et.remove())}),yn.length>0&&n.ir.element.insertAdjacentElement("beforeend",yn[0]);var ln,vn=n.ir.element.querySelectorAll("[data-type='footnotes-block']");vn.forEach(function(et,Jt){Jt===0?ln=et:(ln.insertAdjacentHTML("beforeend",et.innerHTML),et.remove())}),vn.length>0&&n.ir.element.insertAdjacentElement("beforeend",vn[0]),(0,Z.ib)(n.ir.element,i),n.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(et){Tt(et,n)}),oi(n),yi(n,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},pe=function(n,i){if(n==="")return!1;if(n.indexOf("\u21E7")===-1&&n.indexOf("\u2318")===-1&&n.indexOf("\u2325")===-1)return!(0,h.yl)(i)&&!i.altKey&&!i.shiftKey&&i.code===n;if(n==="\u21E7Tab")return!!(!(0,h.yl)(i)&&!i.altKey&&i.shiftKey&&i.code==="Tab");var r=n.split("");if(n.startsWith("\u2325")){var d=r.length===3?r[2]:r[1];return!!((r.length===3?(0,h.yl)(i):!(0,h.yl)(i))&&i.altKey&&!i.shiftKey&&i.code===(/^[0-9]$/.test(d)?"Digit":"Key")+d)}n==="\u2318Enter"&&(r=["\u2318","Enter"]);var s=r.length>2&&r[0]==="\u21E7",p=s?r[2]:r[1];return s&&((0,h.vU)()||!/Mac/.test(navigator.platform))&&(p==="-"?p="_":p==="="&&(p="+")),!!((0,h.yl)(i)&&i.key.toLowerCase()===p.toLowerCase()&&!i.altKey&&(!s&&!i.shiftKey||s&&i.shiftKey))},rt=function(n){var i=n.startContainer;if(i.nodeType===3&&i.nodeValue.length!==n.startOffset)return!1;for(var r=i.nextSibling;r&&r.textContent==="";)r=r.nextSibling;if(r){if(r&&r.nodeType!==3&&r.classList.contains("vditor-ir__node")&&!r.getAttribute("data-block"))return r}else{var d=(0,w.fb)(i,"vditor-ir__marker");if(d&&!d.nextSibling){var s=i.parentElement.parentElement.nextSibling;if(s&&s.nodeType!==3&&s.classList.contains("vditor-ir__node"))return s}return!1}return!1},xe=function(n){var i=n.startContainer,r=i.previousSibling;return i.nodeType===3&&n.startOffset===0&&r&&r.nodeType!==3&&r.classList.contains("vditor-ir__node")&&!r.getAttribute("data-block")?r:!1},_e=function(n,i){i.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(_){_.classList.remove("vditor-ir__node--expand")});var r=(0,w.JQ)(n.startContainer,"vditor-ir__node"),d=!n.collapsed&&(0,w.JQ)(n.endContainer,"vditor-ir__node");if(!(!n.collapsed&&(!r||r!==d))){r&&(r.classList.add("vditor-ir__node--expand"),r.classList.remove("vditor-ir__node--hidden"),(0,Z.Hc)(n));var s=rt(n);if(s){s.classList.add("vditor-ir__node--expand"),s.classList.remove("vditor-ir__node--hidden");return}var p=xe(n);if(p){p.classList.add("vditor-ir__node--expand"),p.classList.remove("vditor-ir__node--hidden");return}}},Ft=function(n,i){if(n.ir.composingLock=i.isComposing,i.isComposing)return!1;i.key.indexOf("Arrow")===-1&&i.key!=="Meta"&&i.key!=="Control"&&i.key!=="Alt"&&i.key!=="Shift"&&i.key!=="CapsLock"&&i.key!=="Escape"&&!/^F\d{1,2}$/.test(i.key)&&n.undo.recordFirstPosition(n,i);var r=(0,Z.zh)(n),d=r.startContainer;if(!zo(i,n,d)||(Ql(r,n,i),No(r),i.key!=="Enter"&&i.key!=="Tab"&&i.key!=="Backspace"&&i.key.indexOf("Arrow")===-1&&!(0,h.yl)(i)&&i.key!=="Escape"&&i.key!=="Delete"))return!1;var s=(0,w.a1)(d,"data-newline","1");if(!(0,h.yl)(i)&&!i.altKey&&!i.shiftKey&&i.key==="Enter"&&s&&r.startOffset<s.textContent.length){var p=s.previousElementSibling;p&&(r.insertNode(document.createTextNode(p.textContent)),r.collapse(!1));var _=s.nextSibling;_&&(r.insertNode(document.createTextNode(_.textContent)),r.collapse(!0))}var E=(0,w.lG)(d,"P");if(Va(i,n,E,r)||Zl(r,n,E,i)||is(n,r,i,E))return!0;var F=(0,w.fb)(d,"vditor-ir__marker--pre");if(F&&F.tagName==="PRE"){var L=F.firstChild;if(ns(n,i,F,r)||(L.getAttribute("data-type")==="math-block"||L.getAttribute("data-type")==="html-block")&&Ai(n,i,r,L,F.parentElement)||Er(n,i,r,L,F.parentElement))return!0}var J=(0,w.a1)(d,"data-type","code-block-info");if(J){if(i.key==="Enter"||i.key==="Tab")return r.selectNodeContents(J.nextElementSibling.firstChild),r.collapse(!0),i.preventDefault(),P(n,["hint"]),!0;if(i.key==="Backspace"){var K=(0,Z.im)(J,n.ir.element).start;K===1&&r.setStart(d,0),K===2&&(n.hint.recentLanguage="")}if(Ai(n,i,r,J,J.parentElement))return P(n,["hint"]),!0}var fe=(0,w.lG)(d,"TD")||(0,w.lG)(d,"TH");if(i.key.indexOf("Arrow")>-1&&fe){var ue=Yl(fe);if(ue&&Ai(n,i,r,fe,ue))return!0;var ae=$c(fe);if(ae&&Er(n,i,r,fe,ae))return!0}if(Wa(n,i,r)||rs(n,r,i)||Ao(n,r,i))return!0;var Me=(0,W.W)(d);if(Me){if(pe("\u2318=",i)){var ve=Me.querySelector(".vditor-ir__marker--heading");return ve&&ve.textContent.trim().length>1&&yt(n,ve.textContent.substr(1)),i.preventDefault(),!0}if(pe("\u2318-",i)){var ve=Me.querySelector(".vditor-ir__marker--heading");return ve&&ve.textContent.trim().length<6&&yt(n,ve.textContent.trim()+"# "),i.preventDefault(),!0}}var ce=(0,w.F9)(d);if(i.key==="Backspace"&&!(0,h.yl)(i)&&!i.shiftKey&&!i.altKey&&r.toString()===""){if(os(n,r,i,E))return!0;if(ce&&ce.previousElementSibling&&ce.tagName!=="UL"&&ce.tagName!=="OL"&&(ce.previousElementSibling.getAttribute("data-type")==="code-block"||ce.previousElementSibling.getAttribute("data-type")==="math-block")){var Ve=(0,Z.im)(ce,n.ir.element,r).start;if(Ve===0||Ve===1&&ce.innerText.startsWith(u.g.ZWSP))return r.selectNodeContents(ce.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),r.collapse(!1),_e(r,n),ce.textContent.trim().replace(u.g.ZWSP,"")===""&&(ce.remove(),yi(n)),i.preventDefault(),!0}if(Me){var Le=Me.firstElementChild.textContent.length;(0,Z.im)(Me,n.ir.element).start===Le&&Le!==0&&(r.setStart(Me.firstElementChild.firstChild,Le-1),r.collapse(!0),(0,Z.Hc)(r))}}return(i.key==="ArrowUp"||i.key==="ArrowDown")&&ce&&(ce.querySelectorAll(".vditor-ir__node").forEach(function(we){we.contains(d)||we.classList.add("vditor-ir__node--hidden")}),as(i,ce,r))?!0:(Ia(r,i.key),ce&&Ci(ce,n,i,r)?(i.preventDefault(),!0):!1)},Ae=e(190),Ht=function(n,i){n.querySelectorAll("[data-type=footnotes-link]").forEach(function(r){for(var d=r.parentElement,s=d.nextSibling;s&&s.textContent.startsWith("    ");){var p=s;p.childNodes.forEach(function(_){d.append(_.cloneNode(!0))}),s=s.nextSibling,p.remove()}i&&i(d)})},Ke=function(n,i){var r,d=getSelection().getRangeAt(0).cloneRange(),s=d.startContainer;d.startContainer.nodeType!==3&&d.startContainer.tagName==="DIV"&&(s=d.startContainer.childNodes[d.startOffset-1]);var p=(0,w.a1)(s,"data-block","0");if(p&&i&&(i.inputType==="deleteContentBackward"||i.data===" ")){for(var _=(0,Z.im)(p,n.sv.element,d).start,E=!0,F=_-1;F>p.textContent.substr(0,_).lastIndexOf(`
`);F--)if(p.textContent.charAt(F)!==" "&&p.textContent.charAt(F)!=="	"){E=!1;break}if(_===0&&(E=!1),E){Yt(n);return}if(i.inputType==="deleteContentBackward"){var L=(0,w.a1)(s,"data-type","code-block-open-marker")||(0,w.a1)(s,"data-type","code-block-close-marker");if(L){if(L.getAttribute("data-type")==="code-block-close-marker"){var J=So(s,"code-block-open-marker");if(J){J.textContent=L.textContent,Yt(n);return}}if(L.getAttribute("data-type")==="code-block-open-marker"){var J=So(s,"code-block-close-marker",!1);if(J){J.textContent=L.textContent,Yt(n);return}}}var K=(0,w.a1)(s,"data-type","math-block-open-marker");if(K){var fe=K.nextElementSibling.nextElementSibling;fe&&fe.getAttribute("data-type")==="math-block-close-marker"&&(fe.remove(),Yt(n));return}p.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(ce){ce.textContent.length===1&&ce.remove()}),p.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(ce){ce.textContent.length===1&&ce.remove()});var ue=(0,w.a1)(s,"data-type","heading-marker");if(ue&&ue.textContent.indexOf("#")===-1){Yt(n);return}}if((i.data===" "||i.inputType==="deleteContentBackward")&&((0,w.a1)(s,"data-type","padding")||(0,w.a1)(s,"data-type","li-marker")||(0,w.a1)(s,"data-type","task-marker")||(0,w.a1)(s,"data-type","blockquote-marker"))){Yt(n);return}}if(p&&p.textContent.trimRight()==="$$"){Yt(n);return}p||(p=n.sv.element),((r=p.firstElementChild)===null||r===void 0?void 0:r.getAttribute("data-type"))==="link-ref-defs-block"&&(p=n.sv.element),(0,w.a1)(s,"data-type","footnotes-link")&&(p=n.sv.element),p.textContent.indexOf(Lute.Caret)===-1&&d.insertNode(document.createTextNode(Lute.Caret)),p.querySelectorAll("[style]").forEach(function(ce){ce.removeAttribute("style")}),p.querySelectorAll("font").forEach(function(ce){ce.outerHTML=ce.innerHTML});var ae=p.textContent,Me=p.isEqualNode(n.sv.element);if(Me)ae=p.textContent;else{p.previousElementSibling&&(ae=p.previousElementSibling.textContent+ae,p.previousElementSibling.remove()),p.previousElementSibling&&ae.indexOf(`---
`)===0&&(ae=p.previousElementSibling.textContent+ae,p.previousElementSibling.remove());var ve="";n.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ce,Ve){ce&&!p.isEqualNode(ce.parentElement)&&(ve+=ce.parentElement.textContent+`
`,ce.parentElement.remove())}),n.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(ce,Ve){ce&&!p.isEqualNode(ce.parentElement)&&(ve+=ce.parentElement.textContent+`
`,ce.parentElement.remove())}),ae=ve+ae}ae=Wl(ae,n),Me?p.innerHTML=ae:p.outerHTML=ae,n.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ce){n.sv.element.insertAdjacentElement("beforeend",ce.parentElement)}),Ht(n.sv.element,function(ce){n.sv.element.insertAdjacentElement("beforeend",ce)}),(0,Z.ib)(n.sv.element,d),Gt(n),Yt(n,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Wt=function(n,i){var r,d,s,p,_;if(n.sv.composingLock=i.isComposing,i.isComposing||(i.key.indexOf("Arrow")===-1&&i.key!=="Meta"&&i.key!=="Control"&&i.key!=="Alt"&&i.key!=="Shift"&&i.key!=="CapsLock"&&i.key!=="Escape"&&!/^F\d{1,2}$/.test(i.key)&&n.undo.recordFirstPosition(n,i),i.key!=="Enter"&&i.key!=="Tab"&&i.key!=="Backspace"&&i.key.indexOf("Arrow")===-1&&!(0,h.yl)(i)&&i.key!=="Escape"))return!1;var E=(0,Z.zh)(n),F=E.startContainer;E.startContainer.nodeType!==3&&E.startContainer.tagName==="DIV"&&(F=E.startContainer.childNodes[E.startOffset-1]);var L=(0,w.a1)(F,"data-type","text"),J=(0,w.a1)(F,"data-type","blockquote-marker");if(!J&&E.startOffset===0&&L&&L.previousElementSibling&&L.previousElementSibling.getAttribute("data-type")==="blockquote-marker"&&(J=L.previousElementSibling),J&&i.key==="Enter"&&!(0,h.yl)(i)&&!i.altKey&&J.nextElementSibling.textContent.trim()===""&&(0,Z.im)(J,n.sv.element,E).start===J.textContent.length)return((r=J.previousElementSibling)===null||r===void 0?void 0:r.getAttribute("data-type"))==="padding"&&J.previousElementSibling.setAttribute("data-action","enter-remove"),J.remove(),Yt(n),i.preventDefault(),!0;var K=(0,w.a1)(F,"data-type","li-marker"),fe=(0,w.a1)(F,"data-type","task-marker"),ue=K;if(ue||fe&&fe.nextElementSibling.getAttribute("data-type")!=="task-marker"&&(ue=fe),!ue&&E.startOffset===0&&L&&L.previousElementSibling&&(L.previousElementSibling.getAttribute("data-type")==="li-marker"||L.previousElementSibling.getAttribute("data-type")==="task-marker")&&(ue=L.previousElementSibling),ue){var ae=(0,Z.im)(ue,n.sv.element,E).start,Me=ue.getAttribute("data-type")==="task-marker",ve=ue;if(Me&&(ve=ue.previousElementSibling.previousElementSibling.previousElementSibling),ae===ue.textContent.length){if(i.key==="Enter"&&!(0,h.yl)(i)&&!i.altKey&&!i.shiftKey&&ue.nextElementSibling.textContent.trim()==="")return((d=ve.previousElementSibling)===null||d===void 0?void 0:d.getAttribute("data-type"))==="padding"?(ve.previousElementSibling.remove(),Ke(n)):(Me&&(ve.remove(),ue.previousElementSibling.previousElementSibling.remove(),ue.previousElementSibling.remove()),ue.nextElementSibling.remove(),ue.remove(),Yt(n)),i.preventDefault(),!0;if(i.key==="Tab")return i.shiftKey?ve.previousElementSibling.getAttribute("data-type")==="padding"&&ve.previousElementSibling.remove():ve.insertAdjacentHTML("beforebegin",'<span data-type="padding">'.concat(ve.textContent.replace(/\S/g," "),"</span>")),/^\d/.test(ve.textContent)&&(ve.textContent=ve.textContent.replace(/^\d{1,}/,"1"),E.selectNodeContents(ue.firstChild),E.collapse(!1)),Ke(n),i.preventDefault(),!0}}if(Ao(n,E,i))return!0;var ce=(0,w.a1)(F,"data-block","0"),Ve=(0,W.S)(F,"SPAN");if(i.key==="Enter"&&!(0,h.yl)(i)&&!i.altKey&&!i.shiftKey&&ce){var Le=!1,we=ce.textContent.match(/^\n+/);(0,Z.im)(ce,n.sv.element).start<=(we?we[0].length:0)&&(Le=!0);var gt=`
`;if(Ve){if(((s=Ve.previousElementSibling)===null||s===void 0?void 0:s.getAttribute("data-action"))==="enter-remove")return Ve.previousElementSibling.remove(),Yt(n),i.preventDefault(),!0;gt+=Mo(Ve)}return E.insertNode(document.createTextNode(gt)),E.collapse(!1),ce&&ce.textContent.trim()!==""&&!Le?Ke(n):Yt(n),i.preventDefault(),!0}if(i.key==="Backspace"&&!(0,h.yl)(i)&&!i.altKey&&!i.shiftKey){if(Ve&&((p=Ve.previousElementSibling)===null||p===void 0?void 0:p.getAttribute("data-type"))==="newline"&&(0,Z.im)(Ve,n.sv.element,E).start===1&&Ve.getAttribute("data-type").indexOf("code-block-")===-1)return E.setStart(Ve,0),E.extractContents(),Ve.textContent.trim()!==""?Ke(n):Yt(n),i.preventDefault(),!0;if(ce&&(0,Z.im)(ce,n.sv.element,E).start===0&&ce.previousElementSibling){E.extractContents();var ct=ce.previousElementSibling.lastElementChild;return ct.getAttribute("data-type")==="newline"&&(ct.remove(),ct=ce.previousElementSibling.lastElementChild),ct.getAttribute("data-type")!=="newline"&&(ct.insertAdjacentHTML("afterend",ce.innerHTML),ce.remove()),ce.textContent.trim()!==""&&!(!((_=ce.previousElementSibling)===null||_===void 0)&&_.querySelector('[data-type="code-block-open-marker"]'))?Ke(n):(ct.getAttribute("data-type")!=="newline"&&(E.selectNodeContents(ct.lastChild),E.collapse(!1)),Yt(n)),i.preventDefault(),!0}}return!1},Be=e(538),mt=function(n){n.options.theme==="dark"?n.element.classList.add("vditor--dark"):n.element.classList.remove("vditor--dark")},Cn=function(n){n.element.innerHTML="",n.element.classList.add("vditor"),n.options.rtl&&n.element.setAttribute("dir","rtl"),mt(n),(0,Be.Z)(n.options.preview.theme.current,n.options.preview.theme.path),typeof n.options.height=="number"?n.element.style.height=n.options.height+"px":n.element.style.height=n.options.height,typeof n.options.minHeight=="number"&&(n.element.style.minHeight=n.options.minHeight+"px"),typeof n.options.width=="number"?n.element.style.width=n.options.width+"px":n.element.style.width=n.options.width,n.element.appendChild(n.toolbar.element);var i=document.createElement("div");if(i.className="vditor-content",n.options.outline.position==="left"&&i.appendChild(n.outline.element),i.appendChild(n.wysiwyg.element.parentElement),i.appendChild(n.sv.element),i.appendChild(n.ir.element.parentElement),i.appendChild(n.preview.element),n.toolbar.elements.devtools&&i.appendChild(n.devtools.element),n.options.outline.position==="right"&&(n.outline.element.classList.add("vditor-outline--right"),i.appendChild(n.outline.element)),n.upload&&i.appendChild(n.upload.element),n.options.resize.enable&&i.appendChild(n.resize.element),i.appendChild(n.hint.element),i.appendChild(n.tip.element),n.element.appendChild(i),i.addEventListener("click",function(){P(n,["subToolbar"])}),n.toolbar.elements.export&&n.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>'),nr(n,n.options.mode,bo(n)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&typeof window.visualViewport<"u"){var r=!1,d=function(s){r||(r=!0,requestAnimationFrame(function(){r=!1;var p=n.toolbar.element;p.style.transform="none",p.getBoundingClientRect().top<0&&(p.style.transform="translate(0, ".concat(-p.getBoundingClientRect().top,"px)"))}))};window.visualViewport.addEventListener("scroll",d),window.visualViewport.addEventListener("resize",d)}},Rn=function(n){var i=window.innerWidth<=u.g.MOBILE_WIDTH?10:35;if(n.wysiwyg.element.parentElement.style.display!=="none"){var r=(n.wysiwyg.element.parentElement.clientWidth-n.options.preview.maxWidth)/2;n.wysiwyg.element.style.padding="10px ".concat(Math.max(i,r),"px")}if(n.ir.element.parentElement.style.display!=="none"){var r=(n.ir.element.parentElement.clientWidth-n.options.preview.maxWidth)/2;n.ir.element.style.padding="10px ".concat(Math.max(i,r),"px")}n.preview.element.style.display!=="block"?n.toolbar.element.style.paddingLeft=Math.max(5,parseInt(n[n.currentMode].element.style.paddingLeft||"0",10)+(n.options.outline.position==="left"?n.outline.element.offsetWidth:0))+"px":n.toolbar.element.style.paddingLeft=5+(n.options.outline.position==="left"?n.outline.element.offsetWidth:0)+"px"},ki=function(n){if(n.options.typewriterMode){var i=window.innerHeight;typeof n.options.height=="number"?(i=n.options.height,typeof n.options.minHeight=="number"&&(i=Math.max(i,n.options.minHeight)),i=Math.min(window.innerHeight,i)):i=n.element.clientHeight,n.element.classList.contains("vditor--fullscreen")&&(i=window.innerHeight),n[n.currentMode].element.style.setProperty("--editor-bottom",(i-n.toolbar.element.offsetHeight)/2+"px")}},Pn;function Tr(){window.removeEventListener("resize",Pn)}var bo=function(n){ki(n),Tr(),window.addEventListener("resize",Pn=function(){Rn(n),ki(n)});var i=(0,h.pK)()&&localStorage.getItem(n.options.cache.id);return(!n.options.cache.enable||!i)&&(n.options.value?i=n.options.value:n.originalInnerHTML?i=n.lute.HTML2Md(n.originalInnerHTML):n.options.cache.enable||(i="")),i||""},Gr=function(n){clearTimeout(n[n.currentMode].hlToolbarTimeoutId),n[n.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(n[n.currentMode].element.getAttribute("contenteditable")!=="false"&&(0,Z.Gb)(n[n.currentMode].element)){T(n.toolbar.elements,u.g.EDIT_TOOLBARS),x(n.toolbar.elements,u.g.EDIT_TOOLBARS);var i=(0,Z.zh)(n),r=i.startContainer;i.startContainer.nodeType===3&&(r=i.startContainer.parentElement),r.classList.contains("vditor-reset")&&(r=r.childNodes[i.startOffset]);var d=n.currentMode==="sv"?(0,w.a1)(r,"data-type","heading"):(0,W.W)(r);d&&y(n.toolbar.elements,["headings"]);var s=n.currentMode==="sv"?(0,w.a1)(r,"data-type","blockquote"):(0,w.lG)(r,"BLOCKQUOTE");s&&y(n.toolbar.elements,["quote"]);var p=(0,w.a1)(r,"data-type","strong");p&&y(n.toolbar.elements,["bold"]);var _=(0,w.a1)(r,"data-type","em");_&&y(n.toolbar.elements,["italic"]);var E=(0,w.a1)(r,"data-type","s");E&&y(n.toolbar.elements,["strike"]);var F=(0,w.a1)(r,"data-type","a");F&&y(n.toolbar.elements,["link"]);var L=(0,w.lG)(r,"LI");L?(L.classList.contains("vditor-task")?y(n.toolbar.elements,["check"]):L.parentElement.tagName==="OL"?y(n.toolbar.elements,["ordered-list"]):L.parentElement.tagName==="UL"&&y(n.toolbar.elements,["list"]),x(n.toolbar.elements,["outdent","indent"])):v(n.toolbar.elements,["outdent","indent"]);var J=(0,w.a1)(r,"data-type","code-block");J&&(v(n.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),y(n.toolbar.elements,["code"]));var K=(0,w.a1)(r,"data-type","code");K&&(v(n.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),y(n.toolbar.elements,["inline-code"]));var fe=(0,w.a1)(r,"data-type","table");fe&&v(n.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}},200)},_t=function(n,i){i===void 0&&(i={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),i.enableHint&&n.hint.render(n),clearTimeout(n.wysiwyg.afterRenderTimeoutId),n.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(!n.wysiwyg.composingLock){var r=N(n);typeof n.options.input=="function"&&i.enableInput&&n.options.input(r),n.options.counter.enable&&n.counter.render(n,r),n.options.cache.enable&&(0,h.pK)()&&(localStorage.setItem(n.options.cache.id,r),n.options.cache.after&&n.options.cache.after(r)),n.devtools&&n.devtools.renderEchart(n),i.enableAddUndoStack&&n.undo.addToUndoStack(n)}},n.options.undoDelay)},Pc=function(n){for(var i=n.previousSibling;i;){if(i.nodeType!==3&&i.tagName==="A"&&!i.previousSibling&&i.innerHTML.replace(u.g.ZWSP,"")===""&&i.nextSibling)return i;i=i.previousSibling}return!1},Kr=function(n){for(var i=n.startContainer.nextSibling;i&&i.textContent==="";)i=i.nextSibling;return!!(i&&i.nodeType!==3&&(i.tagName==="CODE"||i.getAttribute("data-type")==="math-inline"||i.getAttribute("data-type")==="html-entity"||i.getAttribute("data-type")==="html-inline"))},Qi=function(n){for(var i="",r=n.nextSibling;r;)r.nodeType===3?i+=r.textContent:i+=r.outerHTML,r=r.nextSibling;return i},xo=function(n){for(var i="",r=n.previousSibling;r;)r.nodeType===3?i=r.textContent+i:i=r.outerHTML+i,r=r.previousSibling;return i},ba=function(n){for(var i=n;i&&!i.nextSibling;)i=i.parentElement;return i.nextSibling},xa=function(n){var i=xo(n.startContainer),r=Qi(n.startContainer),d=n.startContainer.textContent,s=n.startOffset,p="",_="";return(d.substr(0,s)!==""&&d.substr(0,s)!==u.g.ZWSP||i)&&(p="".concat(i).concat(d.substr(0,s))),(d.substr(s)!==""&&d.substr(s)!==u.g.ZWSP||r)&&(_="".concat(d.substr(s)).concat(r)),{afterHTML:_,beforeHTML:p}},qr=function(n,i){Array.from(n.wysiwyg.element.childNodes).find(function(r){if(r.nodeType===3){var d=document.createElement("p");d.setAttribute("data-block","0"),d.textContent=r.textContent;var s=i.startContainer.nodeType===3?i.startOffset:r.textContent.length;return r.parentNode.insertBefore(d,r),r.remove(),i.setStart(d.firstChild,Math.min(d.firstChild.textContent.length,s)),i.collapse(!0),(0,Z.Hc)(i),!0}else if(!r.getAttribute("data-block"))return r.tagName==="P"?r.remove():(r.tagName==="DIV"?(i.insertNode(document.createElement("wbr")),r.outerHTML='<p data-block="0">'.concat(r.innerHTML,"</p>")):r.tagName==="BR"?r.outerHTML='<p data-block="0">'.concat(r.outerHTML,"<wbr></p>"):(i.insertNode(document.createElement("wbr")),r.outerHTML='<p data-block="0">'.concat(r.outerHTML,"</p>")),(0,Z.ib)(n.wysiwyg.element,i),i=getSelection().getRangeAt(0)),!0})},Sr=function(n,i){var r=(0,Z.zh)(n),d=(0,w.F9)(r.startContainer);d||(d=r.startContainer.childNodes[r.startOffset]),!d&&n.wysiwyg.element.children.length===0&&(d=n.wysiwyg.element),d&&!d.classList.contains("vditor-wysiwyg__block")&&(r.insertNode(document.createElement("wbr")),d.innerHTML.trim()==="<wbr>"&&(d.innerHTML="<wbr><br>"),d.tagName==="BLOCKQUOTE"||d.classList.contains("vditor-reset")?d.innerHTML="<".concat(i,' data-block="0">').concat(d.innerHTML.trim(),"</").concat(i,">"):d.outerHTML="<".concat(i,' data-block="0">').concat(d.innerHTML.trim(),"</").concat(i,">"),(0,Z.ib)(n.wysiwyg.element,r),oi(n))},Xr=function(n){var i=getSelection().getRangeAt(0),r=(0,w.F9)(i.startContainer);r||(r=i.startContainer.childNodes[i.startOffset]),r&&(i.insertNode(document.createElement("wbr")),r.outerHTML='<p data-block="0">'.concat(r.innerHTML,"</p>"),(0,Z.ib)(n.wysiwyg.element,i)),n.wysiwyg.popover.style.display="none"},Yi=function(n,i,r){r===void 0&&(r=!0);var d=n.previousElementSibling,s=d.ownerDocument.createRange();d.tagName==="CODE"?(d.style.display="inline-block",r?s.setStart(d.firstChild,1):s.selectNodeContents(d)):(d.style.display="block",d.firstChild.firstChild||d.firstChild.appendChild(document.createTextNode("")),s.selectNodeContents(d.firstChild)),r?s.collapse(!0):s.collapse(!1),(0,Z.Hc)(s),!n.firstElementChild.classList.contains("language-mindmap")&&Gt(i)},Ta=function(n,i){if(n.wysiwyg.composingLock=i.isComposing,i.isComposing)return!1;i.key.indexOf("Arrow")===-1&&i.key!=="Meta"&&i.key!=="Control"&&i.key!=="Alt"&&i.key!=="Shift"&&i.key!=="CapsLock"&&i.key!=="Escape"&&!/^F\d{1,2}$/.test(i.key)&&n.undo.recordFirstPosition(n,i);var r=(0,Z.zh)(n),d=r.startContainer;if(!zo(i,n,d)||(Ql(r,n,i),No(r),i.key!=="Enter"&&i.key!=="Tab"&&i.key!=="Backspace"&&i.key.indexOf("Arrow")===-1&&!(0,h.yl)(i)&&i.key!=="Escape"&&i.key!=="Delete"))return!1;var s=(0,w.F9)(d),p=(0,w.lG)(d,"P");if(Va(i,n,p,r)||Zl(r,n,p,i)||Wa(n,i,r))return!0;var _=(0,w.fb)(d,"vditor-wysiwyg__block");if(_){if(i.key==="Escape"&&_.children.length===2)return n.wysiwyg.popover.style.display="none",_.firstElementChild.style.display="none",n.wysiwyg.element.blur(),i.preventDefault(),!0;if(!(0,h.yl)(i)&&!i.shiftKey&&i.altKey&&i.key==="Enter"&&_.getAttribute("data-type")==="code-block"){var E=n.wysiwyg.popover.querySelector(".vditor-input");return E.focus(),E.select(),i.preventDefault(),!0}if(_.getAttribute("data-block")==="0"&&(ns(n,i,_.firstElementChild,r)||Er(n,i,r,_.firstElementChild,_)||_.getAttribute("data-type")!=="yaml-front-matter"&&Ai(n,i,r,_.firstElementChild,_)))return!0}if(is(n,r,i,p))return!0;var F=(0,w.E2)(d,"BLOCKQUOTE");if(F&&!i.shiftKey&&i.altKey&&i.key==="Enter"){(0,h.yl)(i)?r.setStartBefore(F):r.setStartAfter(F),(0,Z.Hc)(r);var L=document.createElement("p");return L.setAttribute("data-block","0"),L.innerHTML=`
`,r.insertNode(L),r.collapse(!0),(0,Z.Hc)(r),_t(n),Gt(n),i.preventDefault(),!0}var J=(0,W.W)(d);if(J){if(J.tagName==="H6"&&d.textContent.length===r.startOffset&&!(0,h.yl)(i)&&!i.shiftKey&&!i.altKey&&i.key==="Enter"){var K=document.createElement("p");return K.textContent=`
`,K.setAttribute("data-block","0"),d.parentElement.insertAdjacentElement("afterend",K),r.setStart(K,0),(0,Z.Hc)(r),_t(n),Gt(n),i.preventDefault(),!0}if(pe("\u2318=",i)){var fe=parseInt(J.tagName.substr(1),10)-1;return fe>0&&(Sr(n,"h".concat(fe)),_t(n)),i.preventDefault(),!0}if(pe("\u2318-",i)){var fe=parseInt(J.tagName.substr(1),10)+1;return fe<7&&(Sr(n,"h".concat(fe)),_t(n)),i.preventDefault(),!0}i.key==="Backspace"&&!(0,h.yl)(i)&&!i.shiftKey&&!i.altKey&&J.textContent.length===1&&Xr(n)}if(rs(n,r,i))return!0;if(i.altKey&&i.key==="Enter"&&!(0,h.yl)(i)&&!i.shiftKey){var ue=(0,w.lG)(d,"A"),ae=(0,w.a1)(d,"data-type","link-ref"),Me=(0,w.a1)(d,"data-type","footnotes-ref");if(ue||ae||Me||J&&J.tagName.length===2){var ve=n.wysiwyg.popover.querySelector("input");ve.focus(),ve.select()}}if(un(n,i))return!0;if(pe("\u21E7\u2318U",i)){var ce=n.wysiwyg.popover.querySelector('[data-type="up"]');if(ce)return ce.click(),i.preventDefault(),!0}if(pe("\u21E7\u2318D",i)){var ce=n.wysiwyg.popover.querySelector('[data-type="down"]');if(ce)return ce.click(),i.preventDefault(),!0}if(Ao(n,r,i))return!0;if(!(0,h.yl)(i)&&i.shiftKey&&!i.altKey&&i.key==="Enter"&&d.parentElement.tagName!=="LI"&&d.parentElement.tagName!=="P")return["STRONG","STRIKE","S","I","EM","B"].includes(d.parentElement.tagName)?r.insertNode(document.createTextNode(`
`+u.g.ZWSP)):r.insertNode(document.createTextNode(`
`)),r.collapse(!1),(0,Z.Hc)(r),_t(n),Gt(n),i.preventDefault(),!0;if(i.key==="Backspace"&&!(0,h.yl)(i)&&!i.shiftKey&&!i.altKey&&r.toString()===""){if(os(n,r,i,p))return!0;if(s){if(s.previousElementSibling&&s.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&s.previousElementSibling.getAttribute("data-block")==="0"&&s.tagName!=="UL"&&s.tagName!=="OL"){var Ve=(0,Z.im)(s,n.wysiwyg.element,r).start;if(Ve===0&&r.startOffset===0||Ve===1&&s.innerText.startsWith(u.g.ZWSP))return Yi(s.previousElementSibling.lastElementChild,n,!1),s.innerHTML.trim().replace(u.g.ZWSP,"")===""&&(s.remove(),_t(n)),i.preventDefault(),!0}var Le=r.startOffset;if(r.toString()===""&&d.nodeType===3&&d.textContent.charAt(Le-2)===`
`&&d.textContent.charAt(Le-1)!==u.g.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(d.parentElement.tagName))return d.textContent=d.textContent.substring(0,Le-1)+u.g.ZWSP,r.setStart(d,Le),r.collapse(!0),_t(n),i.preventDefault(),!0;d.textContent===u.g.ZWSP&&r.startOffset===1&&!d.previousSibling&&Kr(r)&&(d.textContent=""),s.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(gt){gt.firstElementChild.style.display="inline",gt.lastElementChild.style.display="none"}),s.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(gt){gt.firstElementChild.style.display="inline",gt.lastElementChild.style.display="none"})}}if((0,h.vU)()&&r.startOffset===1&&d.textContent.indexOf(u.g.ZWSP)>-1&&d.previousSibling&&d.previousSibling.nodeType!==3&&d.previousSibling.tagName==="CODE"&&(i.key==="Backspace"||i.key==="ArrowLeft"))return r.selectNodeContents(d.previousSibling),r.collapse(!1),i.preventDefault(),!0;if(as(i,s,r))return i.preventDefault(),!0;if(Ia(r,i.key),i.key==="ArrowDown"){var we=d.nextSibling;we&&we.nodeType!==3&&we.getAttribute("data-type")==="math-inline"&&r.setStartAfter(we)}return s&&Ci(s,n,i,r)?(i.preventDefault(),!0):!1},un=function(n,i){if(pe("\u21E7\u2318X",i)){var r=n.wysiwyg.popover.querySelector('[data-type="remove"]');return r&&r.click(),i.preventDefault(),!0}},Zi=function(n){clearTimeout(n.wysiwyg.hlToolbarTimeoutId),n.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(n.wysiwyg.element.getAttribute("contenteditable")!=="false"&&(0,Z.Gb)(n.wysiwyg.element)){T(n.toolbar.elements,u.g.EDIT_TOOLBARS),x(n.toolbar.elements,u.g.EDIT_TOOLBARS);var i=getSelection().getRangeAt(0),r=i.startContainer;i.startContainer.nodeType===3?r=i.startContainer.parentElement:r=r.childNodes[i.startOffset>=r.childNodes.length?r.childNodes.length-1:i.startOffset];var d=(0,w.a1)(r,"data-type","footnotes-block");if(d){n.wysiwyg.popover.innerHTML="",Bn(d,n),Vn(n,d);return}var s=(0,w.lG)(r,"LI");s?(s.classList.contains("vditor-task")?y(n.toolbar.elements,["check"]):s.parentElement.tagName==="OL"?y(n.toolbar.elements,["ordered-list"]):s.parentElement.tagName==="UL"&&y(n.toolbar.elements,["list"]),x(n.toolbar.elements,["outdent","indent"])):v(n.toolbar.elements,["outdent","indent"]),(0,w.lG)(r,"BLOCKQUOTE")&&y(n.toolbar.elements,["quote"]),((0,w.lG)(r,"B")||(0,w.lG)(r,"STRONG"))&&y(n.toolbar.elements,["bold"]),((0,w.lG)(r,"I")||(0,w.lG)(r,"EM"))&&y(n.toolbar.elements,["italic"]),((0,w.lG)(r,"STRIKE")||(0,w.lG)(r,"S"))&&y(n.toolbar.elements,["strike"]),n.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(ze){ze.classList.remove("vditor-comment--focus")});var p=(0,w.fb)(r,"vditor-comment");if(p){var _=p.getAttribute("data-cmtids").split(" ");if(_.length>1&&p.nextSibling.isSameNode(p.nextElementSibling)){var E=p.nextElementSibling.getAttribute("data-cmtids").split(" ");_.find(function(ze){if(E.includes(ze))return _=[ze],!0})}n.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(ze){ze.getAttribute("data-cmtids").indexOf(_[0])>-1&&ze.classList.add("vditor-comment--focus")})}var F=(0,w.lG)(r,"A");F&&y(n.toolbar.elements,["link"]);var L=(0,w.lG)(r,"TABLE"),J=(0,W.W)(r);(0,w.lG)(r,"CODE")?(0,w.lG)(r,"PRE")?(v(n.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),y(n.toolbar.elements,["code"])):(v(n.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),y(n.toolbar.elements,["inline-code"])):J?(v(n.toolbar.elements,["bold"]),y(n.toolbar.elements,["headings"])):L&&v(n.toolbar.elements,["table"]);var K=(0,w.fb)(r,"vditor-toc");if(K){n.wysiwyg.popover.innerHTML="",Bn(K,n),Vn(n,K);return}var fe=(0,W.S)(r,"BLOCKQUOTE");if(fe&&(n.wysiwyg.popover.innerHTML="",er(i,fe,n),tr(i,fe,n),Bn(fe,n),Vn(n,fe)),s&&(n.wysiwyg.popover.innerHTML="",er(i,s,n),tr(i,s,n),Bn(s,n),Vn(n,s)),L){var ue=n.options.lang,ae=n.options;n.wysiwyg.popover.innerHTML="";var Me=function(){var ze=L.rows.length,dt=L.rows[0].cells.length,bi=parseInt(wn.value,10)||ze,Wn=parseInt(bn.value,10)||dt;if(!(bi===ze&&dt===Wn)){if(dt!==Wn)for(var ro=Wn-dt,St=0;St<L.rows.length;St++)if(ro>0)for(var cn=0;cn<ro;cn++)St===0?L.rows[St].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):L.rows[St].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var tl=dt-1;tl>=Wn;tl--)L.rows[St].cells[tl].remove();if(ze!==bi){var zs=bi-ze;if(zs>0){for(var Bo="<tr>",Fr=0;Fr<Wn;Fr++)Bo+="<td> </td>";for(var Ho=0;Ho<zs;Ho++)L.querySelector("tbody")?L.querySelector("tbody").insertAdjacentHTML("beforeend",Bo):L.querySelector("thead").insertAdjacentHTML("afterend",Bo+"</tr>")}else for(var Fr=ze-1;Fr>=bi;Fr--)L.rows[Fr].remove(),L.rows.length===1&&L.querySelector("tbody").remove()}typeof n.options.input=="function"&&n.options.input(N(n))}},ve=function(ze){zr(L,ze),ze==="right"?(we.classList.remove("vditor-icon--current"),gt.classList.remove("vditor-icon--current"),ct.classList.add("vditor-icon--current")):ze==="center"?(we.classList.remove("vditor-icon--current"),ct.classList.remove("vditor-icon--current"),gt.classList.add("vditor-icon--current")):(gt.classList.remove("vditor-icon--current"),ct.classList.remove("vditor-icon--current"),we.classList.add("vditor-icon--current")),(0,Z.Hc)(i),_t(n)},ce=(0,w.lG)(r,"TD"),Ve=(0,w.lG)(r,"TH"),Le="left";ce?Le=ce.getAttribute("align")||"left":Ve&&(Le=Ve.getAttribute("align")||"center");var we=document.createElement("button");we.setAttribute("type","button"),we.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,h.ns)("\u21E7\u2318L")+">"),we.setAttribute("data-type","left"),we.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',we.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(Le==="left"?" vditor-icon--current":""),we.onclick=function(){ve("left")};var gt=document.createElement("button");gt.setAttribute("type","button"),gt.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,h.ns)("\u21E7\u2318C")+">"),gt.setAttribute("data-type","center"),gt.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',gt.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(Le==="center"?" vditor-icon--current":""),gt.onclick=function(){ve("center")};var ct=document.createElement("button");ct.setAttribute("type","button"),ct.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,h.ns)("\u21E7\u2318R")+">"),ct.setAttribute("data-type","right"),ct.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',ct.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(Le==="right"?" vditor-icon--current":""),ct.onclick=function(){ve("right")};var wt=document.createElement("button");wt.setAttribute("type","button"),wt.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,h.ns)("\u2318=")+">"),wt.setAttribute("data-type","insertRow"),wt.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',wt.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",wt.onclick=function(){var ze=getSelection().getRangeAt(0).startContainer,dt=(0,w.lG)(ze,"TD")||(0,w.lG)(ze,"TH");dt&&Ba(n,i,dt)};var yn=document.createElement("button");yn.setAttribute("type","button"),yn.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,h.ns)("\u21E7\u2318F")+">"),yn.setAttribute("data-type","insertRow"),yn.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',yn.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",yn.onclick=function(){var ze=getSelection().getRangeAt(0).startContainer,dt=(0,w.lG)(ze,"TD")||(0,w.lG)(ze,"TH");dt&&Ha(n,i,dt)};var ln=document.createElement("button");ln.setAttribute("type","button"),ln.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,h.ns)("\u21E7\u2318=")+">"),ln.setAttribute("data-type","insertColumn"),ln.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',ln.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",ln.onclick=function(){var ze=getSelection().getRangeAt(0).startContainer,dt=(0,w.lG)(ze,"TD")||(0,w.lG)(ze,"TH");dt&&Fo(n,L,dt)};var vn=document.createElement("button");vn.setAttribute("type","button"),vn.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,h.ns)("\u21E7\u2318G")+">"),vn.setAttribute("data-type","insertColumn"),vn.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',vn.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",vn.onclick=function(){var ze=getSelection().getRangeAt(0).startContainer,dt=(0,w.lG)(ze,"TD")||(0,w.lG)(ze,"TH");dt&&Fo(n,L,dt,"beforebegin")};var et=document.createElement("button");et.setAttribute("type","button"),et.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,h.ns)("\u2318-")+">"),et.setAttribute("data-type","deleteRow"),et.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',et.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",et.onclick=function(){var ze=getSelection().getRangeAt(0).startContainer,dt=(0,w.lG)(ze,"TD")||(0,w.lG)(ze,"TH");dt&&es(n,i,dt)};var Jt=document.createElement("button");Jt.setAttribute("type","button"),Jt.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,h.ns)("\u21E7\u2318-")+">"),Jt.setAttribute("data-type","deleteColumn"),Jt.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',Jt.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Jt.onclick=function(){var ze=getSelection().getRangeAt(0).startContainer,dt=(0,w.lG)(ze,"TD")||(0,w.lG)(ze,"TH");dt&&ts(n,i,L,dt)};var sn=document.createElement("span");sn.setAttribute("aria-label",window.VditorI18n.row),sn.className="vditor-tooltipped vditor-tooltipped__n";var wn=document.createElement("input");sn.appendChild(wn),wn.type="number",wn.min="1",wn.className="vditor-input",wn.style.width="42px",wn.style.textAlign="center",wn.setAttribute("placeholder",window.VditorI18n.row),wn.value=L.rows.length.toString(),wn.oninput=function(){Me()},wn.onkeydown=function(ze){if(!ze.isComposing){if(ze.key==="Tab"){bn.focus(),bn.select(),ze.preventDefault();return}un(n,ze)||Qn(ze,i)}};var rr=document.createElement("span");rr.setAttribute("aria-label",window.VditorI18n.column),rr.className="vditor-tooltipped vditor-tooltipped__n";var bn=document.createElement("input");rr.appendChild(bn),bn.type="number",bn.min="1",bn.className="vditor-input",bn.style.width="42px",bn.style.textAlign="center",bn.setAttribute("placeholder",window.VditorI18n.column),bn.value=L.rows[0].cells.length.toString(),bn.oninput=function(){Me()},bn.onkeydown=function(ze){if(!ze.isComposing){if(ze.key==="Tab"){wn.focus(),wn.select(),ze.preventDefault();return}un(n,ze)||Qn(ze,i)}},er(i,L,n),tr(i,L,n),Bn(L,n),n.wysiwyg.popover.insertAdjacentElement("beforeend",we),n.wysiwyg.popover.insertAdjacentElement("beforeend",gt),n.wysiwyg.popover.insertAdjacentElement("beforeend",ct),n.wysiwyg.popover.insertAdjacentElement("beforeend",yn),n.wysiwyg.popover.insertAdjacentElement("beforeend",wt),n.wysiwyg.popover.insertAdjacentElement("beforeend",vn),n.wysiwyg.popover.insertAdjacentElement("beforeend",ln),n.wysiwyg.popover.insertAdjacentElement("beforeend",et),n.wysiwyg.popover.insertAdjacentElement("beforeend",Jt),n.wysiwyg.popover.insertAdjacentElement("beforeend",sn),n.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),n.wysiwyg.popover.insertAdjacentElement("beforeend",rr),Vn(n,L)}var Vo=(0,w.a1)(r,"data-type","link-ref");Vo&&Vl(n,Vo,i);var vi=(0,w.a1)(r,"data-type","footnotes-ref");if(vi){var ue=n.options.lang,ae=n.options;n.wysiwyg.popover.innerHTML="";var sn=document.createElement("span");sn.setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,h.ns)("\u2325Enter")+">"),sn.className="vditor-tooltipped vditor-tooltipped__n";var ai=document.createElement("input");sn.appendChild(ai),ai.className="vditor-input",ai.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,h.ns)("\u2325Enter")+">"),ai.style.width="120px",ai.value=vi.getAttribute("data-footnotes-label"),ai.oninput=function(){ai.value.trim()!==""&&vi.setAttribute("data-footnotes-label",ai.value),typeof n.options.input=="function"&&n.options.input(N(n))},ai.onkeydown=function(Wn){Wn.isComposing||un(n,Wn)||Qn(Wn,i)},Bn(vi,n),n.wysiwyg.popover.insertAdjacentElement("beforeend",sn),Vn(n,vi)}var Vt=(0,w.fb)(r,"vditor-wysiwyg__block"),Ii=Vt?Vt.getAttribute("data-type").indexOf("block")>-1:!1;if(n.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(ze){if(!Vt||Vt&&Ii&&!Vt.contains(ze)){var dt=ze.previousElementSibling;dt.style.display="none"}}),Vt&&Ii){if(n.wysiwyg.popover.innerHTML="",er(i,Vt,n),tr(i,Vt,n),Bn(Vt,n),Vt.getAttribute("data-type")==="code-block"){var or=document.createElement("span");or.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,h.ns)("\u2325Enter")+">"),or.className="vditor-tooltipped vditor-tooltipped__n";var Zn=document.createElement("input");or.appendChild(Zn);var no=Vt.firstElementChild.firstElementChild;Zn.className="vditor-input",Zn.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,h.ns)("\u2325Enter")+">"),Zn.value=no.className.indexOf("language-")>-1?no.className.split("-")[1].split(" ")[0]:"",Zn.oninput=function(ze){Zn.value.trim()!==""?no.className="language-".concat(Zn.value):(no.className="",n.hint.recentLanguage=""),Vt.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(Vt.lastElementChild.innerHTML=Vt.firstElementChild.innerHTML,Tt(Vt.lastElementChild,n)),_t(n),ze.detail===1&&(i.setStart(no.firstChild,0),i.collapse(!0),(0,Z.Hc)(i))},Zn.onkeydown=function(ze){if(!ze.isComposing&&!un(n,ze)){if(ze.key==="Escape"&&n.hint.element.style.display==="block"){n.hint.element.style.display="none",ze.preventDefault();return}n.hint.select(ze,n),Qn(ze,i)}},Zn.onkeyup=function(ze){var dt,bi;if(!(ze.isComposing||ze.key==="Enter"||ze.key==="ArrowUp"||ze.key==="Escape"||ze.key==="ArrowDown")){var Wn=[],ro=Zn.value.substring(0,Zn.selectionStart);(n.options.preview.hljs.langs||u.g.ALIAS_CODE_LANGUAGES.concat(((bi=(dt=window.hljs)===null||dt===void 0?void 0:dt.listLanguages())!==null&&bi!==void 0?bi:[]).sort())).forEach(function(St){St.indexOf(ro.toLowerCase())>-1&&Wn.push({html:St,value:St})}),n.hint.genHTML(Wn,ro,n),ze.preventDefault()}},n.wysiwyg.popover.insertAdjacentElement("beforeend",or)}Vn(n,Vt)}else Vt=void 0;if(J){n.wysiwyg.popover.innerHTML="";var sn=document.createElement("span");sn.setAttribute("aria-label","ID<"+(0,h.ns)("\u2325Enter")+">"),sn.className="vditor-tooltipped vditor-tooltipped__n";var Ri=document.createElement("input");sn.appendChild(Ri),Ri.className="vditor-input",Ri.setAttribute("placeholder","ID<"+(0,h.ns)("\u2325Enter")+">"),Ri.style.width="120px",Ri.value=J.getAttribute("data-id")||"",Ri.oninput=function(){J.setAttribute("data-id",Ri.value),typeof n.options.input=="function"&&n.options.input(N(n))},Ri.onkeydown=function(dt){dt.isComposing||un(n,dt)||Qn(dt,i)},er(i,J,n),tr(i,J,n),Bn(J,n),n.wysiwyg.popover.insertAdjacentElement("beforeend",sn),Vn(n,J)}if(F&&Sa(n,F,i),!fe&&!s&&!L&&!Vt&&!F&&!Vo&&!vi&&!J&&!K){var wi=(0,w.a1)(r,"data-block","0");wi&&wi.parentElement.isEqualNode(n.wysiwyg.element)?(n.wysiwyg.popover.innerHTML="",er(i,wi,n),tr(i,wi,n),Bn(wi,n),Vn(n,wi)):n.wysiwyg.popover.style.display="none"}n.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(ze){ze.style.display="none"});var io=(0,w.a1)(i.startContainer,"data-type","backslash");io&&(io.querySelector("span").style.display="inline")}},200)},Vn=function(n,i){var r=i,d=(0,w.lG)(i,"TABLE");d&&(r=d),n.wysiwyg.popover.style.left="0",n.wysiwyg.popover.style.display="block",n.wysiwyg.popover.style.top=Math.max(-8,r.offsetTop-21-n.wysiwyg.element.scrollTop)+"px",n.wysiwyg.popover.style.left=Math.min(r.offsetLeft,n.wysiwyg.element.clientWidth-n.wysiwyg.popover.clientWidth)+"px",n.wysiwyg.popover.setAttribute("data-top",(r.offsetTop-21).toString())},Vl=function(n,i,r){r===void 0&&(r=getSelection().getRangeAt(0)),n.wysiwyg.popover.innerHTML="";var d=function(){p.value.trim()!==""&&(i.tagName==="IMG"?i.setAttribute("alt",p.value):i.textContent=p.value),E.value.trim()!==""&&i.setAttribute("data-link-label",E.value),typeof n.options.input=="function"&&n.options.input(N(n))},s=document.createElement("span");s.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),s.className="vditor-tooltipped vditor-tooltipped__n";var p=document.createElement("input");s.appendChild(p),p.className="vditor-input",p.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),p.style.width="120px",p.value=i.getAttribute("alt")||i.textContent,p.oninput=function(){d()},p.onkeydown=function(F){un(n,F)||Qn(F,r)||Qr(n,i,F,E)};var _=document.createElement("span");_.setAttribute("aria-label",window.VditorI18n.linkRef),_.className="vditor-tooltipped vditor-tooltipped__n";var E=document.createElement("input");_.appendChild(E),E.className="vditor-input",E.setAttribute("placeholder",window.VditorI18n.linkRef),E.value=i.getAttribute("data-link-label"),E.oninput=function(){d()},E.onkeydown=function(F){un(n,F)||Qn(F,r)||Qr(n,i,F,p)},Bn(i,n),n.wysiwyg.popover.insertAdjacentElement("beforeend",s),n.wysiwyg.popover.insertAdjacentElement("beforeend",_),Vn(n,i)},er=function(n,i,r){var d=i.previousElementSibling;if(!(!d||!i.parentElement.isEqualNode(r.wysiwyg.element)&&i.tagName!=="LI")){var s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("data-type","up"),s.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,h.ns)("\u21E7\u2318U")+">"),s.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',s.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",s.onclick=function(){n.insertNode(document.createElement("wbr")),d.insertAdjacentElement("beforebegin",i),(0,Z.ib)(r.wysiwyg.element,n),_t(r),Zi(r),Gt(r)},r.wysiwyg.popover.insertAdjacentElement("beforeend",s)}},tr=function(n,i,r){var d=i.nextElementSibling;if(!(!d||!i.parentElement.isEqualNode(r.wysiwyg.element)&&i.tagName!=="LI")){var s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("data-type","down"),s.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,h.ns)("\u21E7\u2318D")+">"),s.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',s.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",s.onclick=function(){n.insertNode(document.createElement("wbr")),d.insertAdjacentElement("afterend",i),(0,Z.ib)(r.wysiwyg.element,n),_t(r),Zi(r),Gt(r)},r.wysiwyg.popover.insertAdjacentElement("beforeend",s)}},Bn=function(n,i){var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("data-type","remove"),r.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,h.ns)("\u21E7\u2318X")+">"),r.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",r.onclick=function(){var d=(0,Z.zh)(i);d.setStartAfter(n),(0,Z.Hc)(d),n.remove(),_t(i),Zi(i),["H1","H2","H3","H4","H5","H6"].includes(n.tagName)&&oi(i)},i.wysiwyg.popover.insertAdjacentElement("beforeend",r)},Qr=function(n,i,r,d){if(!r.isComposing){if(r.key==="Tab"){d.focus(),d.select(),r.preventDefault();return}if(!(0,h.yl)(r)&&!r.shiftKey&&r.altKey&&r.key==="Enter"){var s=(0,Z.zh)(n);i.insertAdjacentHTML("afterend",u.g.ZWSP),s.setStartAfter(i.nextSibling),s.collapse(!0),(0,Z.Hc)(s),r.preventDefault()}}},Sa=function(n,i,r){n.wysiwyg.popover.innerHTML="";var d=function(){p.value.trim()!==""&&(i.innerHTML=p.value),i.setAttribute("href",E.value),i.setAttribute("title",L.value),_t(n)};i.querySelectorAll("[data-marker]").forEach(function(J){J.removeAttribute("data-marker")});var s=document.createElement("span");s.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),s.className="vditor-tooltipped vditor-tooltipped__n";var p=document.createElement("input");s.appendChild(p),p.className="vditor-input",p.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),p.style.width="120px",p.value=i.innerHTML||"",p.oninput=function(){d()},p.onkeydown=function(J){un(n,J)||Qn(J,r)||Qr(n,i,J,E)};var _=document.createElement("span");_.setAttribute("aria-label",window.VditorI18n.link),_.className="vditor-tooltipped vditor-tooltipped__n";var E=document.createElement("input");_.appendChild(E),E.className="vditor-input",E.setAttribute("placeholder",window.VditorI18n.link),E.value=i.getAttribute("href")||"",E.oninput=function(){d()},E.onkeydown=function(J){un(n,J)||Qn(J,r)||Qr(n,i,J,L)};var F=document.createElement("span");F.setAttribute("aria-label",window.VditorI18n.tooltipText),F.className="vditor-tooltipped vditor-tooltipped__n";var L=document.createElement("input");F.appendChild(L),L.className="vditor-input",L.setAttribute("placeholder",window.VditorI18n.tooltipText),L.style.width="60px",L.value=i.getAttribute("title")||"",L.oninput=function(){d()},L.onkeydown=function(J){un(n,J)||Qn(J,r)||Qr(n,i,J,p)},Bn(i,n),n.wysiwyg.popover.insertAdjacentElement("beforeend",s),n.wysiwyg.popover.insertAdjacentElement("beforeend",_),n.wysiwyg.popover.insertAdjacentElement("beforeend",F),Vn(n,i)},Vc=function(n,i){var r=n.target;i.wysiwyg.popover.innerHTML="";var d=function(){r.setAttribute("src",p.value),r.setAttribute("alt",E.value),r.setAttribute("title",L.value),typeof i.options.input=="function"&&i.options.input(N(i))},s=document.createElement("span");s.setAttribute("aria-label",window.VditorI18n.imageURL),s.className="vditor-tooltipped vditor-tooltipped__n";var p=document.createElement("input");s.appendChild(p),p.className="vditor-input",p.setAttribute("placeholder",window.VditorI18n.imageURL),p.value=r.getAttribute("src")||"",p.oninput=function(){d()},p.onkeydown=function(J){un(i,J)};var _=document.createElement("span");_.setAttribute("aria-label",window.VditorI18n.alternateText),_.className="vditor-tooltipped vditor-tooltipped__n";var E=document.createElement("input");_.appendChild(E),E.className="vditor-input",E.setAttribute("placeholder",window.VditorI18n.alternateText),E.style.width="52px",E.value=r.getAttribute("alt")||"",E.oninput=function(){d()},E.onkeydown=function(J){un(i,J)};var F=document.createElement("span");F.setAttribute("aria-label",window.VditorI18n.title),F.className="vditor-tooltipped vditor-tooltipped__n";var L=document.createElement("input");F.appendChild(L),L.className="vditor-input",L.setAttribute("placeholder",window.VditorI18n.title),L.value=r.getAttribute("title")||"",L.oninput=function(){d()},L.onkeydown=function(J){un(i,J)},Bn(r,i),i.wysiwyg.popover.insertAdjacentElement("beforeend",s),i.wysiwyg.popover.insertAdjacentElement("beforeend",_),i.wysiwyg.popover.insertAdjacentElement("beforeend",F),Vn(i,r)},Qn=function(n,i){if(!(0,h.yl)(n)&&!n.shiftKey&&n.key==="Enter"||n.key==="Escape")return i&&(0,Z.Hc)(i),n.preventDefault(),n.stopPropagation(),!0},Mr=function(n){n.currentMode==="wysiwyg"?Zi(n):n.currentMode==="ir"&&Gr(n)},Bl=function(n,i,r){r===void 0&&(r={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var d=n.wysiwyg.element;d.innerHTML=n.lute.Md2VditorDOM(i),d.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(s){Tt(s,n),s.previousElementSibling.setAttribute("style","display:none")}),_t(n,r)},Bc=function(n,i,r){for(var d=n.startContainer.parentElement,s=!1,p="",_="",E=xa(n),F=E.beforeHTML,L=E.afterHTML;d&&!s;){var J=d.tagName;if(J==="STRIKE"&&(J="S"),J==="I"&&(J="EM"),J==="B"&&(J="STRONG"),J==="S"||J==="STRONG"||J==="EM"){var K="",fe="",ue="";d.parentElement.getAttribute("data-block")!=="0"&&(fe=xo(d),ue=Qi(d)),(F||fe)&&(K="".concat(fe,"<").concat(J,">").concat(F,"</").concat(J,">"),F=K),(r==="bold"&&J==="STRONG"||r==="italic"&&J==="EM"||r==="strikeThrough"&&J==="S")&&(K+="".concat(p).concat(u.g.ZWSP,"<wbr>").concat(_),s=!0),(L||ue)&&(L="<".concat(J,">").concat(L,"</").concat(J,">").concat(ue),K+=L),d.parentElement.getAttribute("data-block")!=="0"?(d=d.parentElement,d.innerHTML=K):(d.outerHTML=K,d=d.parentElement),p="<".concat(J,">")+p,_="</".concat(J,">")+_}else s=!0}(0,Z.ib)(i.wysiwyg.element,n)},Ma=function(n,i,r){if(!(n.wysiwyg.composingLock&&r instanceof CustomEvent)){var d=!0,s=!0;n.wysiwyg.element.querySelector("wbr")&&n.wysiwyg.element.querySelector("wbr").remove();var p=(0,Z.zh)(n),_=i.getAttribute("data-type");if(i.classList.contains("vditor-menu--current"))if(_==="strike"&&(_="strikeThrough"),_==="quote"){var E=(0,w.lG)(p.startContainer,"BLOCKQUOTE");E||(E=p.startContainer.childNodes[p.startOffset]),E&&(d=!1,i.classList.remove("vditor-menu--current"),p.insertNode(document.createElement("wbr")),E.outerHTML=E.innerHTML.trim()===""?'<p data-block="0">'.concat(E.innerHTML,"</p>"):E.innerHTML,(0,Z.ib)(n.wysiwyg.element,p))}else if(_==="inline-code"){var F=(0,w.lG)(p.startContainer,"CODE");F||(F=p.startContainer.childNodes[p.startOffset]),F&&(F.outerHTML=F.innerHTML.replace(u.g.ZWSP,"")+"<wbr>",(0,Z.ib)(n.wysiwyg.element,p))}else _==="link"?(p.collapsed&&p.selectNode(p.startContainer.parentElement),document.execCommand("unlink",!1,"")):_==="check"||_==="list"||_==="ordered-list"?(ko(n,p,_),(0,Z.ib)(n.wysiwyg.element,p),d=!1,i.classList.remove("vditor-menu--current")):(d=!1,i.classList.remove("vditor-menu--current"),p.toString()===""?Bc(p,n,_):document.execCommand(_,!1,""));else{n.wysiwyg.element.childNodes.length===0&&(n.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,Z.ib)(n.wysiwyg.element,p));var L=(0,w.F9)(p.startContainer);if(_==="quote"){if(L||(L=p.startContainer.childNodes[p.startOffset]),L){d=!1,i.classList.add("vditor-menu--current"),p.insertNode(document.createElement("wbr"));var J=(0,w.lG)(p.startContainer,"LI");J&&L.contains(J)?J.innerHTML='<blockquote data-block="0">'.concat(J.innerHTML,"</blockquote>"):L.outerHTML='<blockquote data-block="0">'.concat(L.outerHTML,"</blockquote>"),(0,Z.ib)(n.wysiwyg.element,p)}}else if(_==="check"||_==="list"||_==="ordered-list")ko(n,p,_,!1),(0,Z.ib)(n.wysiwyg.element,p),d=!1,T(n.toolbar.elements,["check","list","ordered-list"]),i.classList.add("vditor-menu--current");else if(_==="inline-code"){if(p.toString()===""){var K=document.createElement("code");K.textContent=u.g.ZWSP,p.insertNode(K),p.setStart(K.firstChild,1),p.collapse(!0),(0,Z.Hc)(p)}else if(p.startContainer.nodeType===3){var K=document.createElement("code");p.surroundContents(K),p.insertNode(K),(0,Z.Hc)(p)}i.classList.add("vditor-menu--current")}else if(_==="code"){var K=document.createElement("div");K.className="vditor-wysiwyg__block",K.setAttribute("data-type","code-block"),K.setAttribute("data-block","0"),K.setAttribute("data-marker","```"),p.toString()===""?K.innerHTML=`<pre><code><wbr>
</code></pre>`:(K.innerHTML="<pre><code>".concat(p.toString(),"<wbr></code></pre>"),p.deleteContents()),p.insertNode(K),L&&(L.outerHTML=n.lute.SpinVditorDOM(L.outerHTML)),(0,Z.ib)(n.wysiwyg.element,p),n.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(gt){Tt(gt,n)}),i.classList.add("vditor-menu--disabled")}else if(_==="link"){if(p.toString()===""){var fe=document.createElement("a");fe.innerText=u.g.ZWSP,p.insertNode(fe),p.setStart(fe.firstChild,1),p.collapse(!0),Sa(n,fe,p);var ue=n.wysiwyg.popover.querySelector("input");ue.value="",ue.focus(),s=!1}else{var K=document.createElement("a");K.setAttribute("href",""),K.innerHTML=p.toString(),p.surroundContents(K),p.insertNode(K),(0,Z.Hc)(p),Sa(n,K,p);var ae=n.wysiwyg.popover.querySelectorAll("input");ae[0].value=K.innerText,ae[1].focus()}d=!1,i.classList.add("vditor-menu--current")}else if(_==="table"){var Me='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(p.toString().trim()==="")L&&L.innerHTML.trim().replace(u.g.ZWSP,"")===""?L.outerHTML=Me:document.execCommand("insertHTML",!1,Me),p.selectNode(n.wysiwyg.element.querySelector("wbr").previousSibling),n.wysiwyg.element.querySelector("wbr").remove(),(0,Z.Hc)(p);else{Me='<table data-block="0"><thead><tr>';var ve=p.toString().split(`
`),ce=ve[0].split(",").length>ve[0].split("	").length?",":"	";ve.forEach(function(we,gt){gt===0?(we.split(ce).forEach(function(ct,wt){wt===0?Me+="<th>".concat(ct,"<wbr></th>"):Me+="<th>".concat(ct,"</th>")}),Me+="</tr></thead>"):(gt===1?Me+="<tbody><tr>":Me+="<tr>",we.split(ce).forEach(function(ct){Me+="<td>".concat(ct,"</td>")}),Me+="</tr>")}),Me+="</tbody></table>",document.execCommand("insertHTML",!1,Me),(0,Z.ib)(n.wysiwyg.element,p)}d=!1,i.classList.add("vditor-menu--disabled")}else if(_==="line"){if(L){var Ve=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;L.innerHTML.trim()===""?L.outerHTML=Ve:L.insertAdjacentHTML("afterend",Ve),(0,Z.ib)(n.wysiwyg.element,p)}}else if(d=!1,i.classList.add("vditor-menu--current"),_==="strike"&&(_="strikeThrough"),p.toString()===""&&(_==="bold"||_==="italic"||_==="strikeThrough")){var Le="strong";_==="italic"?Le="em":_==="strikeThrough"&&(Le="s");var K=document.createElement(Le);K.textContent=u.g.ZWSP,p.insertNode(K),K.previousSibling&&K.previousSibling.textContent===u.g.ZWSP&&(K.previousSibling.textContent=""),p.setStart(K.firstChild,1),p.collapse(!0),(0,Z.Hc)(p)}else document.execCommand(_,!1,"")}d&&Zi(n),s&&_t(n)}},Rt=(function(){function n(i,r){var d,s=this;this.element=document.createElement("div"),r.className&&(d=this.element.classList).add.apply(d,r.className.split(" "));var p=r.hotkey?" <".concat((0,h.ns)(r.hotkey),">"):"";r.level===2&&(p=r.hotkey?" &lt;".concat((0,h.ns)(r.hotkey),"&gt;"):"");var _=r.tip?r.tip+p:"".concat(window.VditorI18n[r.name]).concat(p),E=r.name==="upload"?"div":"button";if(r.level===2)this.element.innerHTML="<".concat(E,' data-type="').concat(r.name,'">').concat(_,"</").concat(E,">");else{this.element.classList.add("vditor-toolbar__item");var F=document.createElement(E);F.setAttribute("data-type",r.name),F.className="vditor-tooltipped vditor-tooltipped__".concat(r.tipPosition),F.setAttribute("aria-label",_),F.innerHTML=r.icon,this.element.appendChild(F)}r.prefix&&this.element.children[0].addEventListener((0,h.Le)(),function(L){L.preventDefault(),!s.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)&&(i.currentMode==="wysiwyg"?Ma(i,s.element.children[0],L):i.currentMode==="ir"?jc(i,s.element.children[0],r.prefix||"",r.suffix||""):Wc(i,s.element.children[0],r.prefix||"",r.suffix||""))})}return n})(),Ea=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),nr=function(n,i,r){var d;if(typeof r!="string"?(P(n,["subToolbar","hint"]),r.preventDefault(),d=N(n)):d=r,!(n.currentMode===i&&typeof r!="string")){if(n.devtools&&n.devtools.renderEchart(n),n.options.preview.mode==="both"&&i==="sv"?n.preview.element.style.display="block":n.preview.element.style.display="none",x(n.toolbar.elements,u.g.EDIT_TOOLBARS),T(n.toolbar.elements,u.g.EDIT_TOOLBARS),v(n.toolbar.elements,["outdent","indent"]),i==="ir")O(n.toolbar.elements,["both"]),H(n.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),n.sv.element.style.display="none",n.wysiwyg.element.parentElement.style.display="none",n.ir.element.parentElement.style.display="block",n.lute.SetVditorIR(!0),n.lute.SetVditorWYSIWYG(!1),n.lute.SetVditorSV(!1),n.currentMode="ir",n.ir.element.innerHTML=n.lute.Md2VditorIRDOM(d),yi(n,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),Rn(n),n.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(p){Tt(p,n)}),n.ir.element.querySelectorAll(".vditor-toc").forEach(function(p){(0,it.H)(p,{cdn:n.options.cdn,math:n.options.preview.math})});else if(i==="wysiwyg")O(n.toolbar.elements,["both"]),H(n.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),n.sv.element.style.display="none",n.wysiwyg.element.parentElement.style.display="block",n.ir.element.parentElement.style.display="none",n.lute.SetVditorIR(!1),n.lute.SetVditorWYSIWYG(!0),n.lute.SetVditorSV(!1),n.currentMode="wysiwyg",Rn(n),Bl(n,d,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),n.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(p){(0,it.H)(p,{cdn:n.options.cdn,math:n.options.preview.math})}),n.wysiwyg.popover.style.display="none";else if(i==="sv"){H(n.toolbar.elements,["both"]),O(n.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),n.wysiwyg.element.parentElement.style.display="none",n.ir.element.parentElement.style.display="none",(n.options.preview.mode==="both"||n.options.preview.mode==="editor")&&(n.sv.element.style.display="block"),n.lute.SetVditorIR(!1),n.lute.SetVditorWYSIWYG(!1),n.lute.SetVditorSV(!0),n.currentMode="sv";var s=Wl(d,n);s==="<div data-block='0'></div>"&&(s=""),n.sv.element.innerHTML=s,Ht(n.sv.element),Yt(n,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),Rn(n)}n.undo.resetIcon(n),typeof r!="string"&&(n[n.currentMode].element.focus(),Mr(n)),oi(n),ki(n),n.toolbar.elements["edit-mode"]&&(n.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(p){p.classList.remove("vditor-menu--current")}),n.toolbar.elements["edit-mode"].querySelector('button[data-mode="'.concat(n.currentMode,'"]')).classList.add("vditor-menu--current")),n.outline.toggle(n,n.currentMode!=="sv"&&n.options.outline.enable,typeof r!="string")}},Hc=(function(n){Ea(i,n);function i(r,d){var s=n.call(this,r,d)||this,p=document.createElement("div");return p.className="vditor-hint".concat(d.level===2?"":" vditor-panel--arrow"),p.innerHTML='<button data-mode="wysiwyg">'.concat(window.VditorI18n.wysiwyg," &lt;").concat((0,h.ns)("\u2325\u23187"),`></button>
<button data-mode="ir">`).concat(window.VditorI18n.instantRendering," &lt;").concat((0,h.ns)("\u2325\u23188"),`></button>
<button data-mode="sv">`).concat(window.VditorI18n.splitView," &lt;").concat((0,h.ns)("\u2325\u23189"),"></button>"),s.element.appendChild(p),s._bindEvent(r,p,d),s}return i.prototype._bindEvent=function(r,d,s){var p=this.element.children[0];B(r,d,p,s.level),d.children.item(0).addEventListener((0,h.Le)(),function(_){nr(r,"wysiwyg",_),_.preventDefault(),_.stopPropagation()}),d.children.item(1).addEventListener((0,h.Le)(),function(_){nr(r,"ir",_),_.preventDefault(),_.stopPropagation()}),d.children.item(2).addEventListener((0,h.Le)(),function(_){nr(r,"sv",_),_.preventDefault(),_.stopPropagation()})},i})(Rt),Yr=function(n,i){return(0,Z.Gb)(n,i)?getSelection().toString():""},za=function(n,i){i.addEventListener("focus",function(){n.options.focus&&n.options.focus(N(n)),P(n,["subToolbar","hint"])})},Hl=function(n,i){i.addEventListener("dblclick",function(r){r.target.tagName==="IMG"&&(n.options.image.preview?n.options.image.preview(r.target):n.options.image.isPreview&&(0,Ae.E)(r.target,n.options.lang,n.options.theme))})},ka=function(n,i){i.addEventListener("blur",function(r){if(n.currentMode==="ir"){var d=n.ir.element.querySelector(".vditor-ir__node--expand");d&&d.classList.remove("vditor-ir__node--expand")}else n.currentMode==="wysiwyg"&&!n.wysiwyg.selectPopover.contains(r.relatedTarget)&&n.wysiwyg.hideComment();n[n.currentMode].range=(0,Z.zh)(n),n.options.blur&&n.options.blur(N(n))})},La=function(n,i){i.addEventListener("dragstart",function(r){r.dataTransfer.setData(u.g.DROP_EDITOR,u.g.DROP_EDITOR)}),i.addEventListener("drop",function(r){r.dataTransfer.getData(u.g.DROP_EDITOR)?qe(n):(r.dataTransfer.types.includes("Files")||r.dataTransfer.types.includes("text/html"))&&Do(n,r,{pasteCode:function(d){document.execCommand("insertHTML",!1,d)}})})},Aa=function(n,i,r){i.addEventListener("copy",function(d){return r(d,n)})},To=function(n,i,r){i.addEventListener("cut",function(d){r(d,n),n.options.comment.enable&&n.currentMode==="wysiwyg"&&n.wysiwyg.getComments(n),document.execCommand("delete")})},Gt=function(n){if(n.currentMode==="wysiwyg"&&n.options.comment.enable&&n.options.comment.adjustTop(n.wysiwyg.getComments(n,!0)),!!n.options.typewriterMode){var i=n[n.currentMode].element,r=(0,Z.Ny)(i).top;n.options.height==="auto"&&!n.element.classList.contains("vditor--fullscreen")&&window.scrollTo(window.scrollX,r+n.element.offsetTop+n.toolbar.element.offsetHeight-window.innerHeight/2+10),(n.options.height!=="auto"||n.element.classList.contains("vditor--fullscreen"))&&(i.scrollTop=r+i.scrollTop-i.clientHeight/2+10)}},Fa=function(n,i){i.addEventListener("keydown",function(r){if(!r.isComposing&&n.options.keydown&&n.options.keydown(r),!((n.options.hint.extend.length>1||n.toolbar.elements.emoji)&&n.hint.select(r,n))){if(n.options.comment.enable&&n.currentMode==="wysiwyg"&&(r.key==="Backspace"||pe("\u2318X",r))&&n.wysiwyg.getComments(n),n.currentMode==="sv"){if(Wt(n,r))return}else if(n.currentMode==="wysiwyg"){if(Ta(n,r))return}else if(n.currentMode==="ir"&&Ft(n,r))return;if(n.options.ctrlEnter&&pe("\u2318Enter",r)){n.options.ctrlEnter(N(n)),r.preventDefault();return}if(pe("\u2318Z",r)&&!n.toolbar.elements.undo){n.undo.undo(n),r.preventDefault();return}if(pe("\u2318Y",r)&&!n.toolbar.elements.redo){n.undo.redo(n),r.preventDefault();return}if(r.key==="Escape"){n.hint.element.style.display==="block"?n.hint.element.style.display="none":n.options.esc&&!r.isComposing&&n.options.esc(N(n)),r.preventDefault();return}if((0,h.yl)(r)&&r.altKey&&!r.shiftKey&&/^Digit[1-6]$/.test(r.code)){if(n.currentMode==="wysiwyg"){var d=r.code.replace("Digit","H");(0,w.lG)(getSelection().getRangeAt(0).startContainer,d)?Xr(n):Sr(n,d),_t(n)}else n.currentMode==="sv"?Zr(n,"#".repeat(parseInt(r.code.replace("Digit",""),10))+" "):n.currentMode==="ir"&&yt(n,"#".repeat(parseInt(r.code.replace("Digit",""),10))+" ");return r.preventDefault(),!0}if((0,h.yl)(r)&&r.altKey&&!r.shiftKey&&/^Digit[7-9]$/.test(r.code))return r.code==="Digit7"?nr(n,"wysiwyg",r):r.code==="Digit8"?nr(n,"ir",r):r.code==="Digit9"&&nr(n,"sv",r),!0;n.options.toolbar.find(function(s){if(!s.hotkey||s.toolbar){if(s.toolbar){var p=s.toolbar.find(function(_){if(!_.hotkey)return!1;if(pe(_.hotkey,r))return n.toolbar.elements[_.name].children[0].dispatchEvent(new CustomEvent((0,h.Le)())),r.preventDefault(),!0});return!!p}return!1}if(pe(s.hotkey,r))return n.toolbar.elements[s.name].children[0].dispatchEvent(new CustomEvent((0,h.Le)())),r.preventDefault(),!0})}})},Na=function(n,i){i.addEventListener("selectstart",function(r){i.onmouseup=function(){setTimeout(function(){var d=Yr(n[n.currentMode].element);d.trim()?(n.currentMode==="wysiwyg"&&n.options.comment.enable&&(!(0,w.a1)(r.target,"data-type","footnotes-block")&&!(0,w.a1)(r.target,"data-type","link-ref-defs-block")?n.wysiwyg.showComment():n.wysiwyg.hideComment()),n.options.select&&n.options.select(d)):(n.currentMode==="wysiwyg"&&n.options.comment.enable&&n.wysiwyg.hideComment(),typeof n.options.unSelect=="function"&&n.options.unSelect())})}})},Da=function(n,i){var r=(0,Z.zh)(n);r.extractContents(),r.insertNode(document.createTextNode(Lute.Caret)),r.insertNode(document.createTextNode(i));var d=(0,w.a1)(r.startContainer,"data-block","0");d||(d=n.sv.element);var s=n.lute.SpinVditorSVDOM(d.textContent);s="<div data-block='0'>"+s.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",d.isEqualNode(n.sv.element)?d.innerHTML=s:d.outerHTML=s,Ht(n.sv.element),(0,Z.ib)(n.sv.element,r),Gt(n)},So=function(n,i,r){r===void 0&&(r=!0);var d=n;for(d.nodeType===3&&(d=d.parentElement);d;){if(d.getAttribute("data-type")===i)return d;r?d=d.previousElementSibling:d=d.nextElementSibling}return!1},Wl=function(n,i){ee("SpinVditorSVDOM",n,"argument",i.options.debugger);var r=i.lute.SpinVditorSVDOM(n);return n="<div data-block='0'>"+r.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",ee("SpinVditorSVDOM",n,"result",i.options.debugger),n},Mo=function(n){var i=n.getAttribute("data-type"),r=n.previousElementSibling,d=i&&i!=="text"&&i!=="table"&&i!=="heading-marker"&&i!=="newline"&&i!=="yaml-front-matter-open-marker"&&i!=="yaml-front-matter-close-marker"&&i!=="code-block-info"&&i!=="code-block-close-marker"&&i!=="code-block-open-marker"?n.textContent:"",s=!1;for(i==="newline"&&(s=!0);r&&!s;){var p=r.getAttribute("data-type");if(p==="li-marker"||p==="blockquote-marker"||p==="task-marker"||p==="padding"){var _=r.textContent;if(p==="li-marker"&&(i==="code-block-open-marker"||i==="code-block-info"))d=_.replace(/\S/g," ")+d;else if(i==="code-block-close-marker"&&r.nextElementSibling.isSameNode(n)){var E=So(n,"code-block-open-marker");E&&E.previousElementSibling&&(r=E.previousElementSibling,d=_+d)}else d=_+d}else p==="newline"&&(s=!0);r=r.previousElementSibling}return d},Yt=function(n,i){i===void 0&&(i={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),i.enableHint&&n.hint.render(n),n.preview.render(n);var r=N(n);typeof n.options.input=="function"&&i.enableInput&&n.options.input(r),n.options.counter.enable&&n.counter.render(n,r),n.options.cache.enable&&(0,h.pK)()&&(localStorage.setItem(n.options.cache.id,r),n.options.cache.after&&n.options.cache.after(r)),n.devtools&&n.devtools.renderEchart(n),clearTimeout(n.sv.processTimeoutId),n.sv.processTimeoutId=window.setTimeout(function(){i.enableAddUndoStack&&!n.sv.composingLock&&n.undo.addToUndoStack(n)},n.options.undoDelay)},Zr=function(n,i){var r=(0,Z.zh)(n),d=(0,W.S)(r.startContainer,"SPAN");d&&d.textContent.trim()!==""&&(i=`
`+i),r.collapse(!0),document.execCommand("insertHTML",!1,i)},Wc=function(n,i,r,d){var s=(0,Z.zh)(n),p=i.getAttribute("data-type");n.sv.element.childNodes.length===0&&(n.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,Z.ib)(n.sv.element,s));var _=(0,w.F9)(s.startContainer),E=(0,W.S)(s.startContainer,"SPAN");if(_){if(p==="link"){var F=void 0;s.toString()===""?F="".concat(r).concat(Lute.Caret).concat(d):F="".concat(r).concat(s.toString()).concat(d.replace(")",Lute.Caret+")")),document.execCommand("insertHTML",!1,F);return}else if(p==="italic"||p==="bold"||p==="strike"||p==="inline-code"||p==="code"||p==="table"||p==="line"){var F=void 0;s.toString()===""?F="".concat(r).concat(Lute.Caret).concat(p==="code"?"":d):F="".concat(r).concat(s.toString()).concat(Lute.Caret).concat(p==="code"?"":d),p==="table"||p==="code"&&E&&E.textContent!==""?F=`

`+F:p==="line"&&(F=`

`.concat(r,`
`).concat(Lute.Caret)),document.execCommand("insertHTML",!1,F);return}else if((p==="check"||p==="list"||p==="ordered-list"||p==="quote")&&E){var L="* ";p==="check"?L="* [ ] ":p==="ordered-list"?L="1. ":p==="quote"&&(L="> ");var J=So(E,"newline");J?J.insertAdjacentText("afterend",L):_.insertAdjacentText("afterbegin",L),Ke(n);return}(0,Z.ib)(n.sv.element,s),Yt(n)}},Jl=function(n){switch(n.currentMode){case"ir":return n.ir.element;case"wysiwyg":return n.wysiwyg.element;case"sv":return n.sv.element}},Ul=function(n,i){n.options.upload.setHeaders&&(n.options.upload.headers=n.options.upload.setHeaders()),n.options.upload.headers&&Object.keys(n.options.upload.headers).forEach(function(r){i.setRequestHeader(r,n.options.upload.headers[r])})},$l=function(n,i,r,d){function s(p){return p instanceof r?p:new r(function(_){_(p)})}return new(r||(r=Promise))(function(p,_){function E(J){try{L(d.next(J))}catch(K){_(K)}}function F(J){try{L(d.throw(J))}catch(K){_(K)}}function L(J){J.done?p(J.value):s(J.value).then(E,F)}L((d=d.apply(n,i||[])).next())})},jl=function(n,i){var r={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},d,s,p,_;return _={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function E(L){return function(J){return F([L,J])}}function F(L){if(d)throw new TypeError("Generator is already executing.");for(;_&&(_=0,L[0]&&(r=0)),r;)try{if(d=1,s&&(p=L[0]&2?s.return:L[0]?s.throw||((p=s.return)&&p.call(s),0):s.next)&&!(p=p.call(s,L[1])).done)return p;switch(s=0,p&&(L=[L[0]&2,p.value]),L[0]){case 0:case 1:p=L;break;case 4:return r.label++,{value:L[1],done:!1};case 5:r.label++,s=L[1],L=[0];continue;case 7:L=r.ops.pop(),r.trys.pop();continue;default:if(p=r.trys,!(p=p.length>0&&p[p.length-1])&&(L[0]===6||L[0]===2)){r=0;continue}if(L[0]===3&&(!p||L[1]>p[0]&&L[1]<p[3])){r.label=L[1];break}if(L[0]===6&&r.label<p[1]){r.label=p[1],p=L;break}if(p&&r.label<p[2]){r.label=p[2],r.ops.push(L);break}p[2]&&r.ops.pop(),r.trys.pop();continue}L=i.call(n,r)}catch(J){L=[6,J],s=0}finally{d=p=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},Gl=(function(){function n(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"}return n})(),Jc=function(n,i){n.tip.hide();for(var r=[],d="",s="",p=n.options.lang,_=n.options,E=function(K,fe){var ue=i[fe],ae=!0;ue.name||(d+="<li>".concat(window.VditorI18n.nameEmpty,"</li>"),ae=!1),ue.size>n.options.upload.max&&(d+="<li>".concat(ue.name," ").concat(window.VditorI18n.over," ").concat(n.options.upload.max/1024/1024,"M</li>"),ae=!1);var Me=ue.name.lastIndexOf("."),ve=ue.name.substr(Me),ce=n.options.upload.filename(ue.name.substr(0,Me))+ve;if(n.options.upload.accept){var Ve=n.options.upload.accept.split(",").some(function(Le){var we=Le.trim();if(we.indexOf(".")===0){if(ve.toLowerCase()===we.toLowerCase())return!0}else if(ue.type.split("/")[0]===we.split("/")[0])return!0;return!1});Ve||(d+="<li>".concat(ue.name," ").concat(window.VditorI18n.fileTypeError,"</li>"),ae=!1)}ae&&(r.push(ue),s+="<li>".concat(ce," ").concat(window.VditorI18n.uploading,' <a class="vditorCancelUpload" href="javascript:void(0)">').concat(window.VditorI18n.cancelUpload,"</a></li>"))},F=i.length,L=0;L<F;L++)E(F,L);if(n.tip.show("<ul>".concat(d).concat(s,"</ul>")),n.options.upload.cancel){var J=n.tip.element.querySelector(".vditorCancelUpload");J&&J.addEventListener("click",function(){n.options.upload.cancel(r),n.tip.hide(),n.upload.isUploading=!1})}return r},Uc=function(n,i){var r=Jl(i);r.focus();var d=JSON.parse(n),s="";d.code===1&&(s="".concat(d.msg)),d.data.errFiles&&d.data.errFiles.length>0&&(s="<ul><li>".concat(s,"</li>"),d.data.errFiles.forEach(function(_){var E=_.lastIndexOf("."),F=i.options.upload.filename(_.substr(0,E))+_.substr(E);s+="<li>".concat(F," ").concat(window.VditorI18n.uploadError,"</li>")}),s+="</ul>"),s?i.tip.show(s):i.tip.hide();var p="";Object.keys(d.data.succMap).forEach(function(_){var E=d.data.succMap[_],F=_.lastIndexOf("."),L=_.substr(F),J=i.options.upload.filename(_.substr(0,F))+L;L=L.toLowerCase(),L.indexOf(".wav")===0||L.indexOf(".mp3")===0||L.indexOf(".ogg")===0?i.currentMode==="wysiwyg"?p+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`.concat(E,'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="').concat(E,`"></audio></pre></div>
`):i.currentMode==="ir"?p+='<audio controls="controls" src="'.concat(E,`"></audio>
`):p+="[".concat(J,"](").concat(E,`)
`):L.indexOf(".apng")===0||L.indexOf(".bmp")===0||L.indexOf(".gif")===0||L.indexOf(".ico")===0||L.indexOf(".cur")===0||L.indexOf(".jpg")===0||L.indexOf(".jpeg")===0||L.indexOf(".jfif")===0||L.indexOf(".pjp")===0||L.indexOf(".pjpeg")===0||L.indexOf(".png")===0||L.indexOf(".svg")===0||L.indexOf(".webp")===0?i.currentMode==="wysiwyg"?p+='<img alt="'.concat(J,'" src="').concat(E,`">
`):p+="![".concat(J,"](").concat(E,`)
`):i.currentMode==="wysiwyg"?p+='<a href="'.concat(E,'">').concat(J,`</a>
`):p+="[".concat(J,"](").concat(E,`)
`)}),(0,Z.Hc)(i.upload.range),document.execCommand("insertHTML",!1,p),i.upload.range=getSelection().getRangeAt(0).cloneRange()},Oa=function(n,i,r){return $l(void 0,void 0,void 0,function(){var d,s,ae,p,_,_,E,F,L,J,K,fe,ue,ae,Me,ve;return jl(this,function(ce){switch(ce.label){case 0:for(d=[],s=n.options.upload.multiple===!0?i.length:1,ae=0;ae<s;ae++)p=i[ae],p instanceof DataTransferItem&&(p=p.getAsFile()),d.push(p);return n.options.upload.handler?[4,n.options.upload.handler(d)]:[3,2];case 1:return _=ce.sent(),r&&(r.value=""),typeof _=="string"?(n.tip.show(_),[2]):[2];case 2:return!n.options.upload.url||!n.upload?(r&&(r.value=""),n.tip.show("please config: options.upload.url"),[2]):n.options.upload.file?[4,n.options.upload.file(d)]:[3,4];case 3:d=ce.sent(),ce.label=4;case 4:if(n.options.upload.validate&&(_=n.options.upload.validate(d),typeof _=="string"))return n.tip.show(_),[2];if(E=Jl(n),n.upload.range=(0,Z.zh)(n),F=Jc(n,d),F.length===0)return r&&(r.value=""),[2];for(L=new FormData,J=n.options.upload.extraData,K=0,fe=Object.keys(J);K<fe.length;K++)ue=fe[K],L.append(ue,J[ue]);for(ae=0,Me=F.length;ae<Me;ae++)L.append(n.options.upload.fieldName,F[ae]);return ve=new XMLHttpRequest,n.upload.xhr=ve,ve.open("POST",n.options.upload.url),n.options.upload.token&&ve.setRequestHeader("X-Upload-Token",n.options.upload.token),n.options.upload.withCredentials&&(ve.withCredentials=!0),Ul(n,ve),n.upload.isUploading=!0,E.setAttribute("contenteditable","false"),ve.onreadystatechange=function(){if(ve.readyState===XMLHttpRequest.DONE){if(n.upload.isUploading=!1,E.setAttribute("contenteditable","true"),ve.status>=200&&ve.status<300)if(n.options.upload.success)n.options.upload.success(E,ve.responseText);else{var Ve=ve.responseText;n.options.upload.format&&(Ve=n.options.upload.format(i,ve.responseText)),Uc(Ve,n)}else n.options.upload.error?n.options.upload.error(ve.responseText):n.tip.show(ve.responseText);r&&(r.value=""),n.upload.element.style.display="none",n.upload.xhr=void 0}},ve.upload.onprogress=function(Ve){if(Ve.lengthComputable){var Le=Ve.loaded/Ve.total*100;n.upload.element.style.display="block";var we=n.upload.element;we.style.width=Le+"%"}},ve.send(L),[2]}})})},Eo=function(n,i,r){var d,s=(0,w.F9)(i.startContainer);if(s||(s=n.wysiwyg.element),r&&r.inputType!=="formatItalic"&&r.inputType!=="deleteByDrag"&&r.inputType!=="insertFromDrop"&&r.inputType!=="formatBold"&&r.inputType!=="formatRemove"&&r.inputType!=="formatStrikeThrough"&&r.inputType!=="insertUnorderedList"&&r.inputType!=="insertOrderedList"&&r.inputType!=="formatOutdent"&&r.inputType!=="formatIndent"&&r.inputType!==""||!r){var p=Pc(i.startContainer);p&&p.remove(),n.wysiwyg.element.querySelectorAll("wbr").forEach(function(Le){Le.remove()}),i.insertNode(document.createElement("wbr")),s.querySelectorAll("[style]").forEach(function(Le){Le.removeAttribute("style")}),s.querySelectorAll(".vditor-comment").forEach(function(Le){Le.textContent.trim()===""&&(Le.classList.remove("vditor-comment","vditor-comment--focus"),Le.removeAttribute("data-cmtids"))}),(d=s.previousElementSibling)===null||d===void 0||d.querySelectorAll(".vditor-comment").forEach(function(Le){Le.textContent.trim()===""&&(Le.classList.remove("vditor-comment","vditor-comment--focus"),Le.removeAttribute("data-cmtids"))});var _="";s.getAttribute("data-type")==="link-ref-defs-block"&&(s=n.wysiwyg.element);var E=s.isEqualNode(n.wysiwyg.element),F=(0,w.a1)(s,"data-type","footnotes-block");if(E)_=s.innerHTML;else{var L=(0,w.O9)(i.startContainer);if(L&&!F){var J=(0,W.S)(i.startContainer,"BLOCKQUOTE");J?s=(0,w.F9)(i.startContainer)||s:s=L}if(F&&(s=F),_=s.outerHTML,s.tagName==="UL"||s.tagName==="OL"){var K=s.previousElementSibling,fe=s.nextElementSibling;K&&(K.tagName==="UL"||K.tagName==="OL")&&(_=K.outerHTML+_,K.remove()),fe&&(fe.tagName==="UL"||fe.tagName==="OL")&&(_=_+fe.outerHTML,fe.remove()),_=_.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}s.innerText.startsWith("```")||(n.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(Le){Le&&!s.isEqualNode(Le)&&(_+=Le.outerHTML,Le.remove())}),n.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(Le){Le&&!s.isEqualNode(Le)&&(_+=Le.outerHTML,Le.remove())}))}if(_=_.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""),_==='<p data-block="0">```<wbr></p>'&&n.hint.recentLanguage&&(_='<p data-block="0">```<wbr></p>'.replace("```","```"+n.hint.recentLanguage)),ee("SpinVditorDOM",_,"argument",n.options.debugger),_=n.lute.SpinVditorDOM(_),ee("SpinVditorDOM",_,"result",n.options.debugger),E)s.innerHTML=_;else if(s.outerHTML=_,F){var ue=(0,w.E2)(n.wysiwyg.element.querySelector("wbr"),"LI");if(ue){var ae=n.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(ue.getAttribute("data-marker"),'"]'));ae&&ae.setAttribute("aria-label",ue.textContent.trim().substr(0,24))}}var Me,ve=n.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");ve.forEach(function(Le,we){we===0?Me=Le:(Me.insertAdjacentHTML("beforeend",Le.innerHTML),Le.remove())}),ve.length>0&&n.wysiwyg.element.insertAdjacentElement("beforeend",ve[0]);var ce,Ve=n.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");Ve.forEach(function(Le,we){we===0?ce=Le:(ce.insertAdjacentHTML("beforeend",Le.innerHTML),Le.remove())}),Ve.length>0&&n.wysiwyg.element.insertAdjacentElement("beforeend",Ve[0]),(0,Z.ib)(n.wysiwyg.element,i),n.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(Le){Tt(Le,n)}),r&&(r.inputType==="deleteContentBackward"||r.inputType==="deleteContentForward")&&n.options.comment.enable&&(n.wysiwyg.triggerRemoveComment(n),n.options.comment.adjustTop(n.wysiwyg.getComments(n,!0)))}oi(n),_t(n,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Kl=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n},ql=function(n,i,r,d){function s(p){return p instanceof r?p:new r(function(_){_(p)})}return new(r||(r=Promise))(function(p,_){function E(J){try{L(d.next(J))}catch(K){_(K)}}function F(J){try{L(d.throw(J))}catch(K){_(K)}}function L(J){J.done?p(J.value):s(J.value).then(E,F)}L((d=d.apply(n,i||[])).next())})},Xl=function(n,i){var r={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},d,s,p,_;return _={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function E(L){return function(J){return F([L,J])}}function F(L){if(d)throw new TypeError("Generator is already executing.");for(;_&&(_=0,L[0]&&(r=0)),r;)try{if(d=1,s&&(p=L[0]&2?s.return:L[0]?s.throw||((p=s.return)&&p.call(s),0):s.next)&&!(p=p.call(s,L[1])).done)return p;switch(s=0,p&&(L=[L[0]&2,p.value]),L[0]){case 0:case 1:p=L;break;case 4:return r.label++,{value:L[1],done:!1};case 5:r.label++,s=L[1],L=[0];continue;case 7:L=r.ops.pop(),r.trys.pop();continue;default:if(p=r.trys,!(p=p.length>0&&p[p.length-1])&&(L[0]===6||L[0]===2)){r=0;continue}if(L[0]===3&&(!p||L[1]>p[0]&&L[1]<p[3])){r.label=L[1];break}if(L[0]===6&&r.label<p[1]){r.label=p[1],p=L;break}if(p&&r.label<p[2]){r.label=p[2],r.ops.push(L);break}p[2]&&r.ops.pop(),r.trys.pop();continue}L=i.call(n,r)}catch(J){L=[6,J],s=0}finally{d=p=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},zo=function(n,i,r){if(n.keyCode===229&&n.code===""&&n.key==="Unidentified"&&i.currentMode!=="sv"){var d=(0,w.F9)(r);if(d&&d.textContent.trim()==="")return i[i.currentMode].composingLock=!0,!1}return!0},Ql=function(n,i,r){if(!(r.key==="Enter"||r.key==="Tab"||r.key==="Backspace"||r.key.indexOf("Arrow")>-1||(0,h.yl)(r)||r.key==="Escape"||r.shiftKey||r.altKey)){var d=(0,w.lG)(n.startContainer,"P")||(0,w.lG)(n.startContainer,"LI");if(d&&(0,Z.im)(d,i[i.currentMode].element,n).start===0){d.nodeValue&&(d.nodeValue=d.nodeValue.replace(/\u2006/g,""));var s=document.createTextNode(u.g.ZWSP);n.insertNode(s),n.setStartAfter(s)}}},Ia=function(n,i){if(i==="ArrowDown"||i==="ArrowUp"){var r=(0,w.a1)(n.startContainer,"data-type","math-inline")||(0,w.a1)(n.startContainer,"data-type","html-entity")||(0,w.a1)(n.startContainer,"data-type","html-inline");r&&(i==="ArrowDown"&&n.setStartAfter(r.parentElement),i==="ArrowUp"&&n.setStartBefore(r.parentElement))}},Li=function(n,i){var r=(0,Z.zh)(n),d=(0,w.F9)(r.startContainer);d&&(d.insertAdjacentHTML(i,'<p data-block="0">'.concat(u.g.ZWSP,`<wbr>
</p>`)),(0,Z.ib)(n[n.currentMode].element,r),Mr(n),qe(n))},Yl=function(n){var i=(0,w.lG)(n,"TABLE");return i&&i.rows[0].cells[0].isSameNode(n)?i:!1},$c=function(n){var i=(0,w.lG)(n,"TABLE");return i&&i.lastElementChild.lastElementChild.lastElementChild.isSameNode(n)?i:!1},Ra=function(n,i,r){r===void 0&&(r=!0);var d=n.previousElementSibling;return d||(n.parentElement.previousElementSibling?d=n.parentElement.previousElementSibling.lastElementChild:n.parentElement.parentElement.tagName==="TBODY"&&n.parentElement.parentElement.previousElementSibling?d=n.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:d=null),d&&(i.selectNodeContents(d),r||i.collapse(!1),(0,Z.Hc)(i)),d},Er=function(n,i,r,d,s){var p=(0,Z.im)(d,n[n.currentMode].element,r);if(i.key==="ArrowDown"&&d.textContent.trimRight().substr(p.start).indexOf(`
`)===-1||i.key==="ArrowRight"&&p.start>=d.textContent.trimRight().length){var _=s.nextElementSibling;return!_||_&&(_.tagName==="TABLE"||_.getAttribute("data-type"))?(s.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(u.g.ZWSP,"<wbr></p>")),(0,Z.ib)(n[n.currentMode].element,r)):(r.selectNodeContents(_),r.collapse(!0),(0,Z.Hc)(r)),i.preventDefault(),!0}return!1},Ai=function(n,i,r,d,s){var p=(0,Z.im)(d,n[n.currentMode].element,r);if(i.key==="ArrowUp"&&d.textContent.substr(0,p.start).indexOf(`
`)===-1||(i.key==="ArrowLeft"||i.key==="Backspace"&&r.toString()==="")&&p.start===0){var _=s.previousElementSibling;return!_||_&&(_.tagName==="TABLE"||_.getAttribute("data-type"))?(s.insertAdjacentHTML("beforebegin",'<p data-block="0">'.concat(u.g.ZWSP,"<wbr></p>")),(0,Z.ib)(n[n.currentMode].element,r)):(r.selectNodeContents(_),r.collapse(!1),(0,Z.Hc)(r)),i.preventDefault(),!0}return!1},ko=function(n,i,r,d){d===void 0&&(d=!0);var s=(0,w.lG)(i.startContainer,"LI");if(n[n.currentMode].element.querySelectorAll("wbr").forEach(function(J){J.remove()}),i.insertNode(document.createElement("wbr")),d&&s){for(var p="",_=0;_<s.parentElement.childElementCount;_++){var E=s.parentElement.children[_].querySelector("input");E&&E.remove(),p+='<p data-block="0">'.concat(s.parentElement.children[_].innerHTML.trimLeft(),"</p>")}s.parentElement.insertAdjacentHTML("beforebegin",p),s.parentElement.remove()}else if(s)if(r==="check")s.parentElement.querySelectorAll("li").forEach(function(J){J.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'.concat(J.textContent.indexOf(" ")===0?"":" ")),J.classList.add("vditor-task")});else{s.querySelector("input")&&s.parentElement.querySelectorAll("li").forEach(function(J){J.querySelector("input").remove(),J.classList.remove("vditor-task")});var L=void 0;r==="list"?(L=document.createElement("ul"),L.setAttribute("data-marker","*")):(L=document.createElement("ol"),L.setAttribute("data-marker","1.")),L.setAttribute("data-block","0"),L.setAttribute("data-tight",s.parentElement.getAttribute("data-tight")),L.innerHTML=s.parentElement.innerHTML,s.parentElement.parentNode.replaceChild(L,s.parentElement)}else{var F=(0,w.a1)(i.startContainer,"data-block","0");F||(n[n.currentMode].element.querySelector("wbr").remove(),F=n[n.currentMode].element.querySelector("p"),F.innerHTML="<wbr>"),r==="check"?(F.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '.concat(F.innerHTML,"</li></ul>")),F.remove()):r==="list"?(F.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'.concat(F.innerHTML,"</li></ul>")),F.remove()):r==="ordered-list"&&(F.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'.concat(F.innerHTML,"</li></ol>")),F.remove())}},Pa=function(n,i,r){var d=i.previousElementSibling;if(i&&d){var s=[i];Array.from(r.cloneContents().children).forEach(function(F,L){F.nodeType!==3&&i&&F.textContent.trim()!==""&&i.getAttribute("data-node-id")===F.getAttribute("data-node-id")&&(L!==0&&s.push(i),i=i.nextElementSibling)}),n[n.currentMode].element.querySelectorAll("wbr").forEach(function(F){F.remove()}),r.insertNode(document.createElement("wbr"));var p=d.parentElement,_="";s.forEach(function(F){var L=F.getAttribute("data-marker");L.length!==1&&(L="1".concat(L.slice(-1))),_+='<li data-node-id="'.concat(F.getAttribute("data-node-id"),'" data-marker="').concat(L,'">').concat(F.innerHTML,"</li>"),F.remove()}),d.insertAdjacentHTML("beforeend","<".concat(p.tagName,' data-block="0">').concat(_,"</").concat(p.tagName,">")),n.currentMode==="wysiwyg"?p.outerHTML=n.lute.SpinVditorDOM(p.outerHTML):p.outerHTML=n.lute.SpinVditorIRDOM(p.outerHTML),(0,Z.ib)(n[n.currentMode].element,r);var E=(0,w.O9)(r.startContainer);E&&E.querySelectorAll(".vditor-".concat(n.currentMode,"__preview[data-render='2']")).forEach(function(F){Tt(F,n),n.currentMode==="wysiwyg"&&F.previousElementSibling.setAttribute("style","display:none")}),qe(n),Mr(n)}else n[n.currentMode].element.focus()},eo=function(n,i,r,d){var s=(0,w.lG)(i.parentElement,"LI");if(s){n[n.currentMode].element.querySelectorAll("wbr").forEach(function(K){K.remove()}),r.insertNode(document.createElement("wbr"));var p=i.parentElement,_=p.cloneNode(),E=[i];Array.from(r.cloneContents().children).forEach(function(K,fe){K.nodeType!==3&&i&&K.textContent.trim()!==""&&i.getAttribute("data-node-id")===K.getAttribute("data-node-id")&&(fe!==0&&E.push(i),i=i.nextElementSibling)});var F=!1,L="";p.querySelectorAll("li").forEach(function(K){F&&(L+=K.outerHTML,!K.nextElementSibling&&!K.previousElementSibling?K.parentElement.remove():K.remove()),K.isSameNode(E[E.length-1])&&(F=!0)}),E.reverse().forEach(function(K){s.insertAdjacentElement("afterend",K)}),L&&(_.innerHTML=L,E[0].insertAdjacentElement("beforeend",_)),n.currentMode==="wysiwyg"?d.outerHTML=n.lute.SpinVditorDOM(d.outerHTML):d.outerHTML=n.lute.SpinVditorIRDOM(d.outerHTML),(0,Z.ib)(n[n.currentMode].element,r);var J=(0,w.O9)(r.startContainer);J&&J.querySelectorAll(".vditor-".concat(n.currentMode,"__preview[data-render='2']")).forEach(function(K){Tt(K,n),n.currentMode==="wysiwyg"&&K.previousElementSibling.setAttribute("style","display:none")}),qe(n),Mr(n)}else n[n.currentMode].element.focus()},zr=function(n,i){for(var r=getSelection().getRangeAt(0).startContainer.parentElement,d=n.rows[0].cells.length,s=n.rows.length,p=0,_=0;_<s;_++)for(var E=0;E<d;E++)if(n.rows[_].cells[E].isSameNode(r)){p=E;break}for(var F=0;F<s;F++)n.rows[F].cells[p].setAttribute("align",i)},Fi=function(n){var i=n.trimRight().split(`
`).pop();return i===""?!1:(i.replace(/ |-/g,"")===""||i.replace(/ |_/g,"")===""||i.replace(/ |\*/g,"")==="")&&i.replace(/ /g,"").length>2?!(i.indexOf("-")>-1&&i.trimLeft().indexOf(" ")===-1&&n.trimRight().split(`
`).length>1||i.indexOf("    ")===0||i.indexOf("	")===0):!1},Lo=function(n){var i=n.trimRight().split(`
`);return n=i.pop(),n.indexOf("    ")===0||n.indexOf("	")===0||(n=n.trimLeft(),n===""||i.length===0)?!1:n.replace(/-/g,"")===""||n.replace(/=/g,"")===""},qe=function(n,i){i===void 0&&(i={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),n.currentMode==="wysiwyg"?_t(n,i):n.currentMode==="ir"?yi(n,i):n.currentMode==="sv"&&Yt(n,i)},Zl=function(n,i,r,d){var s,p=n.startContainer,_=(0,w.lG)(p,"LI");if(_){if(!(0,h.yl)(d)&&!d.altKey&&d.key==="Enter"&&!d.shiftKey&&r&&_.contains(r)&&r.nextElementSibling)return _&&!_.textContent.endsWith(`
`)&&_.insertAdjacentText("beforeend",`
`),n.insertNode(document.createTextNode(`

`)),n.collapse(!1),qe(i),d.preventDefault(),!0;if(!(0,h.yl)(d)&&!d.shiftKey&&!d.altKey&&d.key==="Backspace"&&!_.previousElementSibling&&n.toString()===""&&(0,Z.im)(_,i[i.currentMode].element,n).start===0)return _.nextElementSibling?(_.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(_.innerHTML,"</p>")),_.remove()):_.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(_.innerHTML,"</p>"),(0,Z.ib)(i[i.currentMode].element,n),qe(i),d.preventDefault(),!0;if(!(0,h.yl)(d)&&!d.shiftKey&&!d.altKey&&d.key==="Backspace"&&_.textContent.trim().replace(u.g.ZWSP,"")===""&&n.toString()===""&&((s=_.previousElementSibling)===null||s===void 0?void 0:s.tagName)==="LI")return _.previousElementSibling.insertAdjacentText("beforeend",`

`),n.selectNodeContents(_.previousElementSibling),n.collapse(!1),_.remove(),(0,Z.ib)(i[i.currentMode].element,n),qe(i),d.preventDefault(),!0;if(!(0,h.yl)(d)&&!d.altKey&&d.key==="Tab"){var E=!1;if((n.startOffset===0&&(p.nodeType===3&&!p.previousSibling||p.nodeType!==3&&p.nodeName==="LI")||_.classList.contains("vditor-task")&&n.startOffset===1&&p.previousSibling.nodeType!==3&&p.previousSibling.tagName==="INPUT")&&(E=!0),E||n.toString()!=="")return d.shiftKey?eo(i,_,n,_.parentElement):Pa(i,_,n),d.preventDefault(),!0}}return!1},Ao=function(n,i,r){if(n.options.tab&&r.key==="Tab")return r.shiftKey||(i.toString()===""?(i.insertNode(document.createTextNode(n.options.tab)),i.collapse(!1)):(i.extractContents(),i.insertNode(document.createTextNode(n.options.tab)),i.collapse(!1))),(0,Z.Hc)(i),qe(n),r.preventDefault(),!0},Va=function(n,i,r,d){if(r){if(!(0,h.yl)(n)&&!n.altKey&&n.key==="Enter"){var s=String.raw(ls||(ls=Kl(["",""],["",""])),r.textContent).replace(/\\\|/g,"").trim(),p=s.split("|");if(s.startsWith("|")&&s.endsWith("|")&&p.length>3){var _=p.map(function(){return"---"}).join("|");return _=r.textContent+`
`+_.substring(3,_.length-3)+`
|<wbr>`,r.outerHTML=i.lute.SpinVditorDOM(_),(0,Z.ib)(i[i.currentMode].element,d),qe(i),Gt(i),n.preventDefault(),!0}if(Fi(r.innerHTML)&&r.previousElementSibling){var E="",F=r.innerHTML.trimRight().split(`
`);return F.length>1&&(F.pop(),E='<p data-block="0">'.concat(F.join(`
`),"</p>")),r.insertAdjacentHTML("afterend","".concat(E,`<hr data-block="0"><p data-block="0"><wbr>
</p>`)),r.remove(),(0,Z.ib)(i[i.currentMode].element,d),qe(i),Gt(i),n.preventDefault(),!0}if(Lo(r.innerHTML))return i.currentMode==="wysiwyg"?r.outerHTML=i.lute.SpinVditorDOM(r.innerHTML+`<p data-block="0"><wbr>
</p>`):r.outerHTML=i.lute.SpinVditorIRDOM(r.innerHTML+`<p data-block="0"><wbr>
</p>`),(0,Z.ib)(i[i.currentMode].element,d),qe(i),Gt(i),n.preventDefault(),!0}if(d.collapsed&&r.previousElementSibling&&n.key==="Backspace"&&!(0,h.yl)(n)&&!n.altKey&&!n.shiftKey&&r.textContent.trimRight().split(`
`).length>1&&(0,Z.im)(r,i[i.currentMode].element,d).start===0){var L=(0,w.DX)(r.previousElementSibling);return L.textContent.endsWith(`
`)||(L.textContent=L.textContent+`
`),L.parentElement.insertAdjacentHTML("beforeend","<wbr>".concat(r.innerHTML)),r.remove(),(0,Z.ib)(i[i.currentMode].element,d),!1}return!1}},Ba=function(n,i,r){for(var d="",s=0;s<r.parentElement.childElementCount;s++)d+='<td align="'.concat(r.parentElement.children[s].getAttribute("align"),'"> </td>');r.tagName==="TH"?r.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>".concat(d,"</tr></tbody>")):r.parentElement.insertAdjacentHTML("afterend","<tr>".concat(d,"</tr>")),qe(n)},Ha=function(n,i,r){for(var d="",s=0;s<r.parentElement.childElementCount;s++)r.tagName==="TH"?d+='<th align="'.concat(r.parentElement.children[s].getAttribute("align"),'"> </th>'):d+='<td align="'.concat(r.parentElement.children[s].getAttribute("align"),'"> </td>');if(r.tagName==="TH"){r.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>".concat(d,"</tr></thead>")),i.insertNode(document.createElement("wbr"));var p=r.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");r.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",p),r.parentElement.parentElement.remove(),(0,Z.ib)(n.ir.element,i)}else r.parentElement.insertAdjacentHTML("beforebegin","<tr>".concat(d,"</tr>"));qe(n)},Fo=function(n,i,r,d){d===void 0&&(d="afterend");for(var s=0,p=r.previousElementSibling;p;)s++,p=p.previousElementSibling;for(var _=0;_<i.rows.length;_++)_===0?i.rows[_].cells[s].insertAdjacentHTML(d,"<th> </th>"):i.rows[_].cells[s].insertAdjacentHTML(d,"<td> </td>");qe(n)},es=function(n,i,r){if(r.tagName==="TD"){var d=r.parentElement.parentElement;r.parentElement.previousElementSibling?i.selectNodeContents(r.parentElement.previousElementSibling.lastElementChild):i.selectNodeContents(d.previousElementSibling.lastElementChild.lastElementChild),d.childElementCount===1?d.remove():r.parentElement.remove(),i.collapse(!1),(0,Z.Hc)(i),qe(n)}},ts=function(n,i,r,d){for(var s=0,p=d.previousElementSibling;p;)s++,p=p.previousElementSibling;(d.previousElementSibling||d.nextElementSibling)&&(i.selectNodeContents(d.previousElementSibling||d.nextElementSibling),i.collapse(!0));for(var _=0;_<r.rows.length;_++){var E=r.rows[_].cells;if(E.length===1){r.remove(),Mr(n);break}E[s].remove()}(0,Z.Hc)(i),qe(n)},Wa=function(n,i,r){var d=r.startContainer,s=(0,w.lG)(d,"TD")||(0,w.lG)(d,"TH");if(s){if(!(0,h.yl)(i)&&!i.altKey&&i.key==="Enter"){(!s.lastElementChild||s.lastElementChild&&(!s.lastElementChild.isSameNode(s.lastChild)||s.lastElementChild.tagName!=="BR"))&&s.insertAdjacentHTML("beforeend","<br>");var p=document.createElement("br");return r.insertNode(p),r.setStartAfter(p),qe(n),Gt(n),i.preventDefault(),!0}if(i.key==="Tab"){if(i.shiftKey)return Ra(s,r),i.preventDefault(),!0;var _=s.nextElementSibling;return _||(s.parentElement.nextElementSibling?_=s.parentElement.nextElementSibling.firstElementChild:s.parentElement.parentElement.tagName==="THEAD"&&s.parentElement.parentElement.nextElementSibling?_=s.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:_=null),_&&(r.selectNodeContents(_),(0,Z.Hc)(r)),i.preventDefault(),!0}var E=s.parentElement.parentElement.parentElement;if(i.key==="ArrowUp"){if(i.preventDefault(),s.tagName==="TH")return E.previousElementSibling?(r.selectNodeContents(E.previousElementSibling),r.collapse(!1),(0,Z.Hc)(r)):Li(n,"beforebegin"),!0;for(var F=0,L=s.parentElement;F<L.cells.length&&!L.cells[F].isSameNode(s);F++);var J=L.previousElementSibling;return J||(J=L.parentElement.previousElementSibling.firstChild),r.selectNodeContents(J.cells[F]),r.collapse(!1),(0,Z.Hc)(r),!0}if(i.key==="ArrowDown"){i.preventDefault();var L=s.parentElement;if(!L.nextElementSibling&&s.tagName==="TD")return E.nextElementSibling?(r.selectNodeContents(E.nextElementSibling),r.collapse(!0),(0,Z.Hc)(r)):Li(n,"afterend"),!0;for(var F=0;F<L.cells.length&&!L.cells[F].isSameNode(s);F++);var _=L.nextElementSibling;return _||(_=L.parentElement.nextElementSibling.firstChild),r.selectNodeContents(_.cells[F]),r.collapse(!0),(0,Z.Hc)(r),!0}if(n.currentMode==="wysiwyg"&&!(0,h.yl)(i)&&i.key==="Enter"&&!i.shiftKey&&i.altKey){var K=n.wysiwyg.popover.querySelector(".vditor-input");return K.focus(),K.select(),i.preventDefault(),!0}if(!(0,h.yl)(i)&&!i.shiftKey&&!i.altKey&&i.key==="Backspace"&&r.startOffset===0&&r.toString()===""){var fe=Ra(s,r,!1);return!fe&&E&&(E.textContent.trim()===""?(E.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,Z.ib)(n[n.currentMode].element,r)):(r.setStartBefore(E),r.collapse(!0)),qe(n)),i.preventDefault(),!0}if(pe("\u21E7\u2318F",i))return Ha(n,r,s),i.preventDefault(),!0;if(pe("\u2318=",i))return Ba(n,r,s),i.preventDefault(),!0;if(pe("\u21E7\u2318G",i))return Fo(n,E,s,"beforebegin"),i.preventDefault(),!0;if(pe("\u21E7\u2318=",i))return Fo(n,E,s),i.preventDefault(),!0;if(pe("\u2318-",i))return es(n,r,s),i.preventDefault(),!0;if(pe("\u21E7\u2318-",i))return ts(n,r,E,s),i.preventDefault(),!0;if(pe("\u21E7\u2318L",i)){if(n.currentMode==="ir")return zr(E,"left"),qe(n),i.preventDefault(),!0;var ue=n.wysiwyg.popover.querySelector('[data-type="left"]');if(ue)return ue.click(),i.preventDefault(),!0}if(pe("\u21E7\u2318C",i)){if(n.currentMode==="ir")return zr(E,"center"),qe(n),i.preventDefault(),!0;var ue=n.wysiwyg.popover.querySelector('[data-type="center"]');if(ue)return ue.click(),i.preventDefault(),!0}if(pe("\u21E7\u2318R",i)){if(n.currentMode==="ir")return zr(E,"right"),qe(n),i.preventDefault(),!0;var ue=n.wysiwyg.popover.querySelector('[data-type="right"]');if(ue)return ue.click(),i.preventDefault(),!0}}return!1},ns=function(n,i,r,d){if(r.tagName==="PRE"&&pe("\u2318A",i))return d.selectNodeContents(r.firstElementChild),i.preventDefault(),!0;if(n.options.tab&&i.key==="Tab"&&!i.shiftKey&&d.toString()==="")return d.insertNode(document.createTextNode(n.options.tab)),d.collapse(!1),qe(n),i.preventDefault(),!0;if(i.key==="Backspace"&&!(0,h.yl)(i)&&!i.shiftKey&&!i.altKey){var s=(0,Z.im)(r,n[n.currentMode].element,d);if((s.start===0||s.start===1&&r.innerText===`
`)&&d.toString()==="")return r.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(r.firstElementChild.innerHTML,"</p>"),(0,Z.ib)(n[n.currentMode].element,d),qe(n),i.preventDefault(),!0}return!(0,h.yl)(i)&&!i.altKey&&i.key==="Enter"?(r.firstElementChild.textContent.endsWith(`
`)||r.firstElementChild.insertAdjacentText("beforeend",`
`),d.extractContents(),d.insertNode(document.createTextNode(`
`)),d.collapse(!1),(0,Z.Hc)(d),(0,h.vU)()||(n.currentMode==="wysiwyg"?Eo(n,d):Xn(n,d)),Gt(n),i.preventDefault(),!0):!1},is=function(n,i,r,d){var s=i.startContainer,p=(0,w.lG)(s,"BLOCKQUOTE");if(p&&i.toString()===""){if(r.key==="Backspace"&&!(0,h.yl)(r)&&!r.shiftKey&&!r.altKey&&(0,Z.im)(p,n[n.currentMode].element,i).start===0)return i.insertNode(document.createElement("wbr")),p.outerHTML=p.innerHTML,(0,Z.ib)(n[n.currentMode].element,i),qe(n),r.preventDefault(),!0;if(d&&r.key==="Enter"&&!(0,h.yl)(r)&&!r.shiftKey&&!r.altKey&&d.parentElement.tagName==="BLOCKQUOTE"){var _=!1;if(d.innerHTML.replace(u.g.ZWSP,"")===`
`||d.innerHTML.replace(u.g.ZWSP,"")===""?(_=!0,d.remove()):d.innerHTML.endsWith(`

`)&&(0,Z.im)(d,n[n.currentMode].element,i).start===d.textContent.length-1&&(d.innerHTML=d.innerHTML.substr(0,d.innerHTML.length-2),_=!0),_)return p.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(u.g.ZWSP,`<wbr>
</p>`)),(0,Z.ib)(n[n.currentMode].element,i),qe(n),r.preventDefault(),!0}var E=(0,w.F9)(s);if(n.currentMode==="wysiwyg"&&E&&pe("\u21E7\u2318;",r))return i.insertNode(document.createElement("wbr")),E.outerHTML='<blockquote data-block="0">'.concat(E.outerHTML,"</blockquote>"),(0,Z.ib)(n.wysiwyg.element,i),_t(n),r.preventDefault(),!0;if(Er(n,r,i,p,p)||Ai(n,r,i,p,p))return!0}return!1},rs=function(n,i,r){var d=i.startContainer,s=(0,w.lG)(d,"LI");if(s&&s.classList.contains("vditor-task")){if(pe("\u21E7\u2318J",r)){var p=s.firstElementChild;return p.checked?p.removeAttribute("checked"):p.setAttribute("checked","checked"),qe(n),r.preventDefault(),!0}if(r.key==="Backspace"&&!(0,h.yl)(r)&&!r.shiftKey&&!r.altKey&&i.toString()===""&&i.startOffset===1&&(d.nodeType===3&&d.previousSibling&&d.previousSibling.tagName==="INPUT"||d.nodeType!==3)){var _=s.previousElementSibling;if(s.querySelector("input").remove(),_){var E=(0,w.DX)(_);E.parentElement.insertAdjacentHTML("beforeend","<wbr>"+s.innerHTML.trim()),s.remove()}else s.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(s.innerHTML.trim()||`
`,"</p>")),s.nextElementSibling?s.remove():s.parentElement.remove();return(0,Z.ib)(n[n.currentMode].element,i),qe(n),r.preventDefault(),!0}if(r.key==="Enter"&&!(0,h.yl)(r)&&!r.shiftKey&&!r.altKey){if(s.textContent.trim()==="")if((0,w.fb)(s.parentElement,"vditor-task")){var F=(0,w.O9)(d);F&&eo(n,s,i,F)}else if(s.nextElementSibling){var L="",J="",K=!1;Array.from(s.parentElement.children).forEach(function(Me){s.isSameNode(Me)?K=!0:K?L+=Me.outerHTML:J+=Me.outerHTML});var fe=s.parentElement.tagName,ue=s.parentElement.tagName==="OL"?"":' data-marker="'.concat(s.parentElement.getAttribute("data-marker"),'"'),ae="";J&&(ae=s.parentElement.tagName==="UL"?"":' start="1"',J="<".concat(fe,' data-tight="true"').concat(ue,' data-block="0">').concat(J,"</").concat(fe,">")),s.parentElement.outerHTML="".concat(J,`<p data-block="0"><wbr>
</p><`).concat(fe,`
 data-tight="true"`).concat(ue,' data-block="0"').concat(ae,">").concat(L,"</").concat(fe,">")}else s.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),s.parentElement.querySelectorAll("li").length===1?s.parentElement.remove():s.remove();else d.nodeType!==3&&i.startOffset===0&&d.firstChild.tagName==="INPUT"?i.setStart(d.childNodes[1],1):(i.setEndAfter(s.lastChild),s.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'.concat(s.getAttribute("data-marker"),'"><input type="checkbox"> <wbr></li>')),document.querySelector("wbr").after(i.extractContents()));return(0,Z.ib)(n[n.currentMode].element,i),qe(n),Gt(n),r.preventDefault(),!0}}return!1},os=function(n,i,r,d){if(i.startContainer.nodeType!==3){var s=i.startContainer.children[i.startOffset];if(s&&s.tagName==="HR")return i.selectNodeContents(s.previousElementSibling),i.collapse(!1),r.preventDefault(),!0}if(d){var p=d.previousElementSibling;if(p&&(0,Z.im)(d,n[n.currentMode].element,i).start===0&&((0,h.vU)()&&p.tagName==="HR"||p.tagName==="TABLE")){if(p.tagName==="TABLE"){var _=p.lastElementChild.lastElementChild.lastElementChild;_.innerHTML=_.innerHTML.trimLeft()+"<wbr>"+d.textContent.trim(),d.remove()}else p.remove();return(0,Z.ib)(n[n.currentMode].element,i),qe(n),r.preventDefault(),!0}}return!1},No=function(n){(0,h.vU)()&&n.startContainer.nodeType!==3&&n.startContainer.tagName==="HR"&&n.setStartBefore(n.startContainer)},as=function(n,i,r){var d,s;if(!(0,h.vU)())return!1;if(n.key==="ArrowUp"&&i&&((d=i.previousElementSibling)===null||d===void 0?void 0:d.tagName)==="TABLE"){var p=i.previousElementSibling;return r.selectNodeContents(p.rows[p.rows.length-1].lastElementChild),r.collapse(!1),n.preventDefault(),!0}return n.key==="ArrowDown"&&i&&((s=i.nextElementSibling)===null||s===void 0?void 0:s.tagName)==="TABLE"?(r.selectNodeContents(i.nextElementSibling.rows[0].cells[0]),r.collapse(!0),n.preventDefault(),!0):!1},Do=function(n,i,r){return ql(void 0,void 0,void 0,function(){var d,s,p,_,E,F,L,J,K,fe,ue,ae,Me,ce,ve,ce,Ve;return Xl(this,function(Le){switch(Le.label){case 0:return n[n.currentMode].element.getAttribute("contenteditable")!=="true"?[2]:(i.stopPropagation(),i.preventDefault(),"clipboardData"in i?(d=i.clipboardData.getData("text/html"),s=i.clipboardData.getData("text/plain"),p=i.clipboardData.files):(d=i.dataTransfer.getData("text/html"),s=i.dataTransfer.getData("text/plain"),i.dataTransfer.types.includes("Files")&&(p=i.dataTransfer.items)),_={},E=function(we,gt){if(!gt)return["",Lute.WalkContinue];if(n.options.upload.renderLinkDest)return n.options.upload.renderLinkDest(n,we,gt);var ct=we.TokensStr();if(we.__internal_object__.Parent.Type===34&&ct&&ct.indexOf("file://")===-1&&n.options.upload.linkToImgUrl){var wt=new XMLHttpRequest;wt.open("POST",n.options.upload.linkToImgUrl),n.options.upload.token&&wt.setRequestHeader("X-Upload-Token",n.options.upload.token),n.options.upload.withCredentials&&(wt.withCredentials=!0),Ul(n,wt),wt.setRequestHeader("Content-Type","application/json; charset=utf-8"),wt.onreadystatechange=function(){if(wt.readyState===XMLHttpRequest.DONE){if(wt.status===200){var yn=wt.responseText;n.options.upload.linkToImgFormat&&(yn=n.options.upload.linkToImgFormat(wt.responseText));var ln=JSON.parse(yn);if(ln.code!==0){n.tip.show(ln.msg);return}var vn=ln.data.originalURL;if(n.currentMode==="sv")n.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(Jt){Jt.textContent===vn&&(Jt.textContent=ln.data.url)});else{var et=n[n.currentMode].element.querySelector('img[src="'.concat(vn,'"]'));et.src=ln.data.url,n.currentMode==="ir"&&(et.previousElementSibling.previousElementSibling.innerHTML=ln.data.url)}qe(n)}else n.tip.show(wt.responseText);n.options.upload.linkToImgCallback&&n.options.upload.linkToImgCallback(wt.responseText)}},wt.send(JSON.stringify({url:ct}))}return n.currentMode==="ir"?['<span class="vditor-ir__marker vditor-ir__marker--link">'.concat(Lute.EscapeHTMLStr(ct),"</span>"),Lute.WalkContinue]:n.currentMode==="wysiwyg"?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'.concat(Lute.EscapeHTMLStr(ct),"</span>"),Lute.WalkContinue]},(d.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<a href="'.concat(s,'">').concat(s,"</a>")||d.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<!--StartFragment--><a href="'.concat(s,'">').concat(s,"</a><!--EndFragment-->"))&&(d=""),F=new DOMParser().parseFromString(d,"text/html"),F.body&&(d=F.body.innerHTML),d=Lute.Sanitize(d),n.wysiwyg.getComments(n),L=n[n.currentMode].element.scrollHeight,J=an(d,s,n.currentMode),K=n.currentMode==="sv"?(0,w.a1)(i.target,"data-type","code-block"):(0,w.lG)(i.target,"CODE"),K?(n.currentMode==="sv"?document.execCommand("insertHTML",!1,s.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(fe=(0,Z.im)(i.target,n[n.currentMode].element),K.parentElement.tagName!=="PRE"&&(s+=u.g.ZWSP),K.textContent=K.textContent.substring(0,fe.start)+s+K.textContent.substring(fe.end),(0,Z.$j)(fe.start+s.length,fe.start+s.length,K.parentElement),!((Ve=K.parentElement)===null||Ve===void 0)&&Ve.nextElementSibling.classList.contains("vditor-".concat(n.currentMode,"__preview"))&&(K.parentElement.nextElementSibling.innerHTML=K.outerHTML,Tt(K.parentElement.nextElementSibling,n))),[3,8]):[3,1]);case 1:return J?(r.pasteCode(J),[3,8]):[3,2];case 2:return d.trim()===""?[3,3]:(ue=document.createElement("div"),ue.innerHTML=d,ue.querySelectorAll("[style]").forEach(function(we){we.removeAttribute("style")}),ue.querySelectorAll(".vditor-copy").forEach(function(we){we.remove()}),n.currentMode==="ir"?(_.HTML2VditorIRDOM={renderLinkDest:E},n.lute.SetJSRenderers({renderers:_}),(0,Z.oC)(n.lute.HTML2VditorIRDOM(ue.innerHTML),n)):n.currentMode==="wysiwyg"?(_.HTML2VditorDOM={renderLinkDest:E},n.lute.SetJSRenderers({renderers:_}),(0,Z.oC)(n.lute.HTML2VditorDOM(ue.innerHTML),n)):(_.Md2VditorSVDOM={renderLinkDest:E},n.lute.SetJSRenderers({renderers:_}),Da(n,n.lute.HTML2Md(ue.innerHTML).trimRight())),n.outline.render(n),[3,8]);case 3:return p.length>0?n.options.upload.url||n.options.upload.handler?[4,Oa(n,p)]:[3,5]:[3,7];case 4:return Le.sent(),[3,6];case 5:ae=new FileReader,"clipboardData"in i?(p=i.clipboardData.files,Me=p[0]):i.dataTransfer.types.includes("Files")&&(p=i.dataTransfer.items,Me=p[0].getAsFile()),Me&&Me.type.startsWith("image")&&(ae.readAsDataURL(Me),ae.onload=function(){var we="";n.currentMode==="wysiwyg"?we+='<img alt="'.concat(Me.name,'" src="').concat(ae.result.toString(),`">
`):we+="![".concat(Me.name,"](").concat(ae.result.toString(),`)
`),document.execCommand("insertHTML",!1,we)}),Le.label=6;case 6:return[3,8];case 7:s.trim()!==""&&p.length===0&&(ce=(0,Z.zh)(n),ce.toString()!==""&&n.lute.IsValidLinkDest(s)&&(s="[".concat(ce.toString(),"](").concat(s,")")),n.currentMode==="ir"?(_.Md2VditorIRDOM={renderLinkDest:E},n.lute.SetJSRenderers({renderers:_}),(0,Z.oC)(n.lute.Md2VditorIRDOM(s),n)):n.currentMode==="wysiwyg"?(_.Md2VditorDOM={renderLinkDest:E},n.lute.SetJSRenderers({renderers:_}),(0,Z.oC)(n.lute.Md2VditorDOM(s),n)):(_.Md2VditorSVDOM={renderLinkDest:E},n.lute.SetJSRenderers({renderers:_}),Da(n,s)),n.outline.render(n)),Le.label=8;case 8:return n.currentMode!=="sv"&&(ve=(0,w.F9)((0,Z.zh)(n).startContainer),ve&&(ce=(0,Z.zh)(n),n[n.currentMode].element.querySelectorAll("wbr").forEach(function(we){we.remove()}),ce.insertNode(document.createElement("wbr")),n.currentMode==="wysiwyg"?ve.outerHTML=n.lute.SpinVditorDOM(ve.outerHTML):ve.outerHTML=n.lute.SpinVditorIRDOM(ve.outerHTML),(0,Z.ib)(n[n.currentMode].element,ce)),n[n.currentMode].element.querySelectorAll(".vditor-".concat(n.currentMode,"__preview[data-render='2']")).forEach(function(we){Tt(we,n)})),n.wysiwyg.triggerRemoveComment(n),qe(n),n[n.currentMode].element.scrollHeight-L>Math.min(n[n.currentMode].element.clientHeight,window.innerHeight)/2&&Gt(n),[2]}})})},ls,ss=function(n){var i,r;n.hint.render(n);var d=(0,Z.zh)(n).startContainer,s=(0,w.a1)(d,"data-type","code-block-info");if(s)if(s.textContent.replace(u.g.ZWSP,"")===""&&n.hint.recentLanguage){s.textContent=u.g.ZWSP+n.hint.recentLanguage;var p=(0,Z.zh)(n);p.selectNodeContents(s)}else{var _=[],E=s.textContent.substring(0,(0,Z.im)(s,n.ir.element).start).replace(u.g.ZWSP,"");(n.options.preview.hljs.langs||u.g.ALIAS_CODE_LANGUAGES.concat(((r=(i=window.hljs)===null||i===void 0?void 0:i.listLanguages())!==null&&r!==void 0?r:[]).sort())).forEach(function(F){F.indexOf(E.toLowerCase())>-1&&_.push({html:F,value:F})}),n.hint.genHTML(_,E,n)}},yi=function(n,i){i===void 0&&(i={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),i.enableHint&&ss(n),clearTimeout(n.ir.processTimeoutId),n.ir.processTimeoutId=window.setTimeout(function(){if(!n.ir.composingLock){var r=N(n);typeof n.options.input=="function"&&i.enableInput&&n.options.input(r),n.options.counter.enable&&n.counter.render(n,r),n.options.cache.enable&&(0,h.pK)()&&(localStorage.setItem(n.options.cache.id,r),n.options.cache.after&&n.options.cache.after(r)),n.devtools&&n.devtools.renderEchart(n),i.enableAddUndoStack&&n.undo.addToUndoStack(n)}},n.options.undoDelay)},yt=function(n,i){var r=(0,Z.zh)(n),d=(0,w.F9)(r.startContainer)||r.startContainer;if(d){var s=d.querySelector(".vditor-ir__marker--heading");s?s.innerHTML=i:(d.insertAdjacentText("afterbegin",i),r.selectNodeContents(d),r.collapse(!1)),Xn(n,r.cloneRange()),Gr(n)}},vt=function(n,i,r){var d=(0,w.a1)(n.startContainer,"data-type",r);if(d){d.firstElementChild.remove(),d.lastElementChild.remove(),n.insertNode(document.createElement("wbr"));var s=document.createElement("div");s.innerHTML=i.lute.SpinVditorIRDOM(d.outerHTML),d.outerHTML=s.firstElementChild.innerHTML.trim()}},jc=function(n,i,r,d){var s=(0,Z.zh)(n),p=i.getAttribute("data-type"),_=s.startContainer;_.nodeType===3&&(_=_.parentElement);var E=!0;if(i.classList.contains("vditor-menu--current"))if(p==="quote"){var F=(0,w.lG)(_,"BLOCKQUOTE");F&&(s.insertNode(document.createElement("wbr")),F.outerHTML=F.innerHTML.trim()===""?'<p data-block="0">'.concat(F.innerHTML,"</p>"):F.innerHTML)}else if(p==="link"){var L=(0,w.a1)(s.startContainer,"data-type","a");if(L){var J=(0,w.fb)(s.startContainer,"vditor-ir__link");J?(s.insertNode(document.createElement("wbr")),L.outerHTML=J.innerHTML):L.outerHTML=L.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else p==="italic"?vt(s,n,"em"):p==="bold"?vt(s,n,"strong"):p==="strike"?vt(s,n,"s"):p==="inline-code"?vt(s,n,"code"):(p==="check"||p==="list"||p==="ordered-list")&&(ko(n,s,p),E=!1,i.classList.remove("vditor-menu--current"));else{n.ir.element.childNodes.length===0&&(n.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,Z.ib)(n.ir.element,s));var K=(0,w.F9)(s.startContainer);if(p==="line"){if(K){var fe=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;K.innerHTML.trim()===""?K.outerHTML=fe:K.insertAdjacentHTML("afterend",fe)}}else if(p==="quote")K&&(s.insertNode(document.createElement("wbr")),K.outerHTML='<blockquote data-block="0">'.concat(K.outerHTML,"</blockquote>"),E=!1,i.classList.add("vditor-menu--current"));else if(p==="link"){var ue=void 0;s.toString()===""?ue="".concat(r,"<wbr>").concat(d):ue="".concat(r).concat(s.toString()).concat(d.replace(")","<wbr>)")),document.execCommand("insertHTML",!1,ue),E=!1,i.classList.add("vditor-menu--current")}else if(p==="italic"||p==="bold"||p==="strike"||p==="inline-code"||p==="code"||p==="table"){var ue=void 0;s.toString()===""?ue="".concat(r,"<wbr>").concat(d):(p==="code"?ue="".concat(r,`
`).concat(s.toString(),"<wbr>").concat(d):p==="table"?ue="".concat(r).concat(s.toString(),"<wbr>").concat(d):ue="".concat(r).concat(s.toString()).concat(d,"<wbr>"),s.deleteContents()),(p==="table"||p==="code")&&(ue=`
`+ue+`

`);var ae=document.createElement("span");ae.innerHTML=ue,s.insertNode(ae),Xn(n,s),p==="table"&&(s.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,Z.Hc)(s))}else(p==="check"||p==="list"||p==="ordered-list")&&(ko(n,s,p,!1),E=!1,T(n.toolbar.elements,["check","list","ordered-list"]),i.classList.add("vditor-menu--current"))}(0,Z.ib)(n.ir.element,s),yi(n),E&&Gr(n)},Gc=function(n,i,r,d){function s(p){return p instanceof r?p:new r(function(_){_(p)})}return new(r||(r=Promise))(function(p,_){function E(J){try{L(d.next(J))}catch(K){_(K)}}function F(J){try{L(d.throw(J))}catch(K){_(K)}}function L(J){J.done?p(J.value):s(J.value).then(E,F)}L((d=d.apply(n,i||[])).next())})},Kc=function(n,i){var r={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},d,s,p,_;return _={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function E(L){return function(J){return F([L,J])}}function F(L){if(d)throw new TypeError("Generator is already executing.");for(;_&&(_=0,L[0]&&(r=0)),r;)try{if(d=1,s&&(p=L[0]&2?s.return:L[0]?s.throw||((p=s.return)&&p.call(s),0):s.next)&&!(p=p.call(s,L[1])).done)return p;switch(s=0,p&&(L=[L[0]&2,p.value]),L[0]){case 0:case 1:p=L;break;case 4:return r.label++,{value:L[1],done:!1};case 5:r.label++,s=L[1],L=[0];continue;case 7:L=r.ops.pop(),r.trys.pop();continue;default:if(p=r.trys,!(p=p.length>0&&p[p.length-1])&&(L[0]===6||L[0]===2)){r=0;continue}if(L[0]===3&&(!p||L[1]>p[0]&&L[1]<p[3])){r.label=L[1];break}if(L[0]===6&&r.label<p[1]){r.label=p[1],p=L;break}if(p&&r.label<p[2]){r.label=p[2],r.ops.push(L);break}p[2]&&r.ops.pop(),r.trys.pop();continue}L=i.call(n,r)}catch(J){L=[6,J],s=0}finally{d=p=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},qc=(function(){function n(i){var r=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(d,s){r.element.style.display="none";var p=decodeURIComponent(d.getAttribute("data-value")),_=window.getSelection().getRangeAt(0);if(s.currentMode==="ir"){var E=(0,w.a1)(_.startContainer,"data-type","code-block-info");if(E){E.textContent=u.g.ZWSP+p.trimRight(),_.selectNodeContents(E),_.collapse(!1),yi(s),E.parentElement.querySelectorAll("code").forEach(function(K){K.className="language-"+p.trimRight()}),Tt(E.parentElement.querySelector(".vditor-ir__preview"),s),r.recentLanguage=p.trimRight();return}}if(s.currentMode==="wysiwyg"&&_.startContainer.nodeType!==3){var F=_.startContainer,L=void 0;if(F.classList.contains("vditor-input")?L=F:L=F.firstElementChild,L&&L.classList.contains("vditor-input")){L.value=p.trimRight(),_.selectNodeContents(L),_.collapse(!1),L.dispatchEvent(new CustomEvent("input",{detail:1})),r.recentLanguage=p.trimRight();return}}if(_.setStart(_.startContainer,r.lastIndex),_.deleteContents(),s.options.hint.parse?s.currentMode==="sv"?(0,Z.oC)(s.lute.SpinVditorSVDOM(p),s):s.currentMode==="wysiwyg"?(0,Z.oC)(s.lute.SpinVditorDOM(p),s):(0,Z.oC)(s.lute.SpinVditorIRDOM(p),s):(0,Z.oC)(p,s),r.splitChar===":"&&p.indexOf(":")>-1&&s.currentMode!=="sv"&&_.insertNode(document.createTextNode(" ")),_.collapse(!1),(0,Z.Hc)(_),s.currentMode==="wysiwyg"){var J=(0,w.fb)(_.startContainer,"vditor-wysiwyg__block");J&&J.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(J.lastElementChild.innerHTML=J.firstElementChild.innerHTML,Tt(J.lastElementChild,s))}else if(s.currentMode==="ir"){var J=(0,w.fb)(_.startContainer,"vditor-ir__marker--pre");J&&J.nextElementSibling.classList.contains("vditor-ir__preview")&&(J.nextElementSibling.innerHTML=J.innerHTML,Tt(J.nextElementSibling,s))}qe(s)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",i.push({key:":"})}return n.prototype.render=function(i){var r=this;if(window.getSelection().focusNode){var d,s=getSelection().getRangeAt(0);d=s.startContainer.textContent.substring(0,s.startOffset)||"";var p=this.getKey(d,i.options.hint.extend);if(typeof p>"u")this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var _=p===""?i.options.hint.emoji:i.lute.GetEmojis(),E=[];Object.keys(_).forEach(function(F){F.indexOf(p.toLowerCase())===0&&(_[F].indexOf(".")>-1?E.push({html:'<img src="'.concat(_[F],'" title=":').concat(F,':"/> :').concat(F,":"),value:":".concat(F,":")}):E.push({html:'<span class="vditor-hint__emoji">'.concat(_[F],"</span>").concat(F),value:_[F]}))}),this.genHTML(E,p,i)}else i.options.hint.extend.forEach(function(F){F.key===r.splitChar&&(clearTimeout(r.timeId),r.timeId=window.setTimeout(function(){return Gc(r,void 0,void 0,function(){var L;return Kc(this,function(J){switch(J.label){case 0:return L=this.genHTML,[4,F.hint(p)];case 1:return L.apply(this,[J.sent(),p,i]),[2]}})})},i.options.hint.delay))})}},n.prototype.genHTML=function(i,r,d){var s=this;if(i.length===0){this.element.style.display="none";return}var p=d[d.currentMode].element,_=(0,Z.Ny)(p),E=_.left+(d.options.outline.position==="left"?d.outline.element.offsetWidth:0),F=_.top,L="";i.forEach(function(K,fe){if(!(fe>7)){var ue=K.html;if(r!==""){var ae=ue.lastIndexOf(">")+1,Me=ue.substr(ae),ve=Me.toLowerCase().indexOf(r.toLowerCase());ve>-1&&(Me=Me.substring(0,ve)+"<b>"+Me.substring(ve,ve+r.length)+"</b>"+Me.substring(ve+r.length),ue=ue.substr(0,ae)+Me)}L+='<button type="button" data-value="'.concat(encodeURIComponent(K.value),` "
`).concat(fe===0?"class='vditor-hint--current'":"","> ").concat(ue,"</button>")}}),this.element.innerHTML=L;var J=parseInt(document.defaultView.getComputedStyle(p,null).getPropertyValue("line-height"),10);this.element.style.top="".concat(F+(J||22),"px"),this.element.style.left="".concat(E,"px"),this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(K){K.addEventListener("click",function(fe){s.fillEmoji(K,d),fe.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top="".concat(F-this.element.offsetHeight,"px")),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")},n.prototype.select=function(i,r){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var d=this.element.querySelector(".vditor-hint--current");if(i.key==="ArrowDown")return i.preventDefault(),i.stopPropagation(),d.removeAttribute("class"),d.nextElementSibling?d.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if(i.key==="ArrowUp"){if(i.preventDefault(),i.stopPropagation(),d.removeAttribute("class"),d.previousElementSibling)d.previousElementSibling.className="vditor-hint--current";else{var s=this.element.children.length;this.element.children[s-1].className="vditor-hint--current"}return!0}else if(!(0,h.yl)(i)&&!i.shiftKey&&!i.altKey&&i.key==="Enter"&&!i.isComposing)return i.preventDefault(),i.stopPropagation(),this.fillEmoji(d,r),!0;return!1},n.prototype.getKey=function(i,r){var d=this;this.lastIndex=-1,this.splitChar="",r.forEach(function(L){var J=i.lastIndexOf(L.key);d.lastIndex<J&&(d.splitChar=L.key,d.lastIndex=J)});var s;if(this.lastIndex===-1)return s;var p=i.split(this.splitChar),_=p[p.length-1],E=32;if(p.length>1&&_.trim()===_)if(p.length===2&&p[0]===""&&p[1].length<E)s=p[1];else{var F=p[p.length-2].slice(-1);(0,b.X)(F)===" "&&_.length<E&&(s=_)}return s},n})(),Xc=(function(){function n(i){this.composingLock=!1;var r=document.createElement("div");r.className="vditor-ir",r.innerHTML='<pre class="vditor-reset" placeholder="'.concat(i.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>`),this.element=r.firstElementChild,this.bindEvent(i),za(i,this.element),Hl(i,this.element),ka(i,this.element),Fa(i,this.element),Na(i,this.element),La(i,this.element),Aa(i,this.element,this.copy),To(i,this.element,this.copy)}return n.prototype.copy=function(i,r){var d=getSelection().getRangeAt(0);if(d.toString()!==""){i.stopPropagation(),i.preventDefault();var s=document.createElement("div");s.appendChild(d.cloneContents()),i.clipboardData.setData("text/plain",r.lute.VditorIRDOM2Md(s.innerHTML).trim()),i.clipboardData.setData("text/html","")}},n.prototype.bindEvent=function(i){var r=this;this.element.addEventListener("paste",function(d){Do(i,d,{pasteCode:function(s){document.execCommand("insertHTML",!1,s)}})}),this.element.addEventListener("scroll",function(){P(i,["hint"])}),this.element.addEventListener("compositionstart",function(d){r.composingLock=!0}),this.element.addEventListener("compositionend",function(d){(0,h.vU)()||Xn(i,getSelection().getRangeAt(0).cloneRange()),r.composingLock=!1}),this.element.addEventListener("input",function(d){if(!(d.inputType==="deleteByDrag"||d.inputType==="insertFromDrop")){if(r.preventInput){r.preventInput=!1,yi(i,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}r.composingLock||d.data==="\u2018"||d.data==="\u201C"||d.data==="\u300A"||Xn(i,getSelection().getRangeAt(0).cloneRange(),!1,d)}}),this.element.addEventListener("click",function(d){if(d.target.tagName==="INPUT"){d.target.checked?d.target.setAttribute("checked","checked"):d.target.removeAttribute("checked"),r.preventInput=!0,yi(i);return}var s=(0,Z.zh)(i),p=(0,w.fb)(d.target,"vditor-ir__preview");if(p||(p=(0,w.fb)(s.startContainer,"vditor-ir__preview")),p&&(p.previousElementSibling.firstElementChild?s.selectNodeContents(p.previousElementSibling.firstElementChild):s.selectNodeContents(p.previousElementSibling),s.collapse(!0),(0,Z.Hc)(s),Gt(i)),d.target.tagName==="IMG"){var _=d.target.parentElement.querySelector(".vditor-ir__marker--link");_&&(s.selectNode(_),(0,Z.Hc)(s))}var E=(0,w.a1)(d.target,"data-type","a");if(E&&!E.classList.contains("vditor-ir__node--expand")){i.options.link.click?i.options.link.click(E.querySelector(":scope > .vditor-ir__marker--link")):i.options.link.isOpen&&window.open(E.querySelector(":scope > .vditor-ir__marker--link").textContent);return}if(d.target.isEqualNode(r.element)&&r.element.lastElementChild&&s.collapsed){var F=r.element.lastElementChild.getBoundingClientRect();d.y>F.top+F.height&&(r.element.lastElementChild.tagName==="P"&&r.element.lastElementChild.textContent.trim().replace(u.g.ZWSP,"")===""?(s.selectNodeContents(r.element.lastElementChild),s.collapse(!1)):(r.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(u.g.ZWSP,"<wbr></p>")),(0,Z.ib)(r.element,s)))}s.toString()===""?_e(s,i):setTimeout(function(){_e((0,Z.zh)(i),i)}),wo(d,i),Gr(i)}),this.element.addEventListener("keyup",function(d){if(!(d.isComposing||(0,h.yl)(d))){if(d.key==="Enter"&&Gt(i),Gr(i),(d.key==="Backspace"||d.key==="Delete")&&i.ir.element.innerHTML!==""&&i.ir.element.childNodes.length===1&&i.ir.element.firstElementChild&&i.ir.element.firstElementChild.tagName==="P"&&i.ir.element.firstElementChild.childElementCount===0&&(i.ir.element.textContent===""||i.ir.element.textContent===`
`)){i.ir.element.innerHTML="";return}var s=(0,Z.zh)(i);d.key==="Backspace"?((0,h.vU)()&&s.startContainer.textContent===`
`&&s.startOffset===1&&(s.startContainer.textContent="",_e(s,i)),r.element.querySelectorAll(".language-math").forEach(function(_){var E=_.querySelector("br");E&&E.remove()})):d.key.indexOf("Arrow")>-1?((d.key==="ArrowLeft"||d.key==="ArrowRight")&&ss(i),_e(s,i)):d.keyCode===229&&d.code===""&&d.key==="Unidentified"&&_e(s,i);var p=(0,w.fb)(s.startContainer,"vditor-ir__preview");if(p){if(d.key==="ArrowUp"||d.key==="ArrowLeft")return p.previousElementSibling.firstElementChild?s.selectNodeContents(p.previousElementSibling.firstElementChild):s.selectNodeContents(p.previousElementSibling),s.collapse(!1),d.preventDefault(),!0;if(p.tagName==="SPAN"&&(d.key==="ArrowDown"||d.key==="ArrowRight"))return p.parentElement.getAttribute("data-type")==="html-entity"?(p.parentElement.insertAdjacentText("afterend",u.g.ZWSP),s.setStart(p.parentElement.nextSibling,1)):s.selectNodeContents(p.parentElement.lastElementChild),s.collapse(!1),d.preventDefault(),!0}}})},n})(),cs=function(n){if(n.currentMode==="sv")return n.lute.Md2HTML(N(n));if(n.currentMode==="wysiwyg")return n.lute.VditorDOM2HTML(n.wysiwyg.element.innerHTML);if(n.currentMode==="ir")return n.lute.VditorIRDOM2HTML(n.ir.element.innerHTML)},ds=e(214),us=e(436),rn=(function(){function n(i){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'.concat(i,`</div>
<div class="vditor-outline__content"></div>`)}return n.prototype.render=function(i){var r="";return i.preview.element.style.display==="block"?r=(0,us.k)(i.preview.previewElement,this.element.lastElementChild,i):r=(0,us.k)(i[i.currentMode].element,this.element.lastElementChild,i),r},n.prototype.toggle=function(i,r,d){var s;r===void 0&&(r=!0),d===void 0&&(d=!0);var p=(s=i.toolbar.elements.outline)===null||s===void 0?void 0:s.firstElementChild;if(r&&window.innerWidth>=u.g.MOBILE_WIDTH?(this.element.style.display="block",this.render(i),p?.classList.add("vditor-menu--current")):(this.element.style.display="none",p?.classList.remove("vditor-menu--current")),d&&getSelection().rangeCount>0){var _=getSelection().getRangeAt(0);i[i.currentMode].element.contains(_.startContainer)&&(0,Z.Hc)(_)}Rn(i)},n})(),Ja=e(280),ir=(function(){function n(i){var r=this;this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",i.options.classes.preview&&this.previewElement.classList.add(i.options.classes.preview),this.previewElement.style.maxWidth=i.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(F){if(F.target.tagName!=="TEXTAREA"){var L=document.createElement("div");L.className="vditor-reset",L.appendChild(getSelection().getRangeAt(0).cloneContents()),r.copyToX(i,L,"default"),F.preventDefault()}}),this.previewElement.addEventListener("click",function(F){var L=(0,w.lG)(F.target,"SPAN");if(L&&(0,w.fb)(L,"vditor-toc")){var J=r.previewElement.querySelector("#"+L.getAttribute("data-target-id"));J&&(r.element.scrollTop=J.offsetTop);return}if(F.target.tagName==="A"){i.options.link.click?i.options.link.click(F.target):i.options.link.isOpen&&window.open(F.target.getAttribute("href")),F.preventDefault();return}F.target.tagName==="IMG"&&(i.options.image.preview?i.options.image.preview(F.target):i.options.image.isPreview&&(0,Ae.E)(F.target,i.options.lang,i.options.theme))}),this.element.appendChild(this.previewElement);var d=i.options.preview.actions;if(d.length!==0){var s=document.createElement("div");s.className="vditor-preview__action";for(var p=[],_=0;_<d.length;_++){var E=d[_];if(typeof E=="object"){p.push('<button type="button" data-type="'.concat(E.key,'" class="').concat(E.className,'"').concat(E.tooltip?' aria-label="'.concat(E.tooltip,'"'):"",'">').concat(E.text,"</button>"));continue}switch(E){case"desktop":p.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":p.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":p.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":p.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="\u590D\u5236\u5230\u516C\u4F17\u53F7"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":p.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="\u590D\u5236\u5230\u77E5\u4E4E"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>');break}}s.innerHTML=p.join(""),s.addEventListener((0,h.Le)(),function(F){var L=(0,W.S)(F.target,"BUTTON");if(L){var J=L.getAttribute("data-type"),K=d.find(function(fe){return fe?.key===J});if(K){K.click(J);return}if(J==="mp-wechat"||J==="zhihu"){r.copyToX(i,r.previewElement.cloneNode(!0),J);return}J==="desktop"?r.previewElement.style.width="auto":J==="tablet"?r.previewElement.style.width="780px":r.previewElement.style.width="360px",r.previewElement.scrollWidth>r.previewElement.parentElement.clientWidth&&(r.previewElement.style.width="auto"),r.render(i),s.querySelectorAll("button").forEach(function(fe){fe.classList.remove("vditor-preview__action--current")}),L.classList.add("vditor-preview__action--current")}}),this.element.insertBefore(s,this.previewElement)}}return n.prototype.render=function(i,r){var d=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display==="none"){this.element.getAttribute("data-type")==="renderPerformance"&&i.tip.hide();return}if(r){this.previewElement.innerHTML=r;return}if(N(i).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===""){this.previewElement.innerHTML="";return}var s=new Date().getTime(),p=N(i);this.mdTimeoutId=window.setTimeout(function(){if(i.options.preview.url){var _=new XMLHttpRequest;_.open("POST",i.options.preview.url),_.setRequestHeader("Content-Type","application/json;charset=UTF-8"),_.onreadystatechange=function(){if(_.readyState===XMLHttpRequest.DONE)if(_.status===200){var F=JSON.parse(_.responseText);if(F.code!==0){i.tip.show(F.msg);return}i.options.preview.transform&&(F.data=i.options.preview.transform(F.data)),d.previewElement.innerHTML=F.data,d.afterRender(i,s)}else{var L=i.lute.Md2HTML(p);i.options.preview.transform&&(L=i.options.preview.transform(L)),d.previewElement.innerHTML=L,d.afterRender(i,s)}},_.send(JSON.stringify({markdownText:p}))}else{var E=i.lute.Md2HTML(p);i.options.preview.transform&&(E=i.options.preview.transform(E)),d.previewElement.innerHTML=E,d.afterRender(i,s)}},i.options.preview.delay)},n.prototype.afterRender=function(i,r){i.options.preview.parse&&i.options.preview.parse(this.element);var d=new Date().getTime()-r;new Date().getTime()-r>2600?(i.tip.show(window.VditorI18n.performanceTip.replace("${x}",d.toString())),i.preview.element.setAttribute("data-type","renderPerformance")):i.preview.element.getAttribute("data-type")==="renderPerformance"&&(i.tip.hide(),i.preview.element.removeAttribute("data-type"));var s=i.preview.element.querySelector(".vditor-comment--focus");s&&s.classList.remove("vditor-comment--focus"),(0,me.O)(i.preview.previewElement,i.options.preview.hljs),(0,Ye.s)(i.options.preview.hljs,i.preview.previewElement,i.options.cdn),(0,xt.i)(i.preview.previewElement,i.options.cdn,i.options.theme),(0,jt.K)(i.preview.previewElement,i.options.cdn),(0,Qt.J)(i.preview.previewElement,i.options.cdn,i.options.theme),(0,ke.P)(i.preview.previewElement,i.options.cdn),(0,Ne.v)(i.preview.previewElement,i.options.cdn),(0,Y.p)(i.preview.previewElement,i.options.cdn,i.options.theme),(0,ht.P)(i.preview.previewElement,i.options.cdn,i.options.theme),(0,st.B)(i.preview.previewElement,i.options.cdn),(0,ie.Q)(i.preview.previewElement,i.options.cdn),i.options.preview.render.media.enable&&(0,Ja.Y)(i.preview.previewElement),i.options.customRenders.forEach(function(E){E.render(i.preview.previewElement,i)});var p=i.preview.element,_=i.outline.render(i);_===""&&(_="[ToC]"),p.querySelectorAll('[data-type="toc-block"]').forEach(function(E){E.innerHTML=_,(0,it.H)(E,{cdn:i.options.cdn,math:i.options.preview.math})}),(0,it.H)(i.preview.previewElement,{cdn:i.options.cdn,math:i.options.preview.math})},n.prototype.copyToX=function(i,r,d){d===void 0&&(d="mp-wechat"),d!=="zhihu"?r.querySelectorAll(".katex-html .base").forEach(function(p){p.style.display="initial"}):r.querySelectorAll(".language-math").forEach(function(p){p.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'.concat(p.getAttribute("data-math"),'\\" style="display: block; margin: 0 auto; max-width: 100%;">')}),r.style.backgroundColor="#fff",r.querySelectorAll("code").forEach(function(p){p.style.backgroundImage="none"}),this.element.append(r);var s=r.ownerDocument.createRange();s.selectNode(r),(0,Z.Hc)(s),document.execCommand("copy"),r.remove(),i.tip.show(["zhihu","mp-wechat"].includes(d)?"\u5DF2\u590D\u5236\uFF0C\u53EF\u5230".concat(d==="zhihu"?"\u77E5\u4E4E":"\u5FAE\u4FE1\u516C\u4F17\u53F7\u5E73\u53F0","\u8FDB\u884C\u7C98\u8D34"):"\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F")},n})(),ps=(function(){function n(i){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--".concat(i.options.resize.position),this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(i)}return n.prototype.bindEvent=function(i){var r=this;this.element.addEventListener("mousedown",function(d){var s=document,p=d.clientY,_=i.element.offsetHeight,E=63+i.element.querySelector(".vditor-toolbar").clientHeight;s.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),r.element.classList.add("vditor-resize--selected"),s.onmousemove=function(F){i.options.resize.position==="top"?i.element.style.height=Math.max(E,_+(p-F.clientY))+"px":i.element.style.height=Math.max(E,_+(F.clientY-p))+"px",i.options.typewriterMode&&(i.sv.element.style.paddingBottom=i.sv.element.parentElement.offsetHeight/2+"px")},s.onmouseup=function(){i.options.resize.after&&i.options.resize.after(i.element.offsetHeight-_),window.captureEvents&&window.captureEvents(),s.onmousemove=null,s.onmouseup=null,s.ondragstart=null,s.onselectstart=null,s.onselect=null,r.element.classList.remove("vditor-resize--selected")}})},n})(),Ua=(function(){function n(i){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",i.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(i),za(i,this.element),ka(i,this.element),Fa(i,this.element),Na(i,this.element),La(i,this.element),Aa(i,this.element,this.copy),To(i,this.element,this.copy)}return n.prototype.copy=function(i,r){i.stopPropagation(),i.preventDefault(),i.clipboardData.setData("text/plain",Yr(r[r.currentMode].element))},n.prototype.bindEvent=function(i){var r=this;this.element.addEventListener("paste",function(d){Do(i,d,{pasteCode:function(s){document.execCommand("insertHTML",!1,s)}})}),this.element.addEventListener("scroll",function(){if(i.preview.element.style.display==="block"){var d=r.element.scrollTop,s=r.element.clientHeight,p=r.element.scrollHeight-parseFloat(r.element.style.paddingBottom||"0"),_=i.preview.element;d/s>.5?_.scrollTop=(d+s)*_.scrollHeight/p-s:_.scrollTop=d*_.scrollHeight/p}}),this.element.addEventListener("compositionstart",function(d){r.composingLock=!0}),this.element.addEventListener("compositionend",function(d){(0,h.vU)()||Ke(i,d),r.composingLock=!1}),this.element.addEventListener("input",function(d){if(!(d.inputType==="deleteByDrag"||d.inputType==="insertFromDrop")&&!(r.composingLock||d.data==="\u2018"||d.data==="\u201C"||d.data==="\u300A")){if(r.preventInput){r.preventInput=!1,Yt(i,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}Ke(i,d)}}),this.element.addEventListener("keyup",function(d){if(!(d.isComposing||(0,h.yl)(d))){if((d.key==="Backspace"||d.key==="Delete")&&i.sv.element.innerHTML!==""&&i.sv.element.childNodes.length===1&&i.sv.element.firstElementChild&&i.sv.element.firstElementChild.tagName==="DIV"&&i.sv.element.firstElementChild.childElementCount===2&&(i.sv.element.firstElementChild.textContent===""||i.sv.element.textContent===`
`)){i.sv.element.innerHTML="";return}d.key==="Enter"&&Gt(i)}})},n})(),En=(function(){function n(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return n.prototype.show=function(i,r){var d=this;r===void 0&&(r=6e3),this.element.className="vditor-tip vditor-tip--show",r===0?(this.element.innerHTML='<div class="vditor-tip__content">'.concat(i,`
<div class="vditor-tip__close">X</div></div>`),this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){d.hide()})):(this.element.innerHTML='<div class="vditor-tip__content">'.concat(i,"</div>"),setTimeout(function(){d.hide()},r)),this.element.removeAttribute("style"),setTimeout(function(){var s=d.element.getBoundingClientRect();s.top<46&&(d.element.style.position="fixed",d.element.style.top="46px")},150)},n.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},n})(),Oo=function(n,i){if(i.options.preview.mode!==n){switch(i.options.preview.mode=n,n){case"both":i.sv.element.style.display="block",i.preview.element.style.display="block",i.preview.render(i),y(i.toolbar.elements,["both"]);break;case"editor":i.sv.element.style.display="block",i.preview.element.style.display="none",T(i.toolbar.elements,["both"]);break;default:break}i.devtools&&i.devtools.renderEchart(i)}},fs=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),ms=(function(n){fs(i,n);function i(r,d){var s=n.call(this,r,d)||this;return r.options.preview.mode==="both"&&s.element.children[0].classList.add("vditor-menu--current"),s.element.children[0].addEventListener((0,h.Le)(),function(p){var _=s.element.firstElementChild;_.classList.contains(u.g.CLASS_MENU_DISABLED)||(p.preventDefault(),r.currentMode==="sv"&&(r.options.preview.mode==="both"?Oo("editor",r):Oo("both",r)))}),s}return i})(Rt),hs=(function(){function n(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"}return n})(),$a=e(580),_s=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),zn=(function(n){_s(i,n);function i(r,d){var s=n.call(this,r,d)||this,p=s.element.children[0],_=document.createElement("div");_.className="vditor-hint".concat(d.level===2?"":" vditor-panel--arrow");var E="";return u.g.CODE_THEME.forEach(function(F){E+="<button>".concat(F,"</button>")}),_.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(E,"</div>"),_.addEventListener((0,h.Le)(),function(F){F.target.tagName==="BUTTON"&&(P(r,["subToolbar"]),r.options.preview.hljs.style=F.target.textContent,(0,$a.Y)(F.target.textContent,r.options.cdn),F.preventDefault(),F.stopPropagation())}),s.element.appendChild(_),B(r,_,p,d.level),s}return i})(Rt),Qc=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),Hn=(function(n){Qc(i,n);function i(r,d){var s=n.call(this,r,d)||this,p=s.element.children[0],_=document.createElement("div");_.className="vditor-hint".concat(d.level===2?"":" vditor-panel--arrow");var E="";return Object.keys(r.options.preview.theme.list).forEach(function(F){E+='<button data-type="'.concat(F,'">').concat(r.options.preview.theme.list[F],"</button>")}),_.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(E,"</div>"),_.addEventListener((0,h.Le)(),function(F){F.target.tagName==="BUTTON"&&(P(r,["subToolbar"]),r.options.preview.theme.current=F.target.getAttribute("data-type"),(0,Be.Z)(r.options.preview.theme.current,r.options.preview.theme.path),F.preventDefault(),F.stopPropagation())}),s.element.appendChild(_),B(r,_,p,d.level),s}return i})(Rt),Yc=(function(){function n(i){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(i,"")}return n.prototype.render=function(i,r){var d=r.endsWith(`
`)?r.length-1:r.length;if(i.options.counter.type==="text"&&i[i.currentMode]){var s=i[i.currentMode].element.cloneNode(!0);s.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(p){p.remove()}),d=s.textContent.length}typeof i.options.counter.max=="number"?(d>i.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML="".concat(d,"/").concat(i.options.counter.max)):this.element.innerHTML="".concat(d),this.element.setAttribute("aria-label",i.options.counter.type),i.options.counter.after&&i.options.counter.after(d,{enable:i.options.counter.enable,max:i.options.counter.max,type:i.options.counter.type})},n})(),gs=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),Ni=(function(n){gs(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s.element.children[0].innerHTML=d.icon,s.element.children[0].addEventListener((0,h.Le)(),function(p){p.preventDefault(),!p.currentTarget.classList.contains(u.g.CLASS_MENU_DISABLED)&&d.click(p,r)}),s}return i})(Rt),Io=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),ja=(function(n){Io(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s.element.firstElementChild.addEventListener((0,h.Le)(),function(p){var _=s.element.firstElementChild;_.classList.contains(u.g.CLASS_MENU_DISABLED)||(p.preventDefault(),_.classList.contains("vditor-menu--current")?(_.classList.remove("vditor-menu--current"),r.devtools.element.style.display="none",Rn(r)):(_.classList.add("vditor-menu--current"),r.devtools.element.style.display="block",Rn(r),r.devtools.renderEchart(r)))}),s}return i})(Rt),Ot=(function(){function n(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"}return n})(),Di=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),Ga=(function(n){Di(i,n);function i(r,d){var s=n.call(this,r,d)||this,p=document.createElement("div");p.className="vditor-panel vditor-panel--arrow";var _="";return Object.keys(r.options.hint.emoji).forEach(function(E){var F=r.options.hint.emoji[E];F.indexOf(".")>-1?_+='<button data-value=":'.concat(E,': " data-key=":').concat(E,`:"><img
data-value=":`).concat(E,': " data-key=":').concat(E,':" class="vditor-emojis__icon" src="').concat(F,'"/></button>'):_+='<button data-value="'.concat(F,` "
 data-key="`).concat(E,'"><span class="vditor-emojis__icon">').concat(F,"</span></button>")}),p.innerHTML='<div class="vditor-emojis" style="max-height: '.concat(r.options.height==="auto"?"auto":r.options.height-80,'px">').concat(_,`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`).concat(r.options.hint.emojiTail||"",`</span>
</div>`),s.element.appendChild(p),B(r,p,s.element.firstElementChild,d.level),s.bindEvent(r),s}return i.prototype.bindEvent=function(r){var d=this;this.element.lastElementChild.addEventListener((0,h.Le)(),function(s){var p=(0,W.S)(s.target,"BUTTON");if(p){s.preventDefault();var _=p.getAttribute("data-value"),E=(0,Z.zh)(r),F=_;if(r.currentMode==="wysiwyg"?F=r.lute.SpinVditorDOM(_):r.currentMode==="ir"&&(F=r.lute.SpinVditorIRDOM(_)),_.indexOf(":")>-1&&r.currentMode!=="sv"){var L=document.createElement("div");L.innerHTML=F,F=L.firstElementChild.firstElementChild.outerHTML+" ",(0,Z.oC)(F,r)}else E.extractContents(),E.insertNode(document.createTextNode(_)),(0,w.F9)(E.startContainer)||qr(r,E);E.collapse(!1),(0,Z.Hc)(E),d.element.lastElementChild.style.display="none",qe(r)}}),this.element.lastElementChild.addEventListener("mouseover",function(s){var p=(0,W.S)(s.target,"BUTTON");p&&(d.element.querySelector(".vditor-emojis__tip").innerHTML=p.getAttribute("data-key"))})},i})(Rt),Cs=function(n,i,r){var d=document.createElement("a");"download"in d?(d.download=r,d.style.display="none",d.href=URL.createObjectURL(new Blob([i])),document.body.appendChild(d),d.click(),d.remove()):n.tip.show(window.VditorI18n.downloadTip,0)},Ka=function(n){var i=N(n);Cs(n,i,i.substr(0,10)+".md")},Zc=function(n){n.tip.show(window.VditorI18n.generate,3800);var i=document.querySelector("#vditorExportIframe");i.contentDocument.open(),i.contentDocument.write('<link rel="stylesheet" href="'.concat(n.options.cdn,`/dist/index.css"/>
<script src="`).concat(n.options.cdn,`/dist/method.min.js"><\/script>
<div id="preview" style="width: 800px"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    cdn: "`).concat(n.options.cdn,`",
    markdown: {
      theme: `).concat(JSON.stringify(n.options.preview.theme),`
    },
    hljs: {
      style: "`).concat(n.options.preview.hljs.style,`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
<\/script>`)),i.contentDocument.close(),setTimeout(function(){i.contentWindow.postMessage(N(n),"*")},200)},ed=function(n){var i=cs(n),r='<html><head><link rel="stylesheet" type="text/css" href="'.concat(n.options.cdn,`/dist/index.css"/>
<script src="`).concat(n.options.cdn,"/dist/js/i18n/").concat(n.options.lang,`.js"><\/script>
<script src="`).concat(n.options.cdn,`/dist/method.min.js"><\/script></head>
<body><div class="vditor-reset" id="preview">`).concat(i,`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`).concat(n.options.preview.theme.current,"', '").concat(n.options.preview.theme.path,`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`).concat(JSON.stringify(n.options.preview.hljs),", previewElement, '").concat(n.options.cdn,`');
    Vditor.mathRender(previewElement, {
        cdn: '`).concat(n.options.cdn,`',
        math: `).concat(JSON.stringify(n.options.preview.math),`,
    });
    Vditor.mermaidRender(previewElement, '`).concat(n.options.cdn,"', '").concat(n.options.theme,`');
    Vditor.SMILESRender(previewElement, '`).concat(n.options.cdn,"', '").concat(n.options.theme,`');
    Vditor.markmapRender(previewElement, '`).concat(n.options.cdn,`');
    Vditor.flowchartRender(previewElement, '`).concat(n.options.cdn,`');
    Vditor.graphvizRender(previewElement, '`).concat(n.options.cdn,`');
    Vditor.chartRender(previewElement, '`).concat(n.options.cdn,"', '").concat(n.options.theme,`');
    Vditor.mindmapRender(previewElement, '`).concat(n.options.cdn,"', '").concat(n.options.theme,`');
    Vditor.abcRender(previewElement, '`).concat(n.options.cdn,`');
    `).concat(n.options.preview.render.media.enable?"Vditor.mediaRender(previewElement);":"",`
    Vditor.speechRender(previewElement);
<\/script>
<script src="`).concat(n.options.cdn,"/dist/js/icons/").concat(n.options.icon,'.js"><\/script></body></html>');Cs(n,r,i.substr(0,10)+".html")},td=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),ys=(function(n){td(i,n);function i(r,d){var s=n.call(this,r,d)||this,p=s.element.children[0],_=document.createElement("div");return _.className="vditor-hint".concat(d.level===2?"":" vditor-panel--arrow"),_.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,_.addEventListener((0,h.Le)(),function(E){var F=E.target;if(F.tagName==="BUTTON"){switch(F.getAttribute("data-type")){case"markdown":Ka(r);break;case"pdf":Zc(r);break;case"html":ed(r);break;default:break}P(r,["subToolbar"]),E.preventDefault(),E.stopPropagation()}}),s.element.appendChild(_),B(r,_,p,d.level),s}return i})(Rt),Ro=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),kr=(function(n){Ro(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s._bindEvent(r,d),s}return i.prototype._bindEvent=function(r,d){this.element.children[0].addEventListener((0,h.Le)(),function(s){s.preventDefault(),r.element.className.includes("vditor--fullscreen")?(d.level||(this.innerHTML=d.icon),r.element.style.zIndex="",document.body.style.overflow="",r.element.classList.remove("vditor--fullscreen"),Object.keys(r.toolbar.elements).forEach(function(p){var _=r.toolbar.elements[p].firstChild;_&&(_.className=_.className.replace("__s","__n"),r.options.toolbar.forEach(function(E){typeof E!="string"&&E.tipPosition&&E.name===_.dataset.type&&(_.className="vditor-tooltipped vditor-tooltipped__".concat(E.tipPosition))}))}),r.counter&&(r.counter.element.className=r.counter.element.className.replace("__s","__n"))):(d.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),r.element.style.zIndex=r.options.fullscreen.index.toString(),document.body.style.overflow="hidden",r.element.classList.add("vditor--fullscreen"),Object.keys(r.toolbar.elements).forEach(function(p){var _=r.toolbar.elements[p].firstChild;_&&(_.className=_.className.replace("__n","__s"))}),r.counter&&(r.counter.element.className=r.counter.element.className.replace("__n","__s"))),r.devtools&&r.devtools.renderEchart(r),d.click&&d.click(s,r),Rn(r),ki(r)})},i})(Rt),nd=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),vs=(function(n){nd(i,n);function i(r,d){var s=n.call(this,r,d)||this,p=document.createElement("div");return p.className="vditor-hint vditor-panel--arrow",p.innerHTML='<button data-tag="h1" data-value="# ">'.concat(window.VditorI18n.heading1," ").concat((0,h.ns)("&lt;\u2325\u23181>"),`</button>
<button data-tag="h2" data-value="## ">`).concat(window.VditorI18n.heading2," &lt;").concat((0,h.ns)("\u2325\u23182"),`></button>
<button data-tag="h3" data-value="### ">`).concat(window.VditorI18n.heading3," &lt;").concat((0,h.ns)("\u2325\u23183"),`></button>
<button data-tag="h4" data-value="#### ">`).concat(window.VditorI18n.heading4," &lt;").concat((0,h.ns)("\u2325\u23184"),`></button>
<button data-tag="h5" data-value="##### ">`).concat(window.VditorI18n.heading5," &lt;").concat((0,h.ns)("\u2325\u23185"),`></button>
<button data-tag="h6" data-value="###### ">`).concat(window.VditorI18n.heading6," &lt;").concat((0,h.ns)("\u2325\u23186"),"></button>"),s.element.appendChild(p),s._bindEvent(r,p),s}return i.prototype._bindEvent=function(r,d){var s=this.element.children[0];s.addEventListener((0,h.Le)(),function(_){_.preventDefault(),clearTimeout(r.wysiwyg.afterRenderTimeoutId),clearTimeout(r.ir.processTimeoutId),clearTimeout(r.sv.processTimeoutId),!s.classList.contains(u.g.CLASS_MENU_DISABLED)&&(s.blur(),s.classList.contains("vditor-menu--current")?(r.currentMode==="wysiwyg"?(Xr(r),_t(r)):r.currentMode==="ir"&&yt(r,""),s.classList.remove("vditor-menu--current")):(P(r,["subToolbar"]),d.style.display="block"))});for(var p=0;p<6;p++)d.children.item(p).addEventListener((0,h.Le)(),function(_){_.preventDefault(),r.currentMode==="wysiwyg"?(Sr(r,_.target.getAttribute("data-tag")),_t(r),s.classList.add("vditor-menu--current")):r.currentMode==="ir"?(yt(r,_.target.getAttribute("data-value")),s.classList.add("vditor-menu--current")):Zr(r,_.target.getAttribute("data-value")),d.style.display="none"})},i})(Rt),ws=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),qa=(function(n){ws(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s.element.children[0].addEventListener((0,h.Le)(),function(p){p.preventDefault(),r.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown \u4F7F\u7528\u6307\u5357</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">\u8BED\u6CD5\u901F\u67E5\u624B\u518C</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">\u57FA\u7840\u8BED\u6CD5</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">\u6269\u5C55\u8BED\u6CD5</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">\u952E\u76D8\u5FEB\u6377\u952E</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor \u652F\u6301</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">\u5B98\u65B9\u8BA8\u8BBA\u533A</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">\u5F00\u53D1\u624B\u518C</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">\u6F14\u793A\u5730\u5740</a></li>
    </ul>
</div></div>`,0)}),s}return i})(Rt),Xa=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),bs=(function(n){Xa(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s.element.children[0].addEventListener((0,h.Le)(),function(p){if(p.preventDefault(),!(s.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)||r.currentMode==="sv")){var _=(0,Z.zh)(r),E=(0,w.lG)(_.startContainer,"LI");E&&Pa(r,E,_)}}),s}return i})(Rt),id=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),Qa=(function(n){id(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s.element.children[0].addEventListener((0,h.Le)(),function(p){p.preventDefault(),r.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>\u4E0B\u4E00\u4EE3\u7684 Markdown \u7F16\u8F91\u5668\uFF0C\u4E3A\u672A\u6765\u800C\u6784\u5EFA</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="https://unpkg.com/vditor/dist/images/logo.png" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor \u662F\u4E00\u6B3E\u6D4F\u89C8\u5668\u7AEF\u7684 Markdown \u7F16\u8F91\u5668\uFF0C\u652F\u6301\u6240\u89C1\u5373\u6240\u5F97\u3001\u5373\u65F6\u6E32\u67D3\uFF08\u7C7B\u4F3C Typora\uFF09\u548C\u5206\u5C4F\u9884\u89C8\u6A21\u5F0F\u3002
        \u5B83\u4F7F\u7528 TypeScript \u5B9E\u73B0\uFF0C\u652F\u6301\u539F\u751F JavaScript \u4EE5\u53CA Vue\u3001React\u3001Angular \u548C Svelte \u7B49\u6846\u67B6\u3002
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        \u9879\u76EE\u5730\u5740\uFF1A<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        \u5F00\u6E90\u534F\u8BAE\uFF1AMIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        \u7EC4\u4EF6\u7248\u672C\uFF1AVditor v`.concat(u.H," / Lute v").concat(Lute.Version,`
        </li>
        <li>
        \u8D5E\u52A9\u6350\u8D60\uFF1A<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`),0)}),s}return i})(Rt),Ya=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),rd=(function(n){Ya(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s.element.children[0].addEventListener((0,h.Le)(),function(p){p.preventDefault(),!(s.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)||r.currentMode==="sv")&&Li(r,"afterend")}),s}return i})(Rt),xs=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),kn=(function(n){xs(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s.element.children[0].addEventListener((0,h.Le)(),function(p){p.preventDefault(),!(s.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)||r.currentMode==="sv")&&Li(r,"beforebegin")}),s}return i})(Rt),Za=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),to=(function(n){Za(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s.element.children[0].addEventListener((0,h.Le)(),function(p){if(p.preventDefault(),!(s.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)||r.currentMode==="sv")){var _=(0,Z.zh)(r),E=(0,w.lG)(_.startContainer,"LI");E&&eo(r,E,_,E.parentElement)}}),s}return i})(Rt),Ts=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),Ss=(function(n){Ts(i,n);function i(r,d){var s=n.call(this,r,d)||this;return r.options.outline&&s.element.firstElementChild.classList.add("vditor-menu--current"),s.element.children[0].addEventListener((0,h.Le)(),function(p){p.preventDefault();var _=r.toolbar.elements.outline.firstElementChild;_.classList.contains(u.g.CLASS_MENU_DISABLED)||(r.options.outline.enable=!s.element.firstElementChild.classList.contains("vditor-menu--current"),r.outline.toggle(r,r.options.outline.enable))}),s}return i})(Rt),od=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),ad=(function(n){od(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s._bindEvent(r),s}return i.prototype._bindEvent=function(r){var d=this;this.element.children[0].addEventListener((0,h.Le)(),function(s){s.preventDefault();var p=d.element.firstElementChild;if(!p.classList.contains(u.g.CLASS_MENU_DISABLED)){var _=u.g.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);p.classList.contains("vditor-menu--current")?(p.classList.remove("vditor-menu--current"),r.currentMode==="sv"?(r.sv.element.style.display="block",r.options.preview.mode==="both"?r.preview.element.style.display="block":r.preview.element.style.display="none"):(r[r.currentMode].element.parentElement.style.display="block",r.preview.element.style.display="none"),x(r.toolbar.elements,_),r.outline.render(r)):(v(r.toolbar.elements,_),r.preview.element.style.display="block",r.currentMode==="sv"?r.sv.element.style.display="none":r[r.currentMode].element.parentElement.style.display="none",r.preview.render(r),p.classList.add("vditor-menu--current"),P(r,["subToolbar","hint","popover"]),setTimeout(function(){r.outline.render(r)},r.options.preview.delay+10)),Rn(r)}})},i})(Rt),ld=(function(){function n(i){this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0;var r;if(typeof AudioContext<"u")r=new AudioContext;else if(webkitAudioContext)r=new webkitAudioContext;else return;this.DEFAULT_SAMPLE_RATE=r.sampleRate;var d=r.createGain(),s=r.createMediaStreamSource(i);s.connect(d),this.recorder=r.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,d.connect(this.recorder),this.recorder.connect(r.destination),this.readyFlag=!0}return n.prototype.cloneChannelData=function(i,r){this.leftChannel.push(new Float32Array(i)),this.rightChannel.push(new Float32Array(r)),this.recordingLength+=2048},n.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},n.prototype.stopRecording=function(){this.isRecording=!1},n.prototype.buildWavFileBlob=function(){for(var i=this.mergeBuffers(this.leftChannel),r=this.mergeBuffers(this.rightChannel),d=new Float32Array(i.length),s=0;s<i.length;++s)d[s]=.5*(i[s]+r[s]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(d=this.downSampleBuffer(d,this.SAMPLE_RATE));var p=44+d.length*2,_=new ArrayBuffer(p),E=new DataView(_);this.writeUTFBytes(E,0,"RIFF"),E.setUint32(4,p,!0),this.writeUTFBytes(E,8,"WAVE"),this.writeUTFBytes(E,12,"fmt "),E.setUint32(16,16,!0),E.setUint16(20,1,!0),E.setUint16(22,1,!0),E.setUint32(24,this.SAMPLE_RATE,!0),E.setUint32(28,this.SAMPLE_RATE*2,!0),E.setUint16(32,2,!0),E.setUint16(34,16,!0);var F=d.length*2;this.writeUTFBytes(E,36,"data"),E.setUint32(40,F,!0);for(var L=d.length,J=44,K=1,fe=0;fe<L;fe++)E.setInt16(J,d[fe]*(32767*K),!0),J+=2;return new Blob([E],{type:"audio/wav"})},n.prototype.downSampleBuffer=function(i,r){if(r===this.DEFAULT_SAMPLE_RATE||r>this.DEFAULT_SAMPLE_RATE)return i;for(var d=this.DEFAULT_SAMPLE_RATE/r,s=Math.round(i.length/d),p=new Float32Array(s),_=0,E=0;_<p.length;){for(var F=Math.round((_+1)*d),L=0,J=0,K=E;K<F&&K<i.length;K++)L+=i[K],J++;p[_]=L/J,_++,E=F}return p},n.prototype.mergeBuffers=function(i){for(var r=new Float32Array(this.recordingLength),d=0,s=i.length,p=0;p<s;++p){var _=i[p];r.set(_,d),d+=_.length}return r},n.prototype.writeUTFBytes=function(i,r,d){for(var s=d.length,p=0;p<s;p++)i.setUint8(r+p,d.charCodeAt(p))},n})(),sd=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),cd=(function(n){sd(i,n);function i(r,d){var s=n.call(this,r,d)||this;return s._bindEvent(r),s}return i.prototype._bindEvent=function(r){var d=this,s;this.element.children[0].addEventListener((0,h.Le)(),function(p){if(p.preventDefault(),!d.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)){var _=r[r.currentMode].element;if(!s){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(F){s=new ld(F),s.recorder.onaudioprocess=function(L){if(s.isRecording){var J=L.inputBuffer.getChannelData(0),K=L.inputBuffer.getChannelData(1);s.cloneChannelData(J,K)}},s.startRecordingNewWavFile(),r.tip.show(window.VditorI18n.recording),_.setAttribute("contenteditable","false"),d.element.children[0].classList.add("vditor-menu--current")}).catch(function(){r.tip.show(window.VditorI18n["record-tip"])});return}if(s.isRecording){s.stopRecording(),r.tip.hide();var E=new File([s.buildWavFileBlob()],"record".concat(new Date().getTime(),".wav"),{type:"video/webm"});Oa(r,[E]),d.element.children[0].classList.remove("vditor-menu--current")}else r.tip.show(window.VditorI18n.recording),_.setAttribute("contenteditable","false"),s.startRecordingNewWavFile(),d.element.children[0].classList.add("vditor-menu--current")}})},i})(Rt),Lr=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),dd=(function(n){Lr(i,n);function i(r,d){var s=n.call(this,r,d)||this;return v({redo:s.element},["redo"]),s.element.children[0].addEventListener((0,h.Le)(),function(p){p.preventDefault(),!s.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)&&r.undo.redo(r)}),s}return i})(Rt),ud=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),el=(function(n){ud(i,n);function i(r,d){var s=n.call(this,r,d)||this;return v({undo:s.element},["undo"]),s.element.children[0].addEventListener((0,h.Le)(),function(p){p.preventDefault(),!s.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)&&r.undo.undo(r)}),s}return i})(Rt),Ms=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),Oi=(function(n){Ms(i,n);function i(r,d){var s=n.call(this,r,d)||this,p='<input type="file"';return r.options.upload.multiple&&(p+=' multiple="multiple"'),r.options.upload.accept&&(p+=' accept="'.concat(r.options.upload.accept,'"')),s.element.children[0].innerHTML="".concat(d.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>').concat(p,">"),s._bindEvent(r),s}return i.prototype._bindEvent=function(r){var d=this;this.element.children[0].addEventListener((0,h.Le)(),function(s){if(d.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)){s.stopPropagation(),s.preventDefault();return}}),this.element.querySelector("input").addEventListener("change",function(s){if(d.element.firstElementChild.classList.contains(u.g.CLASS_MENU_DISABLED)){s.stopPropagation(),s.preventDefault();return}s.target.files.length!==0&&Oa(r,s.target.files,s.target)})},i})(Rt),Po=(function(){function n(i){var r=this,d=i.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",d.toolbar.forEach(function(s,p){var _=r.genItem(i,s,p);if(r.element.appendChild(_),s.toolbar){var E=document.createElement("div");E.className="vditor-hint vditor-panel--arrow",E.addEventListener((0,h.Le)(),function(F){E.style.display="none"}),s.toolbar.forEach(function(F,L){F.level=2,E.appendChild(r.genItem(i,F,p+L))}),_.appendChild(E),B(i,E,_.children[0],2)}}),i.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),i.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),i.options.counter.enable&&(i.counter=new Yc(i),this.element.appendChild(i.counter.element))}return n.prototype.updateConfig=function(i,r){i.options.toolbarConfig=Object.assign({hide:!1,pin:!1},r),i.options.toolbarConfig.hide?this.element.classList.add("vditor-toolbar--hide"):this.element.classList.remove("vditor-toolbar--hide"),i.options.toolbarConfig.pin?this.element.classList.add("vditor-toolbar--pin"):this.element.classList.remove("vditor-toolbar--pin")},n.prototype.genItem=function(i,r,d){var s;switch(r.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":s=new Rt(i,r);break;case"emoji":s=new Ga(i,r);break;case"headings":s=new vs(i,r);break;case"|":s=new Ot;break;case"br":s=new hs;break;case"undo":s=new el(i,r);break;case"redo":s=new dd(i,r);break;case"help":s=new qa(i,r);break;case"both":s=new ms(i,r);break;case"preview":s=new ad(i,r);break;case"fullscreen":s=new kr(i,r);break;case"upload":s=new Oi(i,r);break;case"record":s=new cd(i,r);break;case"info":s=new Qa(i,r);break;case"edit-mode":s=new Hc(i,r);break;case"devtools":s=new ja(i,r);break;case"outdent":s=new to(i,r);break;case"indent":s=new bs(i,r);break;case"outline":s=new Ss(i,r);break;case"insert-after":s=new rd(i,r);break;case"insert-before":s=new kn(i,r);break;case"code-theme":s=new zn(i,r);break;case"content-theme":s=new Hn(i,r);break;case"export":s=new ys(i,r);break;default:s=new Ni(i,r);break}if(s){var p=r.name;return(p==="br"||p==="|")&&(p=p+d),this.elements[p]=s.element,s.element}},n})(),pd=e(173),fd=(function(){function n(){this.stackSize=50,this.resetStack(),this.dmp=new pd}return n.prototype.clearStack=function(i){this.resetStack(),this.resetIcon(i)},n.prototype.resetIcon=function(i){i.toolbar&&(this[i.currentMode].undoStack.length>1?x(i.toolbar.elements,["undo"]):v(i.toolbar.elements,["undo"]),this[i.currentMode].redoStack.length!==0?x(i.toolbar.elements,["redo"]):v(i.toolbar.elements,["redo"]))},n.prototype.undo=function(i){if(i[i.currentMode].element.getAttribute("contenteditable")!=="false"&&!(this[i.currentMode].undoStack.length<2)){var r=this[i.currentMode].undoStack.pop();r&&(this[i.currentMode].redoStack.push(r),this.renderDiff(r,i),this[i.currentMode].hasUndo=!0,P(i,["hint"]))}},n.prototype.redo=function(i){if(i[i.currentMode].element.getAttribute("contenteditable")!=="false"){var r=this[i.currentMode].redoStack.pop();r&&(this[i.currentMode].undoStack.push(r),this.renderDiff(r,i,!0))}},n.prototype.recordFirstPosition=function(i,r){if(getSelection().rangeCount!==0&&!(this[i.currentMode].undoStack.length!==1||this[i.currentMode].undoStack[0].length===0||this[i.currentMode].redoStack.length>0)&&!((0,h.vU)()&&r.key==="Backspace")&&!(0,h.G6)()){var d=this.addCaret(i);d.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[i.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[i.currentMode].undoStack[0][0].diffs[0][1]=d,this[i.currentMode].lastText=d)}},n.prototype.addToUndoStack=function(i){var r=this.addCaret(i,!0),d=this.dmp.diff_main(r,this[i.currentMode].lastText,!0),s=this.dmp.patch_make(r,this[i.currentMode].lastText,d);s.length===0&&this[i.currentMode].undoStack.length>0||(this[i.currentMode].lastText=r,this[i.currentMode].undoStack.push(s),this[i.currentMode].undoStack.length>this.stackSize&&this[i.currentMode].undoStack.shift(),this[i.currentMode].hasUndo&&(this[i.currentMode].redoStack=[],this[i.currentMode].hasUndo=!1,v(i.toolbar.elements,["redo"])),this[i.currentMode].undoStack.length>1&&x(i.toolbar.elements,["undo"]))},n.prototype.renderDiff=function(i,r,d){d===void 0&&(d=!1);var s;if(d){var p=this.dmp.patch_deepCopy(i).reverse();p.forEach(function(E){E.diffs.forEach(function(F){F[0]=-F[0]})}),s=this.dmp.patch_apply(p,this[r.currentMode].lastText)[0]}else s=this.dmp.patch_apply(i,this[r.currentMode].lastText)[0];if(this[r.currentMode].lastText=s,r[r.currentMode].element.innerHTML=s,r.currentMode!=="sv"&&(r[r.currentMode].element.querySelectorAll(".vditor-".concat(r.currentMode,"__preview")).forEach(function(E){E.parentElement.querySelector(".language-echarts")&&(r.currentMode==="ir"?E.parentElement.outerHTML=r.lute.SpinVditorIRDOM(E.parentElement.outerHTML):E.parentElement.outerHTML=r.lute.SpinVditorDOM(E.parentElement.outerHTML))}),r[r.currentMode].element.querySelectorAll(".vditor-".concat(r.currentMode,"__preview[data-render='2']")).forEach(function(E){Tt(E,r)})),r[r.currentMode].element.querySelector("wbr"))(0,Z.ib)(r[r.currentMode].element,r[r.currentMode].element.ownerDocument.createRange()),Gt(r);else{var _=getSelection().getRangeAt(0);_.setEndBefore(r[r.currentMode].element),_.collapse(!1)}oi(r),qe(r,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),Mr(r),r[r.currentMode].element.querySelectorAll(".vditor-".concat(r.currentMode,"__preview[data-render='2']")).forEach(function(E){Tt(E,r)}),this[r.currentMode].undoStack.length>1?x(r.toolbar.elements,["undo"]):v(r.toolbar.elements,["undo"]),this[r.currentMode].redoStack.length!==0?x(r.toolbar.elements,["redo"]):v(r.toolbar.elements,["redo"])},n.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},n.prototype.addCaret=function(i,r){r===void 0&&(r=!1);var d;if(getSelection().rangeCount!==0&&!i[i.currentMode].element.querySelector("wbr")){var s=getSelection().getRangeAt(0);if(i[i.currentMode].element.contains(s.startContainer)){d=s.cloneRange();var p=document.createElement("span");p.className="vditor-wbr",s.insertNode(p)}}var _=i[i.currentMode].element.cloneNode(!0);_.querySelectorAll(".vditor-".concat(i.currentMode,"__preview[data-render='1']")).forEach(function(F){F.firstElementChild&&(F.firstElementChild.classList.contains("language-echarts")||F.firstElementChild.classList.contains("language-plantuml")||F.firstElementChild.classList.contains("language-mindmap")?(F.firstElementChild.removeAttribute("_echarts_instance_"),F.firstElementChild.removeAttribute("data-processed"),F.firstElementChild.innerHTML=F.previousElementSibling.firstElementChild.innerHTML,F.setAttribute("data-render","2")):F.firstElementChild.classList.contains("language-math")&&(F.setAttribute("data-render","2"),F.firstElementChild.textContent=F.firstElementChild.getAttribute("data-math"),F.firstElementChild.removeAttribute("data-math")))});var E=_.innerHTML;return i[i.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(F){F.remove()}),r&&d&&(0,Z.Hc)(d),E.replace('<span class="vditor-wbr"></span>',"<wbr>")},n})(),md=e(673),Ar=(function(){function n(i){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:u.g.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},customRenders:[],debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"\u{1F44D}","-1":"\u{1F44E}",confused:"\u{1F615}",eyes:"\u{1F440}\uFE0F",heart:"\u2764\uFE0F",rocket:"\u{1F680}\uFE0F",smile:"\u{1F604}",tada:"\u{1F389}\uFE0F"},emojiPath:"".concat(u.g.CDN,"/dist/images/emoji"),extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:u.g.HLJS_OPTIONS,markdown:u.g.MARKDOWN_OPTIONS,math:u.g.MATH_OPTIONS,maxWidth:800,mode:"both",theme:u.g.THEME_OPTIONS,render:{media:{enable:!0}}},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(r){return r.replace(/\W/g,"")},linkToImgUrl:"",max:10*1024*1024,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=i}return n.prototype.merge=function(){var i,r,d,s,p,_,E,F,L;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),!((r=(i=this.options.preview)===null||i===void 0?void 0:i.theme)===null||r===void 0)&&r.list&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),!((p=(s=(d=this.options.preview)===null||d===void 0?void 0:d.render)===null||s===void 0?void 0:s.media)===null||p===void 0)&&p.enable&&(this.defaultOptions.preview.render.media.enable=this.options.preview.render.media.enable),!((_=this.options.hint)===null||_===void 0)&&_.emoji&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment),this.options.cdn&&(!((F=(E=this.options.preview)===null||E===void 0?void 0:E.theme)===null||F===void 0)&&F.path||(this.defaultOptions.preview.theme.path="".concat(this.options.cdn,"/dist/css/content-theme")),!((L=this.options.hint)===null||L===void 0)&&L.emojiPath||(this.defaultOptions.hint.emojiPath="".concat(this.options.cdn,"/dist/images/emoji"))));var J=(0,md.T)(this.defaultOptions,this.options);if(J.cache.enable&&!J.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return J},n.prototype.mergeToolbar=function(i){var r=this,d=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"\u2318E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"\u2318H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"\u2318B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"\u2318I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"\u2318D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"\u2318K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"\u2318L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"\u2318O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"\u2318J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"\u21E7\u2318I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"\u21E7\u2318O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"\u2318;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"\u21E7\u2318H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"\u2318U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"\u2318G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"\u21E7\u2318B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"\u21E7\u2318E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"\u2318M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"\u2318Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"\u2318Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"\u2318'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"\u2318P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],s=[];return i.forEach(function(p){var _=p;d.forEach(function(E){typeof p=="string"&&E.name===p&&(_=E),typeof p=="object"&&E.name===p.name&&(_=Object.assign({},E,p))}),p.toolbar&&(_.toolbar=r.mergeToolbar(p.toolbar)),s.push(_)}),s},n})(),Yn=(function(){function n(i){var r=this;this.composingLock=!1,this.commentIds=[];var d=document.createElement("div");d.className="vditor-wysiwyg",d.innerHTML='<pre class="vditor-reset" placeholder="'.concat(i.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`).concat(window.VditorI18n.comment,`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`),this.element=d.firstElementChild,this.popover=d.firstElementChild.nextElementSibling,this.selectPopover=d.lastElementChild,this.bindEvent(i),za(i,this.element),Hl(i,this.element),ka(i,this.element),Fa(i,this.element),Na(i,this.element),La(i,this.element),Aa(i,this.element,this.copy),To(i,this.element,this.copy),i.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var s=Lute.NewNodeID(),p=getSelection().getRangeAt(0),_=p.cloneRange(),E=p.extractContents(),F,L,J=!1,K=!1;E.childNodes.forEach(function(ae,Me){var ve=!1;if(ae.nodeType===3?ve=!0:ae.classList.contains("vditor-comment")?ae.classList.contains("vditor-comment")&&ae.setAttribute("data-cmtids",ae.getAttribute("data-cmtids")+" "+s):ve=!0,ve)if(ae.nodeType!==3&&ae.getAttribute("data-block")==="0"&&Me===0&&_.startOffset>0)ae.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(s,'">').concat(ae.innerHTML,"</span>"),F=ae;else if(ae.nodeType!==3&&ae.getAttribute("data-block")==="0"&&Me===E.childNodes.length-1&&_.endOffset<_.endContainer.textContent.length)ae.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(s,'">').concat(ae.innerHTML,"</span>"),L=ae;else if(ae.nodeType!==3&&ae.getAttribute("data-block")==="0")Me===0?J=!0:Me===E.childNodes.length-1&&(K=!0),ae.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(s,'">').concat(ae.innerHTML,"</span>");else{var ce=document.createElement("span");ce.classList.add("vditor-comment"),ce.setAttribute("data-cmtids",s),ae.parentNode.insertBefore(ce,ae),ce.appendChild(ae)}});var fe=(0,w.F9)(_.startContainer);fe&&(F?(fe.insertAdjacentHTML("beforeend",F.innerHTML),F.remove()):fe.textContent.trim().replace(u.g.ZWSP,"")===""&&J&&fe.remove());var ue=(0,w.F9)(_.endContainer);ue&&(L?(ue.insertAdjacentHTML("afterbegin",L.innerHTML),L.remove()):ue.textContent.trim().replace(u.g.ZWSP,"")===""&&K&&ue.remove()),p.insertNode(E),i.options.comment.add(s,p.toString(),r.getComments(i,!0)),_t(i,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),r.hideComment()})}return n.prototype.getComments=function(i,r){var d=this;if(r===void 0&&(r=!1),i.currentMode==="wysiwyg"&&i.options.comment.enable){this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(p){d.commentIds=d.commentIds.concat(p.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var s=[];if(r)return this.commentIds.forEach(function(p){s.push({id:p,top:d.element.querySelector('.vditor-comment[data-cmtids="'.concat(p,'"]')).offsetTop})}),s}else return[]},n.prototype.triggerRemoveComment=function(i){var r=function(p,_){var E=new Set(_);return p.filter(function(F){return!E.has(F)})};if(i.currentMode==="wysiwyg"&&i.options.comment.enable&&i.wysiwyg.commentIds.length>0){var d=JSON.parse(JSON.stringify(this.commentIds));this.getComments(i);var s=r(d,this.commentIds);s.length>0&&i.options.comment.remove(s)}},n.prototype.showComment=function(){var i=(0,Z.Ny)(this.element);this.selectPopover.setAttribute("style","left:".concat(i.left,"px;display:block;top:").concat(Math.max(-8,i.top-21),"px"))},n.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},n.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},n.prototype.copy=function(i,r){var d=getSelection().getRangeAt(0);if(d.toString()!==""){i.stopPropagation(),i.preventDefault();var s=(0,w.lG)(d.startContainer,"CODE"),p=(0,w.lG)(d.endContainer,"CODE");if(s&&p&&p.isSameNode(s)){var _="";s.parentElement.tagName==="PRE"?_=d.toString():_="`"+d.toString()+"`",i.clipboardData.setData("text/plain",_),i.clipboardData.setData("text/html","");return}var E=(0,w.lG)(d.startContainer,"A"),F=(0,w.lG)(d.endContainer,"A");if(E&&F&&F.isSameNode(E)){var L=E.getAttribute("title")||"";L&&(L=' "'.concat(L,'"')),i.clipboardData.setData("text/plain","[".concat(d.toString(),"](").concat(E.getAttribute("href")).concat(L,")")),i.clipboardData.setData("text/html","");return}var J=document.createElement("div");J.appendChild(d.cloneContents()),i.clipboardData.setData("text/plain",r.lute.VditorDOM2Md(J.innerHTML).trim()),i.clipboardData.setData("text/html","")}},n.prototype.bindEvent=function(i){var r=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(P(i,["hint"]),!(r.popover.style.display!=="block"||r.selectPopover.style.display!=="block")){var d=parseInt(r.popover.getAttribute("data-top"),10);if(i.options.height!=="auto"){if(i.options.toolbarConfig.pin&&i.toolbar.element.getBoundingClientRect().top===0){var s=Math.max(window.scrollY-i.element.offsetTop-8,Math.min(d-i.wysiwyg.element.scrollTop,r.element.clientHeight-21))+"px";r.popover.style.display==="block"&&(r.popover.style.top=s),r.selectPopover.style.display==="block"&&(r.selectPopover.style.top=s)}return}else if(!i.options.toolbarConfig.pin)return;var p=Math.max(d,window.scrollY-i.element.offsetTop-8)+"px";r.popover.style.display==="block"&&(r.popover.style.top=p),r.selectPopover.style.display==="block"&&(r.selectPopover.style.top=p)}}),this.element.addEventListener("scroll",function(){if(P(i,["hint"]),i.options.comment&&i.options.comment.enable&&i.options.comment.scroll&&i.options.comment.scroll(i.wysiwyg.element.scrollTop),r.popover.style.display==="block"){var d=parseInt(r.popover.getAttribute("data-top"),10)-i.wysiwyg.element.scrollTop,s=-8;i.options.toolbarConfig.pin&&i.toolbar.element.getBoundingClientRect().top===0&&(s=window.scrollY-i.element.offsetTop+s);var p=Math.max(s,Math.min(d,r.element.clientHeight-21))+"px";r.popover.style.top=p,r.selectPopover.style.top=p}}),this.element.addEventListener("paste",function(d){Do(i,d,{pasteCode:function(s){var p=(0,Z.zh)(i),_=document.createElement("template");_.innerHTML=s,p.insertNode(_.content.cloneNode(!0));var E=(0,w.a1)(p.startContainer,"data-block","0");E?E.outerHTML=i.lute.SpinVditorDOM(E.outerHTML):i.wysiwyg.element.innerHTML=i.lute.SpinVditorDOM(i.wysiwyg.element.innerHTML),(0,Z.ib)(i.wysiwyg.element,p)}})}),this.element.addEventListener("compositionstart",function(){r.composingLock=!0}),this.element.addEventListener("compositionend",function(d){var s=(0,W.W)(getSelection().getRangeAt(0).startContainer);if(s&&s.textContent===""){oi(i);return}(0,h.vU)()||Eo(i,getSelection().getRangeAt(0).cloneRange(),d),r.composingLock=!1}),this.element.addEventListener("input",function(d){if(!(d.inputType==="deleteByDrag"||d.inputType==="insertFromDrop")){if(r.preventInput){r.preventInput=!1,_t(i);return}if(r.composingLock||d.data==="\u2018"||d.data==="\u201C"||d.data==="\u300A"){_t(i);return}var s=getSelection().getRangeAt(0),p=(0,w.F9)(s.startContainer);if(p||(qr(i,s),p=(0,w.F9)(s.startContainer)),!!p){for(var _=(0,Z.im)(p,i.wysiwyg.element,s).start,E=!0,F=_-1;F>p.textContent.substr(0,_).lastIndexOf(`
`);F--)if(p.textContent.charAt(F)!==" "&&p.textContent.charAt(F)!=="	"){E=!1;break}_===0&&(E=!1);for(var L=!0,F=_-1;F<p.textContent.length;F++)if(p.textContent.charAt(F)!==" "&&p.textContent.charAt(F)!==`
`){L=!1;break}L&&/^#{1,6} $/.test(p.textContent)&&(L=!1);var J=(0,W.W)(getSelection().getRangeAt(0).startContainer);if(J&&J.textContent===""&&(oi(i),J.remove()),E&&p.getAttribute("data-type")!=="code-block"||L||Lo(p.innerHTML)||Fi(p.innerHTML)&&p.previousElementSibling){typeof i.options.input=="function"&&i.options.input(N(i));return}d.inputType==="insertParagraph"&&r.element.innerHTML==="<p><br></p><p><br></p>"&&p.previousElementSibling.remove(),Eo(i,s,d)}}}),this.element.addEventListener("click",function(d){if(d.target.tagName==="INPUT"){var s=d.target;s.checked?s.setAttribute("checked","checked"):s.removeAttribute("checked"),r.preventInput=!0,getSelection().rangeCount>0&&(0,Z.Hc)(getSelection().getRangeAt(0)),_t(i);return}if(d.target.tagName==="IMG"&&!d.target.parentElement.classList.contains("vditor-wysiwyg__preview")){d.target.getAttribute("data-type")==="link-ref"?Vl(i,d.target):Vc(d,i);return}var p=(0,w.lG)(d.target,"A");if(p){i.options.link.click?i.options.link.click(p):i.options.link.isOpen&&window.open(p.getAttribute("href")),d.preventDefault();return}var _=(0,Z.zh)(i);if(d.target.isEqualNode(r.element)&&r.element.lastElementChild&&_.collapsed){var E=r.element.lastElementChild.getBoundingClientRect();d.y>E.top+E.height&&(r.element.lastElementChild.tagName==="P"&&r.element.lastElementChild.textContent.trim().replace(u.g.ZWSP,"")===""?(_.selectNodeContents(r.element.lastElementChild),_.collapse(!1)):(r.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(u.g.ZWSP,"<wbr></p>")),(0,Z.ib)(r.element,_)))}Zi(i);var F=(0,w.fb)(d.target,"vditor-wysiwyg__preview");F||(F=(0,w.fb)((0,Z.zh)(i).startContainer,"vditor-wysiwyg__preview")),F&&Yi(F,i),wo(d,i)}),this.element.addEventListener("keyup",function(d){if(!(d.isComposing||(0,h.yl)(d))){d.key==="Enter"&&Gt(i),(d.key==="Backspace"||d.key==="Delete")&&i.wysiwyg.element.innerHTML!==""&&i.wysiwyg.element.childNodes.length===1&&i.wysiwyg.element.firstElementChild&&i.wysiwyg.element.firstElementChild.tagName==="P"&&i.wysiwyg.element.firstElementChild.childElementCount===0&&(i.wysiwyg.element.textContent===""||i.wysiwyg.element.textContent===`
`)&&(i.wysiwyg.element.innerHTML="");var s=(0,Z.zh)(i);if(d.key==="Backspace"&&(0,h.vU)()&&s.startContainer.textContent===`
`&&s.startOffset===1&&(s.startContainer.textContent=""),qr(i,s),Zi(i),!(d.key!=="ArrowDown"&&d.key!=="ArrowRight"&&d.key!=="Backspace"&&d.key!=="ArrowLeft"&&d.key!=="ArrowUp")){(d.key==="ArrowLeft"||d.key==="ArrowRight")&&i.hint.render(i);var p=(0,w.fb)(s.startContainer,"vditor-wysiwyg__preview");if(!p&&s.startContainer.nodeType!==3&&s.startOffset>0){var _=s.startContainer;_.classList.contains("vditor-wysiwyg__block")&&(p=_.lastElementChild)}if(p){var E=p.previousElementSibling;if(E.style.display==="none"){d.key==="ArrowDown"||d.key==="ArrowRight"?Yi(p,i):Yi(p,i,!1);return}var F=p.previousElementSibling;if(F.tagName==="PRE"&&(F=F.firstElementChild),d.key==="ArrowDown"||d.key==="ArrowRight"){var _=p.parentElement,L=ba(_);if(L&&L.nodeType!==3){var J=L.querySelector(".vditor-wysiwyg__preview");if(J){Yi(J,i);return}}if(L.nodeType===3){for(;L.textContent.length===0&&L.nextSibling;)L=L.nextSibling;s.setStart(L,1)}else s.setStart(L.firstChild,0)}else s.selectNodeContents(F),s.collapse(!1)}}}})},n})(),Es=(function(){var n=function(i,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(d[p]=s[p])},n(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(i,r);function d(){this.constructor=i}i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}})(),hd=(function(n){Es(i,n);function i(r,d){var s=n.call(this)||this;if(s.isDestroyed=!1,s.version=u.H,typeof r=="string"){if(d?d.cache?d.cache.id||(d.cache.id="vditor".concat(r)):d.cache={id:"vditor".concat(r)}:d={cache:{id:"vditor".concat(r)}},!document.getElementById(r))return s.showErrorTip("Failed to get element by id: ".concat(r)),s;r=document.getElementById(r)}var p=new Ar(d),_=p.merge();if(_.i18n)window.VditorI18n=_.i18n,s.init(r,_);else if(["de_DE","en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(_.lang)){var E="vditorI18nScript",F=E+_.lang;document.querySelectorAll('head script[id^="'.concat(E,'"]')).forEach(function(L){L.id!==F&&document.head.removeChild(L)}),(0,M.G)("".concat(_.cdn,"/dist/js/i18n/").concat(_.lang,".js"),F).then(function(){s.init(r,_)}).catch(function(L){s.showErrorTip("GET ".concat(_.cdn,"/dist/js/i18n/").concat(_.lang,".js net::ERR_ABORTED 404 (Not Found)"))})}else throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");return s}return i.prototype.showErrorTip=function(r){var d=new En;document.body.appendChild(d.element),d.show(r,0)},i.prototype.updateToolbarConfig=function(r){this.vditor.toolbar.updateConfig(this.vditor,r)},i.prototype.setTheme=function(r,d,s,p){this.vditor.options.theme=r,mt(this.vditor),d&&(this.vditor.options.preview.theme.current=d,(0,Be.Z)(d,p||this.vditor.options.preview.theme.path)),s&&(this.vditor.options.preview.hljs.style=s,(0,$a.Y)(s,this.vditor.options.cdn))},i.prototype.getValue=function(){return N(this.vditor)},i.prototype.getCurrentMode=function(){return this.vditor.currentMode},i.prototype.focus=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.focus():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.focus():this.vditor.currentMode==="ir"&&this.vditor.ir.element.focus()},i.prototype.blur=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.blur():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.blur():this.vditor.currentMode==="ir"&&this.vditor.ir.element.blur()},i.prototype.disabled=function(){P(this.vditor,["subToolbar","hint","popover"]),v(this.vditor.toolbar.elements,u.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},i.prototype.enable=function(){x(this.vditor.toolbar.elements,u.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},i.prototype.getSelection=function(){if(this.vditor.currentMode==="wysiwyg")return Yr(this.vditor.wysiwyg.element);if(this.vditor.currentMode==="sv")return Yr(this.vditor.sv.element);if(this.vditor.currentMode==="ir")return Yr(this.vditor.ir.element)},i.prototype.renderPreview=function(r){this.vditor.preview.render(this.vditor,r)},i.prototype.getCursorPosition=function(){return(0,Z.Ny)(this.vditor[this.vditor.currentMode].element)},i.prototype.isUploading=function(){return this.vditor.upload.isUploading},i.prototype.clearCache=function(){this.vditor.options.cache.enable&&(0,h.pK)()&&localStorage.removeItem(this.vditor.options.cache.id)},i.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},i.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},i.prototype.html2md=function(r){return this.vditor.lute.HTML2Md(r)},i.prototype.exportJSON=function(r){return this.vditor.lute.RenderJSON(r)},i.prototype.getHTML=function(){return cs(this.vditor)},i.prototype.tip=function(r,d){this.vditor.tip.show(r,d)},i.prototype.setPreviewMode=function(r){Oo(r,this.vditor)},i.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},i.prototype.updateValue=function(r){document.execCommand("insertHTML",!1,r)},i.prototype.insertValue=function(r,d){d===void 0&&(d=!0);var s=(0,Z.zh)(this.vditor);s.collapse(!0);var p=document.createElement("template");p.innerHTML=r,s.insertNode(p.content.cloneNode(!0)),s.collapse(!1),this.vditor.currentMode==="sv"?(this.vditor.sv.preventInput=!0,d&&Ke(this.vditor)):this.vditor.currentMode==="wysiwyg"?d&&Eo(this.vditor,getSelection().getRangeAt(0)):this.vditor.currentMode==="ir"&&(this.vditor.ir.preventInput=!0,d&&Xn(this.vditor,getSelection().getRangeAt(0),!0))},i.prototype.insertMD=function(r){this.vditor.currentMode==="ir"?(0,Z.oC)(this.vditor.lute.Md2VditorIRDOM(r),this.vditor):this.vditor.currentMode==="wysiwyg"?(0,Z.oC)(this.vditor.lute.Md2VditorDOM(r),this.vditor):Da(this.vditor,r),this.vditor.outline.render(this.vditor),qe(this.vditor)},i.prototype.setValue=function(r,d){var s=this;d===void 0&&(d=!1),this.vditor.currentMode==="sv"?(this.vditor.sv.element.innerHTML="<div data-block='0'>".concat(this.vditor.lute.SpinVditorSVDOM(r),"</div>"),Yt(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):this.vditor.currentMode==="wysiwyg"?Bl(this.vditor,r,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(r),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(p){Tt(p,s.vditor)}),yi(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),r||(P(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),d&&this.clearStack()},i.prototype.insertEmptyBlock=function(r){Li(this.vditor,r)},i.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},i.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var r=document.getElementById("vditorIconScript");r&&r.remove(),this.clearCache(),Tr(),this.vditor.wysiwyg.unbindListener(),this.vditor.options.after=void 0,this.isDestroyed=!0},i.prototype.getCommentIds=function(){return this.vditor.currentMode!=="wysiwyg"?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},i.prototype.hlCommentIds=function(r){if(this.vditor.currentMode==="wysiwyg"){var d=function(s){s.classList.remove("vditor-comment--hover"),r.forEach(function(p){s.getAttribute("data-cmtids").indexOf(p)>-1&&s.classList.add("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(s){d(s)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(s){d(s)})}},i.prototype.unHlCommentIds=function(r){if(this.vditor.currentMode==="wysiwyg"){var d=function(s){r.forEach(function(p){s.getAttribute("data-cmtids").indexOf(p)>-1&&s.classList.remove("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(s){d(s)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(s){d(s)})}},i.prototype.removeCommentIds=function(r){var d=this;if(this.vditor.currentMode==="wysiwyg"){var s=function(p,_){var E=p.getAttribute("data-cmtids").split(" ");E.find(function(F,L){if(F===_)return E.splice(L,1),!0}),E.length===0?(p.outerHTML=p.innerHTML,(0,Z.zh)(d.vditor).collapse(!0)):p.setAttribute("data-cmtids",E.join(" "))};r.forEach(function(p){d.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(_){s(_,p)}),d.vditor.preview.element.style.display!=="none"&&d.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(_){s(_,p)})}),_t(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},i.prototype.init=function(r,d){var s=this;this.isDestroyed||(this.vditor={currentMode:d.mode,element:r,hint:new qc(d.hint.extend),lute:void 0,options:d,originalInnerHTML:r.innerHTML,outline:new rn(window.VditorI18n.outline),tip:new En},this.vditor.sv=new Ua(this.vditor),this.vditor.undo=new fd,this.vditor.wysiwyg=new Yn(this.vditor),this.vditor.ir=new Xc(this.vditor),this.vditor.toolbar=new Po(this.vditor),d.resize.enable&&(this.vditor.resize=new ps(this.vditor)),this.vditor.toolbar.elements.devtools&&(this.vditor.devtools=new m),(d.upload.url||d.upload.handler)&&(this.vditor.upload=new Gl),(0,M.G)(d._lutePath||"".concat(d.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){s.vditor.lute=(0,ds.X)({autoSpace:s.vditor.options.preview.markdown.autoSpace,gfmAutoLink:s.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:s.vditor.options.preview.markdown.codeBlockPreview,emojiSite:s.vditor.options.hint.emojiPath,emojis:s.vditor.options.hint.emoji,fixTermTypo:s.vditor.options.preview.markdown.fixTermTypo,footnotes:s.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:s.vditor.options.preview.math.inlineDigit,linkBase:s.vditor.options.preview.markdown.linkBase,linkPrefix:s.vditor.options.preview.markdown.linkPrefix,listStyle:s.vditor.options.preview.markdown.listStyle,mark:s.vditor.options.preview.markdown.mark,mathBlockPreview:s.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:s.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:s.vditor.options.preview.markdown.sanitize,toc:s.vditor.options.preview.markdown.toc}),s.vditor.preview=new ir(s.vditor),Cn(s.vditor),d.after&&d.after(),d.icon&&(0,M.J)("".concat(d.cdn,"/dist/js/icons/").concat(d.icon,".js"),"vditorIconScript")}))},i})(c.default);let _d=hd})(),l=l.default,l})()})});var fa=hl(Eu());var nn=(()=>{class o{i18n;datePipe;constructor(e){this.i18n=e,this.datePipe=e.datePipe}initErupt(e){if(this.buildErupt(e.eruptModel),e.eruptModel.eruptJson.power=e.power,e.tabErupts)for(let l in e.tabErupts)"eruptName"in e.tabErupts[l].eruptModel&&this.initErupt(e.tabErupts[l]);if(e.combineErupts)for(let l in e.combineErupts)this.buildErupt(e.combineErupts[l]);if(e.referenceErupts)for(let l in e.referenceErupts)this.buildErupt(e.referenceErupts[l])}buildErupt(e){e.tableColumns=[],e.eruptFieldModelMap=new Map,e.eruptFieldModels.forEach(l=>{if(l.eruptFieldJson.edit){if(l.componentValue){l.choiceMap=new Map,l.choiceLabelMap=new Map;for(let c of l.componentValue)l.choiceMap.set(c.value,c),l.choiceLabelMap.set(c.label,c)}switch(l.eruptFieldJson.edit.$value=l.value,e.eruptFieldModelMap.set(l.fieldName,l),l.eruptFieldJson.edit.type){case be.INPUT:let c=l.eruptFieldJson.edit.inputType;c.prefix.length>0&&(c.prefixValue=c.prefix[0].value),c.suffix.length>0&&(c.suffixValue=c.suffix[0].value);break;case be.SLIDER:let u=l.eruptFieldJson.edit.sliderType.markPoints,b=l.eruptFieldJson.edit.sliderType.marks={};u.length>0&&u.forEach(N=>{b[N]=""});break}l.eruptFieldJson.views.forEach(c=>{c.column?c.column=l.fieldName+"_"+c.column.replace(/\./g,"_"):c.column=l.fieldName;let u=Hf(l);u.eruptFieldJson.views=null,c.eruptFieldModel=u,e.tableColumns.push(c)})}})}dataTreeToZorroTree(e,l){let c=[];return e.forEach(u=>{let b={key:u.id,title:u.label,data:u.data,expanded:u.level<=l};u.children&&u.children.length>0?(c.push(b),b.children=this.dataTreeToZorroTree(u.children,l)):(b.isLeaf=!0,c.push(b))}),c}eruptObjectToCondition(e){let l=[];for(let c in e){let u=e[c];typeof u=="string"&&(u=u.trim()),l.push({key:c,value:u})}return l}searchEruptToObject(e){let l=this.eruptValueToObject(e);return e.eruptModel.eruptFieldModels.forEach(c=>{let u=c.eruptFieldJson.edit;if(u.search.value&&u.search.vague)switch(u.type){case be.NUMBER:(u.$l_val||u.$l_val===0)&&(u.$r_val||u.$r_val===0)&&(l[c.fieldName]=[u.$l_val,u.$r_val]);break;case be.DATE:u.$value&&(u.dateType.type==Bt.DATE?l[c.fieldName]=[this.datePipe.transform(u.$value[0],"yyyy-MM-dd 00:00:00"),this.datePipe.transform(u.$value[1],"yyyy-MM-dd 23:59:59")]:u.dateType.type==Bt.DATE_TIME&&(l[c.fieldName]=[this.datePipe.transform(u.$value[0],"yyyy-MM-dd HH:mm:ss"),this.datePipe.transform(u.$value[1],"yyyy-MM-dd HH:mm:ss")]));break}}),l}dateFormat(e,l){let c=null;switch(l.dateType.type){case Bt.DATE:c="yyyy-MM-dd";break;case Bt.DATE_TIME:c="yyyy-MM-dd HH:mm:ss";break;case Bt.MONTH:c="yyyy-MM";break;case Bt.WEEK:c="yyyy-ww";break;case Bt.YEAR:c="yyyy";break;case Bt.TIME:c="HH:mm:ss";break}return this.datePipe.transform(e,c)}eruptValueToObject(e){let l={};if(e.eruptModel.eruptFieldModels.forEach(c=>{let u=c.eruptFieldJson.edit;if(u)switch(u.type){case be.INPUT:if(u.$value){let b=u.inputType;b.prefixValue||b.suffixValue?l[c.fieldName]=(b.prefixValue||"")+u.$value+(b.suffixValue||""):l[c.fieldName]=u.$value}break;case be.CHOICE:(u.$value||u.$value===0)&&(l[c.fieldName]=u.$value);break;case be.TAGS:if(u.$value||u.$value===0){let b=u.$value.join(u.tagsType.joinSeparator);b&&(l[c.fieldName]=b)}break;case be.REFERENCE_TREE:u.$value||u.$value===0?(l[c.fieldName]={},l[c.fieldName][u.referenceTreeType.id]=u.$value,l[c.fieldName][u.referenceTreeType.label]=u.$viewValue):u.$value=null;break;case be.REFERENCE_TABLE:u.$value||u.$value===0?(l[c.fieldName]={},l[c.fieldName][u.referenceTableType.id]=u.$value,l[c.fieldName][u.referenceTableType.label]=u.$viewValue):u.$value=null;break;case be.CHECKBOX:if(u.$value){let b=[];u.$value.forEach(N=>{let M={};M.id=N,b.push(M)}),l[c.fieldName]=b}break;case be.TAB_TREE:if(u.$value){if(!e.tabErupts)return;let b=[];u.$value.forEach(N=>{let M={};M[e.tabErupts[c.fieldName].eruptModel.eruptJson.primaryKeyCol]=N,b.push(M)}),l[c.fieldName]=b}break;case be.TAB_TABLE_REFER:if(u.$value){if(!e.tabErupts)return;let b=[];u.$value.forEach(N=>{let M={},m=e.tabErupts[c.fieldName].eruptModel.eruptJson.primaryKeyCol;M[m]=N[m],b.push(M)}),l[c.fieldName]=b}break;case be.TAB_TABLE_ADD:if(u.$value){if(typeof u.$value=="object"){if(!e.tabErupts)return;let b=e.tabErupts[c.fieldName].eruptModel.eruptJson.primaryKeyCol;for(let N of u.$value)N[b]<0&&(N[b]=null)}l[c.fieldName]=u.$value}break;case be.ATTACHMENT:if(u.$viewValue){let b=[];u.$viewValue.forEach(N=>{b.push(N.response.data)}),l[c.fieldName]=b.join(u.attachmentType.fileSeparator)}break;case be.BOOLEAN:l[c.fieldName]=u.$value;break;case be.DATE:if(u.$value)if(Array.isArray(u.$value)){if(!u.$value[0]){u.$value=null;break}l[c.fieldName]=[this.dateFormat(u.$value[0],u),this.dateFormat(u.$value[1],u)]}else l[c.fieldName]=this.dateFormat(u.$value,u);break;default:(u.$value||u.$value===0)&&(l[c.fieldName]=u.$value);break}}),e.combineErupts)for(let c in e.combineErupts)l[c]=this.eruptValueToObject({eruptModel:e.combineErupts[c]});return l}eruptValueToTableValue(e){let l={};return e.eruptModel.eruptFieldModels.forEach(c=>{let u=c.eruptFieldJson.edit;switch(u.type){case be.REFERENCE_TREE:l[c.fieldName+"_"+u.referenceTreeType.id]=u.$value,l[c.fieldName+"_"+u.referenceTreeType.label]=u.$viewValue;break;case be.REFERENCE_TABLE:l[c.fieldName+"_"+u.referenceTableType.id]=u.$value,l[c.fieldName+"_"+u.referenceTableType.label]=u.$viewValue;break;default:l[c.fieldName]=u.$value}}),l}eruptObjectToTableValue(e,l){let c={};return e.eruptModel.eruptFieldModels.forEach(u=>{if(l[u.fieldName]!=null){let b=u.eruptFieldJson.edit;switch(b.type){case be.REFERENCE_TREE:c[u.fieldName+"_"+b.referenceTreeType.id]=l[u.fieldName][b.referenceTreeType.id],c[u.fieldName+"_"+b.referenceTreeType.label]=l[u.fieldName][b.referenceTreeType.label],l[u.fieldName]=null;break;case be.REFERENCE_TABLE:c[u.fieldName+"_"+b.referenceTableType.id]=l[u.fieldName][b.referenceTableType.id],c[u.fieldName+"_"+b.referenceTableType.label]=l[u.fieldName][b.referenceTableType.label],l[u.fieldName]=null;break;default:c[u.fieldName]=l[u.fieldName]}}}),c}objectToEruptValue(e,l){this.emptyEruptValue(l);for(let c of l.eruptModel.eruptFieldModels){let u=c.eruptFieldJson.edit;if(u)switch(u.type){case be.INPUT:let b=u.inputType;if(b.prefix.length>0||b.suffix.length>0){if(e[c.fieldName]){let N=e[c.fieldName];for(let M of b.prefix)if(N.startsWith(M.value)){u.inputType.prefixValue=M.value,N=N.substr(M.value.length);break}for(let M of b.suffix)if(N.endsWith(M.value)){u.inputType.suffixValue=M.value,N=N.substr(0,N.length-M.value.length);break}u.$value=N}}else u.$value=e[c.fieldName];break;case be.DATE:if(e[c.fieldName])switch(u.dateType.type){case Bt.DATE_TIME:case Bt.DATE:u.$value=(0,fa.default)(e[c.fieldName]).toDate();break;case Bt.TIME:u.$value=(0,fa.default)(e[c.fieldName],"HH:mm:ss").toDate();break;case Bt.WEEK:u.$value=(0,fa.default)(e[c.fieldName],"YYYY-ww").toDate();break;case Bt.MONTH:u.$value=(0,fa.default)(e[c.fieldName],"YYYY-MM").toDate();break;case Bt.YEAR:u.$value=(0,fa.default)(e[c.fieldName],"YYYY").toDate();break}break;case be.REFERENCE_TREE:e[c.fieldName]&&(u.$value=e[c.fieldName][u.referenceTreeType.id],u.$viewValue=e[c.fieldName][u.referenceTreeType.label]);break;case be.REFERENCE_TABLE:e[c.fieldName]&&(u.$value=e[c.fieldName][u.referenceTableType.id],u.$viewValue=e[c.fieldName][u.referenceTableType.label]);break;case be.TAB_TREE:e[c.fieldName]?u.$value=e[c.fieldName]:u.$value=[];break;case be.ATTACHMENT:u.$viewValue=[],e[c.fieldName]&&(e[c.fieldName].split(u.attachmentType.fileSeparator).forEach(N=>{u.$viewValue.push({uid:N,name:N,size:1,type:"",url:Pe.previewAttachment(N),response:{data:N}})}),u.$value=e[c.fieldName]);break;case be.CHOICE:u.$value=vm(e[c.fieldName])?e[c.fieldName]+"":null;break;case be.TAGS:e[c.fieldName]?u.$value=String(e[c.fieldName]).split(u.tagsType.joinSeparator):u.$value=[];break;case be.CODE_EDITOR:case be.HTML_EDITOR:u.$value=e[c.fieldName]||"";break;case be.TAB_TABLE_ADD:case be.TAB_TABLE_REFER:u.$value=e[c.fieldName]||[];break;default:u.$value=e[c.fieldName];break}}if(l.combineErupts)for(let c in l.combineErupts)e[c]&&this.objectToEruptValue(e[c],{eruptModel:l.combineErupts[c]})}loadEruptDefaultValue(e){this.emptyEruptValue(e);let l={};e.eruptModel.eruptFieldModels.forEach(c=>{c.value&&(l[c.fieldName]=c.value)}),this.objectToEruptValue(l,{eruptModel:e.eruptModel});for(let c in e.combineErupts)this.loadEruptDefaultValue({eruptModel:e.combineErupts[c]})}emptyEruptValue(e){e.eruptModel.eruptFieldModels.forEach(l=>{if(l.eruptFieldJson.edit)switch(l.eruptFieldJson.edit.$viewValue=null,l.eruptFieldJson.edit.$tempValue=null,l.eruptFieldJson.edit.$l_val=null,l.eruptFieldJson.edit.$r_val=null,l.eruptFieldJson.edit.$value=null,l.eruptFieldJson.edit.type){case be.CHOICE:l.componentValue&&l.componentValue.forEach(c=>{c.$viewValue=!1});break;case be.INPUT:l.eruptFieldJson.edit.inputType.prefixValue=null,l.eruptFieldJson.edit.inputType.suffixValue=null;break;case be.ATTACHMENT:l.eruptFieldJson.edit.$viewValue=[];break;case be.TAB_TABLE_REFER:case be.TAB_TABLE_ADD:l.eruptFieldJson.edit.$value=[];break}});for(let l in e.combineErupts)this.emptyEruptValue({eruptModel:e.combineErupts[l]})}static \u0275fac=function(l){return new(l||o)(_r(qt))};static \u0275prov=tc({token:o,factory:o.\u0275fac})}return o})();var zu=(function(o){return o.IFRAME="IFRAME",o.MICRO_FRONTEND="MICRO_FRONTEND",o})(zu||{}),ku=(function(o){return o.MODAL="MODAL",o.DRAWER="DRAWER",o})(ku||{});var ma=(function(o){return o.HIDE="HIDE",o.SHOW="SHOW",o.NOTNULL="NOTNULL",o.READONLY="READONLY",o})(ma||{});var ha=class{constructor(g,e,l,c){if(isNaN(g)||isNaN(e))throw new Error(`Point is invalid: (${g}, ${e})`);this.x=+g,this.y=+e,this.pressure=l||0,this.time=c||Date.now()}distanceTo(g){return Math.sqrt(Math.pow(this.x-g.x,2)+Math.pow(this.y-g.y,2))}equals(g){return this.x===g.x&&this.y===g.y&&this.pressure===g.pressure&&this.time===g.time}velocityFrom(g){return this.time!==g.time?this.distanceTo(g)/(this.time-g.time):0}},Lu=class o{static fromPoints(g,e){let l=this.calculateControlPoints(g[0],g[1],g[2]).c2,c=this.calculateControlPoints(g[1],g[2],g[3]).c1;return new o(g[1],l,c,g[2],e.start,e.end)}static calculateControlPoints(g,e,l){let c=g.x-e.x,u=g.y-e.y,b=e.x-l.x,N=e.y-l.y,M={x:(g.x+e.x)/2,y:(g.y+e.y)/2},m={x:(e.x+l.x)/2,y:(e.y+l.y)/2},h=Math.sqrt(c*c+u*u),T=Math.sqrt(b*b+N*N),y=M.x-m.x,x=M.y-m.y,v=h+T==0?0:T/(h+T),O={x:m.x+y*v,y:m.y+x*v},H=e.x-O.x,P=e.y-O.y;return{c1:new ha(M.x+H,M.y+P),c2:new ha(m.x+H,m.y+P)}}constructor(g,e,l,c,u,b){this.startPoint=g,this.control2=e,this.control1=l,this.endPoint=c,this.startWidth=u,this.endWidth=b}length(){let e=0,l,c;for(let u=0;u<=10;u+=1){let b=u/10,N=this.point(b,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),M=this.point(b,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(u>0){let m=N-l,h=M-c;e+=Math.sqrt(m*m+h*h)}l=N,c=M}return e}point(g,e,l,c,u){return e*(1-g)*(1-g)*(1-g)+3*l*(1-g)*(1-g)*g+3*c*(1-g)*g*g+u*g*g*g}},Au=class{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(g,e,l){this._et.addEventListener(g,e,l)}dispatchEvent(g){return this._et.dispatchEvent(g)}removeEventListener(g,e,l){this._et.removeEventListener(g,e,l)}};function l1(o,g=250){let e=0,l=null,c,u,b,N=()=>{e=Date.now(),l=null,c=o.apply(u,b),l||(u=null,b=[])};return function(...m){let h=Date.now(),T=g-(h-e);return u=this,b=m,T<=0||T>g?(l&&(clearTimeout(l),l=null),e=h,c=o.apply(u,b),l||(u=null,b=[])):l||(l=window.setTimeout(N,T)),c}}var Tc=class o extends Au{constructor(g,e={}){var l,c,u;super(),this.canvas=g,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle=(l=e.throttle)!==null&&l!==void 0?l:16,this.minDistance=(c=e.minDistance)!==null&&c!==void 0?c:5,this.dotSize=e.dotSize||0,this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=e.compositeOperation||"source-over",this.canvasContextOptions=(u=e.canvasContextOptions)!==null&&u!==void 0?u:{},this._strokeMoveUpdate=this.throttle?l1(o.prototype._strokeUpdate,this.throttle):o.prototype._strokeUpdate,this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handlePointerDown=this._handlePointerDown.bind(this),this._handlePointerMove=this._handlePointerMove.bind(this),this._handlePointerUp=this._handlePointerUp.bind(this),this._ctx=g.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){let{_ctx:g,canvas:e}=this;g.fillStyle=this.backgroundColor,g.clearRect(0,0,e.width,e.height),g.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0,this._strokePointerId=void 0}fromDataURL(g,e={}){return new Promise((l,c)=>{let u=new Image,b=e.ratio||window.devicePixelRatio||1,N=e.width||this.canvas.width/b,M=e.height||this.canvas.height/b,m=e.xOffset||0,h=e.yOffset||0;this._reset(this._getPointGroupOptions()),u.onload=()=>{this._ctx.drawImage(u,m,h,N,M),l()},u.onerror=T=>{c(T)},u.crossOrigin="anonymous",u.src=g,this._isEmpty=!1})}toDataURL(g="image/png",e){switch(g){case"image/svg+xml":return typeof e!="object"&&(e=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(e))}`;default:return typeof e!="number"&&(e=void 0),this.canvas.toDataURL(g,e)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";let g=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!g?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){var g;let e=window.document===this.canvas.ownerDocument?window:(g=this.canvas.ownerDocument.defaultView)!==null&&g!==void 0?g:this.canvas.ownerDocument;return{addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}_removeMoveUpEventListeners(){let{removeEventListener:g}=this._getListenerFunctions();g("pointermove",this._handlePointerMove),g("pointerup",this._handlePointerUp),g("mousemove",this._handleMouseMove),g("mouseup",this._handleMouseUp),g("touchmove",this._handleTouchMove),g("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(g,{clear:e=!0}={}){e&&this.clear(),this._fromData(g,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(g)}toData(){return this._data}_isLeftButtonPressed(g,e){return e?g.buttons===1:(g.buttons&1)===1}_pointerEventToSignatureEvent(g){return{event:g,type:g.type,x:g.clientX,y:g.clientY,pressure:"pressure"in g?g.pressure:0}}_touchEventToSignatureEvent(g){let e=g.changedTouches[0];return{event:g,type:g.type,x:e.clientX,y:e.clientY,pressure:e.force}}_handleMouseDown(g){!this._isLeftButtonPressed(g,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(g))}_handleMouseMove(g){if(!this._isLeftButtonPressed(g,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(g),!1);return}this._strokeMoveUpdate(this._pointerEventToSignatureEvent(g))}_handleMouseUp(g){this._isLeftButtonPressed(g)||this._strokeEnd(this._pointerEventToSignatureEvent(g))}_handleTouchStart(g){g.targetTouches.length!==1||this._drawingStroke||(g.cancelable&&g.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(g)))}_handleTouchMove(g){if(g.targetTouches.length===1){if(g.cancelable&&g.preventDefault(),!this._drawingStroke){this._strokeEnd(this._touchEventToSignatureEvent(g),!1);return}this._strokeMoveUpdate(this._touchEventToSignatureEvent(g))}}_handleTouchEnd(g){g.targetTouches.length===0&&(g.cancelable&&g.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(g)))}_getPointerId(g){return g.persistentDeviceId||g.pointerId}_allowPointerId(g,e=!1){return typeof this._strokePointerId>"u"?e:this._getPointerId(g)===this._strokePointerId}_handlePointerDown(g){this._drawingStroke||!this._isLeftButtonPressed(g)||!this._allowPointerId(g,!0)||(this._strokePointerId=this._getPointerId(g),g.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(g)))}_handlePointerMove(g){if(this._allowPointerId(g)){if(!this._isLeftButtonPressed(g,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(g),!1);return}g.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(g))}}_handlePointerUp(g){this._isLeftButtonPressed(g)||!this._allowPointerId(g)||(g.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(g)))}_getPointGroupOptions(g){return{penColor:g&&"penColor"in g?g.penColor:this.penColor,dotSize:g&&"dotSize"in g?g.dotSize:this.dotSize,minWidth:g&&"minWidth"in g?g.minWidth:this.minWidth,maxWidth:g&&"maxWidth"in g?g.maxWidth:this.maxWidth,velocityFilterWeight:g&&"velocityFilterWeight"in g?g.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:g&&"compositeOperation"in g?g.compositeOperation:this.compositeOperation}}_strokeBegin(g){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:g,cancelable:!0})))return;let{addEventListener:l}=this._getListenerFunctions();switch(g.event.type){case"mousedown":l("mousemove",this._handleMouseMove,{passive:!1}),l("mouseup",this._handleMouseUp,{passive:!1});break;case"touchstart":l("touchmove",this._handleTouchMove,{passive:!1}),l("touchend",this._handleTouchEnd,{passive:!1});break;case"pointerdown":l("pointermove",this._handlePointerMove,{passive:!1}),l("pointerup",this._handlePointerUp,{passive:!1});break}this._drawingStroke=!0;let c=this._getPointGroupOptions(),u=Object.assign(Object.assign({},c),{points:[]});this._data.push(u),this._reset(c),this._strokeUpdate(g)}_strokeUpdate(g){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(g);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:g}));let e=this._createPoint(g.x,g.y,g.pressure),l=this._data[this._data.length-1],c=l.points,u=c.length>0&&c[c.length-1],b=u?e.distanceTo(u)<=this.minDistance:!1,N=this._getPointGroupOptions(l);if(!u||!(u&&b)){let M=this._addPoint(e,N);u?M&&this._drawCurve(M,N):this._drawDot(e,N),c.push({time:e.time,x:e.x,y:e.y,pressure:e.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:g}))}_strokeEnd(g,e=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(e&&this._strokeUpdate(g),this._drawingStroke=!1,this._strokePointerId=void 0,this.dispatchEvent(new CustomEvent("endStroke",{detail:g})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown,{passive:!1})}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown,{passive:!1})}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart,{passive:!1})}_reset(g){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(g.minWidth+g.maxWidth)/2,this._ctx.fillStyle=g.penColor,this._ctx.globalCompositeOperation=g.compositeOperation}_createPoint(g,e,l){let c=this.canvas.getBoundingClientRect();return new ha(g-c.left,e-c.top,l,new Date().getTime())}_addPoint(g,e){let{_lastPoints:l}=this;if(l.push(g),l.length>2){l.length===3&&l.unshift(l[0]);let c=this._calculateCurveWidths(l[1],l[2],e),u=Lu.fromPoints(l,c);return l.shift(),u}return null}_calculateCurveWidths(g,e,l){let c=l.velocityFilterWeight*e.velocityFrom(g)+(1-l.velocityFilterWeight)*this._lastVelocity,u=this._strokeWidth(c,l),b={end:u,start:this._lastWidth};return this._lastVelocity=c,this._lastWidth=u,b}_strokeWidth(g,e){return Math.max(e.maxWidth/(g+1),e.minWidth)}_drawCurveSegment(g,e,l){let c=this._ctx;c.moveTo(g,e),c.arc(g,e,l,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(g,e){let l=this._ctx,c=g.endWidth-g.startWidth,u=Math.ceil(g.length())*2;l.beginPath(),l.fillStyle=e.penColor;for(let b=0;b<u;b+=1){let N=b/u,M=N*N,m=M*N,h=1-N,T=h*h,y=T*h,x=y*g.startPoint.x;x+=3*T*N*g.control1.x,x+=3*h*M*g.control2.x,x+=m*g.endPoint.x;let v=y*g.startPoint.y;v+=3*T*N*g.control1.y,v+=3*h*M*g.control2.y,v+=m*g.endPoint.y;let O=Math.min(g.startWidth+m*c,e.maxWidth);this._drawCurveSegment(x,v,O)}l.closePath(),l.fill()}_drawDot(g,e){let l=this._ctx,c=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;l.beginPath(),this._drawCurveSegment(g.x,g.y,c),l.closePath(),l.fillStyle=e.penColor,l.fill()}_fromData(g,e,l){for(let c of g){let{points:u}=c,b=this._getPointGroupOptions(c);if(u.length>1)for(let N=0;N<u.length;N+=1){let M=u[N],m=new ha(M.x,M.y,M.pressure,M.time);N===0&&this._reset(b);let h=this._addPoint(m,b);h&&e(h,b)}else this._reset(b),l(u[0],b)}}toSVG({includeBackgroundColor:g=!1}={}){let e=this._data,l=Math.max(window.devicePixelRatio||1,1),c=0,u=0,b=this.canvas.width/l,N=this.canvas.height/l,M=document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.setAttribute("xmlns","http://www.w3.org/2000/svg"),M.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),M.setAttribute("viewBox",`${c} ${u} ${b} ${N}`),M.setAttribute("width",b.toString()),M.setAttribute("height",N.toString()),g&&this.backgroundColor){let m=document.createElement("rect");m.setAttribute("width","100%"),m.setAttribute("height","100%"),m.setAttribute("fill",this.backgroundColor),M.appendChild(m)}return this._fromData(e,(m,{penColor:h})=>{let T=document.createElement("path");if(!isNaN(m.control1.x)&&!isNaN(m.control1.y)&&!isNaN(m.control2.x)&&!isNaN(m.control2.y)){let y=`M ${m.startPoint.x.toFixed(3)},${m.startPoint.y.toFixed(3)} C ${m.control1.x.toFixed(3)},${m.control1.y.toFixed(3)} ${m.control2.x.toFixed(3)},${m.control2.y.toFixed(3)} ${m.endPoint.x.toFixed(3)},${m.endPoint.y.toFixed(3)}`;T.setAttribute("d",y),T.setAttribute("stroke-width",(m.endWidth*2.25).toFixed(3)),T.setAttribute("stroke",h),T.setAttribute("fill","none"),T.setAttribute("stroke-linecap","round"),M.appendChild(T)}},(m,{penColor:h,dotSize:T,minWidth:y,maxWidth:x})=>{let v=document.createElement("circle"),O=T>0?T:(y+x)/2;v.setAttribute("r",O.toString()),v.setAttribute("cx",m.x.toString()),v.setAttribute("cy",m.y.toString()),v.setAttribute("fill",h),M.appendChild(v)}),M.outerHTML}};var s1=["canvas"],c1=o=>({height:o}),Vm=(()=>{class o{eruptField;canvas;signaturePad;height="200px";ngAfterViewInit(){let e=this.canvas.nativeElement,l=Math.max(window.devicePixelRatio||1,1);e.width=e.offsetWidth*l,e.height=e.offsetHeight*l,e.getContext("2d").scale(l,l),this.signaturePad=new Tc(e,{penColor:"#000",backgroundColor:"#fff",minWidth:.5,maxWidth:2.5})}save(){return this.signaturePad.isEmpty()?null:this.signaturePad.toDataURL("image/png")}clear(){this.signaturePad.clear()}getSign(){return this.signaturePad.isEmpty()?null:this.signaturePad.toDataURL("image/png")}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=Fe({type:o,selectors:[["erupt-signature-pad"]],viewQuery:function(l,c){if(l&1&&kt(s1,5),l&2){let u;Lt(u=At())&&(c.canvas=u.first)}},inputs:{eruptField:"eruptField",height:"height"},standalone:!1,decls:5,vars:3,consts:[["canvas",""],[2,"position","relative","border","1px solid #d9d9d9"],[2,"width","100%",3,"ngStyle"],["nz-button","","nzType","default","nzShape","circle",2,"position","absolute","right","16px","top","16px",3,"click"],["nz-icon","","nzType","sync","nzTheme","outline"]],template:function(l,c){if(l&1){let u=ne();R(0,"div",1),te(1,"canvas",2,0),R(3,"button",3),se("click",function(){return j(u),G(c.clear())}),te(4,"span",4),V()()}l&2&&(A(),k("ngStyle",$t(1,c1,c.height)))},dependencies:[Gn,tn,Ct,dn,pt],encapsulation:2})}return o})();var d1=()=>({minRows:3,maxRows:20}),u1=o=>[o],p1=()=>[".bmp",".jpg",".jpeg",".png",".gif",".webp",".heic",".avif",".svg"],Bm=(o,g,e)=>({token:o,erupt:g,eruptParent:e}),f1=o=>({eruptModel:o}),Hm=(o,g)=>({eruptBuildModel:o,eruptFieldModel:g});function m1(o,g){if(o&1){let e=ne();R(0,"div",11)(1,"span",13),se("click",function(){j(e);let c=S(3).$implicit,u=S();return G(u.copy(c.eruptFieldJson.edit.$value))}),V()()}}function h1(o,g){if(o&1){let e=ne();R(0,"nz-input-wrapper",9),X(1,m1,2,0,"div",11),R(2,"input",12),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()()}if(o&2){let e=S(2).$implicit,l=S();A(),Q(l.supportCopy?1:-1),A(),k("nzSize",l.size)("nzTooltipTitle",e.eruptFieldJson.edit.$value)("type",e.eruptFieldJson.edit.inputType.type)("maxLength",e.eruptFieldJson.edit.inputType.length),ge("ngModel",e.eruptFieldJson.edit.$value),k("name",e.fieldName)("placeholder",e.eruptFieldJson.edit.placeHolder)("disabled",l.isReadonly(e))}}function _1(o,g){if(o&1&&he(0),o&2){let e=S(3).$implicit;$e(" ",e.eruptFieldJson.edit.inputType.prefix[0].label," ")}}function g1(o,g){if(o&1&&te(0,"nz-option",18),o&2){let e=g.$implicit;k("nzLabel",e.label)("nzValue",e.value)}}function C1(o,g){if(o&1){let e=ne();R(0,"nz-select",17),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.inputType.prefixValue,c)||(u.eruptFieldJson.edit.inputType.prefixValue=c),G(c)}),De(1,g1,1,2,"nz-option",18,Ie),V()}if(o&2){let e=S(3).$implicit;ge("ngModel",e.eruptFieldJson.edit.inputType.prefixValue),k("name",e.fieldName+"before"),A(),Oe(e.eruptFieldJson.edit.inputType.prefix)}}function y1(o,g){if(o&1&&he(0),o&2){let e=S(3).$implicit;$e(" ",e.eruptFieldJson.edit.inputType.suffix[0].label," ")}}function v1(o,g){if(o&1&&te(0,"nz-option",18),o&2){let e=g.$implicit;k("nzLabel",e.label)("nzValue",e.value)}}function w1(o,g){if(o&1){let e=ne();R(0,"nz-select",17),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.inputType.suffixValue,c)||(u.eruptFieldJson.edit.inputType.suffixValue=c),G(c)}),De(1,v1,1,2,"nz-option",18,Ie),V()}if(o&2){let e=S(3).$implicit;ge("ngModel",e.eruptFieldJson.edit.inputType.suffixValue),k("name",e.fieldName+"after"),A(),Oe(e.eruptFieldJson.edit.inputType.suffix)}}function b1(o,g){if(o&1){let e=ne();R(0,"nz-input-wrapper",10)(1,"input",14),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V(),R(2,"div",11),X(3,_1,1,1),X(4,C1,3,2,"nz-select",15),V(),R(5,"div",16),X(6,y1,1,1),X(7,w1,3,2,"nz-select",15),V()()}if(o&2){let e=S(2).$implicit,l=S();A(),k("type",e.eruptFieldJson.edit.inputType.type)("maxLength",e.eruptFieldJson.edit.inputType.length)("placeholder",e.eruptFieldJson.edit.placeHolder),ge("ngModel",e.eruptFieldJson.edit.$value),k("name",e.fieldName)("disabled",l.isReadonly(e)),A(2),Q(e.eruptFieldJson.edit.inputType.prefix.length==1?3:-1),A(),Q(e.eruptFieldJson.edit.inputType.prefix.length>1?4:-1),A(2),Q(e.eruptFieldJson.edit.inputType.suffix.length==1?6:-1),A(),Q(e.eruptFieldJson.edit.inputType.suffix.length>1?7:-1)}}function x1(o,g){if(o&1&&(R(0,"se",8),X(1,h1,3,9,"nz-input-wrapper",9),X(2,b1,8,10,"nz-input-wrapper",10),V()),o&2){let e=S().$implicit;k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),Q(e.eruptFieldJson.edit.inputType.prefix.length==0&&e.eruptFieldJson.edit.inputType.suffix.length==0?1:-1),A(),Q(e.eruptFieldJson.edit.inputType.prefix.length>0||e.eruptFieldJson.edit.inputType.suffix.length>0?2:-1)}}function T1(o,g){if(o&1&&(R(0,"se",8),te(1,"erupt-choice",19),V()),o&2){let e=S().$implicit,l=S();k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("eruptModel",l.eruptModel)("eruptField",e)("size",l.size)("eruptParentName",l.parentEruptName)("editType",l)("readonly",l.isReadonly(e))}}function S1(o,g){if(o&1&&(R(0,"se",8),te(1,"erupt-multi-choice",20),V()),o&2){let e=S().$implicit,l=S();k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("eruptModel",l.eruptModel)("eruptField",e)("size",l.size)("eruptParentName",l.parentEruptName)("readonly",l.isReadonly(e))}}function M1(o,g){if(o&1&&(R(0,"div",22),Tn(1,25),V()),o&2){S(3);let e=Ue(1);k("nzSpan",24),A(),k("ngTemplateOutlet",e)}}function E1(o,g){if(o&1&&(R(0,"div",21),Tn(1,25),V()),o&2){S(3);let e=Ue(1),l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("ngTemplateOutlet",e)}}function z1(o,g){if(o&1&&(X(0,M1,2,2,"div",22),X(1,E1,2,7,"div",21)),o&2){let e=S(2).$implicit;Q(e.eruptFieldJson.edit.inputType.fullSpan?0:-1),A(),Q(e.eruptFieldJson.edit.inputType.fullSpan?-1:1)}}function k1(o,g){if(o&1){let e=ne();R(0,"div",21)(1,"se",8)(2,"nz-input-number",26),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()()()}if(o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("nzSize",l.size)("nzDisabled",l.isReadonly(e)),ge("ngModel",e.eruptFieldJson.edit.$value),k("nzPlaceHolder",e.eruptFieldJson.edit.placeHolder)("name",e.fieldName)("nzMin",e.eruptFieldJson.edit.numberType.min)("nzMax",e.eruptFieldJson.edit.numberType.max)("nzStep",1)}}function L1(o,g){if(o&1){let e=ne();R(0,"div",21)(1,"se",8)(2,"nz-input-wrapper",9)(3,"input",27),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()()()()}if(o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(2),k("nzSize",l.size),ge("ngModel",e.eruptFieldJson.edit.$value),k("name",e.fieldName)("placeholder",e.eruptFieldJson.edit.placeHolder)("disabled",l.isReadonly(e))}}function A1(o,g){if(o&1){let e=ne();R(0,"div",22)(1,"se",8)(2,"textarea",28),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()()()}if(o&2){let e=S(2).$implicit,l=S();k("nzSpan",24),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("name",e.fieldName)("nzAutosize",at(9,d1)),ge("ngModel",e.eruptFieldJson.edit.$value),k("placeholder",e.eruptFieldJson.edit.placeHolder)("disabled",l.isReadonly(e))}}function F1(o,g){if(o&1&&(R(0,"div",22)(1,"se",8),te(2,"erupt-markdown",29),V()()),o&2){let e=S(2).$implicit,l=S();k("nzSpan",24),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("eruptField",e)("erupt",l.eruptModel)("readonly",l.isReadonly(e))}}function N1(o,g){if(o&1&&(R(0,"div",30),Tn(1,25),V()),o&2){S(3);let e=Ue(3);k("nzXs",24),A(),k("ngTemplateOutlet",e)}}function D1(o,g){if(o&1&&(R(0,"div",21),Tn(1,25),V()),o&2){S(3);let e=Ue(3),l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("ngTemplateOutlet",e)}}function O1(o,g){if(o&1&&X(0,N1,2,2,"div",30)(1,D1,2,7,"div",21),o&2){let e,l=S(2).$implicit,c=S();Q((e=l.eruptFieldJson.edit.choiceType.type)===c.choiceEnum.RADIO?0:e===c.choiceEnum.SELECT?1:-1)}}function I1(o,g){if(o&1&&(R(0,"div",30),Tn(1,25),V()),o&2){S(3);let e=Ue(5);k("nzXs",24),A(),k("ngTemplateOutlet",e)}}function R1(o,g){if(o&1&&(R(0,"div",21),Tn(1,25),V()),o&2){S(3);let e=Ue(5),l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("ngTemplateOutlet",e)}}function P1(o,g){if(o&1&&X(0,I1,2,2,"div",30)(1,R1,2,7,"div",21),o&2){let e,l=S(2).$implicit,c=S();Q((e=l.eruptFieldJson.edit.multiChoiceType.type)===c.multiChoiceEnum.CHECKBOX?0:e===c.multiChoiceEnum.SELECT?1:-1)}}function V1(o,g){if(o&1&&te(0,"nz-option",18),o&2){let e=g.$implicit;k("nzLabel",e)("nzValue",e)}}function B1(o,g){if(o&1){let e=ne();R(0,"div",22)(1,"se",8)(2,"nz-select",31),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),De(3,V1,1,2,"nz-option",18,Ie),V()()()}if(o&2){let e=S(2).$implicit,l=S();k("nzSpan",24),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("nzAllowClear",!e.eruptFieldJson.edit.notNull)("nzDisabled",l.isReadonly(e))("nzSize",l.size),ge("ngModel",e.eruptFieldJson.edit.$value),k("name",e.fieldName)("nzPlaceHolder",e.eruptFieldJson.edit.placeHolder)("nzTokenSeparators",$t(13,u1,e.eruptFieldJson.edit.tagsType.joinSeparator))("nzMaxMultipleCount",e.eruptFieldJson.edit.tagsType.maxTagCount)("nzMode",e.eruptFieldJson.edit.tagsType.allowExtension?"tags":"multiple"),A(),Oe(e.componentValue)}}function H1(o,g){if(o&1&&(R(0,"div",22)(1,"se",8),te(2,"erupt-checkbox",32),V()()),o&2){let e=S(2).$implicit,l=S();k("nzSpan",24),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("eruptBuildModel",l.eruptBuildModel)("onlyRead",l.isReadonly(e))("eruptFieldModel",e)}}function W1(o,g){if(o&1){let e=ne();R(0,"div",21)(1,"se",8)(2,"nz-slider",33),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()()()}if(o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),ge("ngModel",e.eruptFieldJson.edit.$value),k("nzMarks",e.eruptFieldJson.edit.sliderType.marks)("nzDots",e.eruptFieldJson.edit.sliderType.dots)("nzStep",e.eruptFieldJson.edit.sliderType.step)("name",e.fieldName)("nzMax",e.eruptFieldJson.edit.sliderType.max)("nzMin",e.eruptFieldJson.edit.sliderType.min)("nzDisabled",l.isReadonly(e))}}function J1(o,g){if(o&1&&(R(0,"span"),he(1),V()),o&2){let e=S(3).$implicit;A(),Dt(e.eruptFieldJson.edit.rateType.character)}}function U1(o,g){if(o&1){let e=ne();R(0,"div",21)(1,"se",8)(2,"nz-rate",34),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),nt(3,J1,2,1,"ng-template",null,3,Qe),V()()()}if(o&2){let e=Ue(4),l=S(2).$implicit,c=S();k("nzXs",c.col.xs)("nzSm",c.col.sm)("nzMd",c.col.md)("nzLg",c.col.lg)("nzXl",c.col.xl)("nzXXl",c.col.xxl),A(),k("label",l.eruptFieldJson.edit.title)("required",l.eruptFieldJson.edit.notNull)("optionalHelp",l.eruptFieldJson.edit.desc),A(),ge("ngModel",l.eruptFieldJson.edit.$value),k("nzAllowClear",!l.eruptFieldJson.edit.notNull)("nzCharacter",l.eruptFieldJson.edit.rateType.character&&e)("nzDisabled",c.isReadonly(l))("nzCount",l.eruptFieldJson.edit.rateType.count)("name",l.fieldName)("nzAllowHalf",l.eruptFieldJson.edit.rateType.allowHalf)}}function $1(o,g){if(o&1&&(R(0,"div",21)(1,"se",8),te(2,"erupt-date",35),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("field",e)("size",l.size)("readonly",l.isReadonly(e))}}function j1(o,g){if(o&1&&(R(0,"div",21)(1,"se",8),te(2,"erupt-reference",36),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("eruptModel",l.eruptModel)("field",e)("size",l.size)("readonly",l.isReadonly(e))("parentEruptName",l.parentEruptName)}}function G1(o,g){if(o&1&&(R(0,"div",21)(1,"se",8),te(2,"erupt-reference",36),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("eruptModel",l.eruptModel)("field",e)("size",l.size)("readonly",l.isReadonly(e))("parentEruptName",l.parentEruptName)}}function K1(o,g){if(o&1){let e=ne();R(0,"div",21)(1,"se",8)(2,"nz-radio-group",37),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),R(3,"div",38)(4,"div",22)(5,"label",39),he(6),Se(7,"translate"),V()(),R(8,"div",22)(9,"label",39),he(10),Se(11,"translate"),V()()()()()()}if(o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),ge("ngModel",e.eruptFieldJson.edit.$value),k("name",e.fieldName)("nzSize",l.size)("nzDisabled",l.isReadonly(e)),A(2),k("nzSpan",12),A(),k("nzValue",!0),A(),$e(" ",Ee(7,19,e.eruptFieldJson.edit.boolType.trueText)," "),A(2),k("nzSpan",12),A(),k("nzValue",!1),A(),$e(" ",Ee(11,21,e.eruptFieldJson.edit.boolType.falseText)," ")}}function q1(o,g){if(o&1){let e=ne();R(0,"nz-upload",41),ye("nzFileListChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$viewValue,c)||(u.eruptFieldJson.edit.$viewValue=c),G(c)}),se("nzChange",function(c){j(e);let u=S(3).$implicit,b=S();return G(b.upLoadNzChange(c,u))}),R(1,"p",42),te(2,"i",43),V()()}if(o&2){let e=S(3).$implicit,l=S();k("nzAccept",at(9,p1))("nzDisabled",l.isReadonly(e))("nzMultiple",!1),ge("nzFileList",e.eruptFieldJson.edit.$viewValue),k("nzLimit",e.eruptFieldJson.edit.attachmentType.maxLimit)("nzPreview",l.previewImageHandler)("nzShowButton",e.eruptFieldJson.edit.$viewValue&&e.eruptFieldJson.edit.$viewValue.length!=e.eruptFieldJson.edit.attachmentType.maxLimit||e.eruptFieldJson.edit.attachmentType.maxLimit==0)("nzHeaders",pu(10,Bm,l.tokenService.get().token,l.eruptModel.eruptName,l.parentEruptName||""))("nzAction",l.dataService.upload+l.eruptModel.eruptName+"/"+e.fieldName)}}function X1(o,g){if(o&1&&(R(0,"p",48),he(1),Se(2,"translate"),R(3,"span"),he(4),V()()),o&2){let e=S(5).$implicit;A(),$e(" ",Ee(2,2,"component.attachment.upload_format")," \uFF1A"),A(3),Dt(e.eruptFieldJson.edit.attachmentType.fileTypes.join("\xA0 / \xA0"))}}function Q1(o,g){if(o&1){let e=ne();R(0,"nz-upload",45),se("nzChange",function(c){j(e);let u=S(4).$implicit,b=S();return G(b.upLoadNzChange(c,u))}),ye("nzFileListChange",function(c){j(e);let u=S(4).$implicit;return Ce(u.eruptFieldJson.edit.$viewValue,c)||(u.eruptFieldJson.edit.$viewValue=c),G(c)}),R(1,"p",42),te(2,"i",46),V(),R(3,"p",47),he(4),Se(5,"translate"),V(),X(6,X1,5,4,"p",48),R(7,"p",48),he(8),V()()}if(o&2){let e=S(4).$implicit,l=S();k("nzAccept",l.uploadAccept(e.eruptFieldJson.edit.attachmentType.fileTypes))("nzLimit",e.eruptFieldJson.edit.attachmentType.maxLimit)("nzDisabled",l.isReadonly(e)||e.eruptFieldJson.edit.$viewValue.length==e.eruptFieldJson.edit.attachmentType.maxLimit),ge("nzFileList",e.eruptFieldJson.edit.$viewValue),k("nzHeaders",pu(11,Bm,l.tokenService.get().token,l.eruptModel.eruptName,l.parentEruptName||""))("nzAction",l.dataService.upload+l.eruptModel.eruptName+"/"+e.fieldName),A(4),Dt(Ee(5,9,"component.attachment.upload_hint")),A(2),Q(e.eruptFieldJson.edit.attachmentType.fileTypes.length>0?6:-1),A(2),Dt(e.eruptFieldJson.edit.placeHolder)}}function Y1(o,g){if(o&1&&X(0,Q1,9,15,"nz-upload",44),o&2){let e=S(3).$implicit;Q(e.eruptFieldJson.edit.$viewValue?0:-1)}}function Z1(o,g){if(o&1&&(R(0,"div",22)(1,"se",8),X(2,q1,3,14,"nz-upload",40)(3,Y1,1,1),V()()),o&2){let e,l=S(2).$implicit,c=S();k("nzSpan",24),A(),k("label",l.eruptFieldJson.edit.title)("required",l.eruptFieldJson.edit.notNull)("optionalHelp",l.eruptFieldJson.edit.desc),A(),Q((e=l.eruptFieldJson.edit.attachmentType.type)===c.attachmentEnum.IMAGE?2:e===c.attachmentEnum.BASE?3:-1)}}function ev(o,g){if(o&1&&(R(0,"div",21)(1,"se",8),te(2,"erupt-auto-complete",49),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("size",l.size)("field",e)("parentEruptName",l.parentEruptName)("eruptModel",l.eruptModel)}}function tv(o,g){if(o&1){let e=ne();R(0,"ckeditor",51),ye("valueChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit,l=S();ge("value",e.eruptFieldJson.edit.$value),k("readonly",l.isReadonly(e))("eruptField",e)("erupt",l.eruptModel)}}function nv(o,g){if(o&1&&te(0,"erupt-ueditor",29),o&2){let e=S(3).$implicit,l=S();k("eruptField",e)("erupt",l.eruptModel)("readonly",l.isReadonly(e))}}function iv(o,g){if(o&1&&(R(0,"div",22)(1,"se",8),X(2,tv,1,4,"ckeditor",50),X(3,nv,1,3,"erupt-ueditor",29),V()()),o&2){let e=S(2).$implicit,l=S();k("nzSpan",24),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),Q(e.eruptFieldJson.edit.htmlEditorType.value===l.htmlEditorType.CKEDITOR?2:-1),A(),Q(e.eruptFieldJson.edit.htmlEditorType.value===l.htmlEditorType.UEDITOR?3:-1)}}function rv(o,g){if(o&1){let e=ne();R(0,"div",22)(1,"iframe",52),Se(2,"safeUrl"),se("load",function(c){j(e);let u=S(3);return G(u.iframeHeight(c))}),V()()}if(o&2){let e=S(2).$implicit,l=S();k("nzSpan",24),A(),k("src",Ee(2,2,l.dataService.getFieldTplPath(l.eruptBuildModel.eruptModel.eruptName,e.fieldName)),Yo)}}function ov(o,g){if(o&1){let e=ne();R(0,"amap",54),ye("valueChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;ge("value",e.eruptFieldJson.edit.$value),k("mapType",e.eruptFieldJson.edit.mapType)}}function av(o,g){if(o&1&&(R(0,"div",22)(1,"se",8),X(2,ov,1,2,"amap",53),V()()),o&2){let e=S(2).$implicit,l=S();k("nzSpan",24),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),Q(l.loading?-1:2)}}function lv(o,g){if(o&1&&te(0,"div",21),o&2){let e=S(3);k("nzXs",e.col.xs)("nzSm",e.col.sm)("nzMd",e.col.md)("nzLg",e.col.lg)("nzXl",e.col.xl)("nzXXl",e.col.xxl)}}function sv(o,g){if(o&1&&(R(0,"div",23)(1,"nz-collapse",55)(2,"nz-collapse-panel",56),te(3,"erupt-edit-type",57),V()()()),o&2){let e=S(2).$implicit,l=S();k("nzSpan",24),A(),k("nzExpandIconPosition","end"),A(),k("nzActive",!0)("nzHeader",e.eruptFieldJson.edit.title),A(),k("eruptBuildModel",$t(5,f1,l.eruptBuildModel.combineErupts[e.fieldName]))}}function cv(o,g){if(o&1&&(R(0,"div",22)(1,"se",8),te(2,"erupt-code-editor",58),V()()),o&2){let e=S(3).$implicit,l=S();k("nzSpan",24),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(),k("edit",e.eruptFieldJson.edit)("readonly",l.isReadonly(e))("height",e.eruptFieldJson.edit.codeEditType.height)("language",e.eruptFieldJson.edit.codeEditType.language)}}function dv(o,g){if(o&1&&X(0,cv,3,8,"div",22),o&2){let e=S(3);Q(e.loading?-1:0)}}function uv(o,g){if(o&1){let e=ne();te(0,"img",61),R(1,"button",62),se("click",function(){j(e);let c=S(4).$implicit,u=S();return G(u.clearSign(c.eruptFieldJson.edit))}),te(2,"span",63),V()}if(o&2){let e=S(4).$implicit;k("src",e.eruptFieldJson.edit.$value,Qo)}}function pv(o,g){if(o&1){let e=ne();R(0,"button",64),se("click",function(){j(e);let c=S(4).$implicit,u=S();return G(u.openSign(c.eruptFieldJson.edit))}),te(1,"span",65),V()}}function fv(o,g){if(o&1&&(R(0,"div",22)(1,"se",8)(2,"div",59),X(3,uv,3,1),X(4,pv,2,0,"button",60),V()()()),o&2){let e=S(3).$implicit;k("nzSpan",24),A(),k("label",e.eruptFieldJson.edit.title)("required",e.eruptFieldJson.edit.notNull)("optionalHelp",e.eruptFieldJson.edit.desc),A(2),Q(e.eruptFieldJson.edit.$value?3:-1),A(),Q(e.eruptFieldJson.edit.$value?-1:4)}}function mv(o,g){if(o&1&&X(0,fv,5,6,"div",22),o&2){let e=S(3);Q(e.loading?-1:0)}}function hv(o,g){if(o&1&&(R(0,"div",24),te(1,"nz-divider",66),V()),o&2){let e=S(2).$implicit;k("nzSpan",24),A(),k("nzDashed",!1)("nzText",e.eruptFieldJson.edit.title)}}function _v(o,g){}function gv(o,g){if(o&1&&X(0,z1,2,2)(1,k1,3,17,"div",21)(2,L1,4,14,"div",21)(3,A1,3,10,"div",22)(4,F1,3,7,"div",22)(5,O1,2,1)(6,P1,2,1)(7,B1,5,15,"div",22)(8,H1,3,7,"div",22)(9,W1,3,17,"div",21)(10,U1,5,16,"div",21)(11,$1,3,12,"div",21)(12,j1,3,14,"div",21)(13,G1,3,14,"div",21)(14,K1,12,23,"div",21)(15,Z1,4,5,"div",22)(16,ev,3,13,"div",21)(17,iv,4,6,"div",22)(18,rv,3,4,"div",22)(19,av,3,5,"div",22)(20,lv,1,6,"div",21)(21,sv,4,7,"div",23)(22,dv,1,1)(23,mv,1,1)(24,hv,2,3,"div",24)(25,_v,0,0),o&2){let e,l=S().$implicit,c=S();Q((e=l.eruptFieldJson.edit.type)===c.editType.INPUT?0:e===c.editType.NUMBER?1:e===c.editType.COLOR?2:e===c.editType.TEXTAREA?3:e===c.editType.MARKDOWN?4:e===c.editType.CHOICE?5:e===c.editType.MULTI_CHOICE?6:e===c.editType.TAGS?7:e===c.editType.CHECKBOX?8:e===c.editType.SLIDER?9:e===c.editType.RATE?10:e===c.editType.DATE?11:e===c.editType.REFERENCE_TREE?12:e===c.editType.REFERENCE_TABLE?13:e===c.editType.BOOLEAN?14:e===c.editType.ATTACHMENT?15:e===c.editType.AUTO_COMPLETE?16:e===c.editType.HTML_EDITOR?17:e===c.editType.TPL?18:e===c.editType.MAP?19:e===c.editType.EMPTY?20:e===c.editType.COMBINE?21:e===c.editType.CODE_EDITOR?22:e===c.editType.SIGNATURE?23:e===c.editType.DIVIDE?24:25)}}function Cv(o,g){if(o&1&&(nt(0,x1,3,5,"ng-template",null,0,Qe)(2,T1,2,9,"ng-template",null,1,Qe)(4,S1,2,8,"ng-template",null,2,Qe),X(6,gv,26,1)),o&2){let e=g.$implicit;A(6),Q(e.eruptFieldJson.edit&&e.eruptFieldJson.edit.show&&e.eruptFieldJson.edit.title?6:-1)}}function yv(o,g){if(o&1&&te(0,"tab-table",68),o&2){let e=S(2).$implicit,l=S(2);k("onlyRead",l.isReadonly(l.eruptModel.eruptFieldModelMap.get(e.key)))("tabErupt",Ei(3,Hm,e.value,l.eruptModel.eruptFieldModelMap.get(e.key)))("eruptBuildModel",l.eruptBuildModel)}}function vv(o,g){if(o&1&&te(0,"tab-table",69),o&2){let e=S(2).$implicit,l=S(2);k("onlyRead",l.isReadonly(l.eruptModel.eruptFieldModelMap.get(e.key)))("tabErupt",Ei(4,Hm,e.value,l.eruptModel.eruptFieldModelMap.get(e.key)))("eruptBuildModel",l.eruptBuildModel)("mode","refer-add")}}function wv(o,g){if(o&1&&te(0,"erupt-tab-tree",70),o&2){let e=S(2).$implicit,l=S(2);k("eruptFieldModel",l.eruptModel.eruptFieldModelMap.get(e.key))("eruptBuildModel",l.eruptBuildModel)("onlyRead",l.isReadonly(l.eruptModel.eruptFieldModelMap.get(e.key)))}}function bv(o,g){if(o&1&&(R(0,"nz-tab",67),X(1,yv,1,6,"tab-table",68)(2,vv,1,7,"tab-table",69)(3,wv,1,3,"erupt-tab-tree",70),V()),o&2){let e,l=S().$implicit,c=Ue(2),u=S(2);k("nzTitle",c),A(),Q((e=u.eruptModel.eruptFieldModelMap.get(l.key).eruptFieldJson.edit.type)===u.editType.TAB_TABLE_ADD?1:e===u.editType.TAB_TABLE_REFER?2:e===u.editType.TAB_TREE?3:-1)}}function xv(o,g){if(o&1&&te(0,"i",71),o&2){let e=S(2).$implicit,l=S(2);k("nzTooltipTitle",l.eruptModel.eruptFieldModelMap.get(e.key).eruptFieldJson.edit.desc)}}function Tv(o,g){if(o&1&&(he(0),X(1,xv,1,1,"i",71)),o&2){let e=S().$implicit,l=S(2);$e(" ",l.eruptModel.eruptFieldModelMap.get(e.key).eruptFieldJson.edit.title," "),A(),Q(l.eruptModel.eruptFieldModelMap.get(e.key).eruptFieldJson.edit.desc?1:-1)}}function Sv(o,g){if(o&1&&(X(0,bv,4,2,"nz-tab",67),nt(1,Tv,2,2,"ng-template",null,4,Qe)),o&2){let e=g.$implicit,l=S(2);Q(l.eruptModel.eruptFieldModelMap.get(e.key).eruptFieldJson.edit.show?0:-1)}}function Mv(o,g){if(o&1&&(R(0,"nz-tabset",7),De(1,Sv,3,1,null,null,Ie),V()),o&2){let e=S();k("nzType","card"),A(),Oe(e.tabErupts)}}var _i=(()=>{class o{dataService;i18n;differs;dataHandlerService;tokenService;modal;msg;loading=!1;eruptBuildModel;col=vr[3];size="large";layout="vertical";mode;parentEruptName;readonly=!1;dynamicByFieldModels;eruptModel;editType=be;htmlEditorType=Zf;choiceEnum=ra;multiChoiceEnum=dc;attachmentEnum=em;uploadFilesStatus={};supportCopy;iframeHeight=wm;tabErupts=[];constructor(e,l,c,u,b,N,M){this.dataService=e,this.i18n=l,this.differs=c,this.dataHandlerService=u,this.tokenService=b,this.modal=N,this.msg=M,this.supportCopy="clipboard"in navigator}ngOnInit(){this.eruptModel=this.eruptBuildModel.eruptModel;let e=this.eruptModel.eruptJson.layout;e&&e.formSize==oa.FULL_LINE&&(this.col=vr[1]);for(let l of this.eruptModel.eruptFieldModels){switch(l.eruptFieldJson.edit.type){case be.TAB_TABLE_REFER:case be.TAB_TABLE_ADD:case be.TAB_TREE:this.tabErupts.push({key:l.fieldName,value:this.eruptBuildModel.tabErupts[l.fieldName]});break}l.eruptFieldJson.edit.$valueDiff=this.differs.find(l.eruptFieldJson.edit).create(),l.eruptFieldJson.edit.$valueSubject=new ec(null);let c=l.eruptFieldJson.edit;c.type==be.ATTACHMENT&&(c.$viewValue||(c.$viewValue=[])),l.eruptFieldJson.edit.dynamic&&(this.dynamicByFieldModels||(this.dynamicByFieldModels=[]),this.dynamicByFieldModels.push(l),this.dynamicByCheck(l))}}isReadonly(e){if(this.readonly)return!0;let l=e.eruptFieldJson.edit.readOnly;return this.mode===mn.ADD?l.add:l.edit}ngDoCheck(){for(let e of this.eruptModel.eruptFieldModels)e.eruptFieldJson.edit.$valueDiff?.diff(e.eruptFieldJson.edit)&&e.eruptFieldJson.edit.$valueSubject.next(e.eruptFieldJson.edit.$value);if(this.dynamicByFieldModels)for(let e of this.dynamicByFieldModels){let l=e.eruptFieldJson.edit.dynamic,c=this.eruptModel.eruptFieldModelMap.get(l.dependField).eruptFieldJson.edit;c.$beforeValue!=c.$value&&(c.$beforeValue=c.$value,this.dynamicByFieldModels.forEach(u=>{this.dynamicByCheck(u)}))}}dynamicByCheck(e){let l=e.eruptFieldJson.edit.dynamic,c=this.eruptModel.eruptFieldModelMap.get(l.dependField).eruptFieldJson.edit.$value;try{!!new Function("value","return "+l.condition)(c)?(this.dynamicMatch(e,l.noMatch,!1),this.dynamicMatch(e,l.match,!0)):(this.dynamicMatch(e,l.match,!1),this.dynamicMatch(e,l.noMatch,!0))}catch(u){console.error(e.fieldName+" DynamicBy expr err: "+u)}}dynamicMatch(e,l,c){switch(c&&(e.eruptFieldJson.edit.show=!0),l){case ma.SHOW:e.eruptFieldJson.edit.show=c;break;case ma.HIDE:e.eruptFieldJson.edit.show=!c;break;case ma.NOTNULL:e.eruptFieldJson.edit.notNull=c;break;case ma.READONLY:e.eruptFieldJson.edit.readOnly={edit:c,add:c};break}}ngOnDestroy(){}eruptEditValidate(){for(let e in this.uploadFilesStatus)if(!this.uploadFilesStatus[e])return this.msg.warning("\u9644\u4EF6\u4E0A\u4F20\u4E2D\u8BF7\u7A0D\u540E"),!1;return!0}upLoadNzChange({file:e,fileList:l},c){let u=e.status;e.status==="uploading"&&(this.uploadFilesStatus[e.uid]=!1),u==="done"?(this.uploadFilesStatus[e.uid]=!0,e.response.status===Nn.ERROR&&(this.modal.error({nzTitle:"ERROR",nzContent:e.response.message}),c.eruptFieldJson.edit.$viewValue.pop())):u==="error"&&(this.uploadFilesStatus[e.uid]=!0,this.msg.error(`${e.name} \u4E0A\u4F20\u5931\u8D25`))}previewImageHandler=e=>{e.url?window.open(e.url):e.response&&e.response.data&&window.open(Pe.previewAttachment(e.response.data))};copy(e){e||(e=""),navigator.clipboard.writeText(e).then(()=>{this.msg.success(this.i18n.fanyi("global.copy_success"))})}uploadAccept(e){return!e||e.length==0?null:e.map(l=>"."+l)}fillForm(e){for(let l in e)this.eruptModel.eruptFieldModelMap.get(l)&&(this.eruptModel.eruptFieldModelMap.get(l).eruptFieldJson.edit.$value=e[l])}clearSign(e){e.$value=null}openSign(e){this.modal.create({nzTitle:"\u7B7E\u540D",nzContent:Vm,nzMaskClosable:!1,nzWidth:"50%",nzOkText:"\u4FDD\u5B58",nzCancelText:"\u53D6\u6D88",nzOnOk:l=>{e.$value=l.getSign()},nzOnCancel:()=>{}})}static \u0275fac=function(l){return new(l||o)(le(Pe),le(qt),le(rc),le(nn),le(Ui),le(fn),le(It))};static \u0275cmp=Fe({type:o,selectors:[["erupt-edit-type"]],inputs:{loading:"loading",eruptBuildModel:"eruptBuildModel",col:"col",size:"size",layout:"layout",mode:"mode",parentEruptName:"parentEruptName",readonly:"readonly"},standalone:!1,decls:5,vars:3,consts:[["inputSe",""],["choiceTpl",""],["multiChoiceTpl",""],["characterIcon",""],["tabTitle",""],["nz-row","",3,"nzGutter"],["nz-form","","se-container","",1,"erupt-form",2,"width","100%",3,"nzLayout"],[2,"margin-top","5px",3,"nzType"],[3,"label","required","optionalHelp"],["nzAllowClear","",1,"erupt-input"],[1,"erupt-input"],["nzInputAddonBefore",""],["nz-input","","autocomplete","off","nz-tooltip","","nzTooltipTrigger","focus","nzTooltipPlacement","topLeft",3,"ngModelChange","nzSize","nzTooltipTitle","type","maxLength","ngModel","name","placeholder","disabled"],["nz-icon","","nzType","copy","nzTheme","outline",2,"cursor","pointer",3,"click"],["nz-input","","autocomplete","off",3,"ngModelChange","type","maxLength","placeholder","ngModel","name","disabled"],[2,"min-width","70px",3,"ngModel","name"],["nzInputAddonAfter",""],[2,"min-width","70px",3,"ngModelChange","ngModel","name"],[3,"nzLabel","nzValue"],[3,"eruptModel","eruptField","size","eruptParentName","editType","readonly"],[3,"eruptModel","eruptField","size","eruptParentName","readonly"],["nz-col","",3,"nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],["nz-col","",3,"nzSpan"],["nz-col","",2,"margin-top","8px",3,"nzSpan"],["nz-col","",2,"margin-bottom","0",3,"nzSpan"],[3,"ngTemplateOutlet"],[1,"erupt-input",3,"ngModelChange","nzSize","nzDisabled","ngModel","nzPlaceHolder","name","nzMin","nzMax","nzStep"],["nz-input","","autocomplete","off","nz-tooltip","","nzTooltipTrigger","focus","nzTooltipPlacement","topLeft","type","color",3,"ngModelChange","nzSize","ngModel","name","placeholder","disabled"],["nz-input","",1,"erupt-input",3,"ngModelChange","name","nzAutosize","ngModel","placeholder","disabled"],[3,"eruptField","erupt","readonly"],["nz-col","",3,"nzXs"],[3,"ngModelChange","nzAllowClear","nzDisabled","nzSize","ngModel","name","nzPlaceHolder","nzTokenSeparators","nzMaxMultipleCount","nzMode"],[2,"max-height","20px",3,"eruptBuildModel","onlyRead","eruptFieldModel"],[1,"erupt-input",3,"ngModelChange","ngModel","nzMarks","nzDots","nzStep","name","nzMax","nzMin","nzDisabled"],[3,"ngModelChange","ngModel","nzAllowClear","nzCharacter","nzDisabled","nzCount","name","nzAllowHalf"],[3,"field","size","readonly"],[3,"eruptModel","field","size","readonly","parentEruptName"],[1,"erupt-input",3,"ngModelChange","ngModel","name","nzSize","nzDisabled"],["nz-row",""],["nz-radio","",1,"ellipsis-radio","stander-line-height",3,"nzValue"],["nzListType","picture-card",3,"nzAccept","nzDisabled","nzMultiple","nzFileList","nzLimit","nzPreview","nzShowButton","nzHeaders","nzAction"],["nzListType","picture-card",3,"nzFileListChange","nzChange","nzAccept","nzDisabled","nzMultiple","nzFileList","nzLimit","nzPreview","nzShowButton","nzHeaders","nzAction"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","plus"],["nzType","drag",3,"nzAccept","nzLimit","nzDisabled","nzFileList","nzHeaders","nzAction"],["nzType","drag",3,"nzChange","nzFileListChange","nzAccept","nzLimit","nzDisabled","nzFileList","nzHeaders","nzAction"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"],[1,"ant-upload-hint"],[3,"size","field","parentEruptName","eruptModel"],[3,"value","readonly","eruptField","erupt"],[3,"valueChange","value","readonly","eruptField","erupt"],[2,"width","100%","border","none","vertical-align","bottom",3,"load","src"],[3,"value","mapType"],[3,"valueChange","value","mapType"],["nzAccordion","",3,"nzExpandIconPosition"],[3,"nzActive","nzHeader"],[3,"eruptBuildModel"],[3,"edit","readonly","height","language"],[2,"width","100%","height","200px","border","1px solid #d9d9d9","border-radius","2px"],["nz-button","","nzType","default","nzShape","circle",2,"position","absolute",";top","45%","left","50%","transform","translate(-50%)"],["alt","sign",2,"width","100%","height","100%",3,"src"],["nz-button","","nzType","default","nzShape","circle",2,"position","absolute","right","16px","top","16px",3,"click"],["nz-icon","","nzType","clear","nzTheme","outline"],["nz-button","","nzType","default","nzShape","circle",2,"position","absolute",";top","45%","left","50%","transform","translate(-50%)",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],[3,"nzDashed","nzText"],[3,"nzTitle"],[3,"onlyRead","tabErupt","eruptBuildModel"],[3,"onlyRead","tabErupt","eruptBuildModel","mode"],[3,"eruptFieldModel","eruptBuildModel","onlyRead"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","",3,"nzTooltipTitle"]],template:function(l,c){l&1&&(R(0,"div",5)(1,"form",6),De(2,Cv,7,1,null,null,Ie),V(),X(4,Mv,3,1,"nz-tabset",7),V()),l&2&&(k("nzGutter",16),A(),k("nzLayout",c.layout),A(),Oe(c.eruptModel.eruptFieldModels),A(2),Q(c.eruptBuildModel.tabErupts?4:-1))},styles:["[_nghost-%COMP%]     label[nz-checkbox]{max-width:140px;line-height:initial;margin-left:0;margin-bottom:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]     label[nz-radio]{min-width:120px}[_nghost-%COMP%]     .edui-editor{width:100%!important}[_nghost-%COMP%]     se{width:100%}[_nghost-%COMP%]     se .ant-form-item-label{width:auto!important;text-overflow:ellipsis;white-space:nowrap;display:inline-flex}[_nghost-%COMP%]     nz-input-group{width:100%}[_nghost-%COMP%]     .ant-collapse-header{padding:8px 16px!important}[_nghost-%COMP%]     .erupt-input{width:100%}[_nghost-%COMP%]     .stander-line-height{line-height:38px}[_nghost-%COMP%]     .ant-slider-with-marks{margin-bottom:0}[_nghost-%COMP%]     form.ant-form-horizontal se .ant-form-item-label{max-width:120px;min-width:70px}[_nghost-%COMP%]     .se__horizontal .se__item .se__label{justify-content:normal!important}[_nghost-%COMP%]     .erupt-form>div{margin-bottom:8px}[_nghost-%COMP%]     .ant-input-affix-wrapper-disabled{pointer-events:auto}[_nghost-%COMP%]     .ant-input-disabled, [_nghost-%COMP%]     .ant-input-number-disabled{pointer-events:auto}[_nghost-%COMP%]     .ant-input[type=color]{height:28px}[_nghost-%COMP%]     .ant-tabs{width:100%;border:1px solid #e8e8e8}[_nghost-%COMP%]     .ant-tabs .ant-tabs-nav{margin:0}[_nghost-%COMP%]     .ant-tabs .ant-tabs-tab-active{border-bottom:1px solid #e8e8e8!important}[_nghost-%COMP%]     .ant-tabs .ant-tabs-tab{padding:8px 30px;border-top:none;border-left:none;margin-left:0!important}[_nghost-%COMP%]     .ant-tabs .ant-tabs-content{padding:12px}[data-theme=dark]   [_nghost-%COMP%]     .ant-tabs{border:1px solid #434343}[data-theme=dark]   [_nghost-%COMP%]     .ant-tabs .ant-tabs-nav{margin:0}[data-theme=dark]   [_nghost-%COMP%]     .ant-tabs .ant-tabs-tab-active{border-bottom:1px solid #434343!important}"]})}return o})();var zv=["carousel"],Wm=(o,g)=>({eruptBuildModel:o,eruptFieldModel:g});function kv(o,g){if(o&1&&(R(0,"div",9),te(1,"img",11),Se(2,"safeUrl"),V()),o&2){let e=g.$implicit;A(),k("src",Ee(2,1,e),Qo)}}function Lv(o,g){if(o&1){let e=ne();R(0,"li",12)(1,"img",13),Se(2,"safeUrl"),se("click",function(){let c=j(e).$index,u=S(4);return G(u.goToCarouselIndex(c))}),V()()}if(o&2){let e=g.$implicit,l=g.$index,c=S(4);A(),Cl(c.currIndex==l?"":"grayscale"),k("src",Ee(2,3,e),Qo)}}function Av(o,g){if(o&1&&(R(0,"ul",10),De(1,Lv,3,5,"li",12,Ie),V()),o&2){let e=S(3);A(),Oe(e.paths)}}function Fv(o,g){if(o&1&&(R(0,"nz-carousel",8,0),De(2,kv,3,3,"div",9,Ie),V(),X(4,Av,3,0,"ul",10)),o&2){let e=S(2);A(2),Oe(e.paths),A(2),Q(e.paths.length>1?4:-1)}}function Nv(o,g){if(o&1&&(R(0,"div",9),te(1,"embed",14),Se(2,"safeUrl"),V()),o&2){let e=g.$implicit;A(),k("src",Ee(2,1,e),Yo)}}function Dv(o,g){if(o&1&&(R(0,"nz-carousel",1),De(1,Nv,3,3,"div",9,Ie),V()),o&2){let e=S(2);A(),Oe(e.paths)}}function Ov(o,g){if(o&1&&(te(0,"iframe",2),Se(1,"safeUrl")),o&2){let e=S(2);k("src",Ee(1,2,e.value),Yo)("frameBorder",0)}}function Iv(o,g){if(o&1&&(te(0,"iframe",2),Se(1,"safeUrl")),o&2){let e=S(2);k("src",Ee(1,2,e.value),Yo)("frameBorder",0)}}function Rv(o,g){if(o&1&&(te(0,"div",3),Se(1,"safeHtml")),o&2){let e=S(2);k("innerHTML",Ee(1,1,e.value),Mi)}}function Pv(o,g){if(o&1&&(te(0,"div",3),Se(1,"safeHtml")),o&2){let e=S(2);k("innerHTML",Ee(1,1,e.value),Mi)}}function Vv(o,g){if(o&1&&(R(0,"div",4),te(1,"nz-qrcode",15),V()),o&2){let e=S(2);A(),k("nzValue",e.value)("nzLevel","M")}}function Bv(o,g){if(o&1&&te(0,"amap",5),o&2){let e=S(2);k("value",e.value)("readonly",!0)("zoom",18)}}function Hv(o,g){if(o&1&&te(0,"img",6),o&2){let e=S(2);k("src",e.value,Qo)}}function Wv(o,g){if(o&1&&te(0,"tab-table",16),o&2){let e=S(3);k("onlyRead",!0)("tabErupt",Ei(3,Wm,e.eruptBuildModel.tabErupts[e.view.eruptFieldModel.fieldName],e.eruptBuildModel.eruptModel.eruptFieldModelMap.get(e.view.eruptFieldModel.fieldName)))("eruptBuildModel",e.eruptBuildModel)}}function Jv(o,g){if(o&1&&te(0,"tab-table",17),o&2){let e=S(3);k("onlyRead",!0)("tabErupt",Ei(4,Wm,e.eruptBuildModel.tabErupts[e.view.eruptFieldModel.fieldName],e.eruptBuildModel.eruptModel.eruptFieldModelMap.get(e.view.eruptFieldModel.fieldName)))("eruptBuildModel",e.eruptBuildModel)("mode","refer-add")}}function Uv(o,g){if(o&1&&te(0,"erupt-tab-tree",18),o&2){let e=S(3);k("onlyRead",!0)("eruptFieldModel",e.eruptBuildModel.eruptModel.eruptFieldModelMap.get(e.view.eruptFieldModel.fieldName))("eruptBuildModel",e.eruptBuildModel)}}function $v(o,g){if(o&1&&te(0,"erupt-checkbox",19),o&2){let e=S(3);k("eruptBuildModel",e.eruptBuildModel)("onlyRead",!0)("eruptFieldModel",e.eruptBuildModel.eruptModel.eruptFieldModelMap.get(e.view.eruptFieldModel.fieldName))}}function jv(o,g){if(o&1&&te(0,"erupt-multi-choice",20),o&2){let e=S(3);k("eruptModel",e.eruptBuildModel.eruptModel)("eruptField",e.eruptBuildModel.eruptModel.eruptFieldModelMap.get(e.view.eruptFieldModel.fieldName))("readonly",!0)}}function Gv(o,g){if(o&1&&(R(0,"nz-spin",7),X(1,Wv,1,6,"tab-table",16)(2,Jv,1,7,"tab-table",17)(3,Uv,1,3,"erupt-tab-tree",18)(4,$v,1,3,"erupt-checkbox",19)(5,jv,1,3,"erupt-multi-choice",20),V()),o&2){let e,l=S(2);k("nzSpinning",l.loading),A(),Q((e=l.view.eruptFieldModel.eruptFieldJson.edit.type)===l.editType.TAB_TABLE_ADD?1:e===l.editType.TAB_TABLE_REFER?2:e===l.editType.TAB_TREE?3:e===l.editType.CHECKBOX?4:e===l.editType.MULTI_CHOICE?5:-1)}}function Kv(o,g){if(o&1&&X(0,Fv,5,1)(1,Dv,3,0,"nz-carousel",1)(2,Ov,2,4,"iframe",2)(3,Iv,2,4,"iframe",2)(4,Rv,2,3,"div",3)(5,Pv,2,3,"div",3)(6,Vv,2,2,"div",4)(7,Bv,1,3,"amap",5)(8,Hv,1,1,"img",6)(9,Gv,6,2,"nz-spin",7),o&2){let e,l=S();Q((e=l.view.viewType)===l.viewType.IMAGE?0:e===l.viewType.SWF?1:e===l.viewType.LINK_DIALOG?2:e===l.viewType.ATTACHMENT_DIALOG?3:e===l.viewType.HTML?4:e===l.viewType.MOBILE_HTML?5:e===l.viewType.QR_CODE?6:e===l.viewType.MAP?7:e===l.viewType.IMAGE_BASE64?8:e===l.viewType.TAB_VIEW?9:-1)}}var In=(()=>{class o{dataService;dataHandler;view;value;eruptName;eruptBuildModel;loading=!1;show=!1;paths=[];editType=be;viewType=Ge;constructor(e,l){this.dataService=e,this.dataHandler=l}ngOnInit(){switch(this.view.viewType){case Ge.TAB_VIEW:this.loading=!0,this.dataService.queryEruptDataById(this.eruptBuildModel.eruptModel.eruptName,this.value).subscribe(e=>{this.dataHandler.objectToEruptValue(e,this.eruptBuildModel),this.loading=!1});break;case Ge.ATTACHMENT_DIALOG:case Ge.ATTACHMENT:case Ge.DOWNLOAD:case Ge.IMAGE:case Ge.SWF:if(this.value){if(this.view.eruptFieldModel.eruptFieldJson.edit.type===be.ATTACHMENT){let e=this.view.eruptFieldModel.eruptFieldJson.edit.attachmentType,l=this.value.split(e.fileSeparator);for(let c of l)this.paths.push(Pe.previewAttachment(c))}else{let e=this.value.split("|");for(let l of e)this.paths.push(Pe.previewAttachment(l))}this.view.viewType==Ge.ATTACHMENT_DIALOG&&(this.value=[Pe.previewAttachment(this.value)])}break}}ngAfterViewInit(){setTimeout(()=>{this.show=!0},200)}carouselComponent;currIndex=0;goToCarouselIndex(e){this.carouselComponent.goTo(e),this.currIndex=e}static \u0275fac=function(l){return new(l||o)(le(Pe),le(nn))};static \u0275cmp=Fe({type:o,selectors:[["erupt-view-type"]],viewQuery:function(l,c){if(l&1&&kt(zv,5),l&2){let u;Lt(u=At())&&(c.carouselComponent=u.first)}},inputs:{view:"view",value:"value",eruptName:"eruptName",eruptBuildModel:"eruptBuildModel"},standalone:!1,decls:1,vars:1,consts:[["carousel",""],[1,"text-center"],[2,"display","block","width","100%","height","650px","vertical-align","bottom",3,"src","frameBorder"],[1,"view_inner_html",3,"innerHTML"],[2,"width","100%","text-align","center"],[3,"value","readonly","zoom"],[1,"full-max-width",2,"display","inline-block",3,"src"],[3,"nzSpinning"],["onselectstart","return false;","unselectable","on",1,"text-center",2,"-moz-user-select","none"],["nz-carousel-content",""],[1,"carousel-ul"],["ondragstart","return false;",1,"full-max-width",2,"display","inline-block",3,"src"],[2,"list-style","none","margin-right","8px"],["ondragstart","return false;",2,"height","80px",3,"click","src"],["align","center","type","application/x-shockwave-flash","quality","high",2,"width","100%","height","600px",3,"src"],[3,"nzValue","nzLevel"],[3,"onlyRead","tabErupt","eruptBuildModel"],[3,"onlyRead","tabErupt","eruptBuildModel","mode"],[3,"onlyRead","eruptFieldModel","eruptBuildModel"],[3,"eruptBuildModel","onlyRead","eruptFieldModel"],[3,"eruptModel","eruptField","readonly"]],template:function(l,c){l&1&&X(0,Kv,10,1),l&2&&Q(c.show?0:-1)},styles:["[_nghost-%COMP%]     [nz-carousel-content]{height:auto!important}[_nghost-%COMP%]     .slick-list{height:auto!important}[_nghost-%COMP%]     .slick-track{height:auto!important}[_nghost-%COMP%]     .grayscale{filter:grayscale(100%)}[_nghost-%COMP%]     .carousel-ul{display:flex;justify-content:center;height:80px;width:100%;text-align:center;margin-top:12px;margin-bottom:0;padding-left:0;overflow:auto}[_nghost-%COMP%]     .view_inner_html{overflow:auto}[_nghost-%COMP%]     .view_inner_html figure.table{overflow:auto}[_nghost-%COMP%]     .view_inner_html figure.table table{width:100%}[_nghost-%COMP%]     .view_inner_html figure.table table tr{transition:all .3s}[_nghost-%COMP%]     .view_inner_html figure.table table tr:hover{background:#e6f7ff}[_nghost-%COMP%]     .view_inner_html figure.table table td, [_nghost-%COMP%]     .view_inner_html figure.table table th{padding:12px 8px;border:1px solid #e8e8e8}[_nghost-%COMP%]     .view_inner_html figure.table table th{background:#fafafa;text-align:center}[_nghost-%COMP%]     .view_inner_html p{line-height:35px;font-size:18px;word-wrap:break-word;word-break:break-all;text-align:justify}[_nghost-%COMP%]     .view_inner_html img{max-width:100%;width:auto;display:block;margin:0 auto}"]})}return o})();var Sc=(function(o){return o.TABLE="TABLE",o.GANTT="GANTT",o.CARD="CARD",o.BOARD="BOARD",o.TPL="TPL",o})(Sc||{}),Ml=(function(o){return o.INCLUDE="INCLUDE",o.EXCLUDE="EXCLUDE",o})(Ml||{}),Fu=(function(o){return o.FIT="FIT",o.CLIP="CLIP",o})(Fu||{});var qv=["eruptEdit"];function Xv(o,g){if(o&1&&(R(0,"div")(1,"nz-spin",1),te(2,"erupt-edit-type",2,0),V()()),o&2){let e=S();A(),k("nzSpinning",e.loading),A(),k("loading",e.loading)("eruptBuildModel",e.eruptBuildModel)("readonly",e.readonly)("mode",e.behavior)}}var go=(()=>{class o{msg;dataService;i18n;dataHandlerService;loading=!1;behavior=mn.ADD;save=new Nt;eruptBuildModel;id;readonly=!1;header={};eruptEditComponent;constructor(e,l,c,u){this.msg=e,this.dataService=l,this.i18n=c,this.dataHandlerService=u}ngOnInit(){this.dataHandlerService.emptyEruptValue(this.eruptBuildModel),this.behavior==mn.ADD?(this.loading=!0,this.dataService.getInitValue(this.eruptBuildModel.eruptModel.eruptName,null,this.header).subscribe(e=>{this.dataHandlerService.objectToEruptValue(e,this.eruptBuildModel),this.loading=!1})):(this.loading=!0,this.dataService.queryEruptDataById(this.eruptBuildModel.eruptModel.eruptName,this.id).subscribe(e=>{this.dataHandlerService.objectToEruptValue(e,this.eruptBuildModel),this.loading=!1}))}beforeSaveValidate(){return this.loading?(this.msg.warning(this.i18n.fanyi("global.update.loading.hint")),!1):this.eruptEditComponent.eruptEditValidate()}static \u0275fac=function(l){return new(l||o)(le(It),le(Pe),le(qt),le(nn))};static \u0275cmp=Fe({type:o,selectors:[["erupt-edit"]],viewQuery:function(l,c){if(l&1&&kt(qv,5),l&2){let u;Lt(u=At())&&(c.eruptEditComponent=u.first)}},inputs:{behavior:"behavior",eruptBuildModel:"eruptBuildModel",id:"id",readonly:"readonly",header:"header"},outputs:{save:"save"},standalone:!1,decls:1,vars:1,consts:[["eruptEdit",""],[3,"nzSpinning"],[3,"loading","eruptBuildModel","readonly","mode"]],template:function(l,c){l&1&&X(0,Xv,4,5,"div"),l&2&&Q(c.eruptBuildModel!=null?0:-1)},dependencies:[Pt,_i],encapsulation:2})}return o})();var Zm=hl(Jm());var ew=()=>[".xls",".xlsx"];function tw(o,g){if(o&1&&te(0,"nz-alert",2),o&2){let e=S();k("nzDescription",e.errorText)}}var Um=(()=>{class o{dataService;modal;msg;tokenService;eruptModel;drillInput;upload=!1;fileList=[];errorText;header;constructor(e,l,c,u){this.dataService=e,this.modal=l,this.msg=c,this.tokenService=u}ngOnInit(){this.header={token:this.tokenService.get().token,erupt:this.eruptModel.eruptName},this.drillInput&&Object.assign(this.header,Pe.drillToHeader(this.drillInput))}upLoadNzChange(e){let l=e.file;this.errorText=null,l.status==="done"?l.response.status==Nn.ERROR?(this.errorText=l.response.message,this.fileList=[]):(this.upload=!0,this.msg.success("\u5BFC\u5165\u6210\u529F")):l.status==="error"&&(this.errorText=l.error.error.message,this.fileList=[])}static \u0275fac=function(l){return new(l||o)(le(Pe),le(fn),le(It),le(Ui))};static \u0275cmp=Fe({type:o,selectors:[["app-excel-import"]],inputs:{eruptModel:"eruptModel",drillInput:"drillInput"},standalone:!1,decls:11,vars:14,consts:[["nz-button","","nzType","default",1,"mb-sm",3,"click"],["nz-icon","","nzType","download","nzTheme","outline"],["nzType","error","nzCloseable","",2,"margin-bottom","8px",3,"nzDescription"],["nzType","drag",3,"nzFileListChange","nzChange","nzAccept","nzFileList","nzLimit","nzHeaders","nzAction","nzShowButton"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"]],template:function(l,c){l&1&&(R(0,"button",0),se("click",function(){return c.dataService.downloadExcelTemplate(c.eruptModel.eruptName)}),te(1,"i",1),he(2),Se(3,"translate"),V(),X(4,tw,1,1,"nz-alert",2),R(5,"nz-upload",3),ye("nzFileListChange",function(b){return Ce(c.fileList,b)||(c.fileList=b),b}),se("nzChange",function(b){return c.upLoadNzChange(b)}),R(6,"p",4),te(7,"i",5),V(),R(8,"p",6),he(9),Se(10,"translate"),V()()),l&2&&(A(2),$e("",Ee(3,9,"table.download_template"),`
`),A(2),Q(c.errorText?4:-1),A(),k("nzAccept",at(13,ew)),ge("nzFileList",c.fileList),k("nzLimit",1)("nzHeaders",c.header)("nzAction",c.dataService.excelImport+c.eruptModel.eruptName)("nzShowButton",!0),A(4),Dt(Ee(10,11,"table.excel.import_hint")))},dependencies:[tn,Ct,dn,pt,pc,xl,hn],encapsulation:2})}return o})();var yo=(()=>{class o{static power="__power__"}return o})();var Gm=hl($m());var nw=["vditorContainer"],kl=(()=>{class o{lazy;tokenService;vditorContainer;eruptField;erupt;readonly;editorConfig={};editorMode="wysiwyg";loading=!0;editorHeight=480;cdnPath="assets/vditor";editorError=!1;vditor;defaultToolbar=["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","|","upload","table","|","undo","redo","|","fullscreen","edit-mode","both","preview","outline"];constructor(e,l){this.lazy=e,this.tokenService=l}ngOnInit(){this.loading=!0}ngAfterViewInit(){setTimeout(()=>{this.lazy.loadScript(`${this.cdnPath}/dist/index.min.js`).then(()=>{this.initVditor()}).catch(e=>{this.loading=!1,this.editorError=!0,console.error("\u52A0\u8F7DVditor\u811A\u672C\u5931\u8D25:",e)})},100)}initVditor(){try{if(!this.vditorContainer){console.error("vditorContainer is undefined"),this.loading=!1,this.editorError=!0;return}let e=ji.file+"/upload-html-editor/"+this.erupt.eruptName+"/"+this.eruptField.fieldName+"?_erupt="+this.erupt.eruptName+"&_token="+this.tokenService.get().token;this.vditor=new Gm.default(this.vditorContainer.nativeElement,{height:this.editorHeight,minHeight:60,mode:this.editorMode,cache:{enable:!1},upload:{url:e,fieldName:"upload",filename:this.formatFilename,success:this.handleUploadSuccess.bind(this),error:()=>{console.error("\u4E0A\u4F20\u56FE\u7247\u5931\u8D25")}},input:l=>{this.eruptField.eruptFieldJson.edit.$value=l},theme:"classic",lang:"zh_CN",fullscreen:{index:9999},cdn:this.cdnPath,toolbar:this.defaultToolbar,after:()=>{this.loading=!1,this.readonly&&this.vditor.disabled(),setTimeout(()=>{this.vditor.setValue(this.eruptField.eruptFieldJson.edit.$value||"")},100)}})}catch(e){this.loading=!1,this.editorError=!0,console.error("\u521D\u59CB\u5316Vditor\u5931\u8D25:",e)}}formatFilename(e){return e.replace(/[^(a-zA-Z0-9\u4e00-\u9fa5\.)]/g,"").replace(/[\?\\/:|<>\*\[\]\(\)\$%\{\}@~]/g,"").replace("/\\s/g","")}handleUploadSuccess(e,l){try{let c=JSON.parse(l);console.log("\u4E0A\u4F20\u6210\u529F\u56DE\u8C03:",c);let u="";if(c.data)u=c.data;else{console.warn("\u672A\u80FD\u8BC6\u522B\u7684\u4E0A\u4F20\u54CD\u5E94\u683C\u5F0F:",c);return}if(u){let b=c.fileName||"\u56FE\u7247";this.vditor.insertValue(`![${b}](${u})`)}}catch(c){console.error("\u5904\u7406\u4E0A\u4F20\u54CD\u5E94\u5931\u8D25",c)}}ngOnDestroy(){this.vditor&&this.vditor.destroy()}static \u0275fac=function(l){return new(l||o)(le(ta),le(Ui))};static \u0275cmp=Fe({type:o,selectors:[["erupt-markdown"]],viewQuery:function(l,c){if(l&1&&kt(nw,7),l&2){let u;Lt(u=At())&&(c.vditorContainer=u.first)}},inputs:{eruptField:"eruptField",erupt:"erupt",readonly:"readonly",editorConfig:"editorConfig",editorMode:"editorMode"},standalone:!1,decls:4,vars:2,consts:[["vditorContainer",""],[3,"nzSpinning"],[1,"markdown-editor-container",3,"hidden"],[1,"vditor-container"]],template:function(l,c){l&1&&(R(0,"nz-spin",1)(1,"div",2),te(2,"div",3,0),V()()),l&2&&(k("nzSpinning",c.loading),A(),k("hidden",c.editorError))},dependencies:[Pt],styles:["[_nghost-%COMP%]     .markdown-editor-container{background:#eee}[_nghost-%COMP%]     .vditor-container{min-height:300px;overflow-y:auto;background:#fff;border:1px solid #c4c4c4}"]})}return o})();function iw(o,g){if(o&1){let e=ne();R(0,"nz-list-item")(1,"a",1),se("click",function(){let c=j(e).$implicit,u=S();return G(u.open(c))}),he(2),V()()}if(o&2){let e=g.$implicit;A(2),Dt(e)}}var Km=(()=>{class o{modal;paths=[];view;constructor(e){this.modal=e}open(e){if(this.view.viewType==Ge.DOWNLOAD||this.view.viewType==Ge.ATTACHMENT)window.open(Pe.previewAttachment(e,!0));else if(this.view.viewType==Ge.ATTACHMENT_DIALOG){let l=this.modal.create({nzWrapClassName:"modal-lg modal-body-nopadding",nzStyle:{top:"30px"},nzKeyboard:!0,nzFooter:null,nzContent:In});Object.assign(l.getContentComponent(),{value:e,view:this.view})}}static \u0275fac=function(l){return new(l||o)(le(fn))};static \u0275cmp=Fe({type:o,selectors:[["app-attachment-select"]],standalone:!1,decls:3,vars:0,consts:[["nzBordered","","headerRowOutlet",""],["href","javascript:void(0)",3,"click"]],template:function(l,c){l&1&&(R(0,"nz-list",0),De(1,iw,3,1,"nz-list-item",null,Ie),V()),l&2&&(A(),Oe(c.paths))},dependencies:[_m,gm],encapsulation:2})}return o})();var Xi=(()=>{class o{imageService;i18n;dataService;drawerService;modal;msg;constructor(e,l,c,u,b,N){this.imageService=e,this.i18n=l,this.dataService=c,this.drawerService=u,this.modal=b,this.msg=N}viewToAlainTableConfig(e,l,c){let u=[],b=e.eruptModel.tableColumns,N=e.eruptModel.eruptJson.layout,M=0;for(let m of b){let h=m.title.length*16+22;h>280&&(h=280),m.sortable&&(h+=20),m.desc&&(h+=18);let T=m.eruptFieldModel.eruptFieldJson.edit,y={title:{text:m.title,optional:"   ",optionalHelp:m.desc},iif:()=>m.show};if(y.show=m.show,l?y.index=m.column.replace(/\./g,"_"):y.index=m.column,m.sortable&&(y.sort={reName:{ascend:"asc",descend:"desc"},key:m.column,compare:(x,v)=>x[m.column]>v[m.column]?1:-1}),c)switch(m.eruptFieldModel.eruptFieldJson.edit.type){case be.CHOICE:y.format=x=>x[m.column]!=null?m.eruptFieldModel.choiceMap.get(x[m.column]+"")?.label:"";break}switch(m.eruptFieldModel.eruptFieldJson.edit.type){case be.TAGS:y.className="text-center",y.format=x=>{let v=x[m.column];if(v){let O="";for(let H of v.split(m.eruptFieldModel.eruptFieldJson.edit.tagsType.joinSeparator))O+="<span class='e-tag'>"+H+"</span>";return O}else return v};break;case be.CHOICE:y.format=x=>x[m.column]!=null?"<span style='color:"+m.eruptFieldModel.choiceLabelMap.get(x[m.column]+"")?.color+"'>"+x[m.column]+"</span>":"";break}switch(y.width=h,m.viewType){case Ge.TEXT:y.width=null,y.className="text-col";break;case Ge.SAFE_TEXT:y.width=null,y.className="text-col",y.safeType="text";break;case Ge.NUMBER:y.className="text-right";break;case Ge.COLOR:y.className="text-center",y.type="link",y.format=x=>x[m.column]?`<i class="fa fa-square" style="color: ${x[m.column]};font-size: 1.2rem" aria-hidden="true"></i>`:"";break;case Ge.DATE:y.className="date-col",y.width=115,y.format=x=>{if(x[m.column]){let v=x[m.column];return m.eruptFieldModel.eruptFieldJson.edit.dateType.type==Bt.DATE&&!v.startsWith("<")&&!v.endsWith(">")?v.substring(0,10):v}else return""};break;case Ge.DATE_TIME:y.className="date-col",y.width=180;break;case Ge.BOOLEAN:y.className="text-center",y.width=h+18,y.type="tag",c?y.tag={true:{text:T.boolType.trueText,color:"green"},false:{text:T.boolType.falseText,color:"red"}}:T.title?T.boolType&&(y.tag={[T.boolType.trueText]:{text:T.boolType.trueText,color:"green"},[T.boolType.falseText]:{text:T.boolType.falseText,color:"red"}}):y.tag={true:{text:this.i18n.fanyi("\u662F"),color:"green"},false:{text:this.i18n.fanyi("\u5426"),color:"red"}};break;case Ge.LINK:y.type="link",y.className="text-center",y.click=x=>{window.open(x[m.column])},y.format=x=>x[m.column]?"<i class='fa fa-link' aria-hidden='true' title=''></i>":"";break;case Ge.LINK_DIALOG:y.className="text-center",y.type="link",y.format=x=>x[m.column]?"<i class='fa fa-dot-circle-o' aria-hidden='true' title=''></i>":"",y.click=x=>{let v=this.modal.create({nzWrapClassName:"modal-lg modal-body-nopadding",nzStyle:{top:"20px"},nzMaskClosable:!1,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:In});Object.assign(v.getContentComponent(),{value:x[m.column],view:m})};break;case Ge.QR_CODE:y.className="text-center",y.type="link",y.format=x=>x[m.column]?"<i class='fa fa-qrcode' aria-hidden='true' title=''></i>":"",y.click=x=>{let v=this.modal.create({nzWrapClassName:"modal-sm",nzMaskClosable:!0,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:In});Object.assign(v.getContentComponent(),{value:x[m.column],view:m})};break;case Ge.MARKDOWN:y.className="text-center",y.type="link",y.format=x=>x[m.column]?"<i class='fa fa-file-text' aria-hidden='true' title=''></i>":"",y.click=x=>{let v=this.modal.create({nzWrapClassName:"modal-lg",nzStyle:{top:"24px"},nzBodyStyle:{padding:"0"},nzMaskClosable:!0,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:kl});m.eruptFieldModel.eruptFieldJson.edit.$value=x[m.column],Object.assign(v.getContentComponent(),{value:x[m.column],readonly:!0,erupt:e.eruptModel,eruptField:m.eruptFieldModel})};break;case Ge.CODE:y.className="text-center",y.type="link",y.format=x=>x[m.column]?"<i class='fa fa-code' aria-hidden='true' title=''></i>":"",y.click=x=>{let v=m.eruptFieldModel.eruptFieldJson.edit.codeEditType,O=this.modal.create({nzWrapClassName:"modal-lg",nzBodyStyle:{padding:"0"},nzMaskClosable:!0,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:_o});Object.assign(O.getContentComponent(),{height:500,readonly:!0,language:v?v.language:"text",edit:{$value:x[m.column]}})};break;case Ge.MAP:y.className="text-center",y.type="link",y.format=x=>x[m.column]?"<i class='fa fa-map' aria-hidden='true' title=''></i>":"",y.click=x=>{let v=this.modal.create({nzWrapClassName:"modal-lg",nzBodyStyle:{padding:"0"},nzMaskClosable:!0,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:In});Object.assign(v.getContentComponent(),{value:x[m.column],view:m})};break;case Ge.IMAGE:y.type="link",y.className="text-center p-mini",y.width=h+30,y.format=x=>{if(x[m.column]){let v=m.eruptFieldModel.eruptFieldJson.edit.attachmentType,O;v?O=x[m.column].split(v.fileSeparator):O=x[m.column].split("|");let H=[];for(let P in O)H[P]=`<img width="100%" class="e-table-img" src="${Pe.previewAttachment(O[P])}" alt="${O[P]}"/>`;return`<div style="text-align: center;display:flex;justify-content: center;" title="${m.title}">
                                        ${H.join(" ")}
                                    </div>`}else return""},y.click=x=>{this.imageService.preview(x[m.column].split("|").map(v=>({src:Pe.previewAttachment(v.trim())})))};break;case Ge.HTML:y.type="link",y.className="text-center",y.format=x=>x[m.column]?"<i class='fa fa-file-text' aria-hidden='true' title=''></i>":"",y.click=x=>{let v=this.modal.create({nzWrapClassName:"modal-lg",nzStyle:{top:"50px"},nzMaskClosable:!0,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:In});Object.assign(v.getContentComponent(),{value:x[m.column],view:m})};break;case Ge.MOBILE_HTML:y.className="text-center",y.type="link",y.format=x=>x[m.column]?"<i class='fa fa-file-text' aria-hidden='true' title=''></i>":"",y.click=x=>{let v=this.modal.create({nzWrapClassName:"modal-xs",nzMaskClosable:!0,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:In});Object.assign(v.getContentComponent(),{value:x[m.column],view:m})};break;case Ge.SWF:y.type="link",y.className="text-center",y.format=x=>x[m.column]?"<i class='fa fa-file-image-o' aria-hidden='true' title=''></i>":"",y.click=x=>{let v=this.modal.create({nzWrapClassName:"modal-lg modal-body-nopadding",nzStyle:{top:"40px"},nzMaskClosable:!0,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:In});Object.assign(v.getContentComponent(),{value:x[m.column],view:m})};break;case Ge.IMAGE_BASE64:y.type="link",y.width="90px",y.className="text-center p-sm",y.format=x=>x[m.column]?`<img width="100%" alt="${y.title}" src="${x[m.column]}" title=""/>`:"",y.click=x=>{let v=this.modal.create({nzWrapClassName:"modal-lg",nzStyle:{top:"50px",textAlign:"center"},nzMaskClosable:!0,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:In});Object.assign(v.getContentComponent(),{value:x[m.column],view:m})};break;case Ge.ATTACHMENT_DIALOG:y.type="link",y.className="text-center",y.format=x=>x[m.column]?`<i class='fa fa-dot-circle-o' aria-hidden='true' title=""></i>`:"",y.click=x=>{this.attachmentView(m,x[m.column])};break;case Ge.DOWNLOAD:y.type="link",y.className="text-center",y.format=x=>x[m.column]?`<i class='fa fa-download' aria-hidden='true' title=""></i>`:"",y.click=x=>{this.attachmentView(m,x[m.column])};break;case Ge.ATTACHMENT:y.type="link",y.className="text-center",y.format=x=>x[m.column]?`<i class='fa fa-window-restore' aria-hidden='true' title=""></i>`:"",y.click=x=>{this.attachmentView(m,x[m.column])};break;case Ge.TAB_VIEW:y.type="link",y.className="text-center",y.format=x=>`<i class='fa fa-adjust' aria-hidden='true' title=""></i>`,y.click=x=>{let v=this.modal.create({nzWrapClassName:"modal-lg",nzStyle:{top:"50px"},nzMaskClosable:!1,nzKeyboard:!0,nzFooter:null,nzTitle:m.title,nzContent:In});Object.assign(v.getContentComponent(),{value:x[e.eruptModel.eruptJson.primaryKeyCol],eruptBuildModel:e,view:m})};break;default:y.width=null;break}m.template&&(y.format=x=>{try{let v=x[m.column];return new Function("value","return "+m.template)(v)}catch(v){console.error(v),this.msg.error(v.toString())}}),m.className&&(y.className+=" "+m.className),y.width&&y.width<h&&(y.width=h),m.width&&(y.width=isNaN(Number(m.width))?m.width:m.width+"px"),m.tpl&&m.tpl.enable&&(y.type="link",y.click=x=>{let v=this.dataService.getEruptViewTpl(e.eruptModel.eruptName,m.eruptFieldModel.fieldName,x[e.eruptModel.eruptJson.primaryKeyCol]);this.openTpl(m.title,v,m.tpl)}),N.pagingType==aa.BACKEND&&m.sortable&&(y.sort={compare:null,reName:{ascend:"asc",descend:"desc"}}),N&&(M<N.tableLeftFixed&&(y.fixed="left"),M>=b.length-N.tableRightFixed&&(y.fixed="right")),y.fixed!=null&&y.width==null&&(y.width=h+50),u.push(y),M++}return u}attachmentView(e,l){let c=e.viewType,u;if(e.eruptFieldModel.eruptFieldJson.edit.type===be.ATTACHMENT){let b=e.eruptFieldModel.eruptFieldJson.edit.attachmentType;u=l.split(b.fileSeparator)}else u=l.split("|");if(u.length==1){if(c==Ge.DOWNLOAD||c==Ge.ATTACHMENT){let b=document.createElement("a");b.href=Pe.previewAttachment(l,!0),b.click(),b.remove()}else if(c==Ge.ATTACHMENT_DIALOG){let b=this.modal.create({nzWrapClassName:"modal-lg modal-body-nopadding",nzStyle:{top:"30px"},nzKeyboard:!0,nzFooter:null,nzContent:In});Object.assign(b.getContentComponent(),{value:l,view:e})}}else{let b=this.modal.create({nzWrapClassName:"modal-xs modal-body-nopadding",nzStyle:{top:"30px"},nzKeyboard:!0,nzFooter:null,nzTitle:e.title,nzContent:Km});Object.assign(b.getContentComponent(),{paths:u,view:e})}}openTpl(e,l,c){if(!c.openWay||c.openWay==ku.MODAL){let u=!c.embedType||c.embedType==zu.IFRAME,b=this.modal.create({nzKeyboard:!0,nzTitle:e,nzMaskClosable:!1,nzWidth:c.width,nzStyle:{top:"20px"},nzWrapClassName:c.width||"modal-lg",nzBodyStyle:{padding:"0"},nzFooter:null,nzContent:u?fo:Dm,nzOnCancel:()=>{}});b.getContentComponent().url=l,b.getContentComponent().height=c.height}else{let u=c.drawerPlacement;this.drawerService.create({nzClosable:!1,nzKeyboard:!0,nzMaskClosable:!0,nzPlacement:u.toLowerCase(),nzWidth:c.width||"40%",nzHeight:c.height||"40%",nzBodyStyle:{padding:0},nzFooter:null,nzContent:fo,nzContentParams:{url:l,height:"100%",width:"100%"}})}}static \u0275fac=function(l){return new(l||o)(_r(yc),_r(qt),_r(Pe),_r(sc),_r(fn),_r(It))};static \u0275prov=tc({token:o,factory:o.\u0275fac})}return o})();var ow=()=>({padding:"10px",overflow:"auto"}),aw=o=>({height:o});function lw(o,g){o&1&&te(0,"i",5)}var qm=(()=>{class o{data;settingSrv;settingService;i18n;dataHandler;constructor(e,l,c,u,b){this.data=e,this.settingSrv=l,this.settingService=c,this.i18n=u,this.dataHandler=b}eruptModel;trigger=new Nt;searchValue;treeLoading;selectedKeys;list;dataLength=0;ngOnInit(){this.treeLoading=!0,this.data.queryDependTreeData(this.eruptModel.eruptName).subscribe(e=>{let l=this.eruptModel.eruptFieldModelMap.get(this.eruptModel.eruptJson.linkTree.field);this.dataLength=e.length,l&&l.eruptFieldJson.edit&&l.eruptFieldJson.edit.referenceTreeType?this.list=this.dataHandler.dataTreeToZorroTree(e,l.eruptFieldJson.edit.referenceTreeType.expandLevel):this.list=this.dataHandler.dataTreeToZorroTree(e,this.eruptModel.eruptJson.tree.expandLevel),this.eruptModel.eruptJson.linkTree.dependNode?e.length>0&&(this.trigger.emit(this.getSubKeys(this.list,e[0].id)),this.selectedKeys=[e[0].id]):(this.list.unshift({key:void 0,title:this.i18n.fanyi("global.all"),isLeaf:!0}),this.selectedKeys=[void 0]),this.treeLoading=!1})}nzDblClick(e){e.node.isExpanded=!e.node.isExpanded,e.event.stopPropagation()}nodeClickEvent(e){if(e.node.origin.key==null)this.trigger.emit(null),this.selectedKeys=[void 0];else{let l=this.eruptModel.eruptJson.linkTree;!e.node.origin.selected&&!l.dependNode?(this.trigger.emit(null),this.selectedKeys=[void 0]):(this.trigger.emit(this.getSubKeys(this.list,e.node.origin.key)),this.selectedKeys=[e.node.origin.key])}}getSubKeys(e,l){let c=M=>{for(let m of M){if(m.key===l)return m;let h=c(m.children??[]);if(h)return h}return null},u=c(e);if(!u)return[];let b=[],N=M=>{b.push(M.key),(M.children??[]).forEach(N)};return N(u),b}static \u0275fac=function(l){return new(l||o)(le(Pe),le(gr),le(gr),le(qt),le(nn))};static \u0275cmp=Fe({type:o,selectors:[["layout-tree"]],inputs:{eruptModel:"eruptModel"},outputs:{trigger:"trigger"},standalone:!1,decls:6,vars:15,consts:[["suffixIcon",""],[1,"mb-sm",2,"width","100%","margin-bottom","0",3,"nzSuffix"],["type","text","nz-input","","placeholder","Search",3,"ngModelChange","ngModel"],[2,"box-shadow","0 2px 8px rgba(0, 0, 0, 0.09)","overflow","auto",3,"nzBodyStyle","nzLoading","ngStyle","nzBordered"],[1,"tree-container",3,"nzClick","nzDblClick","nzVirtualHeight","nzData","nzShowLine","nzSearchValue","nzBlockNode","nzSelectedKeys"],["nz-icon","","nzType","search"]],template:function(l,c){if(l&1){let u=ne();R(0,"nz-input-group",1)(1,"input",2),ye("ngModelChange",function(N){return j(u),Ce(c.searchValue,N)||(c.searchValue=N),G(N)}),V()(),nt(2,lw,1,0,"ng-template",null,0,Qe),R(4,"nz-card",3)(5,"nz-tree",4),se("nzClick",function(N){return j(u),G(c.nodeClickEvent(N))})("nzDblClick",function(N){return j(u),G(c.nzDblClick(N))}),V()()}if(l&2){let u=Ue(3);k("nzSuffix",u),A(),ge("ngModel",c.searchValue),A(3),k("nzBodyStyle",at(12,ow))("nzLoading",c.treeLoading)("ngStyle",$t(13,aw,"calc(100vh - 140px - "+(c.settingService.layout.reuse?"40px":"0px")+")"))("nzBordered",!0),A(),k("nzVirtualHeight",c.dataLength>50?"calc(100vh - 165px - "+(c.settingSrv.layout.reuse?"40px":"0px")+")":null)("nzData",c.list)("nzShowLine",!0)("nzSearchValue",c.searchValue)("nzBlockNode",!0)("nzSelectedKeys",c.selectedKeys)}},dependencies:[Gn,on,Et,zt,Ct,pt,Xt,fi,Gi,Jr,$r],encapsulation:2})}return o})();var cw=()=>({padding:"0"});function dw(o,g){if(o&1&&(te(0,"span",6),Se(1,"safeHtml")),o&2){let e,l=S(3).$implicit,c=S(3).$implicit,u=S(2);k("innerHTML",Ee(1,1,((e=u.columnMap.get(l.fieldName))==null?null:e.format(c,u.columnMap.get(l.fieldName),null))||""),Mi)}}function uw(o,g){if(o&1&&(te(0,"span",6),Se(1,"safeHtml")),o&2){let e=S(2).$implicit,l=S(4).$implicit;k("innerHTML",Ee(1,1,l[e.column]==null?"":l[e.column]),Mi)}}function pw(o,g){if(o&1){let e=ne();he(0),R(1,"span",5),se("click",function(c){j(e);let u=S(2).$implicit,b=S(5);return G(b.clickField(c,u.fieldName))}),X(2,dw,2,3,"span",6),X(3,uw,2,3,"span",6),V(),te(4,"br")}if(o&2){let e,l,c=S().$implicit,u=S().$implicit,b=S(5);$e(" ",c.title,":\xA0 "),A(2),Q((e=b.columnMap.get(u.fieldName))!=null&&e.format?2:-1),A(),Q((l=b.columnMap.get(u.fieldName))!=null&&l.format?-1:3)}}function fw(o,g){if(o&1&&X(0,pw,5,3),o&2){let e=g.$implicit,l=S(6);Q((l.vis.fieldVisibility==l.FieldVisibility.EXCLUDE?l.vis.fields.indexOf(e.column)===-1:l.vis.fields.indexOf(e.column)!==-1)?0:-1)}}function mw(o,g){if(o&1&&De(0,fw,1,1,null,null,Ie),o&2){let e=g.$implicit;Oe(e.eruptFieldJson.views)}}function hw(o,g){if(o&1&&(R(0,"div",4),De(1,mw,2,0,null,null,Ie),V()),o&2){let e=S(4);A(),Oe(e.eruptBuildModel.eruptModel.eruptFieldModels)}}function _w(o,g){if(o&1&&X(0,hw,3,0,"div",4),o&2){let e=S(3);Q(e.vis.fieldVisibility!==e.FieldVisibility.INCLUDE||e.vis.fields.length?0:-1)}}function gw(o,g){if(o&1&&te(0,"div",8),o&2){let e=S(3).$implicit,l=S(2);k("ngStyle",l.viewImageStyle(e[l.vis.cardView.coverField],l.eruptBuildModel.eruptModel.eruptFieldModelMap.get(l.vis.cardView.coverField)))}}function Cw(o,g){o&1&&te(0,"img",9)}function yw(o,g){if(o&1&&(R(0,"div",7),X(1,gw,1,1,"div",8),X(2,Cw,1,0,"img",9),V()),o&2){let e=S(2).$implicit,l=S(2);A(),Q(e[l.vis.cardView.coverField]?1:-1),A(),Q(e[l.vis.cardView.coverField]?-1:2)}}function vw(o,g){if(o&1&&X(0,yw,3,2,"div",7),o&2){let e=S(3);Q(e.vis.cardView.coverField?0:-1)}}function ww(o,g){if(o&1){let e=ne();R(0,"div",2)(1,"nz-card",3),se("click",function(){let c=j(e).$implicit,u=S(2);return G(u.onEdit.emit(c[u.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol]))}),X(2,_w,1,1),V(),nt(3,vw,1,1,"ng-template",null,0,Qe),V()}if(o&2){let e=Ue(4),l=S(2);k("nzXXl",l.eruptBuildModel.eruptModel.eruptJson.linkTree?6:4)("nzXl",6)("nzLg",8)("nzMd",12)("nzSm",12)("nzXs",24),A(),k("nzCover",e)("nzBodyStyle",at(10,cw))("nzBordered",!0),A(),Q(l.vis.fields.length<l.eruptBuildModel.eruptModel.eruptFieldModels.length?2:-1)}}function bw(o,g){if(o&1&&(R(0,"div",1),De(1,ww,5,11,"div",2,Ie),V()),o&2){let e=S();k("nzGutter",16),A(),Oe(e.data)}}var Xm=(()=>{class o{imageService;uiBuildService;constructor(e,l){this.imageService=e,this.uiBuildService=l}eruptBuildModel;data=[];vis;columnMap;onEdit=new Nt;page;ngOnInit(){this.columnMap=new Map;for(let e of this.uiBuildService.viewToAlainTableConfig(this.eruptBuildModel,!0))this.columnMap.set(e.index,e)}clickField(e,l){e.stopPropagation(),this.columnMap.get(l)?.click(this.data[0])}viewImageStyle(e,l){return{backgroundImage:"url("+Pe.previewAttachment(e.split(l.eruptFieldJson.edit?.attachmentType?.fileSeparator||"|")[0])+")",backgroundSize:this.vis.cardView.coverEffect==Fu.FIT?"contain":"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}previewImage(e){this.imageService.preview(e.split("|").map(l=>({src:Pe.previewAttachment(l.trim())})))}clearInterval=clearInterval;FieldVisibility=Ml;static \u0275fac=function(l){return new(l||o)(le(yc),le(Xi))};static \u0275cmp=Fe({type:o,selectors:[["vis-card"]],inputs:{eruptBuildModel:"eruptBuildModel",data:"data",vis:"vis"},outputs:{onEdit:"onEdit"},standalone:!1,decls:2,vars:1,consts:[["coverTemplate",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXXl","nzXl","nzLg","nzMd","nzSm","nzXs"],[1,"erupt-card",3,"click","nzCover","nzBodyStyle","nzBordered"],[2,"padding","12px"],[3,"click"],[3,"innerHTML"],[1,"card-img-container"],[2,"width","100%","height","100%",3,"ngStyle"],["src","./assets/image/no-img.svg","alt","","width","44px",1,"no-image"]],template:function(l,c){l&1&&(Vr(0),X(1,bw,3,1,"div",1),Br()),l&2&&(A(),Q(c.data?1:-1))},dependencies:[Gn,Kn,Sn,Jr,Ki],styles:["[_nghost-%COMP%]     .erupt-card{box-shadow:0 2px 8px #00000017;cursor:pointer}[_nghost-%COMP%]     .erupt-card .no-image{position:absolute;left:50%;top:50%;margin-left:-22px;margin-top:-22px}[_nghost-%COMP%]     .erupt-card .actions{display:flex;width:100%;justify-content:space-around;padding:12px 0;border-top:1px solid rgba(0,0,0,.06)}[_nghost-%COMP%]     .erupt-card .card-img-container{background:#f4f5f5;height:192px;position:relative;text-align:center;overflow:hidden;display:flex;align-items:center}[_nghost-%COMP%]     .erupt-card .card-img-container .card-img{width:100%;height:100%;background-repeat:no-repeat;background-position:center center}[_nghost-%COMP%]     .erupt-card .title{font-weight:800}"]})}return o})();var Tw=["choice"],Sw=o=>({borderStyle:o}),Mw=o=>[o],Ew=(o,g)=>g.fieldName;function zw(o,g){if(o&1){let e=ne();R(0,"i",11),se("click",function(){j(e);let c=S(4).$implicit;return G(c.eruptFieldJson.edit.$value=null)}),V()}}function kw(o,g){if(o&1&&X(0,zw,1,0,"i",10),o&2){let e=S(3).$implicit;Q(e.eruptFieldJson.edit.$value?0:-1)}}function Lw(o,g){if(o&1){let e=ne();R(0,"div",5)(1,"erupt-search-se",7)(2,"nz-input-group",8)(3,"input",9),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),se("keydown",function(c){j(e);let u=S(3);return G(u.enterEvent(c))}),V()(),nt(4,kw,1,1,"ng-template",null,1,Qe),V()()}if(o&2){let e=Ue(5),l=S(2).$implicit,c=S();k("nzXs",c.col.xs)("nzSm",c.col.sm)("nzMd",c.col.md)("nzLg",c.col.lg)("nzXl",c.col.xl)("nzXXl",c.col.xxl),A(),k("field",l),A(),k("nzSuffix",e)("nzSize",c.size)("ngStyle",$t(16,Sw,l.eruptFieldJson.edit.search.vague?"dashed":"")),A(),k("nzSize",c.size)("type",l.eruptFieldJson.edit.inputType?l.eruptFieldJson.edit.inputType.type:"text"),ge("ngModel",l.eruptFieldJson.edit.$value),k("name",l.fieldName)("placeholder",l.eruptFieldJson.edit.placeHolder)("required",l.eruptFieldJson.edit.search.notNull)}}function Aw(o,g){if(o&1&&Tn(0,4),o&2){S();let e=Ue(1);k("ngTemplateOutlet",e)}}function Fw(o,g){if(o&1&&Tn(0,4),o&2){S();let e=Ue(1);k("ngTemplateOutlet",e)}}function Nw(o,g){if(o&1&&Tn(0,4),o&2){S();let e=Ue(1);k("ngTemplateOutlet",e)}}function Dw(o,g){if(o&1&&Tn(0,4),o&2){S();let e=Ue(1);k("ngTemplateOutlet",e)}}function Ow(o,g){if(o&1){let e=ne();R(0,"nz-input-group",12)(1,"nz-input-number",14),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$l_val,c)||(u.eruptFieldJson.edit.$l_val=c),G(c)}),V(),te(2,"input",15),R(3,"nz-input-number",14),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$r_val,c)||(u.eruptFieldJson.edit.$r_val=c),G(c)}),V()()}if(o&2){let e=S(3).$implicit,l=S();k("nzSize",l.size),A(),k("nzSize",l.size),ge("ngModel",e.eruptFieldJson.edit.$l_val),k("name",e.fieldName)("nzPlaceHolder",e.eruptFieldJson.edit.placeHolder)("nzMin",e.eruptFieldJson.edit.numberType.min)("nzMax",e.eruptFieldJson.edit.numberType.max)("nzStep",1),A(),k("nzSize",l.size),A(),k("nzSize",l.size),ge("ngModel",e.eruptFieldJson.edit.$r_val),k("name",e.fieldName)("nzPlaceHolder",e.eruptFieldJson.edit.placeHolder)("nzMin",e.eruptFieldJson.edit.numberType.min)("nzMax",e.eruptFieldJson.edit.numberType.max)("nzStep",1)}}function Iw(o,g){if(o&1){let e=ne();R(0,"nz-input-number",16),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),se("keydown",function(c){j(e);let u=S(4);return G(u.enterEvent(c))}),V()}if(o&2){let e=S(3).$implicit,l=S();k("nzSize",l.size),ge("ngModel",e.eruptFieldJson.edit.$value),k("nzPlaceHolder",e.eruptFieldJson.edit.placeHolder)("name",e.fieldName)("nzMin",e.eruptFieldJson.edit.numberType.min)("nzMax",e.eruptFieldJson.edit.numberType.max)("nzStep",1)}}function Rw(o,g){if(o&1&&(R(0,"div",5)(1,"erupt-search-se",7),X(2,Ow,4,16,"nz-input-group",12),X(3,Iw,1,7,"nz-input-number",13),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("field",e),A(),Q(e.eruptFieldJson.edit.search.vague?2:-1),A(),Q(e.eruptFieldJson.edit.search.vague?-1:3)}}function Pw(o,g){if(o&1&&(R(0,"div",17)(1,"erupt-search-se",7),te(2,"erupt-choice",18),V()()),o&2){let e=S(3).$implicit,l=S();k("nzXs",24),A(),k("field",e),A(),k("eruptModel",l.searchEruptModel)("eruptField",e)("size",l.size)("vagueSearch",!0)("checkAll",!0)}}function Vw(o,g){if(o&1&&(R(0,"div",17)(1,"erupt-search-se",7),te(2,"erupt-choice",19),V()()),o&2){let e=S(4).$implicit,l=S();k("nzXs",24),A(),k("field",e),A(),k("eruptModel",l.searchEruptModel)("eruptField",e)("size",l.size)}}function Bw(o,g){if(o&1&&(R(0,"div",5)(1,"erupt-search-se",7),te(2,"erupt-choice",19),V()()),o&2){let e=S(4).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("field",e),A(),k("eruptModel",l.searchEruptModel)("eruptField",e)("size",l.size)}}function Hw(o,g){if(o&1&&X(0,Vw,3,5,"div",17)(1,Bw,3,10,"div",5),o&2){let e,l=S(3).$implicit,c=S();Q((e=l.eruptFieldJson.edit.choiceType.type)===c.choiceEnum.RADIO?0:e===c.choiceEnum.SELECT?1:-1)}}function Ww(o,g){if(o&1&&(X(0,Pw,3,7,"div",17),X(1,Hw,2,1)),o&2){let e=S(2).$implicit;Q(e.eruptFieldJson.edit.search.vague?0:-1),A(),Q(e.eruptFieldJson.edit.search.vague?-1:1)}}function Jw(o,g){if(o&1&&te(0,"nz-option",21),o&2){let e=g.$implicit;k("nzLabel",e)("nzValue",e)}}function Uw(o,g){if(o&1){let e=ne();R(0,"div",6)(1,"erupt-search-se",7)(2,"nz-select",20),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),De(3,Jw,1,2,"nz-option",21,Ie),V()()()}if(o&2){let e=S(2).$implicit,l=S();k("nzSpan",24),A(),k("field",e),A(),k("nzAllowClear",!e.eruptFieldJson.edit.notNull)("nzSize",l.size),ge("ngModel",e.eruptFieldJson.edit.$value),k("name",e.fieldName)("nzPlaceHolder",e.eruptFieldJson.edit.placeHolder)("nzTokenSeparators",$t(9,Mw,e.eruptFieldJson.edit.tagsType.joinSeparator))("nzMode",e.eruptFieldJson.edit.tagsType.allowExtension?"tags":"multiple"),A(),Oe(e.componentValue)}}function $w(o,g){if(o&1){let e=ne();R(0,"nz-slider",24),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;ge("ngModel",e.eruptFieldJson.edit.$value),k("nzMarks",e.eruptFieldJson.edit.sliderType.marks)("nzDots",e.eruptFieldJson.edit.sliderType.dots)("nzStep",e.eruptFieldJson.edit.sliderType.dots?null:e.eruptFieldJson.edit.sliderType.step)("name",e.fieldName)("nzMax",e.eruptFieldJson.edit.sliderType.max)("nzMin",e.eruptFieldJson.edit.sliderType.min)}}function jw(o,g){if(o&1){let e=ne();R(0,"nz-slider",25),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;ge("ngModel",e.eruptFieldJson.edit.$value),k("nzMarks",e.eruptFieldJson.edit.sliderType.marks)("nzDots",e.eruptFieldJson.edit.sliderType.dots)("nzStep",e.eruptFieldJson.edit.sliderType.step)("name",e.fieldName)("nzMax",e.eruptFieldJson.edit.sliderType.max)("nzMin",e.eruptFieldJson.edit.sliderType.min)}}function Gw(o,g){if(o&1&&(R(0,"div",5)(1,"erupt-search-se",7),X(2,$w,1,7,"nz-slider",22),X(3,jw,1,7,"nz-slider",23),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("field",e),A(),Q(e.eruptFieldJson.edit.search.vague?2:-1),A(),Q(e.eruptFieldJson.edit.search.vague?-1:3)}}function Kw(o,g){if(o&1){let e=ne();R(0,"nz-slider",28),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;k("name",e.fieldName),ge("ngModel",e.eruptFieldJson.edit.$value),k("nzMax",e.eruptFieldJson.edit.rateType.count)("nzMin",0)}}function qw(o,g){if(o&1){let e=ne();R(0,"nz-slider",29),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;k("name",e.fieldName),ge("ngModel",e.eruptFieldJson.edit.$value),k("nzMax",e.eruptFieldJson.edit.rateType.count)("nzMin",0)}}function Xw(o,g){if(o&1&&(R(0,"div",5)(1,"erupt-search-se",7),X(2,Kw,1,4,"nz-slider",26),X(3,qw,1,4,"nz-slider",27),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("field",e),A(),Q(e.eruptFieldJson.edit.search.vague?2:-1),A(),Q(e.eruptFieldJson.edit.search.vague?-1:3)}}function Qw(o,g){if(o&1&&(R(0,"div",5)(1,"erupt-search-se",7),te(2,"erupt-date",30),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("field",e),A(),k("field",e)("size",l.size)("range",e.eruptFieldJson.edit.search.vague)}}function Yw(o,g){if(o&1&&(R(0,"div",5)(1,"erupt-search-se",7),te(2,"erupt-reference",31),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("field",e),A(),k("eruptModel",l.searchEruptModel)("field",e)("readonly",!1)("size",l.size)}}function Zw(o,g){if(o&1&&(R(0,"div",5)(1,"erupt-search-se",7),te(2,"erupt-reference",31),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("field",e),A(),k("eruptModel",l.searchEruptModel)("field",e)("readonly",!1)("size",l.size)}}function eb(o,g){if(o&1){let e=ne();R(0,"div",5)(1,"erupt-search-se",7)(2,"nz-select",32),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.eruptFieldJson.edit.$value,c)||(u.eruptFieldJson.edit.$value=c),G(c)}),te(3,"nz-option",21),Se(4,"translate"),te(5,"nz-option",21),Se(6,"translate"),V()()()}if(o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("field",e),A(),k("nzSize",l.size),ge("ngModel",e.eruptFieldJson.edit.$value),k("name",e.fieldName)("nzMode","default"),A(),k("nzLabel",Ee(4,15,e.eruptFieldJson.edit.boolType.trueText))("nzValue",!0),A(2),k("nzLabel",Ee(6,17,e.eruptFieldJson.edit.boolType.falseText))("nzValue",!1)}}function tb(o,g){if(o&1&&(R(0,"div",5)(1,"erupt-search-se",7),te(2,"erupt-auto-complete",33),V()()),o&2){let e=S(2).$implicit,l=S();k("nzXs",l.col.xs)("nzSm",l.col.sm)("nzMd",l.col.md)("nzLg",l.col.lg)("nzXl",l.col.xl)("nzXXl",l.col.xxl),A(),k("field",e),A(),k("size",l.size)("field",e)("eruptModel",l.searchEruptModel)}}function nb(o,g){if(o&1&&(nt(0,Lw,6,18,"ng-template",null,0,Qe),X(2,Aw,1,1,"ng-container",4)(3,Fw,1,1,"ng-container",4)(4,Nw,1,1,"ng-container",4)(5,Dw,1,1,"ng-container",4)(6,Rw,4,9,"div",5)(7,Ww,2,2)(8,Uw,5,11,"div",6)(9,Gw,4,9,"div",5)(10,Xw,4,9,"div",5)(11,Qw,3,10,"div",5)(12,Yw,3,11,"div",5)(13,Zw,3,11,"div",5)(14,eb,7,19,"div",5)(15,tb,3,10,"div",5)),o&2){let e,l=S().$implicit,c=S();A(2),Q((e=l.eruptFieldJson.edit.type)===c.editType.INPUT?2:e===c.editType.TEXTAREA?3:e===c.editType.HTML_EDITOR?4:e===c.editType.CODE_EDITOR?5:e===c.editType.NUMBER?6:e===c.editType.CHOICE?7:e===c.editType.TAGS?8:e===c.editType.SLIDER?9:e===c.editType.RATE?10:e===c.editType.DATE?11:e===c.editType.REFERENCE_TABLE?12:e===c.editType.REFERENCE_TREE?13:e===c.editType.BOOLEAN?14:e===c.editType.AUTO_COMPLETE?15:-1)}}function ib(o,g){if(o&1&&X(0,nb,16,1),o&2){let e=g.$implicit;Q(e.eruptFieldJson.edit&&e.eruptFieldJson.edit.search.value?0:-1)}}var zc=(()=>{class o{differs;searchEruptModel;search=new Nt;size="large";choices;editType=be;col=vr[4];choiceEnum=ra;constructor(e){this.differs=e}ngDoCheck(){for(let e of this.searchEruptModel.eruptFieldModels)e.eruptFieldJson.edit.$valueDiff.diff(e.eruptFieldJson.edit)&&e.eruptFieldJson.edit.$valueSubject.next(e.eruptFieldJson.edit.$value)}ngOnInit(){for(let e of this.searchEruptModel.eruptFieldModels)e.eruptFieldJson.edit.$valueDiff=this.differs.find(e.eruptFieldJson.edit).create(),e.eruptFieldJson.edit.$valueSubject=new ec(null)}enterEvent(e){e.which===13&&this.search.emit()}static \u0275fac=function(l){return new(l||o)(le(rc))};static \u0275cmp=Fe({type:o,selectors:[["erupt-search"]],viewQuery:function(l,c){if(l&1&&kt(Tw,5),l&2){let u;Lt(u=At())&&(c.choices=u)}},inputs:{searchEruptModel:"searchEruptModel",size:"size"},outputs:{search:"search"},standalone:!1,decls:4,vars:2,consts:[["inputTpl",""],["suffixTemplate",""],["nz-form","",3,"nzLayout"],["nz-row","",3,"nzGutter"],[3,"ngTemplateOutlet"],["nz-col","",3,"nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],["nz-col","",3,"nzSpan"],[3,"field"],[1,"erupt-input",3,"nzSuffix","nzSize","ngStyle"],["nz-input","","autocomplete","off",3,"ngModelChange","keydown","nzSize","type","ngModel","name","placeholder","required"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],[1,"erupt-input",2,"display","flex","align-items","center",3,"nzSize"],[1,"erupt-input",3,"nzSize","ngModel","nzPlaceHolder","name","nzMin","nzMax","nzStep"],[2,"width","45%",3,"ngModelChange","nzSize","ngModel","name","nzPlaceHolder","nzMin","nzMax","nzStep"],["disabled","","nz-input","","placeholder","~",2,"width","30px","border-left","0","border-right","0","pointer-events","none",3,"nzSize"],[1,"erupt-input",3,"ngModelChange","keydown","nzSize","ngModel","nzPlaceHolder","name","nzMin","nzMax","nzStep"],["nz-col","",3,"nzXs"],[3,"eruptModel","eruptField","size","vagueSearch","checkAll"],[3,"eruptModel","eruptField","size"],[2,"width","100%",3,"ngModelChange","nzAllowClear","nzSize","ngModel","name","nzPlaceHolder","nzTokenSeparators","nzMode"],[3,"nzLabel","nzValue"],["nzRange","",1,"erupt-input",3,"ngModel","nzMarks","nzDots","nzStep","name","nzMax","nzMin"],[1,"erupt-input",3,"ngModel","nzMarks","nzDots","nzStep","name","nzMax","nzMin"],["nzRange","",1,"erupt-input",3,"ngModelChange","ngModel","nzMarks","nzDots","nzStep","name","nzMax","nzMin"],[1,"erupt-input",3,"ngModelChange","ngModel","nzMarks","nzDots","nzStep","name","nzMax","nzMin"],["nzRange","",1,"erupt-input",3,"name","ngModel","nzMax","nzMin"],[1,"erupt-input",3,"name","ngModel","nzMax","nzMin"],["nzRange","",1,"erupt-input",3,"ngModelChange","name","ngModel","nzMax","nzMin"],[1,"erupt-input",3,"ngModelChange","name","ngModel","nzMax","nzMin"],[3,"field","size","range"],[3,"eruptModel","field","readonly","size"],["nzAllowClear","",1,"erupt-input",3,"ngModelChange","nzSize","ngModel","name","nzMode"],[3,"size","field","eruptModel"]],template:function(l,c){l&1&&(R(0,"form",2)(1,"div",3),De(2,ib,1,1,null,null,Ew),V()()),l&2&&(k("nzLayout","horizontal"),A(),k("nzGutter",16),A(),Oe(c.searchEruptModel.eruptFieldModels))},styles:["[_nghost-%COMP%]     .erupt-input{width:100%}[_nghost-%COMP%]     .ant-input[type=color]{height:22px!important}[_nghost-%COMP%]     nz-slider{line-height:32px}[_nghost-%COMP%]     tag-select{margin-top:-10px}"]})}return o})();var kc=hl(Eu());var ab=["gantt"],lb=()=>[],sb=(o,g,e,l,c)=>[o,g,e,l,c],cb=o=>({viewTypes:o}),db=o=>({height:o}),ub=(o,g)=>g.fieldName;function pb(o,g){if(o&1){let e=ne();R(0,"div",9)(1,"label",10),se("nzCheckedChange",function(c){j(e);let u=S(2);return G(u.toggleSelectAll(c))})("click",function(c){return j(e),G(c.stopPropagation())}),V()()}if(o&2){let e=S(2);A(),k("nzChecked",e.isAllSelected())("nzIndeterminate",e.isIndeterminate())}}function fb(o,g){if(o&1){let e=ne();R(0,"div",11),se("click",function(){let c=j(e).item,u=S(2);return G(u.toggleSelection(c))}),R(1,"label",12),se("nzCheckedChange",function(){let c=j(e).item,u=S(2);return G(u.toggleSelection(c))})("click",function(c){return j(e),G(c.stopPropagation())}),V()()}if(o&2){let e=g.item,l=S(2);A(),k("nzChecked",l.isSelected(e))}}function mb(o,g){if(o&1&&(R(0,"ngx-gantt-column",5),nt(1,pb,2,2,"ng-template",null,1,Qe)(3,fb,2,1,"ng-template",null,2,Qe),V()),o&2){let e=S();k("width",e.editColumnWidth)}}function hb(o,g){if(o&1&&(te(0,"div",15),Se(1,"safeHtml")),o&2){let e,l=S().item,c=S(3).$implicit,u=S();k("innerHTML",Ee(1,1,((e=u.columnMap.get(c.fieldName))==null?null:e.format(l==null?null:l.origin,u.columnMap.get(c.fieldName),null))||""),Mi)}}function _b(o,g){if(o&1&&(te(0,"div",16),Se(1,"safeHtml")),o&2){let e=S().item,l=S(2).$implicit;k("innerHTML",Ee(1,1,(e==null?null:e.origin[l.column])==null?"":e==null?null:e.origin[l.column]),Mi)}}function gb(o,g){if(o&1){let e=ne();R(0,"div",14),se("click",function(){let c,u=j(e).item,b=S(3).$implicit,N=S();return G((c=N.columnMap.get(b.fieldName))==null?null:c.click(u==null?null:u.origin))}),X(1,hb,2,3,"div",15)(2,_b,2,3,"div",16),V()}if(o&2){let e,l=S(3).$implicit,c=S();A(),Q((e=c.columnMap.get(l.fieldName))!=null&&e.format?1:2)}}function Cb(o,g){if(o&1&&(R(0,"ngx-gantt-column",13),nt(1,gb,3,1,"ng-template",null,2,Qe),V()),o&2){let e=S().$implicit;k("name",e.title)}}function yb(o,g){if(o&1&&X(0,Cb,3,1,"ngx-gantt-column",13),o&2){let e=g.$implicit,l=S(2);Q((l.vis.fieldVisibility==l.FieldVisibility.EXCLUDE?l.vis.fields.indexOf(e.column)===-1:l.vis.fields.indexOf(e.column)!==-1)?0:-1)}}function vb(o,g){if(o&1&&De(0,yb,1,1,null,null,Ie),o&2){let e=g.$implicit;Oe(e.eruptFieldJson.views)}}function wb(o,g){o&1&&(R(0,"div",9),te(1,"i",17),V())}function bb(o,g){if(o&1){let e=ne();R(0,"div",18),se("click",function(){let c=j(e).item,u=S(2);return G(u.edit(c))}),te(1,"i",19),V()}}function xb(o,g){o&1&&(R(0,"ngx-gantt-column",5),nt(1,wb,2,0,"ng-template",null,1,Qe)(3,bb,2,0,"ng-template",null,2,Qe),V()),o&2&&k("width",50)}function Tb(o,g){o&1&&(R(0,"div",9),te(1,"i",20),V())}function Sb(o,g){if(o&1){let e=ne();R(0,"div",11),se("click",function(){j(e);let c=S().item,u=S();return G(u.scrollToDate(c))}),te(1,"i",22),V()}}function Mb(o,g){if(o&1&&X(0,Sb,2,0,"div",21),o&2){let e=g.item;Q(e.start||e.end?0:-1)}}var Qm=(()=>{class o{uiBuildService;msg;dataService;eruptBuildModel;data=[];vis;onEdit=new Nt;onUpdate=new Nt;onSelectionChange=new Nt;ganttComponent;clientHeight=document.body.clientHeight;columnMap;items=[];groups=[];editColumnWidth=0;selectedItemIds=new Set;GanttViewType=sm;constructor(e,l,c){this.uiBuildService=e,this.msg=l,this.dataService=c}ngOnInit(){this.columnMap=new Map;for(let e of this.uiBuildService.viewToAlainTableConfig(this.eruptBuildModel,!0))this.columnMap.set(e.index,e)}dragEnded(e){let l=(0,kc.default)(Number(e.item.start)*1e3).format("YYYY-MM-DD 00:00:00"),c=(0,kc.default)(Number(e.item.end)*1e3).format("YYYY-MM-DD 23:59:59");this.dataService.updateGanttDate(this.eruptBuildModel.eruptModel.eruptName,this.vis.code,e.item.id,l,c).subscribe(u=>{for(let b of this.data)b[this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol]==e.item.id&&(b[this.vis.ganttView.startDateField]=l,b[this.vis.ganttView.endDateField]=c)})}edit(e){this.onEdit.emit(e.id)}toggleSelection(e,l){let c=e.id;this.selectedItemIds.has(c)?(this.selectedItemIds.delete(c),this.unselectChildren(e)):this.selectedItemIds.add(c),this.emitSelectionChange()}unselectChildren(e){e.children&&e.children.length>0&&e.children.forEach(l=>{this.selectedItemIds.delete(l.id),this.unselectChildren(l)})}isSelected(e){return this.selectedItemIds.has(e.id)}isAllSelected(){let e=l=>l.every(c=>{let u=this.selectedItemIds.has(c.id);return c.children&&c.children.length>0?u&&e(c.children):u});return this.items.length>0&&e(this.items)}isIndeterminate(){let e=l=>l.some(c=>{let u=this.selectedItemIds.has(c.id);return c.children&&c.children.length>0?u||e(c.children):u});return e(this.items)&&!this.isAllSelected()}toggleSelectAll(e){let l=c=>{c.forEach(u=>{e?this.selectedItemIds.add(u.id):this.selectedItemIds.delete(u.id),u.children&&u.children.length>0&&l(u.children)})};l(this.items),this.emitSelectionChange()}emitSelectionChange(){let e=[],l=c=>{c.forEach(u=>{this.selectedItemIds.has(u.id)&&u.origin&&e.push(u.origin),u.children&&u.children.length>0&&l(u.children)})};l(this.items),this.onSelectionChange.emit(e)}ngOnChanges(e){e.data&&(this.convertDataToGanttItems(),this.selectedItemIds.clear(),this.emitSelectionChange())}scrollToToday(){this.ganttComponent&&this.ganttComponent.scrollToToday()}scrollToDate(e){this.ganttComponent&&this.ganttComponent.scrollToDate(e.start||e.end)}onViewChange(){this.convertDataToGanttItems(),setTimeout(()=>{this.scrollToToday()},100)}getEruptField(e){return this.eruptBuildModel.eruptModel.eruptFieldModelMap.get(e).eruptFieldJson}convertDataToGanttItems(){if(!this.data||!this.data.length){this.items=[];return}let e=this.vis.ganttView;if(e.groupField){e.groupField=e.groupField.replace(/\./g,"_");for(let m of this.data){let h=this.groups.find(T=>T.id==m[e.groupField]);h||(h={id:m[e.groupField],title:m[e.groupField]||"No Group"},this.groups.push(h))}}else this.groups=[];let l=e.startDateField,c=e.endDateField,u=this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol,b=new Map,N=[];this.data.forEach((m,h)=>{let T=String(m[u]||h),y=this.parseDate(m[l]),x=this.parseDate(m[c]),v={id:T,title:T,start:y,end:x,origin:m,type:lm.bar};e.colorField&&m[e.colorField]&&(v.color=m[e.colorField]),e.progressField&&(v.progress=m[e.progressField]?Number(m[e.progressField]/100):0),e.groupField&&(v.group_id=m[e.groupField]),b.set(T,v),N.push(v)});let M=e.pidField;if(M){M=M.replace(/\./g,"_");let m=[];N.forEach(T=>{let y=this.data.find(x=>String(x[u])===T.id);if(y&&y[M]){let x=String(y[M]),v=b.get(x);v?(v.children||(v.children=[],v.expandable=!0,v.expanded=!0),v.children.push(T)):m.push(T)}else m.push(T)}),this.items=m;let h=this.calculateMaxDepth(m);this.editColumnWidth=90+h*20}else this.items=N,this.editColumnWidth=90}calculateMaxDepth(e,l=1){if(!e||e.length===0)return l-1;let c=l;return e.forEach(u=>{if(u.children&&u.children.length>0){let b=this.calculateMaxDepth(u.children,l+1);c=Math.max(c,b)}}),c}parseDate(e){if(!e)return null;let l=(0,kc.default)(e);return l.isValid()?l.valueOf():null}FieldVisibility=Ml;static \u0275fac=function(l){return new(l||o)(le(Xi),le(It),le(Pe))};static \u0275cmp=Fe({type:o,selectors:[["vis-gantt"]],viewQuery:function(l,c){if(l&1&&kt(ab,5),l&2){let u;Lt(u=At())&&(c.ganttComponent=u.first)}},inputs:{eruptBuildModel:"eruptBuildModel",data:"data",vis:"vis"},outputs:{onEdit:"onEdit",onUpdate:"onUpdate",onSelectionChange:"onSelectionChange"},standalone:!1,features:[Xo],decls:15,vars:21,consts:[["gantt",""],["header",""],["cell",""],[1,"gantt-container"],[3,"dragEnded","viewChange","items","groups","showToolbar","viewType","draggable","toolbarOptions","ngStyle","virtualScrollEnabled"],[3,"width"],["width","50px"],["nz-button","","nzType","primary","nzShape","circle","nzSize","large","nz-tooltip","","nzTooltipTitle","\u5B9A\u4F4D\u5230\u4ECA\u5929",1,"scroll-to-today-btn",3,"click"],["nz-icon","","nzType","calendar","nzTheme","outline"],[2,"text-align","center","width","100%"],["nz-checkbox","",3,"nzCheckedChange","click","nzChecked","nzIndeterminate"],[2,"text-align","center",3,"click"],["nz-checkbox","",3,"nzCheckedChange","click","nzChecked"],[3,"name"],[2,"cursor","pointer",3,"click"],[2,"text-align","center",3,"innerHTML"],[3,"innerHTML"],["nz-icon","","nzType","edit"],[3,"click"],["nz-icon","","nzType","edit","nzTheme","twotone",2,"cursor","pointer"],["nz-icon","","nzType","aim","nzTheme","outline"],[2,"text-align","center"],["nz-icon","","nzType","aim","nzTheme","outline",2,"cursor","pointer","color","#09f"]],template:function(l,c){if(l&1){let u=ne();R(0,"div",3)(1,"ngx-gantt",4,0),se("dragEnded",function(N){return j(u),G(c.dragEnded(N))})("viewChange",function(){return j(u),G(c.onViewChange())}),R(3,"ngx-gantt-table"),X(4,mb,5,1,"ngx-gantt-column",5),De(5,vb,2,0,null,null,ub),X(7,xb,5,1,"ngx-gantt-column",5),R(8,"ngx-gantt-column",6),nt(9,Tb,2,0,"ng-template",null,1,Qe)(11,Mb,1,1,"ng-template",null,2,Qe),V()()(),R(13,"button",7),se("click",function(){return j(u),G(c.scrollToToday())}),te(14,"i",8),V()()}l&2&&(A(),k("items",c.items||at(10,lb))("groups",c.groups)("showToolbar",!0)("viewType",c.GanttViewType.day)("draggable",c.eruptBuildModel.eruptModel.eruptJson.power.edit)("toolbarOptions",$t(17,cb,Of(11,sb,c.GanttViewType.day,c.GanttViewType.week,c.GanttViewType.month,c.GanttViewType.quarter,c.GanttViewType.year)))("ngStyle",$t(19,db,"572px"))("virtualScrollEnabled",!0),A(3),Q(c.editColumnWidth?4:-1),A(),Oe(c.eruptBuildModel.eruptModel.eruptFieldModels),A(2),Q(c.eruptBuildModel.eruptModel.eruptJson.power.edit?7:-1))},dependencies:[Gn,tn,Ct,dn,Ur,Dn,pt,um,dm,cm,Ki],styles:[".gantt-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.gantt-container[_ngcontent-%COMP%]   .scroll-to-today-btn[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px;z-index:1000;box-shadow:0 2px 8px #00000026}"]})}return o})();var Nb=["st"],Db=()=>({rows:10}),Ob=(o,g)=>({overflowX:"hidden",overflowY:o,height:g}),Ib=()=>({padding:"10px"}),Rb=o=>({marginTop:o,marginBottom:"8px"}),Pb=o=>({height:o}),Vb=()=>({strictBehavior:"truncate"}),Bb=(o,g)=>({x:o,y:g});function Hb(o,g){o&1&&te(0,"nz-skeleton",9),o&2&&k("nzActive",!0)("nzTitle",!0)("nzParagraph",at(3,Db))}function Wb(o,g){if(o&1){let e=ne();R(0,"div",11)(1,"layout-tree",18),se("trigger",function(c){j(e);let u=S(2);return G(u.clickTreeNode(c))}),V()()}if(o&2){let e=S(2);k("nzXs",24)("nzSm",24)("nzMd",8)("nzLg",6)("nzXl",4),A(),k("eruptModel",e.eruptBuildModel.eruptModel)}}function Jb(o,g){if(o&1){let e=ne();R(0,"button",19),se("click",function(){j(e);let c=S(2);return G(c.addData())}),te(1,"i",20),he(2),Se(3,"translate"),V()}o&2&&(A(2),$e("",Ee(3,1,"table.add")," "))}function Ub(o,g){if(o&1){let e=ne();R(0,"button",21),se("click",function(){j(e);let c=S(2);return G(c.exportExcel())}),te(1,"i",22),he(2),Se(3,"translate"),V()}if(o&2){let e=S(2);k("nzLoading",e.downloading),A(2),$e("",Ee(3,2,"table.download")," ")}}function $b(o,g){if(o&1){let e=ne();R(0,"span",23)(1,"button",24),se("click",function(){j(e);let c=S(2);return G(c.importableExcel())}),te(2,"i",25),he(3),Se(4,"translate"),V(),R(5,"button",26),te(6,"i",27),V()(),R(7,"nz-dropdown-menu",null,1)(9,"ul",28)(10,"li",29),se("click",function(){j(e);let c=S(2);return G(c.downloadExcelTemplate())}),te(11,"i",30),he(12),Se(13,"translate"),V()()(),he(14," \xA0 ")}if(o&2){let e=Ue(8);A(3),$e(" \xA0",Ee(4,3,"table.import")," "),A(2),k("nzDropdownMenu",e),A(7),$e(" \xA0",Ee(13,5,"table.download_template")," ")}}function jb(o,g){if(o&1&&te(0,"nz-option",40),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",e.title)}}function Gb(o,g){if(o&1&&(R(0,"label",49),he(1," 0 \u2192 9 "),V(),R(2,"label",49),he(3," 9 \u2192 0 "),V()),o&2){let e=S(5);k("nzValue",e.SortType.ASC),A(2),k("nzValue",e.SortType.DESC)}}function Kb(o,g){if(o&1&&(R(0,"label",49),he(1," A \u2192 Z "),V(),R(2,"label",49),he(3," Z \u2192 A "),V()),o&2){let e=S(5);k("nzValue",e.SortType.ASC),A(2),k("nzValue",e.SortType.DESC)}}function qb(o,g){if(o&1){let e=ne();R(0,"div",36),te(1,"i",44),R(2,"nz-select",45),ye("ngModelChange",function(c){let u=j(e).$implicit;return Ce(u.field,c)||(u.field=c),G(c)}),De(3,jb,1,2,"nz-option",40,Ie),V(),R(5,"nz-radio-group",46),ye("ngModelChange",function(c){let u=j(e).$implicit;return Ce(u.direction,c)||(u.direction=c),G(c)}),X(6,Gb,4,2),X(7,Kb,4,2),V(),R(8,"button",47),se("click",function(){let c=j(e).$index,u=S(4);return G(u.removeSortField(c))}),te(9,"i",48),V()()}if(o&2){let e=g.$implicit,l=S(4);A(2),ge("ngModel",e.field),k("nzDisabled",!0)("nzPlaceHolder",l.i18n.fanyi("table.sort.select_field")),A(),Oe(l.sortFields),A(2),ge("ngModel",e.direction),A(),Q(l.isNumericOrDateType(e.field)?6:-1),A(),Q(l.isNumericOrDateType(e.field)?-1:7)}}function Xb(o,g){o&1&&(R(0,"div",37),he(1),Se(2,"translate"),V()),o&2&&(A(),$e(" ",Ee(2,1,"table.sort.not_field")," "))}function Qb(o,g){if(o&1&&te(0,"nz-option",40),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",e.title)}}function Yb(o,g){if(o&1){let e=ne();R(0,"div",33)(1,"div",34)(2,"div",35),se("cdkDropListDropped",function(c){j(e);let u=S(3);return G(u.onSortDrop(c))}),De(3,qb,10,6,"div",36,Ie),X(5,Xb,3,3,"div",37),V(),R(6,"div",38)(7,"nz-select",39),ye("ngModelChange",function(c){j(e);let u=S(3);return Ce(u.tempSelectedField,c)||(u.tempSelectedField=c),G(c)}),se("ngModelChange",function(c){j(e);let u=S(3);return G(u.onFieldSelectChange(c))}),De(8,Qb,1,2,"nz-option",40,Ie),V()()(),R(10,"div",41)(11,"button",42),se("click",function(){j(e);let c=S(3);return G(c.showSortPopover=!1)}),he(12),Se(13,"translate"),V(),R(14,"button",43),se("click",function(){j(e);let c=S(3);return G(c.applySort())}),he(15),Se(16,"translate"),V()()()}if(o&2){let e=S(3);A(3),Oe(e.selectedSorts),A(2),Q(e.selectedSorts.length===0?5:-1),A(2),ge("ngModel",e.tempSelectedField),k("nzPlaceHolder",e.i18n.fanyi("table.sort.select_field")),A(),Oe(e.getAvailableFields()),A(4),$e(" ",Ee(13,5,"global.cancel")," "),A(3),$e(" ",Ee(16,7,"global.ok")," ")}}function Zb(o,g){if(o&1){let e=ne();R(0,"button",31),ye("nzPopoverVisibleChange",function(c){j(e);let u=S(2);return Ce(u.showSortPopover,c)||(u.showSortPopover=c),G(c)}),te(1,"i",32),he(2),Se(3,"translate"),V(),nt(4,Yb,17,9,"ng-template",null,2,Qe)}if(o&2){let e=Ue(5),l=S(2);Ji("border-color",l.selectedSorts.length?"#09f":null),ge("nzPopoverVisible",l.showSortPopover),k("nzPopoverContent",e),A(2),$e(" ",Ee(3,5,"global.sort")," ")}}function ex(o,g){if(o&1){let e=ne();R(0,"button",50),se("click",function(){j(e);let c=S(2);return G(c.query())}),te(1,"i",51),he(2),Se(3,"translate"),V()}if(o&2){let e=S(2);k("nzSearch",!0)("nzLoading",e.dataPage.querying),A(2),$e("",Ee(3,3,"table.query")," ")}}function tx(o,g){if(o&1){let e=ne();R(0,"button",53),se("click",function(){j(e);let c=S(3);return G(c.delRows())}),te(1,"i",54),he(2),Se(3,"translate"),V()}if(o&2){let e=S(3);k("nzLoading",e.deleting),A(2),$e("",Ee(3,2,"table.delete")," ")}}function nx(o,g){if(o&1&&X(0,tx,4,4,"button",52),o&2){let e=S(2);Q(e.selectedRows.length>0?0:-1)}}function ix(o,g){if(o&1&&te(0,"i",57),o&2){let e=S(3).$implicit;k("ngClass",e.icon)}}function rx(o,g){if(o&1){let e=ne();R(0,"button",56),se("click",function(){j(e);let c=S(2).$implicit,u=S(3);return G(u.createOperator(c))}),X(1,ix,1,1,"i",57),R(2,"span"),he(3),V()()}if(o&2){let e=S(2).$implicit;k("nz-tooltip",e.tip),A(),Q(e.icon?1:-1),A(2),Dt(e.title)}}function ox(o,g){if(o&1&&X(0,rx,4,3,"button",55),o&2){let e=S().$implicit;Q(e.fold?-1:0)}}function ax(o,g){if(o&1&&X(0,ox,1,1),o&2){let e=g.$implicit,l=S(3);Q(e.mode!=l.operationMode.SINGLE?0:-1)}}function lx(o,g){if(o&1&&te(0,"i",57),o&2){let e=S(3).$implicit;k("ngClass",e.icon)}}function sx(o,g){if(o&1){let e=ne();R(0,"li",60),se("click",function(){j(e);let c=S(2).$implicit,u=S(4);return G(u.createOperator(c))}),X(1,lx,1,1,"i",57),R(2,"span"),he(3),V()()}if(o&2){let e=S(2).$implicit;k("nz-tooltip",e.tip),A(),Q(e.icon?1:-1),A(2),Dt(e.title)}}function cx(o,g){if(o&1&&X(0,sx,4,3,"li",59),o&2){let e=S().$implicit;Q(e.fold?0:-1)}}function dx(o,g){if(o&1&&X(0,cx,1,1),o&2){let e=g.$implicit,l=S(4);Q(e.mode!=l.operationMode.SINGLE?0:-1)}}function ux(o,g){if(o&1&&(R(0,"button",58),te(1,"i",27),V(),R(2,"nz-dropdown-menu",null,3)(4,"ul",28),De(5,dx,1,1,null,null,Ie),V()()),o&2){let e=Ue(3),l=S(3);k("nzDropdownMenu",e),A(5),Oe(l.eruptBuildModel.eruptModel.eruptJson.rowOperation)}}function px(o,g){if(o&1&&(he(0," \xA0 "),De(1,ax,1,1,null,null,Ie),X(3,ux,7,1)),o&2){let e=S(2);A(),Oe(e.eruptBuildModel.eruptModel.eruptJson.rowOperation),A(2),Q(e.existMultiRowFoldButtons?3:-1)}}function fx(o,g){if(o&1){let e=ne();R(0,"div",64)(1,"label",65),ye("ngModelChange",function(c){j(e);let u=S().$implicit;return Ce(u.show,c)||(u.show=c),G(c)}),se("ngModelChange",function(){j(e);let c=S(5);return G(c.st==null?null:c.st.resetColumns())}),he(2),Se(3,"nzEllipsis"),V()()}if(o&2){let e=S().$implicit;A(),ge("ngModel",e.show),A(),Dt(Rf(3,2,e.title.text,6,"..."))}}function mx(o,g){if(o&1&&X(0,fx,4,6,"div",64),o&2){let e=g.$implicit;Q(e.title&&e.index?0:-1)}}function hx(o,g){if(o&1&&(R(0,"div",63),De(1,mx,1,1,null,null,Ie),V()),o&2){let e=S(3);A(),Oe(e.columns)}}function _x(o,g){if(o&1){let e=ne();te(0,"nz-divider",66),R(1,"button",67),se("click",function(){j(e);let c=S(3);return G(c.hideCondition=!c.hideCondition)}),te(2,"i",68),V(),R(3,"button",69),se("click",function(){j(e);let c=S(3);return G(c.clearCondition())}),te(4,"i",70),he(5),Se(6,"translate"),V()}if(o&2){let e=S(3);A(2),k("nzType",e.hideCondition?"caret-down":"caret-up"),A(),k("disabled",e.dataPage.querying),A(2),$e("",Ee(6,3,"table.reset")," ")}}function gx(o,g){if(o&1){let e=ne();R(0,"div",17)(1,"div")(2,"button",61),ye("nzPopoverVisibleChange",function(c){j(e);let u=S(2);return Ce(u.showColCtrl,c)||(u.showColCtrl=c),G(c)}),te(3,"i",62),V(),nt(4,hx,3,0,"ng-template",null,4,Qe),X(6,_x,7,5),V()()}if(o&2){let e=Ue(5),l=S(2);A(2),ge("nzPopoverVisible",l.showColCtrl),k("nzPopoverContent",e),A(4),Q(l.hasSearchFields?6:-1)}}function Cx(o,g){if(o&1&&(te(0,"span",74),Se(1,"safeHtml")),o&2){let e=S(4);k("innerHTML",Ee(1,1,e.alert.message),Mi)}}function yx(o,g){if(o&1){let e=ne();R(0,"nz-alert",73),se("nzOnClose",function(){j(e);let c=S(3);return G(c.alert=null)}),V(),nt(1,Cx,2,3,"ng-template",null,5,Qe)}if(o&2){let e=Ue(2),l=S(3);k("nzMessage",e)("nzType",l.alert.uiType)("nzCloseable",l.alert.closeable)}}function vx(o,g){if(o&1){let e=ne();R(0,"nz-card",71)(1,"erupt-search",75),se("search",function(){j(e);let c=S(3);return G(c.query())}),V()()}if(o&2){let e=S(3);k("nzBodyStyle",at(4,Ib))("hidden",e.hideCondition),A(),k("searchEruptModel",e.searchErupt)("size","default")}}function wx(o,g){if(o&1){let e=ne();R(0,"nz-segmented",79),ye("ngModelChange",function(c){j(e);let u=S(4);return Ce(u.selectedVisIndex,c)||(u.selectedVisIndex=c),G(c)}),se("ngModelChange",function(c){j(e);let u=S(4);return G(u.visChange(c))}),V()}if(o&2){let e=S(4);k("nzOptions",e.visOptions)("ngStyle",$t(3,Rb,e.hideCondition?0:"8px")),ge("ngModel",e.selectedVisIndex)}}function bx(o,g){o&1&&(R(0,"div",80),te(1,"nz-empty",81),V())}function xx(o,g){if(o&1&&X(0,bx,2,0,"div",80),o&2){let e=S(4);Q(!e.dataPage.data||e.dataPage.data.length==0?0:-1)}}function Tx(o,g){if(o&1){let e=ne();R(0,"vis-card",82),se("onEdit",function(c){j(e);let u=S(4);return G(u.onEdit(c))}),V()}if(o&2){let e=S(4);k("eruptBuildModel",e.eruptBuildModel)("data",e.dataPage.data)("vis",e.vis[e.selectedVisIndex])}}function Sx(o,g){if(o&1&&Tn(0,72),o&2){S(4);let e=Ue(3);k("ngTemplateOutlet",e)}}function Mx(o,g){if(o&1){let e=ne();R(0,"vis-gantt",83),se("onEdit",function(c){j(e);let u=S(4);return G(u.onEdit(c))})("onSelectionChange",function(c){j(e);let u=S(4);return G(u.selectedRows=c)}),V()}if(o&2){let e=S(4);k("eruptBuildModel",e.eruptBuildModel)("data",e.dataPage.data)("vis",e.vis[e.selectedVisIndex])}}function Ex(o,g){if(o&1&&te(0,"erupt-iframe",84),o&2){let e=S(5);k("url",e.dataService.getEruptVisTpl(e.eruptBuildModel.eruptModel.eruptName,e.vis[e.selectedVisIndex].code))}}function zx(o,g){if(o&1&&(R(0,"nz-spin",78),X(1,Ex,1,1,"erupt-iframe",84),V()),o&2){let e=S(4);k("nzSpinning",!e.getVisTplData())("ngStyle",$t(3,Pb,e.vis[e.selectedVisIndex].tplView.height||525+(e.clientHeight-814)+"px")),A(),Q(e.getVisTplData()?1:-1)}}function kx(o,g){if(o&1&&Tn(0,72),o&2){S(4);let e=Ue(3);k("ngTemplateOutlet",e)}}function Lx(o,g){if(o&1&&(R(0,"div"),X(1,wx,1,5,"nz-segmented",76),X(2,xx,1,1),R(3,"div"),X(4,Tx,1,3,"vis-card",77)(5,Sx,1,1,"ng-container",72)(6,Mx,1,3,"vis-gantt",77)(7,zx,2,5,"nz-spin",78)(8,kx,1,1,"ng-container",72),V()()),o&2){let e,l=S(3);A(),Q(l.visOptions.length>1?1:-1),A(),Q((l.vis[l.selectedVisIndex]==null?null:l.vis[l.selectedVisIndex].type)==l.VisType.CARD?2:-1),A(2),Q((e=l.vis[l.selectedVisIndex]==null?null:l.vis[l.selectedVisIndex].type)===l.VisType.CARD?4:e===l.VisType.TABLE?5:e===l.VisType.GANTT?6:e===l.VisType.TPL?7:8)}}function Ax(o,g){if(o&1&&Tn(0,72),o&2){S(3);let e=Ue(3);k("ngTemplateOutlet",e)}}function Fx(o,g){if(o&1&&(he(0),Se(1,"translate"),Se(2,"translate")),o&2){let e=S(4);Nf("",Ee(1,3,"table.totalLeft")," ",e.dataPage.total," ",Ee(2,5,"table.totalRight")," ")}}function Nx(o,g){if(o&1){let e=ne();R(0,"nz-pagination",85),se("nzPageSizeChange",function(c){j(e);let u=S(3);return G(u.pageSizeChange(c))})("nzPageIndexChange",function(c){j(e);let u=S(3);return G(u.pageIndexChange(c))}),V(),nt(1,Fx,3,7,"ng-template",null,6,Qe)}if(o&2){let e=Ue(2),l=S(3);k("nzPageIndex",l.dataPage.pi)("nzShowTotal",e)("nzPageSize",l.dataPage.ps)("nzTotal",l.dataPage.total)("nzPageSizeOptions",l.dataPage.pageSizes)("nzSize","small")}}function Dx(o,g){if(o&1&&(X(0,yx,3,3),X(1,vx,2,5,"nz-card",71),X(2,Lx,9,3,"div"),X(3,Ax,1,1,"ng-container",72),X(4,Nx,3,6)),o&2){let e=S(2);Q(e.alert?0:-1),A(),Q(e.hasSearchFields?1:-1),A(),Q(e.vis.length?2:-1),A(),Q(e.vis.length?-1:3),A(),Q(e.dataPage.showPagination?4:-1)}}function Ox(o,g){if(o&1&&(R(0,"div",10),X(1,Wb,2,6,"div",11),R(2,"div",12),Vr(3),R(4,"div",13)(5,"div"),X(6,Jb,4,3,"button",14),X(7,Ub,4,4,"button",15),X(8,$b,15,7),X(9,Zb,6,7),X(10,ex,4,5,"button",16),X(11,nx,1,1),X(12,px,4,1),V(),X(13,gx,7,3,"div",17),V(),X(14,Dx,5,5),Br(),V()()),o&2){let e=S();k("nzGutter",12),A(),Q(e.linkTree?1:-1),A(),k("nzXs",24)("nzMd",e.linkTree?16:24)("nzLg",e.linkTree?18:24)("nzXl",e.linkTree?20:24)("hidden",!e.showTable)("ngStyle",Ei(17,Ob,e.linkTree?"auto":"hidden",e.linkTree?"calc(100vh - 103px - "+(e.settingSrv.layout.reuse?"40px":"0px")+" + "+(e.settingSrv.layout.breadcrumbs?"0px":"38px")+")":"auto")),A(4),Q(e.eruptBuildModel.eruptModel.eruptJson.power.add?6:-1),A(),Q(e.eruptBuildModel.eruptModel.eruptJson.power.export?7:-1),A(),Q(e.eruptBuildModel.eruptModel.eruptJson.power.importable?8:-1),A(),Q(e.sortFields.length?9:-1),A(),Q(e.eruptBuildModel.eruptModel.eruptJson.power.query?10:-1),A(),Q(e.eruptBuildModel.eruptModel.eruptJson.power.delete?11:-1),A(),Q(e.eruptBuildModel.eruptModel.eruptJson.rowOperation?12:-1),A(),Q(e.eruptBuildModel.eruptModel.eruptJson.power.query?13:-1),A(),Q(e.eruptBuildModel.eruptModel.eruptJson.power.query?14:-1)}}function Ix(o,g){if(o&1&&(R(0,"td",89),he(1),V()),o&2){let e=g.$implicit;k("colSpan",e.colspan)("ngClass",e.className),A(),$e(" ",e.value," ")}}function Rx(o,g){if(o&1&&(R(0,"tr",88),De(1,Ix,2,3,"td",89,Ie),V()),o&2){let e=g.$implicit;k("ngClass",e.className),A(),Oe(e.columns)}}function Px(o,g){if(o&1&&De(0,Rx,3,1,"tr",88,Ie),o&2){let e=S(2);Oe(e.extraRows)}}function Vx(o,g){if(o&1){let e=ne();R(0,"div",86)(1,"st",87,7),se("change",function(c){j(e);let u=S();return G(u.tableDataChange(c))}),nt(3,Px,2,0,"ng-template",null,8,Qe),V()()}if(o&2){let e=Ue(4),l=S();k("syncVirtualScroll",l.dataPage.data.length>=100),A(),k("loading",l.dataPage.querying)("widthMode",at(12,Vb))("body",e)("data",l.dataPage.data)("columns",l.columns)("virtualScroll",l.dataPage.data.length>=100)("virtualItemSize",47)("scroll",Ei(13,Bb,l.clientWidth>768?l.tableWidth:"0px",(l.clientHeight>814?525+(l.clientHeight-814):525)+"px"))("bordered",l.settingSrv.layout.bordered)("page",l.dataPage.page)("size","middle")}}var ya=(()=>{class o{settingSrv;dataHandlerService;msg;modal;appViewService;dataService;dataHandler;uiBuildService;i18n;drawerService;VisType=Sc;constructor(e,l,c,u,b,N,M,m,h,T){this.settingSrv=e,this.dataHandlerService=l,this.msg=c,this.modal=u,this.appViewService=b,this.dataService=N,this.dataHandler=M,this.uiBuildService=m,this.i18n=h,this.drawerService=T}st;extraRows;operationMode=yr;showColCtrl=!1;deleting=!1;clientWidth=document.body.clientWidth;clientHeight=document.body.clientHeight;hideCondition=!1;alert;searchErupt;hasSearchFields=!1;eruptBuildModel;selectedRows=[];columns;linkTree=!1;showTable=!0;downloading=!1;_drill;dataPage={querying:!1,showPagination:!0,pageSizes:[10,20,50,100,300,500],ps:10,pi:1,total:0,data:[],sort:null,multiSort:[],page:{show:!1,toTop:!1},url:null};vis;selectedVisIndex=0;visOptions=[];adding=!1;header;refreshTimeInterval;existMultiRowFoldButtons=!1;tableWidth;showSortPopover=!1;sortFields=[];selectedSorts=[];tempSelectedField=null;set drill(e){this._drill=e,this.init(this.dataService.getEruptBuild(e.erupt),{url:ji.data+"/table/"+e.erupt,header:su({erupt:e.erupt},Pe.drillToHeader(e))})}_reference;set referenceTable(e){this._reference=e,this.init(this.dataService.getEruptBuildByField(e.eruptBuild.eruptModel.eruptName,e.eruptField.fieldName,e.parentEruptName),{url:ji.data+"/"+e.eruptBuild.eruptModel.eruptName+"/reference-table/"+e.eruptField.fieldName+"?tabRef="+e.tabRef+(e.dependVal?"&dependValue="+e.dependVal:""),header:{erupt:e.eruptBuild.eruptModel.eruptName,eruptParent:e.parentEruptName||""}},l=>{this.vis=[];let c=l.eruptModel.eruptJson;c.rowOperation=[],c.drills=[],c.power.add=!1,c.power.delete=!1,c.power.importable=!1,c.power.edit=!1,c.power.export=!1,c.power.viewDetails=!1})}set eruptName(e){this.init(this.dataService.getEruptBuild(e),{url:ji.data+"/table/"+e,header:{erupt:e}},l=>{this.appViewService.setRouterViewDesc(l.eruptModel.eruptJson.desc)})}ngOnInit(){}ngOnDestroy(){this.refreshTimeInterval&&clearInterval(this.refreshTimeInterval)}init(e,l,c){this.selectedRows=[],this.showTable=!0,this.adding=!1,this.eruptBuildModel=null,this.searchErupt=null,this.hasSearchFields=!1,this.existMultiRowFoldButtons=!1,this.sortFields=[],this.selectedSorts=[],this.tempSelectedField=null,this.showSortPopover=!1,this.header=l.header,this.dataPage.url=l.url,e.subscribe(u=>{this.vis=u.eruptModel.eruptJson.vis||[],this.vis.length&&(this.hideCondition=!0,this.visOptions=this.vis.map((M,m)=>({label:M.title,value:m,useTemplate:!0})),u.eruptModel.eruptJson.visRawTable&&this.visOptions.push({icon:"table"})),u.eruptModel.eruptJson.rowOperation.forEach(M=>{M.mode!=yr.SINGLE&&M.fold&&(this.existMultiRowFoldButtons=!0)});for(let M of u.eruptModel.eruptFieldModels)for(let m of M.eruptFieldJson.views)m.sortable&&this.sortFields.push(m);let b=u.eruptModel.eruptJson.layout;if(b){if(b.pageSizes&&(this.dataPage.pageSizes=b.pageSizes),b.pageSize&&(this.dataPage.ps=b.pageSize),b.pagingType)if(b.pagingType==aa.FRONT){let M=this.dataPage.page;M.front=!0,M.show=!0,M.placement="center",M.showQuickJumper=!0,M.showSize=!0,M.pageSizes=b.pageSizes,this.dataPage.showPagination=!1}else b.pagingType==aa.NONE&&(this.dataPage.ps=b.pageSizes[b.pageSizes.length-1]*10,this.dataPage.showPagination=!1,this.dataPage.page.show=!1);b.refreshTime&&b.refreshTime>0&&(this.refreshTimeInterval=setInterval(()=>{try{this.query()}catch{this.query(1)}},b.refreshTime))}let N=u.eruptModel.eruptJson.linkTree;this.linkTree=!!N,this.dataHandler.initErupt(u),c&&c(u),this.eruptBuildModel=u,this.buildTableConfig(),this.searchErupt=(0,Zm.cloneDeep)(this.eruptBuildModel.eruptModel);for(let M of this.searchErupt.eruptFieldModels){let m=M.eruptFieldJson.edit;m&&m.search.value&&(this.hasSearchFields=!0,M.eruptFieldJson.edit.$value=this.searchErupt.searchCondition[M.fieldName])}N&&(this.showTable=!N.dependNode,N.dependNode)||this.query(1)})}visChange(e){this.query()}query(e,l,c){if(!this.eruptBuildModel.power.query)return;let u={};u.condition=this.dataHandler.eruptObjectToCondition(this.dataHandler.searchEruptToObject({eruptModel:this.searchErupt}));let b=this.eruptBuildModel.eruptModel.eruptJson.linkTree;b&&b.field&&(u.linkTreeVal=b.value),this.dataPage.pi=e||this.dataPage.pi,this.dataPage.ps=l||this.dataPage.ps,this.dataPage.sort=c||this.dataPage.sort;let N=null;if(this.dataPage.sort){N=[];for(let M in this.dataPage.sort)N.push({field:M,direction:this.dataPage.sort[M].toUpperCase()})}this.selectedRows=[],this.dataPage.querying=!0,this.setVisTplData(null),this.dataService.queryEruptTableData(this.eruptBuildModel.eruptModel.eruptName,this.dataPage.url,su({pageIndex:this.dataPage.pi,pageSize:this.dataPage.ps,vis:this.vis[this.selectedVisIndex]?.code,sort:N},u),this.header).subscribe(M=>{this.dataPage.querying=!1,this.dataPage.data=M.list||[],this.dataPage.total=M.total,this.alert=M.alert,this.selectedVisIndex&&this.vis[this.selectedVisIndex].type==Sc.TPL&&this.setVisTplData(this.dataPage.data)}),this.extraRowFun(u)}setVisTplData(e){window[$i.VIS_TPL_DATA_KEY]=e}getVisTplData(){return window[$i.VIS_TPL_DATA_KEY]}buildTableConfig(){let e=[];this._reference?e.push({title:"",type:this._reference.mode,fixed:"left",width:"50px",className:"text-center",index:this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol}):e.push({title:"",width:"40px",resizable:!1,type:"checkbox",fixed:"left",className:"text-center left-sticky-checkbox",index:this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol});let l=this.uiBuildService.viewToAlainTableConfig(this.eruptBuildModel,!0);for(let x of l)x.iif=()=>x.show;e.push(...l);let c=[];if(this.eruptBuildModel.eruptModel.eruptJson.power.viewDetails){let x=!1,v=this.eruptBuildModel.eruptModel.eruptJson.layout;v&&v.formSize==oa.FULL_LINE&&(x=!0),c.push({icon:"eye",tooltip:this.i18n.fanyi("global.view"),click:(O,H)=>{let P={readonly:!0,eruptBuildModel:this.eruptBuildModel,behavior:mn.EDIT,id:O[this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol]};if(this.settingSrv.layout.drawDraw)this.drawerService.create({nzTitle:this.i18n.fanyi("global.view"),nzWidth:"75%",nzContent:go,nzContentParams:P});else{let B=this.modal.create({nzWrapClassName:x?null:"modal-lg edit-modal-lg",nzWidth:x?550:null,nzStyle:{top:"60px"},nzMaskClosable:!0,nzKeyboard:!0,nzCancelText:this.i18n.fanyi("global.close")+"\uFF08ESC\uFF09",nzOkText:null,nzTitle:this.i18n.fanyi("global.view"),nzContent:go});Object.assign(B.getContentComponent(),P)}},iif:O=>O[yo.power]?O[yo.power].viewDetails!==!1:!0})}let u=[],b=[],N=this,M=(x,v)=>{try{return x?new Function("item","return "+x)(v):!0}catch{return!1}},m=!1;for(let x in this.eruptBuildModel.eruptModel.eruptJson.rowOperation){let v=this.eruptBuildModel.eruptModel.eruptJson.rowOperation[x];if(v.mode!==yr.BUTTON&&v.mode!==yr.MULTI_ONLY)if(v.fold)m=!0;else{let O="";v.icon?O=`<i class="${v.icon}"></i>`:O=v.title,u.push({type:"link",text:O,tooltip:v.title+(v.tip&&"("+v.tip+")"),click:(H,P)=>{N.createOperator(v,H)},iifBehavior:v.ifExprBehavior==tm.DISABLE?"disabled":"hide",iif:H=>M(v.ifExpr,H)})}}let h=this.eruptBuildModel.eruptModel.eruptJson,T=(x,v)=>{let O=this.modal.create({nzWrapClassName:"modal-xxl",nzStyle:{top:"30px"},nzBodyStyle:{padding:"18px"},nzMaskClosable:!1,nzKeyboard:!1,nzTitle:x.title,nzFooter:null,nzContent:o});O.getContentComponent().drill={code:x.code,val:v,erupt:x.link.linkErupt,eruptParent:this.eruptBuildModel.eruptModel.eruptName}};for(let x in h.drills){let v=h.drills[x];v.fold?m=!0:u.push({type:"link",tooltip:v.title,text:`<i class="${v.icon}"></i>`,click:O=>{T(v,O[h.primaryKeyCol])}}),b.push({label:v.title,type:"dashed",onClick(O){T(v,O[h.primaryKeyCol])}})}let y=x=>{for(let v of b)v.id=x[this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol],v.data=x;return b};if(this.eruptBuildModel.eruptModel.eruptJson.power.edit){let x=!1,v=this.eruptBuildModel.eruptModel.eruptJson.layout;v&&v.formSize==oa.FULL_LINE&&(x=!0),c.push({icon:"edit",tooltip:this.i18n.fanyi("global.editor"),click:O=>{this.onEdit(O[this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol],x,y(O))},iif:O=>O[yo.power]?O[yo.power].edit!==!1:!0})}if(this.eruptBuildModel.eruptModel.eruptJson.power.delete&&c.push({icon:{type:"delete",theme:"twotone",twoToneColor:"#f00"},tooltip:this.i18n.fanyi("global.delete"),pop:this.i18n.fanyi("table.delete.hint"),type:"del",click:x=>{this.dataService.deleteEruptData(this.eruptBuildModel.eruptModel.eruptName,x[this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol]).subscribe(v=>{v.status===Nn.SUCCESS&&(this.dataPage.data.length<=1?this.query(this.dataPage.pi==1?1:this.dataPage.pi-1):this.query(this.dataPage.pi),this.msg.success(this.i18n.fanyi("global.delete.success")))})},iif:x=>x[yo.power]?x[yo.power].delete!==!1:!0}),c.push(...u),this.eruptBuildModel.eruptModel.tags?.EruptFlow&&c.push({icon:"node-index",tooltip:this.i18n.fanyi("VIEW_FLOW"),click:(x,v)=>{this.drawerService.create({nzClosable:!1,nzKeyboard:!0,nzMaskClosable:!0,nzPlacement:"right",nzWidth:"60%",nzBodyStyle:{padding:0},nzFooter:null,nzContent:fo,nzContentParams:{url:location.origin+"/#/fill/flow/approval-detail/"+x.__flow_id__,height:"100%",width:"100%"}})},iif:x=>x.__flow_id__}),m){let x=[];h.rowOperation.forEach(v=>{v.mode!==yr.BUTTON&&v.mode!==yr.MULTI_ONLY&&v.fold&&x.push({text:(v.icon&&`<i class="${v.icon}"></i> &nbsp;`)+v.title,iifBehavior:"disabled",tooltip:v.tip,iif:O=>M(v.ifExpr,O),click:O=>N.createOperator(v,O)})}),h.drills.forEach(v=>{v.fold&&x.push({text:(v.icon&&`<i class="${v.icon}"></i> &nbsp;`)+v.title,iifBehavior:"disabled",click:O=>T(v,O[h.primaryKeyCol])})}),c.push({text:this.i18n.fanyi("global.more")+" ",children:x})}c.length>0&&e.push({title:this.i18n.fanyi("table.operation"),fixed:"right",width:h.layout.tableOperatorWidth?h.layout.tableOperatorWidth:(c.length+(this.eruptBuildModel.eruptModel.tags?.size||0))*35+18+(m?60:0),className:"text-center",buttons:c,resizable:!1}),this.columns=e,h.layout.tableWidth?this.tableWidth=h.layout.tableWidth:this.tableWidth=this.eruptBuildModel.eruptModel.tableColumns.filter(x=>x.show).length*160*this.i18n.getCurrLangInfo().columnWidthZoom+"px"}onEdit(e,l=!1,c=[]){let u={eruptBuildModel:this.eruptBuildModel,id:e,behavior:mn.EDIT},b=this.modal.create({nzWrapClassName:l?null:"modal-lg edit-modal-lg",nzWidth:l?550:null,nzStyle:{top:"60px"},nzMaskClosable:!1,nzKeyboard:!1,nzTitle:this.i18n.fanyi("global.editor"),nzOkText:this.i18n.fanyi("global.update"),nzContent:go,nzFooter:[{label:this.i18n.fanyi("global.cancel"),onClick:()=>{b.close()}},...c,{label:this.i18n.fanyi("global.update"),type:"primary",onClick:()=>b.triggerOk()}],nzOnOk:()=>hr(this,null,function*(){if(b.getContentComponent().beforeSaveValidate()){let M=this.dataHandler.eruptValueToObject(this.eruptBuildModel);return(yield this.dataService.updateEruptData(this.eruptBuildModel.eruptModel.eruptName,M).toPromise().then(h=>h)).status===Nn.SUCCESS?(this.msg.success(this.i18n.fanyi("global.update.success")),this.query(),!0):!1}else return!1})});Object.assign(b.getContentComponent(),u)}createOperator(e,l){let c=this.eruptBuildModel.eruptModel,u=e,b=[];if(l)b=[l[c.eruptJson.primaryKeyCol]];else{if((u.mode===yr.MULTI||u.mode===yr.MULTI_ONLY)&&this.selectedRows.length===0){this.msg.warning(this.i18n.fanyi("table.require.select_one"));return}this.selectedRows.forEach(N=>{b.push(N[c.eruptJson.primaryKeyCol])})}if(u.type===_u.TPL){let N=this.dataService.getEruptOperationTpl(this.eruptBuildModel.eruptModel.eruptName,u.code,b);this.uiBuildService.openTpl(u.title,N,u.tpl)}else if(u.type===_u.ERUPT){let N=null;if(this.eruptBuildModel.operationErupts&&(N=this.eruptBuildModel.operationErupts[u.code]),N){this.dataHandler.initErupt({eruptModel:N}),this.dataHandler.emptyEruptValue({eruptModel:N});let M=this.modal.create({nzKeyboard:!1,nzTitle:u.title,nzMaskClosable:!1,nzCancelText:this.i18n.fanyi("global.close"),nzWrapClassName:"modal-lg",nzOnOk:()=>hr(this,null,function*(){M.componentInstance.nzCancelDisabled=!0;let m=this.dataHandler.eruptValueToObject({eruptModel:N}),h=yield this.dataService.execOperatorFun(c.eruptName,u.code,b,m).toPromise().then(T=>T);return M.componentInstance.nzCancelDisabled=!1,this.selectedRows=[],h.status===Nn.SUCCESS?(this.query(),h.data&&this.execExpr(h.data),!0):!1}),nzContent:_i});M.getContentComponent().mode=mn.ADD,M.getContentComponent().eruptBuildModel={eruptModel:N},M.getContentComponent().parentEruptName=this.eruptBuildModel.eruptModel.eruptName,this.dataService.operatorFormValue(this.eruptBuildModel.eruptModel.eruptName,u.code,b).subscribe(m=>{m&&this.dataHandlerService.objectToEruptValue(m,{eruptModel:N})})}else if(u.callHint==null&&(u.callHint=this.i18n.fanyi("table.hint.operation")),u.callHint)this.modal.confirm({nzTitle:u.title,nzContent:u.callHint,nzCancelText:this.i18n.fanyi("global.close"),nzOnOk:()=>hr(this,null,function*(){this.selectedRows=[];let M=yield this.dataService.execOperatorFun(this.eruptBuildModel.eruptModel.eruptName,u.code,b,null).toPromise().then();this.query(),M.data&&this.execExpr(M.data)})});else{this.selectedRows=[];let M=this.msg.loading(u.title);this.dataService.execOperatorFun(this.eruptBuildModel.eruptModel.eruptName,u.code,b,null).subscribe(m=>{this.msg.remove(M.messageId),m.data&&this.execExpr(m.data)})}}}addData(){let e=!1,l=this.eruptBuildModel.eruptModel.eruptJson.layout;l&&l.formSize==oa.FULL_LINE&&(e=!0);let c=this.modal.create({nzStyle:{top:"60px"},nzWrapClassName:e?null:"modal-lg edit-modal-lg",nzWidth:e?550:null,nzMaskClosable:!1,nzKeyboard:!1,nzTitle:this.i18n.fanyi("global.new"),nzContent:go,nzOkText:this.i18n.fanyi("global.add"),nzOnOk:()=>hr(this,null,function*(){if(!this.adding&&(this.adding=!0,setTimeout(()=>{this.adding=!1},500),c.getContentComponent().beforeSaveValidate())){let u={};if(this.linkTree){let b=this.eruptBuildModel.eruptModel.eruptJson.linkTree;b.dependNode&&b.value&&(u.link=this.eruptBuildModel.eruptModel.eruptJson.linkTree.value)}return this._drill&&Object.assign(u,Pe.drillToHeader(this._drill)),yield this.dataService.addEruptData(this.eruptBuildModel.eruptModel.eruptName,this.dataHandler.eruptValueToObject(this.eruptBuildModel),u).toPromise().then(b=>b),this.msg.success(this.i18n.fanyi("global.add.success")),this.query(),!0}return!1})});c.getContentComponent().eruptBuildModel=this.eruptBuildModel,c.getContentComponent().header=this._drill?Pe.drillToHeader(this._drill):{}}pageIndexChange(e){this.query(e,this.dataPage.ps)}pageSizeChange(e){this.query(1,e)}delRows(){if(!this.selectedRows||this.selectedRows.length===0){this.msg.warning(this.i18n.fanyi("table.select_delete_item"));return}let e=[];this.selectedRows.forEach(l=>{e.push(l[this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol])}),e.length>0?this.modal.confirm({nzTitle:this.i18n.fanyi("table.hint_delete_number").replace("{}",e.length+""),nzContent:"",nzOnOk:()=>hr(this,null,function*(){this.deleting=!0;try{let l=yield this.dataService.deleteEruptDataList(this.eruptBuildModel.eruptModel.eruptName,e).toPromise().then(c=>c);this.deleting=!1,l.status==Nn.SUCCESS&&(this.selectedRows.length==this.dataPage.data.length?this.query(this.dataPage.pi==1?1:this.dataPage.pi-1):this.query(this.dataPage.pi),this.selectedRows=[],this.msg.success(this.i18n.fanyi("global.delete.success")))}catch{this.deleting=!1}})}):this.msg.error(this.i18n.fanyi("table.select_delete_item"))}clearCondition(){this.dataHandler.emptyEruptValue({eruptModel:this.searchErupt}),this.selectedSorts=[],this.query(1)}tableDataChange(e){if(this._reference?this._reference.mode==Cr.radio?e.type==="click"?(this.st.clearRadio(),this.st.setRow(e.click.index,{checked:!0}),this._reference.eruptField.eruptFieldJson.edit.$tempValue=e.click.item):e.type==="radio"&&(this._reference.eruptField.eruptFieldJson.edit.$tempValue=e.radio):this._reference.mode==Cr.checkbox&&e.type==="checkbox"&&(this._reference.eruptField.eruptFieldJson.edit.$tempValue=e.checkbox):e.type==="checkbox"&&(this.selectedRows=e.checkbox),e.type=="sort"){let l=this.eruptBuildModel.eruptModel.eruptJson.layout;if(l&&l.pagingType&&l.pagingType!=aa.BACKEND)return;this.query(1,this.dataPage.ps,e.sort.map)}}downloadExcelTemplate(){this.dataService.downloadExcelTemplate(this.eruptBuildModel.eruptModel.eruptName)}exportExcel(){let e=null;this.searchErupt&&this.searchErupt.eruptFieldModels.length>0&&(e=this.dataHandler.eruptObjectToCondition(this.dataHandler.searchEruptToObject({eruptModel:this.searchErupt}))),this.downloading=!0,this.dataService.downloadExcel(this.eruptBuildModel.eruptModel.eruptName,e,this._drill?Pe.drillToHeader(this._drill):{},()=>{this.downloading=!1})}clickTreeNode(e){this.showTable=!0,this.eruptBuildModel.eruptModel.eruptJson.linkTree.value=e,this.searchErupt.eruptJson.linkTree.value=e,this.query(1)}extraRowFun(e){this.eruptBuildModel.eruptModel.extraRow&&this.dataService.extraRow(this.eruptBuildModel.eruptModel.eruptName,e).subscribe(l=>{this.extraRows=l})}importableExcel(){let e=this.modal.create({nzKeyboard:!0,nzTitle:"Excel "+this.i18n.fanyi("table.import"),nzOkText:null,nzCancelText:this.i18n.fanyi("global.close")+"\uFF08ESC\uFF09",nzWrapClassName:"modal-lg",nzContent:Um,nzOnCancel:()=>{e.getContentComponent().upload&&this.query()}});e.getContentComponent().eruptModel=this.eruptBuildModel.eruptModel,e.getContentComponent().drillInput=this._drill}execExpr(e){let l={codeModal:(c,u)=>{let b=this.modal.create({nzKeyboard:!0,nzMaskClosable:!0,nzCancelText:this.i18n.fanyi("global.close"),nzWrapClassName:"modal-lg",nzContent:_o,nzFooter:null,nzBodyStyle:{padding:"0"}});b.getContentComponent().height=500,b.getContentComponent().readonly=!0,b.getContentComponent().language=c,b.getContentComponent().edit={$value:u}}};try{new Function(...Object.keys(l),e)(...Object.values(l))}catch(c){this.msg.error(c)}}SortType=gu;isNumericOrDateType(e){return e.viewType===Ge.NUMBER||e.viewType===Ge.DATE||e.viewType===Ge.DATE_TIME}getAvailableFields(){return this.sortFields.filter(e=>!this.selectedSorts.some(l=>l.field.column===e.column))}addSortField(e){this.selectedSorts.some(l=>l.field.column===e.column)||this.selectedSorts.push({field:e,direction:gu.ASC})}removeSortField(e){this.selectedSorts.splice(e,1)}onSortDrop(e){Uf(this.selectedSorts,e.previousIndex,e.currentIndex)}applySort(){if(this.selectedSorts.length===0)this.dataPage.sort=null;else{let e={};this.selectedSorts.forEach(l=>{e[l.field.column]=l.direction}),this.dataPage.sort=e}this.showSortPopover=!1,this.query(1,this.dataPage.ps,this.dataPage.sort)}onFieldSelectChange(e){e&&(this.addSortField(e),setTimeout(()=>{this.tempSelectedField=null},0))}static \u0275fac=function(l){return new(l||o)(le(gr),le(nn),le(It),le(fn),le(gc),le(Pe),le(nn),le(Xi),le(qt),le(sc))};static \u0275cmp=Fe({type:o,selectors:[["erupt-table"]],viewQuery:function(l,c){if(l&1&&kt(Nb,5),l&2){let u;Lt(u=At())&&(c.st=u.first)}},inputs:{drill:"drill",referenceTable:"referenceTable",eruptName:"eruptName"},standalone:!1,decls:4,vars:2,consts:[["eruptTable",""],["menu1","nzDropdownMenu"],["sortPopoverContent",""],["moreButtons","nzDropdownMenu"],["tableColumnCtrl",""],["alertMessage",""],["totalTemplate",""],["st",""],["bodyTpl",""],[3,"nzActive","nzTitle","nzParagraph"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXs","nzSm","nzMd","nzLg","nzXl"],["nz-col","",3,"nzXs","nzMd","nzLg","nzXl","hidden","ngStyle"],[1,"erupt-btn-item"],["nz-button","","nzType","default","id","erupt-btn-add",1,"mb-sm"],["nz-button","","nzType","default","id","erupt-btn-export",1,"mb-sm",3,"nzLoading"],["nz-button","","nzType","default","id","erupt-btn-query",1,"mb-sm",3,"nzSearch","nzLoading"],[1,"condition-btn"],[3,"trigger","eruptModel"],["nz-button","","nzType","default","id","erupt-btn-add",1,"mb-sm",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-button","","nzType","default","id","erupt-btn-export",1,"mb-sm",3,"click","nzLoading"],["nz-icon","","nzType","download","nzTheme","outline"],[2,"margin-left","8px"],["nz-button","","id","erupt-btn-importable",3,"click"],["nz-icon","","nzType","import","nzTheme","outline"],["nz-button","","nz-dropdown","","nzPlacement","bottomRight",2,"margin-left","-1px",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","build","nzTheme","outline"],["nz-button","","nzType","default","nz-popover","","nzPopoverTrigger","click","nzPopoverPlacement","bottomLeft",1,"mb-sm",3,"nzPopoverVisibleChange","nzPopoverVisible","nzPopoverContent"],["nz-icon","","nzType","swap","nzTheme","outline",2,"transform","rotateZ(90deg)"],[2,"width","400px"],[2,"border","1px solid #d9d9d9","border-radius","4px","padding","8px","background","#fafafa","max-height","400px","overflow-y","auto"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",2,"display","flex","align-items","center","gap","8px","padding","8px","margin-bottom","4px","background","#fff","border","1px solid #e8e8e8","border-radius","4px","cursor","move"],[2,"text-align","center","color","#8c8c8c","padding","40px 20px"],[2,"margin-top","8px","border-top","1px solid #e8e8e8","padding-top","8px"],["nzShowSearch","",2,"width","100%",3,"ngModelChange","ngModel","nzPlaceHolder"],[3,"nzValue","nzLabel"],[2,"display","flex","justify-content","flex-end","padding-top","8px"],["nz-button","","nzSize","small",3,"click"],["nz-button","","nzType","primary","nzSize","small",3,"click"],["nz-icon","","nzType","holder","nzTheme","outline",2,"color","#8c8c8c","font-size","16px","flex-shrink","0"],["nzShowSearch","","nzSize","small",2,"flex","1","min-width","120px",3,"ngModelChange","ngModel","nzDisabled","nzPlaceHolder"],["nzSize","small",2,"flex-shrink","0",3,"ngModelChange","ngModel"],["nz-button","","nzType","text","nzSize","small",2,"color","#ff4d4f","padding","0 4px","flex-shrink","0",3,"click"],["nz-icon","","nzType","close","nzTheme","outline"],["nz-radio-button","",3,"nzValue"],["nz-button","","nzType","default","id","erupt-btn-query",1,"mb-sm",3,"click","nzSearch","nzLoading"],["nz-icon","","nzType","search","nzTheme","outline"],["nz-button","","nzType","default","nzDanger","","id","erupt-btn-delete",1,"mb-sm",3,"nzLoading"],["nz-button","","nzType","default","nzDanger","","id","erupt-btn-delete",1,"mb-sm",3,"click","nzLoading"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-button","","nzType","dashed",1,"mb-sm",2,"margin-right","8px","margin-left","0",3,"nz-tooltip"],["nz-button","","nzType","dashed",1,"mb-sm",2,"margin-right","8px","margin-left","0",3,"click","nz-tooltip"],[1,"fa",2,"margin-right","8px",3,"ngClass"],["nz-button","","nz-dropdown","","nzPlacement","bottomRight",1,"mb-sm",2,"margin-right","8px","margin-left","0",3,"nzDropdownMenu"],["nz-menu-item","",3,"nz-tooltip"],["nz-menu-item","",3,"click","nz-tooltip"],["nz-button","","nzType","default","nz-popover","","nzPopoverTrigger","click","id","table-column-ctrl",1,"mb-sm","hidden-mobile",2,"padding","4px 8px",3,"nzPopoverVisibleChange","nzPopoverVisible","nzPopoverContent"],["nz-icon","","nzType","table","nzTheme","outline"],["nz-row","",2,"max-width","520px"],["nz-col","","nzSpan","6"],["nz-checkbox","",2,"width","130px",3,"ngModelChange","ngModel"],["nzType","vertical",1,"hidden-mobile"],["nz-button","",1,"mb-sm",2,"padding","4px 8px",3,"click"],["nz-icon","","nzTheme","outline",3,"nzType"],["nz-button","","id","erupt-btn-reset",1,"mb-sm",3,"click","disabled"],["nz-icon","","nzType","sync","nzTheme","outline"],[1,"search-card",3,"nzBodyStyle","hidden"],[3,"ngTemplateOutlet"],[2,"margin-bottom","8px",3,"nzOnClose","nzMessage","nzType","nzCloseable"],[3,"innerHTML"],[3,"search","searchEruptModel","size"],[3,"nzOptions","ngStyle","ngModel"],[3,"eruptBuildModel","data","vis"],[3,"nzSpinning","ngStyle"],[3,"ngModelChange","nzOptions","ngStyle","ngModel"],[2,"background","#fff","padding","32px"],["nzNotFoundImage","simple"],[3,"onEdit","eruptBuildModel","data","vis"],[3,"onEdit","onSelectionChange","eruptBuildModel","data","vis"],["height","100%","width","'100%'",3,"url"],["nzShowSizeChanger","","nzShowQuickJumper","",2,"justify-content","center","margin-top","12px",3,"nzPageSizeChange","nzPageIndexChange","nzPageIndex","nzShowTotal","nzPageSize","nzTotal","nzPageSizeOptions","nzSize"],[3,"syncVirtualScroll"],["resizable","",3,"change","loading","widthMode","body","data","columns","virtualScroll","virtualItemSize","scroll","bordered","page","size"],[3,"ngClass"],[3,"colSpan","ngClass"]],template:function(l,c){l&1&&(X(0,Hb,1,4,"nz-skeleton",9),X(1,Ox,15,20,"div",10),nt(2,Vx,5,16,"ng-template",null,0,Qe)),l&2&&(Q(c.eruptBuildModel?-1:0),A(),Q(c.eruptBuildModel?1:-1))},dependencies:[Pf,Wr,Gn,Et,zt,bc,tn,Ct,dn,im,nm,rm,am,om,Kn,Sn,Ur,Dn,Sm,mi,hi,pt,pc,Mm,Em,ho,mo,Pt,Jr,wl,bm,_c,fo,Om,jf,$f,uc,xm,qm,Xm,zc,Qm,Ki,hn,Xf],styles:["[_nghost-%COMP%]     .ant-tabs{border:1px solid #e8e8e8}[_nghost-%COMP%]     .ant-tabs .ant-tabs-nav{margin:0}[_nghost-%COMP%]     .ant-tabs .ant-tabs-tab-active{border-bottom:1px solid #e8e8e8!important}[_nghost-%COMP%]     .ant-tabs .ant-tabs-tab{padding:8px 30px;border-top:none;border-left:none;margin-left:0!important}[_nghost-%COMP%]     .ant-tabs .ant-tabs-content{padding:12px}[_nghost-%COMP%]     .search-card{background:#fafafa;margin-bottom:0;border-color:#f0f0f0;border-bottom:none;box-shadow:0 2px 8px #00000017;border-radius:0;z-index:1}[_nghost-%COMP%]     .erupt-btn-item{display:flex}[_nghost-%COMP%]     .erupt-btn-item .condition-btn{margin-left:auto;min-width:200px;text-align:right}[_nghost-%COMP%]     .left-sticky-checkbox{min-width:50px}@media (max-width: 767px){[_nghost-%COMP%]     .erupt-btn-item{display:block}[_nghost-%COMP%]     .erupt-btn-item .condition-btn{text-align:left}[_nghost-%COMP%]     st colgroup{display:none}[_nghost-%COMP%]     st tr td{text-align:right!important}[_nghost-%COMP%]     st tr .text-col{max-width:initial!important}}[_nghost-%COMP%]     st .ant-table{border-color:#00000017;box-shadow:0 2px 8px #00000017}[_nghost-%COMP%]     st .ant-table tr th:nth-child(n+2){min-width:75px}[_nghost-%COMP%]     st .ant-table tr th:last-child{min-width:auto}[_nghost-%COMP%]     st .ant-table tr .text-col{max-width:320px;word-break:break-word}[data-theme=dark]   [_nghost-%COMP%]     .search-card{background:#141414;border-color:#303030}[data-theme=dark]   [_nghost-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-content>table{border-top:none}[data-theme=dark]   [_nghost-%COMP%]     .ant-tabs{border:1px solid #434343}[data-theme=dark]   [_nghost-%COMP%]     .ant-tabs .ant-tabs-nav{margin:0}[data-theme=dark]   [_nghost-%COMP%]     .ant-tabs .ant-tabs-tab-active{border-bottom:1px solid #434343!important}[data-theme=dark]   [_nghost-%COMP%]     .ant-table.ant-table-bordered>.ant-table-container>.ant-table-header>table{border-top:1px solid #303030}"]})}return o})();var Bx=["et"],Hx=(o,g,e,l,c,u)=>({eruptBuild:o,eruptField:g,mode:e,dependVal:l,parentEruptName:c,tabRef:u}),th=(()=>{class o{dataService;msg;modal;tableComponent;eruptBuild;eruptField;mode=Cr.radio;dependVal;parentEruptName;tabRef=!1;constructor(e,l,c){this.dataService=e,this.msg=l,this.modal=c}ngOnInit(){}static \u0275fac=function(l){return new(l||o)(le(Pe),le(It),le(fn))};static \u0275cmp=Fe({type:o,selectors:[["app-reference-table"]],viewQuery:function(l,c){if(l&1&&kt(Bx,5),l&2){let u;Lt(u=At())&&(c.tableComponent=u.first)}},inputs:{eruptBuild:"eruptBuild",eruptField:"eruptField",mode:"mode",dependVal:"dependVal",parentEruptName:"parentEruptName",tabRef:"tabRef"},standalone:!1,decls:2,vars:8,consts:[["et",""],[3,"referenceTable"]],template:function(l,c){l&1&&te(0,"erupt-table",1,0),l&2&&k("referenceTable",If(1,Hx,c.eruptBuild,c.eruptField,c.mode,c.dependVal,c.parentEruptName,c.tabRef))},dependencies:[ya],styles:["[_nghost-%COMP%]     td .ant-radio-wrapper .ant-radio~span{display:none}[_nghost-%COMP%]     td .ant-radio-wrapper{margin-right:0}"]})}return o})();var nh=(()=>{class o{static pi="pageIndex";static ps="pageSize";stConfig={url:null,stPage:{placement:"center",pageSizes:[10,20,30,50,100,300,500],showSize:!0,showQuickJumper:!0,total:!0,toTop:!1,front:!1},req:{params:{},headers:{},method:"POST",allInBody:!0,reName:{pi:o.pi,ps:o.ps}},multiSort:{key:"sort",separator:",",nameSeparator:" "},res:{}}}return o})();var Wx=["st"],Jx=o=>({x:o});function Ux(o,g){if(o&1){let e=ne();R(0,"button",7),se("click",function(){j(e);let c=S(2);return G(c.deleteData())}),te(1,"i",8),he(2),Se(3,"translate"),V()}o&2&&(k("nzSize","default"),A(2),$e("",Ee(3,2,"global.delete")," "))}function $x(o,g){if(o&1){let e=ne();R(0,"div",1)(1,"button",4),se("click",function(){j(e);let c=S();return G(c.mode=="add"?c.addData():c.addDataByRefer())}),te(2,"i",5),he(3),Se(4,"translate"),V(),X(5,Ux,4,4,"button",6),V()}if(o&2){let e=S();A(),k("nzSize","default"),A(2),$e("",Ee(4,3,"global.new")," "),A(2),Q(e.checkedRow.length>0?5:-1)}}function jx(o,g){if(o&1){let e=ne();R(0,"st",9,0),se("change",function(c){j(e);let u=S();return G(u.stChange(c))}),V()}if(o&2){let e=S();k("scroll",$t(7,Jx,e.clientWidth>768?e.tableWidth:"460px"))("size","small")("columns",e.column)("ps",20)("data",e.tabErupt.eruptFieldModel.eruptFieldJson.edit.$value)("bordered",!0)("page",e.stConfig.stPage)}}var Al=(()=>{class o{dataService;uiBuildService;dataHandlerService;i18n;modal;msg;eruptBuildModel;tabErupt;mode="add";st;onlyRead=!1;clientWidth=document.body.clientWidth;column;tableWidth;checkedRow=[];stConfig=new nh().stConfig;loading=!0;constructor(e,l,c,u,b,N){this.dataService=e,this.uiBuildService=l,this.dataHandlerService=c,this.i18n=u,this.modal=b,this.msg=N}ngOnInit(){this.stConfig.stPage.front=!0;let e=this.tabErupt.eruptFieldModel.eruptFieldJson.edit;if(e.$value||(e.$value=[]),setTimeout(()=>{this.loading=!1},300),this.tableWidth=this.tabErupt.eruptBuildModel.eruptModel.tableColumns.filter(l=>l.show).length*160*this.i18n.getCurrLangInfo().columnWidthZoom+"px",this.onlyRead)this.column=this.uiBuildService.viewToAlainTableConfig(this.tabErupt.eruptBuildModel,!1,!0);else{let l=[];l.push({title:"",type:"checkbox",width:"50px",fixed:"left",className:"text-center",index:this.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol}),l.push(...this.uiBuildService.viewToAlainTableConfig(this.tabErupt.eruptBuildModel,!1,!0));let c=[];this.mode=="add"&&c.push({icon:"edit",click:(u,b,N)=>{this.dataHandlerService.objectToEruptValue(u,this.tabErupt.eruptBuildModel);let M=this.modal.create({nzWrapClassName:"modal-lg",nzStyle:{top:"20px"},nzMaskClosable:!1,nzKeyboard:!1,nzTitle:this.i18n.fanyi("global.editor"),nzContent:_i,nzOnOk:()=>hr(this,null,function*(){let m=this.dataHandlerService.eruptValueToObject(this.tabErupt.eruptBuildModel),h=yield this.dataService.eruptTabUpdate(this.eruptBuildModel.eruptModel.eruptName,this.tabErupt.eruptFieldModel.fieldName,m).toPromise().then(T=>T);if(h.status==Nn.SUCCESS){m=h.data,this.objToLine(m);let T=this.tabErupt.eruptFieldModel.eruptFieldJson.edit.$value;return T.forEach((y,x)=>{let v=this.tabErupt.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol;u[v]==y[v]&&(T[x]=m)}),this.st.reload(),!0}else return!1})});M.getContentComponent().col=vr[3],M.getContentComponent().eruptBuildModel=this.tabErupt.eruptBuildModel,M.getContentComponent().parentEruptName=this.eruptBuildModel.eruptModel.eruptName}}),c.push({icon:{type:"delete",theme:"twotone",twoToneColor:"#f00"},type:"del",click:(u,b,N)=>{let M=this.tabErupt.eruptFieldModel.eruptFieldJson.edit.$value;for(let m in M){let h=this.tabErupt.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol;if(u[h]==M[m][h]){M.splice(m,1);break}}this.st.reload()}}),l.push({title:this.i18n.fanyi("table.operation"),fixed:"right",width:"80px",className:"text-center",buttons:c}),this.column=l}}addData(){this.dataService.getInitValue(this.tabErupt.eruptBuildModel.eruptModel.eruptName,this.eruptBuildModel.eruptModel.eruptName).subscribe(e=>{this.dataHandlerService.objectToEruptValue(e,this.tabErupt.eruptBuildModel);let l=this.modal.create({nzWrapClassName:"modal-lg",nzStyle:{top:"50px"},nzMaskClosable:!1,nzKeyboard:!1,nzTitle:this.i18n.fanyi("global.add"),nzContent:_i,nzOnOk:()=>hr(this,null,function*(){let c=this.dataHandlerService.eruptValueToObject(this.tabErupt.eruptBuildModel),u=yield this.dataService.eruptTabAdd(this.eruptBuildModel.eruptModel.eruptName,this.tabErupt.eruptFieldModel.fieldName,c).toPromise().then(b=>b);if(u.status==Nn.SUCCESS){c=u.data,c[this.tabErupt.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol]=-Math.floor(Math.random()*1e3);let b=this.tabErupt.eruptFieldModel.eruptFieldJson.edit;return this.objToLine(c),b.$value||(b.$value=[]),b.$value.push(c),this.st.reload(),!0}else return!1})});l.getContentComponent().mode=mn.ADD,l.getContentComponent().eruptBuildModel=this.tabErupt.eruptBuildModel,l.getContentComponent().parentEruptName=this.eruptBuildModel.eruptModel.eruptName})}addDataByRefer(){let e=this.eruptBuildModel.eruptModel,l=this.tabErupt.eruptFieldModel.eruptFieldJson.edit.referenceTableType.dependField,c=null;if(l){let b=e.eruptFieldModelMap.get(l);if(b.eruptFieldJson.edit.$value)c=b.eruptFieldJson.edit.$value;else{this.msg.warning("\u8BF7\u5148\u9009\u62E9"+b.eruptFieldJson.edit.title);return}}let u=this.modal.create({nzStyle:{top:"20px"},nzWrapClassName:"modal-xxl",nzMaskClosable:!1,nzKeyboard:!1,nzTitle:this.i18n.fanyi("global.new"),nzContent:th,nzOkText:this.i18n.fanyi("global.add"),nzOnOk:()=>{let b=this.tabErupt.eruptBuildModel.eruptModel,N=this.tabErupt.eruptFieldModel.eruptFieldJson.edit;if(!N.$tempValue)return this.msg.warning(this.i18n.fanyi("global.select.one")),!1;N.$value||(N.$value=[]);for(let M of N.$tempValue)for(let m in M){let h=b.eruptFieldModelMap.get(m);if(h){let T=h.eruptFieldJson.edit;switch(T.type){case be.BOOLEAN:M[m]=M[m]===T.boolType.trueText;break;case be.CHOICE:for(let y of h.componentValue)if(y.label==M[m]){M[m]=y.value;break}break}}if(m.indexOf("_")!=-1){let T=m.split("_");M[T[0]]=M[T[0]]||{},M[T[0]][T[1]]=M[m]}}return N.$value.push(...N.$tempValue),N.$value=[...new Set(N.$value)],!0}});Object.assign(u.getContentComponent(),{eruptBuild:this.eruptBuildModel,eruptField:this.tabErupt.eruptFieldModel,mode:Cr.checkbox,tabRef:!0,dependVal:c})}objToLine(e){for(let l in e)if(typeof e[l]=="object")for(let c in e[l])e[l+"_"+c]=e[l][c]}stChange(e){e.type==="checkbox"&&(this.checkedRow=e.checkbox)}deleteData(){if(this.checkedRow.length){let e=this.tabErupt.eruptFieldModel.eruptFieldJson.edit.$value;for(let l in e){let c=this.tabErupt.eruptBuildModel.eruptModel.eruptJson.primaryKeyCol;this.checkedRow.forEach(u=>{u[c]==e[l][c]&&e.splice(l,1)})}this.st.reload(),this.checkedRow=[]}else this.msg.warning(this.i18n.fanyi("global.delete.hint.check"))}static \u0275fac=function(l){return new(l||o)(le(Pe),le(Xi),le(nn),le(qt),le(fn),le(It))};static \u0275cmp=Fe({type:o,selectors:[["tab-table"]],viewQuery:function(l,c){if(l&1&&kt(Wx,5),l&2){let u;Lt(u=At())&&(c.st=u.first)}},inputs:{eruptBuildModel:"eruptBuildModel",tabErupt:"tabErupt",mode:"mode",onlyRead:"onlyRead"},standalone:!1,decls:4,vars:3,consts:[["st",""],[1,"tab-bar"],[3,"nzSpinning"],["resizable","",3,"scroll","size","columns","ps","data","bordered","page"],["nz-button","","nzGhost","","nzType","primary",3,"click","nzSize"],["nz-icon","","nzType","plus","theme","outline"],["nz-button","","nzType","default","nzDanger","",3,"nzSize"],["nz-button","","nzType","default","nzDanger","",3,"click","nzSize"],["nz-icon","","nzType","delete","theme","outline"],["resizable","",3,"change","scroll","size","columns","ps","data","bordered","page"]],template:function(l,c){l&1&&(R(0,"div"),X(1,$x,6,5,"div",1),R(2,"nz-spin",2),X(3,jx,2,9,"st",3),V()()),l&2&&(A(),Q(c.onlyRead?-1:1),A(),k("nzSpinning",c.loading),A(),Q(c.loading?-1:3))},dependencies:[bc,tn,Ct,dn,pt,Pt,hn],styles:["[_nghost-%COMP%]     .ant-table{border-radius:0}[_nghost-%COMP%]     .tab-bar{background:#fafafa;border:1px solid #e8e8e8;border-bottom:0;padding:8px 12px}[data-theme=dark]   [_nghost-%COMP%]     .tab-bar{background:#1f1f1f;border:1px solid #434343}"]})}return o})();function Gx(o,g){o&1&&te(0,"i",7)}var ih=(()=>{class o{data;dataHandler;eruptField;eruptModel;parentEruptName;dependVal;list;searchValue;constructor(e,l){this.data=e,this.dataHandler=l}ngOnInit(){this.data.queryReferenceTreeData(this.eruptModel.eruptName,this.eruptField.fieldName,this.dependVal,this.parentEruptName).subscribe(e=>{this.list=this.dataHandler.dataTreeToZorroTree(e,this.eruptField.eruptFieldJson.edit.referenceTreeType.expandLevel)})}nodeClickEvent(e){this.eruptField.eruptFieldJson.edit.$tempValue={id:e.node.origin.key,label:e.node.origin.title}}static \u0275fac=function(l){return new(l||o)(le(Pe),le(nn))};static \u0275cmp=Fe({type:o,selectors:[["app-tree-select"]],inputs:{eruptField:"eruptField",eruptModel:"eruptModel",parentEruptName:"parentEruptName",dependVal:"dependVal"},standalone:!1,decls:9,vars:8,consts:[["searchSuffixIcon",""],["tree",""],[3,"nzSpinning"],[1,"mb-sm",2,"width","100%",3,"nzSuffix"],["type","text","nz-input","","placeholder","Search",3,"ngModelChange","ngModel"],[2,"max-height","450px","min-height","300px","overflow","auto"],["nzDraggable","",1,"tree-container",3,"nzClick","nzVirtualHeight","nzShowLine","nzHideUnMatched","nzData","nzSearchValue"],["nz-icon","","nzType","search"]],template:function(l,c){if(l&1){let u=ne();R(0,"nz-spin",2)(1,"nz-input-group",3)(2,"input",4),ye("ngModelChange",function(N){return j(u),Ce(c.searchValue,N)||(c.searchValue=N),G(N)}),V()(),nt(3,Gx,1,0,"ng-template",null,0,Qe),te(5,"br"),R(6,"div",5)(7,"nz-tree",6,1),se("nzClick",function(N){return j(u),G(c.nodeClickEvent(N))}),V()()()}if(l&2){let u=Ue(4);k("nzSpinning",!c.list),A(),k("nzSuffix",u),A(),ge("ngModel",c.searchValue),A(5),k("nzVirtualHeight",(c.list==null?null:c.list.length)>50?"450px":null)("nzShowLine",!0)("nzHideUnMatched",!0)("nzData",c.list)("nzSearchValue",c.searchValue)}},dependencies:[on,Et,zt,Ct,pt,Xt,fi,Gi,Pt,$r],encapsulation:2})}return o})();var Kx=()=>({minRows:3,maxRows:20});function qx(o,g){o&1&&(R(0,"div",1),te(1,"div",2)(2,"div",3),V())}function Xx(o,g){if(o&1){let e=ne();R(0,"div")(1,"p",4),he(2,"The text editor cannot be loaded. It is recommended to replace or upgrade your browser"),V(),R(3,"textarea",5),ye("ngModelChange",function(c){j(e);let u=S();return Ce(u.eruptField.eruptFieldJson.edit.$value,c)||(u.eruptField.eruptFieldJson.edit.$value=c),G(c)}),V()()}if(o&2){let e=S();A(3),k("name",e.eruptField.fieldName)("nzAutosize",at(6,Kx)),ge("ngModel",e.eruptField.eruptFieldJson.edit.$value),k("placeholder","The text editor cannot be loaded. It is recommended to replace or upgrade your browser")("required",e.eruptField.eruptFieldJson.edit.notNull)("disabled",e.readonly)}}var Pu=(()=>{class o{lazy;ref;tokenService;eruptField;erupt;value;readonly;valueChange=new Nt;loading=!0;editorError=!1;constructor(e,l,c){this.lazy=e,this.ref=l,this.tokenService=c}ngOnInit(){let e=this;setTimeout(()=>{this.lazy.loadScript("assets/js/ckeditor.js").then(()=>{DecoupledDocumentEditor.create(this.ref.nativeElement.querySelector("#editor"),{toolbar:{items:["heading","|","fontSize","fontFamily","fontBackgroundColor","fontColor","|","bold","italic","underline","strikethrough","|","alignment","|","numberedList","bulletedList","|","indent","outdent","|","link","imageUpload","insertTable","codeBlock","blockQuote","highlight","|","undo","redo","|","code","horizontalLine","subscript","todoList","mediaEmbed"]},image:{toolbar:["imageTextAlternative","imageStyle:full","imageStyle:side"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},licenseKey:"",language:"zh-cn",ckfinder:{uploadUrl:ji.file+"/upload-html-editor/"+this.erupt.eruptName+"/"+this.eruptField.fieldName+"?_erupt="+this.erupt.eruptName+"&_token="+this.tokenService.get().token}}).then(l=>{l.isReadOnly=this.readonly,e.loading=!1,this.ref.nativeElement.querySelector("#toolbar-container").appendChild(l.ui.view.toolbar.element),e.value&&l.setData(e.value),l.model.document.on("change:data",function(){e.valueChange.emit(l.getData())})}).catch(l=>{this.loading=!1,this.editorError=!0,console.error(l)})})},200)}static \u0275fac=function(l){return new(l||o)(le(ta),le(Pr),le(Ui))};static \u0275cmp=Fe({type:o,selectors:[["ckeditor"]],inputs:{eruptField:"eruptField",erupt:"erupt",value:"value",readonly:"readonly"},outputs:{valueChange:"valueChange"},standalone:!1,decls:3,vars:3,consts:[[3,"nzSpinning"],[2,"background","#eee"],["id","toolbar-container"],["id","editor",2,"padding","5px 10px","min-height","60px","max-height","500px","overflow-y","auto","background","#fff","border","1px solid #c4c4c4"],[2,"color","red"],["nz-input","",1,"erupt-input",3,"ngModelChange","name","nzAutosize","ngModel","placeholder","required","disabled"]],template:function(l,c){l&1&&(R(0,"nz-spin",0),X(1,qx,3,0,"div",1),X(2,Xx,4,7,"div"),V()),l&2&&(k("nzSpinning",c.loading),A(),Q(c.editorError?-1:1),A(),Q(c.editorError?2:-1))},dependencies:[on,Et,da,zt,Xt,vl,Pt],encapsulation:2})}return o})();var Yx=["tipInput"];function Zx(o,g){if(o&1){let e=ne();R(0,"button",9),se("click",function(){j(e);let c=S();return G(c.clearLocation())}),te(1,"i",10),V()}if(o&2){let e=S();k("disabled",!e.loaded)}}function eT(o,g){if(o&1){let e=ne();R(0,"nz-auto-option",11),se("click",function(){let c=j(e).$implicit,u=S();return G(u.choiceList(c))}),he(1),V()}if(o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",e.name),A(),$e("",e.name," ")}}var Fl=(()=>{class o{lazy;ref;renderer;msg;loading;value;valueChange=new Nt;zoom=11;readonly=!1;mapType;tipInput;viewValue="";loaded=!1;autocompleteList=[];constructor(e,l,c,u){this.lazy=e,this.ref=l,this.renderer=c,this.msg=u}map;mouseTool;ngOnInit(){if(this.loading=!0,!$i.amapSecurityJsCode){this.msg.error("not config amapSecurityJsCode");return}if(!$i.amapKey){this.msg.error("not config amapKey");return}window._AMapSecurityConfig={securityJsCode:$i.amapSecurityJsCode},this.lazy.loadScript("https://webapi.amap.com/maps?v=2.0&key="+$i.amapKey).then(()=>{this.value&&(this.value=JSON.parse(this.value),this.autocompleteList=[this.value],this.choiceList(this.value)),this.loading=!1;let e=new AMap.Map(this.ref.nativeElement.querySelector("#amap"),{zoom:this.zoom,resizeEnable:!0,viewMode:"3D"});e.on("complete",()=>{this.loaded=!0}),this.map=e;let l,c;AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.HawkEye","AMap.MapType","AMap.Geolocation","AMap.PlaceSearch","AMap.AutoComplete"],function(){e.addControl(new AMap.ToolBar),e.addControl(new AMap.Scale),e.addControl(new AMap.HawkEye({isOpen:!0})),e.addControl(new AMap.MapType),e.addControl(new AMap.Geolocation({})),l=new AMap.Autocomplete({city:""}),c=new AMap.PlaceSearch({pageSize:12,children:0,pageIndex:1,extensions:"base"})});let u=this;this.tipInput.nativeElement.oninput=function(){l.search(u.tipInput.nativeElement.value,function(h,T){if(h=="complete"){let y=[];T.tips&&T.tips.forEach(x=>{x.id&&y.push(x)}),u.autocompleteList=y}})},document.getElementById("mapOk").onclick=()=>{if(!this.value&&this.autocompleteList.length>0&&(this.value=this.autocompleteList[0],this.viewValue=this.value.name),this.value){if(typeof this.value=="string"&&(this.value=JSON.parse(this.value)),!this.value.id){this.msg.warning("\u8BF7\u9009\u62E9\u6709\u6548\u7684\u5730\u5740");return}b(this.value.id)}else this.msg.warning("\u8BF7\u5148\u9009\u62E9\u5730\u5740")},this.value&&b(this.value.id);function b(h){c.getDetails(h,(T,y)=>{T==="complete"&&y.info==="OK"?(N(y),u.valueChange.emit(JSON.stringify(u.value))):u.msg.warning("\u627E\u4E0D\u5230\u8BE5\u4F4D\u7F6E\u4FE1\u606F")})}function N(h){let T=h.poiList.pois,y=new AMap.Marker({map:e,position:T[0].location});e.setCenter(y.getPosition()),M.setContent(m(T[0])),M.open(e,y.getPosition())}let M=new AMap.InfoWindow({autoMove:!0,offset:{x:0,y:-30}});function m(h){let T=[];return T.push("<b>\u540D\u79F0\uFF1A"+h.name+"</b>"),T.push("\u5730\u5740\uFF1A"+h.address),T.push("\u7535\u8BDD\uFF1A"+h.tel),T.push("\u7C7B\u578B\uFF1A"+h.type),T.push("\u7ECF\u5EA6\uFF1A"+h.location.lng),T.push("\u7EAC\u5EA6\uFF1A"+h.location.lat),T.join("<br>")}})}blur(){if(!this.value){this.viewValue=null;return}typeof this.value!="object"&&(this.value=JSON.parse(this.value)),this.value.name!=this.tipInput.nativeElement.value&&(this.value=null,this.viewValue=null)}choiceList(e){this.value=e,this.viewValue=e.name}clearLocation(){this.value=null,this.viewValue=null,this.valueChange.emit(null)}checkType;overlays;draw(e){this.overlays=[],this.mouseTool.on("draw",c=>{this.overlays.push(c.obj)}),l.call(this,e);function l(c){let u="#00b0ff",b="#80d8ff";switch(c){case"marker":{this.mouseTool.marker({});break}case"polyline":{this.mouseTool.polyline({strokeColor:b});break}case"polygon":{this.mouseTool.polygon({fillColor:u,strokeColor:b});break}case"rectangle":{this.mouseTool.rectangle({fillColor:u,strokeColor:b});break}case"circle":{this.mouseTool.circle({fillColor:u,strokeColor:b});break}}}}clearDraw(){this.map.remove(this.overlays)}closeDraw(){this.mouseTool.close(!0),this.checkType=""}static \u0275fac=function(l){return new(l||o)(le(ta),le(Pr),le(Zo),le(It))};static \u0275cmp=Fe({type:o,selectors:[["amap"]],viewQuery:function(l,c){if(l&1&&kt(Yx,7),l&2){let u;Lt(u=At())&&(c.tipInput=u.first)}},inputs:{value:"value",zoom:"zoom",readonly:"readonly",mapType:"mapType"},outputs:{valueChange:"valueChange"},standalone:!1,decls:15,vars:13,consts:[["tipInput",""],["auto",""],[3,"nzSpinning"],[1,"search-container",3,"hidden"],["nz-input","","nzSize","default",2,"width","300px",3,"blur","value","nzAutocomplete","placeholder","disabled"],["nz-button","","nzType","default","id","mapOk",3,"disabled"],["nz-button","","nzType","default","nzDanger","",1,"mb-sm",2,"padding","4px 10px",3,"disabled"],[3,"nzValue","nzLabel"],["id","amap","tabindex","0",2,"min-height","550px","border","1px solid #d9d9d9","outline","none","border-radius","4px"],["nz-button","","nzType","default","nzDanger","",1,"mb-sm",2,"padding","4px 10px",3,"click","disabled"],["nz-icon","","nzType","close","nzTheme","outline"],[3,"click","nzValue","nzLabel"]],template:function(l,c){if(l&1){let u=ne();R(0,"nz-spin",2)(1,"div",3)(2,"input",4,0),Se(4,"translate"),se("blur",function(){return j(u),G(c.blur())}),V(),he(5," \xA0 "),R(6,"button",5),he(7),Se(8,"translate"),V(),X(9,Zx,2,1,"button",6),V(),R(10,"nz-autocomplete",null,1),De(12,eT,2,3,"nz-auto-option",7,Ie),V(),te(14,"div",8),V()}if(l&2){let u=Ue(11);k("nzSpinning",c.loading),A(),k("hidden",c.readonly),A(),k("value",c.viewValue)("nzAutocomplete",u)("placeholder",Ee(4,9,"global.keyword"))("disabled",!c.loaded),A(4),k("disabled",!c.loaded),A(),$e("\xA0 ",Ee(8,11,"global.ok")," \xA0 "),A(2),Q(c.value?9:-1),A(3),Oe(c.autocompleteList)}},dependencies:[tn,Ct,dn,pt,Xt,Pt,hc,fc,mc,hn],styles:["[_nghost-%COMP%]     input[type=radio], [_nghost-%COMP%]     input[type=checkbox]{height:20px!important}[_nghost-%COMP%]     .amap-copyright{opacity:0;display:none!important}[_nghost-%COMP%]     .search-container{position:absolute;top:10px;left:20px;z-index:999}[_nghost-%COMP%]     .draw-tool{position:absolute;bottom:0;left:0;width:330px;background:#ffffffe6;padding:10px;text-align:center;border:1px solid #eee}[_nghost-%COMP%]     .draw-tool .ant-radio-wrapper{width:90px;margin-bottom:10px}"]})}return o})();var iT=["treeDiv"],rT=["tree"],oT=o=>({height:o,overflow:"auto"}),aT=()=>({overflow:"auto",overflowX:"hidden"});function lT(o,g){if(o&1){let e=ne();R(0,"button",20),se("click",function(){j(e);let c=S(2);return G(c.addBlock())}),te(1,"i",21),he(2),Se(3,"translate"),V()}o&2&&(A(2),$e(" ",Ee(3,1,"tree.add_button")," "))}function sT(o,g){o&1&&te(0,"i",22)}function cT(o,g){if(o&1){let e=ne();R(0,"button",26),se("click",function(){j(e);let c=S(3);return G(c.update())}),te(1,"i",27),he(2),Se(3,"translate"),V()}if(o&2){let e=S(3);k("disabled",e.loading),A(2),$e("",Ee(3,2,"tree.update")," ")}}function dT(o,g){if(o&1){let e=ne();R(0,"button",28),se("click",function(){j(e);let c=S(3);return G(c.del())}),te(1,"i",29),he(2),Se(3,"translate"),V()}if(o&2){let e=S(3);k("nzGhost",!0)("disabled",e.loading),A(2),$e("",Ee(3,3,"tree.delete")," ")}}function uT(o,g){if(o&1){let e=ne();R(0,"button",30),se("click",function(){j(e);let c=S(3);return G(c.addSub())}),te(1,"i",31),he(2),Se(3,"translate"),V()}if(o&2){let e=S(3);k("disabled",e.loading),A(2),$e("",Ee(3,2,"tree.add_children")," ")}}function pT(o,g){if(o&1&&(X(0,cT,4,4,"button",23),X(1,dT,4,5,"button",24),X(2,uT,4,4,"button",25)),o&2){let e=S(2);Q(e.eruptBuildModel.eruptModel.eruptJson.power.edit?0:-1),A(),Q(e.eruptBuildModel.eruptModel.eruptJson.power.delete?1:-1),A(),Q(e.eruptBuildModel.eruptModel.eruptJson.power.add&&e.eruptBuildModel.eruptModel.eruptJson.tree.pid?2:-1)}}function fT(o,g){if(o&1){let e=ne();R(0,"button",33),se("click",function(){j(e);let c=S(3);return G(c.add())}),te(1,"i",27),he(2),Se(3,"translate"),V()}if(o&2){let e=S(3);k("disabled",e.loading),A(2),$e("",Ee(3,2,"tree.add")," ")}}function mT(o,g){if(o&1&&X(0,fT,4,4,"button",32),o&2){let e=S(2);Q(e.eruptBuildModel.eruptModel.eruptJson.power.add?0:-1)}}function hT(o,g){if(o&1){let e=ne();R(0,"div",4)(1,"div",5),X(2,lT,4,3,"button",6),R(3,"nz-input-group",7)(4,"input",8),ye("ngModelChange",function(c){j(e);let u=S();return Ce(u.searchValue,c)||(u.searchValue=c),G(c)}),V()(),nt(5,sT,1,0,"ng-template",null,0,Qe),te(7,"br"),R(8,"div",9,1)(10,"nz-skeleton",10)(11,"nz-tree",11,2),se("nzClick",function(c){j(e);let u=S();return G(u.nodeClickEvent(c))})("nzDblClick",function(c){j(e);let u=S();return G(u.nzDblClick(c))}),V()()()(),R(13,"div",12),Vr(14),R(15,"div",13)(16,"div",14),X(17,pT,3,3),X(18,mT,1,1),V()(),R(19,"div",15)(20,"nz-collapse",16)(21,"nz-collapse-panel",17),Se(22,"translate"),R(23,"nz-spin",18),te(24,"erupt-edit",19),V()()()(),Br(),V()()}if(o&2){let e=Ue(6),l=S();k("nzGutter",12)("id",l.eruptName),A(),k("nzXs",24)("nzSm",8)("nzMd",8)("nzLg",6),A(),Q(l.eruptBuildModel.eruptModel.eruptJson.power.add?2:-1),A(),k("nzSuffix",e),A(),ge("ngModel",l.searchValue),A(4),k("ngStyle",$t(35,oT,"calc(100vh - 178px - "+(l.settingSrv.layout.reuse?"40px":"0px")+")"))("scrollTop",l.treeScrollTop),A(2),k("nzLoading",l.treeLoading&&l.nodes.length==0)("nzActive",!0),A(),k("nzVirtualHeight",l.dataLength>50?"calc(100vh - 200px - "+(l.settingSrv.layout.reuse?"40px":"0px")+")":null)("nzShowLine",!0)("nzData",l.nodes)("nzSearchValue",l.searchValue)("nzBlockNode",!0),A(2),k("nzXs",24)("nzSm",16)("nzMd",16)("nzLg",18),A(3),k("nzXs",24),A(),Q(l.selectLeaf?17:-1),A(),Q(l.selectLeaf?-1:18),A(),k("ngStyle",at(37,aT)),A(2),k("nzActive",!0)("nzHeader",Ee(22,33,"tree.base"))("nzDisabled",!0)("nzShowArrow",!1),A(2),k("nzSpinning",l.loading),A(),k("eruptBuildModel",l.eruptBuildModel)("behavior",l.behavior)}}var rh=(()=>{class o{dataService;route;msg;settingSrv;i18n;appViewService;modal;dataHandler;col=vr[3];eruptName;eruptBuildModel;showEdit=!1;loading=!1;treeLoading=!1;behavior=mn.ADD;searchValue;nodes=[];dataLength=0;selectLeaf=!1;router$;currentKey;treeScrollTop=0;treeDiv;tree;constructor(e,l,c,u,b,N,M,m){this.dataService=e,this.route=l,this.msg=c,this.settingSrv=u,this.i18n=b,this.appViewService=N,this.modal=M,this.dataHandler=m}ngOnInit(){this.router$=this.route.params.subscribe(e=>{this.eruptBuildModel=null,this.eruptName=e.name,this.currentKey=null,this.showEdit=!1,this.dataService.getEruptBuild(this.eruptName).subscribe(l=>{this.appViewService.setRouterViewDesc(l.eruptModel.eruptJson.desc),this.dataHandler.initErupt(l),this.eruptBuildModel=l,this.fetchTreeData()})})}addBlock(e){this.showEdit=!0,this.loading=!0,this.selectLeaf=!1,this.tree.getSelectedNodeList()[0]&&(this.tree.getSelectedNodeList()[0].isSelected=!1),this.behavior=mn.ADD,this.dataService.getInitValue(this.eruptBuildModel.eruptModel.eruptName).subscribe(l=>{this.loading=!1,this.dataHandler.objectToEruptValue(l,this.eruptBuildModel),e&&e()})}addSub(){this.behavior=mn.ADD;let e=this.eruptBuildModel.eruptModel.eruptFieldModelMap,l=e.get(this.eruptBuildModel.eruptModel.eruptJson.tree.id).eruptFieldJson.edit.$value,c=e.get(this.eruptBuildModel.eruptModel.eruptJson.tree.label).eruptFieldJson.edit.$value;this.addBlock(()=>{if(l){let u=e.get(this.eruptBuildModel.eruptModel.eruptJson.tree.pid.split(".")[0]).eruptFieldJson.edit;u.$value=l,u.$viewValue=c}})}add(){this.loading=!0,this.behavior=mn.ADD,this.dataService.addEruptData(this.eruptBuildModel.eruptModel.eruptName,this.dataHandler.eruptValueToObject(this.eruptBuildModel)).subscribe(e=>{this.fetchTreeData(),this.dataHandler.emptyEruptValue(this.eruptBuildModel),this.msg.success(this.i18n.fanyi("global.add.success")),this.loading=!1},e=>{this.loading=!1})}update(){this.validateParentIdValue()&&(this.loading=!0,this.dataService.updateEruptData(this.eruptBuildModel.eruptModel.eruptName,this.dataHandler.eruptValueToObject(this.eruptBuildModel)).subscribe(e=>{e.status==Nn.SUCCESS&&(this.msg.success(this.i18n.fanyi("global.update.success")),this.fetchTreeData()),this.loading=!1},()=>{this.loading=!1}))}validateParentIdValue(){let e=this.eruptBuildModel.eruptModel.eruptJson,l=this.eruptBuildModel.eruptModel.eruptFieldModelMap;if(e.tree.pid){let c=l.get(e.tree.id).eruptFieldJson.edit.$value,u=l.get(e.tree.pid.split(".")[0]).eruptFieldJson.edit,b=u.$value;if(b){if(c==b)return this.msg.warning(u.title+": "+this.i18n.fanyi("tree.validate.no_this_parent")),!1;if(this.tree.getSelectedNodeList().length>0){let N=this.tree.getSelectedNodeList()[0].getChildren();if(N.length>0){for(let M of N)if(b==M.origin.key)return this.msg.warning(u.title+": "+this.i18n.fanyi("tree.validate.no_this_children_parent")),!1}}}}return!0}del(){let e=this.tree.getSelectedNodeList()[0];e.isLeaf?this.modal.confirm({nzTitle:this.i18n.fanyi("global.delete.hint"),nzContent:"",nzOnOk:()=>{this.behavior=mn.ADD,this.dataService.deleteEruptData(this.eruptBuildModel.eruptModel.eruptName,e.origin.key).subscribe(l=>{l.status==Nn.SUCCESS&&(e.remove(),e.parentNode?e.parentNode.getChildren().length==0&&this.fetchTreeData():this.fetchTreeData(),this.addBlock(),this.msg.success(this.i18n.fanyi("global.delete.success"))),this.showEdit=!1})}}):this.msg.error("\u5B58\u5728\u53F6\u8282\u70B9\u4E0D\u5141\u8BB8\u76F4\u63A5\u5220\u9664")}fetchTreeData(){this.treeLoading=!0,this.dataService.queryEruptTreeData(this.eruptName).subscribe(e=>{if(this.treeLoading=!1,e&&(this.dataLength=e.length,this.nodes=this.dataHandler.dataTreeToZorroTree(e,this.eruptBuildModel.eruptModel.eruptJson.tree.expandLevel),this.rollTreePoint(),this.searchValue)){let l=this.searchValue;this.searchValue=null,setTimeout(()=>{this.searchValue=l},0)}})}rollTreePoint(){let e=this.treeDiv.nativeElement.scrollTop;setTimeout(()=>{this.treeScrollTop=e},900)}nzDblClick(e){e.node.isExpanded=!e.node.isExpanded,e.event.stopPropagation()}ngOnDestroy(){this.router$.unsubscribe()}nodeClickEvent(e){this.selectLeaf=!0,this.loading=!0,this.showEdit=!0,this.currentKey=e.node.origin.key,this.behavior=mn.EDIT,this.dataService.queryEruptDataById(this.eruptBuildModel.eruptModel.eruptName,this.currentKey).subscribe(l=>{this.dataHandler.objectToEruptValue(l,this.eruptBuildModel),this.loading=!1})}static \u0275fac=function(l){return new(l||o)(le(Pe),le(ac),le(It),le(gr),le(qt),le(gc),le(fn),le(nn))};static \u0275cmp=Fe({type:o,selectors:[["erupt-tree"]],viewQuery:function(l,c){if(l&1&&(kt(iT,5),kt(rT,5)),l&2){let u;Lt(u=At())&&(c.treeDiv=u.first),Lt(u=At())&&(c.tree=u.first)}},standalone:!1,decls:2,vars:1,consts:[["suffixIcon",""],["treeDiv",""],["tree",""],[2,"padding","16px"],["nz-row","",3,"nzGutter","id"],["nz-col","",3,"nzXs","nzSm","nzMd","nzLg"],["nz-button","","nzType","dashed",1,"mb-sm",2,"display","block","width","100%"],[1,"mb-sm",2,"width","100%",3,"nzSuffix"],["type","text","nz-input","","placeholder","Search",3,"ngModelChange","ngModel"],[1,"layout-tree-view",3,"ngStyle","scrollTop"],[3,"nzLoading","nzActive"],[1,"tree-container",3,"nzClick","nzDblClick","nzVirtualHeight","nzShowLine","nzData","nzSearchValue","nzBlockNode"],["nz-col","",1,"mb-sm",3,"nzXs","nzSm","nzMd","nzLg"],["nz-row","",1,"mb-sm"],["nz-col","",3,"nzXs"],[2,"width","100%","height","calc(100vh - 140px)",3,"ngStyle"],["nzAccordion","","nzExpandIconPosition","end"],[3,"nzActive","nzHeader","nzDisabled","nzShowArrow"],["nzSize","large",3,"nzSpinning"],[3,"eruptBuildModel","behavior"],["nz-button","","nzType","dashed",1,"mb-sm",2,"display","block","width","100%",3,"click"],["nz-icon","","nzType","plus","theme","outline"],["nz-icon","","nzType","search"],["nz-button","","id","erupt-btn-save",3,"disabled"],["nz-button","","nzType","default","nzDanger","","id","erupt-btn-delete",2,"background","#fff !important",3,"nzGhost","disabled"],["nz-button","","nzType","dashed","id","erupt-btn-add_sub",3,"disabled"],["nz-button","","id","erupt-btn-save",3,"click","disabled"],["nz-icon","","nzType","save","theme","outline"],["nz-button","","nzType","default","nzDanger","","id","erupt-btn-delete",2,"background","#fff !important",3,"click","nzGhost","disabled"],["nz-icon","","nzType","delete","theme","outline"],["nz-button","","nzType","dashed","id","erupt-btn-add_sub",3,"click","disabled"],["nz-icon","","nzType","arrow-down","nzTheme","outline"],["nz-button","","id","erupt-btn-add-new",3,"disabled"],["nz-button","","id","erupt-btn-add-new",3,"click","disabled"]],template:function(l,c){l&1&&(R(0,"div",3),X(1,hT,25,38,"div",4),V()),l&2&&(A(),Q(c.eruptBuildModel?1:-1))},dependencies:[Gn,on,Et,zt,tn,Ct,dn,Kn,Sn,pt,Xt,fi,Gi,Pt,Sl,Tl,$r,_c,go,hn],styles:["[_nghost-%COMP%]     .ant-collapse-header{padding:6px 18px!important}[_nghost-%COMP%]     .layout-tree-view{padding:10px;background:#fff;border:1px solid #d9d9d9}[data-theme=dark]   [_nghost-%COMP%]     .layout-tree-view{background:#141414;border:1px solid #434343}"]})}return o})();var oh=(()=>{class o{route;settingSrv;constructor(e,l){this.route=e,this.settingSrv=l}router$;eruptName;ngOnInit(){this.router$=this.route.params.subscribe(e=>{this.eruptName=e.name})}ngOnDestroy(){this.router$.unsubscribe()}static \u0275fac=function(l){return new(l||o)(le(ac),le(gr))};static \u0275cmp=Fe({type:o,selectors:[["erupt-table-view"]],standalone:!1,decls:2,vars:2,consts:[[2,"padding","16px"],[3,"eruptName","id"]],template:function(l,c){l&1&&(R(0,"div",0),te(1,"erupt-table",1),V()),l&2&&(A(),k("eruptName",c.eruptName)("id",c.eruptName))},dependencies:[ya],encapsulation:2})}return o})();var _T=[{path:"table/:name",component:oh},{path:"tree/:name",component:rh}],ah=(()=>{class o{static \u0275fac=function(l){return new(l||o)};static \u0275mod=Wi({type:o});static \u0275inj=Hi({imports:[fu.forChild(_T),fu]})}return o})();var gT=["ue"],CT=(o,g)=>({serverUrl:o,readonly:g}),Vu=(()=>{class o{tokenService;eruptField;erupt;readonly;ue;serverPath;constructor(e){this.tokenService=e}ngOnInit(){let e=ji.file;$i.domain||(e=window.location.pathname+e),this.serverPath=e+"/upload-ueditor/"+this.erupt.eruptName+"/"+this.eruptField.fieldName+"?_erupt="+this.erupt.eruptName+"&_token="+this.tokenService.get().token}static \u0275fac=function(l){return new(l||o)(le(Ui))};static \u0275cmp=Fe({type:o,selectors:[["erupt-ueditor"]],viewQuery:function(l,c){if(l&1&&kt(gT,5),l&2){let u;Lt(u=At())&&(c.ue=u.first)}},inputs:{eruptField:"eruptField",erupt:"erupt",readonly:"readonly"},standalone:!1,decls:2,vars:6,consts:[["ue",""],[3,"ngModelChange","name","ngModel","config"]],template:function(l,c){if(l&1){let u=ne();R(0,"ueditor",1,0),ye("ngModelChange",function(N){return j(u),Ce(c.eruptField.eruptFieldJson.edit.$value,N)||(c.eruptField.eruptFieldJson.edit.$value=N),G(N)}),V()}l&2&&(k("name",c.eruptField.fieldName),ge("ngModel",c.eruptField.eruptFieldJson.edit.$value),k("config",Ei(3,CT,c.serverPath,c.readonly)))},dependencies:[Et,zt,Nm],encapsulation:2})}return o})();function Bu(o){let g=[];function e(c){c.getParentNode()&&(g.push(c.getParentNode().key),e(c.parentNode))}function l(c){if(c.getChildren()&&c.getChildren().length>0)for(let u of c.getChildren())l(u),g.push(u.key)}for(let c of o)g.push(c.key),c.isChecked&&e(c),l(c);return g}function yT(o,g){o&1&&te(0,"i",5)}function vT(o,g){if(o&1){let e=ne();R(0,"nz-tree",6),se("nzCheckBoxChange",function(c){j(e);let u=S();return G(u.checkBoxChange(c))}),V()}if(o&2){let e=S();k("nzCheckable",!0)("nzShowLine",!0)("nzVirtualHeight",e.treeData.length>50?"420px":null)("nzCheckStrictly",!0)("nzData",e.treeData)("nzSearchValue",e.eruptFieldModel.eruptFieldJson.edit.$tempValue)("nzCheckedKeys",e.arrayAnyToString(e.eruptFieldModel.eruptFieldJson.edit.$value))}}var Nl=(()=>{class o{dataService;dataHandlerService;eruptBuildModel;eruptFieldModel;onlyRead=!1;treeData;loading=!1;constructor(e,l){this.dataService=e,this.dataHandlerService=l}ngOnInit(){this.loading=!0,this.dataService.findTabTree(this.eruptBuildModel.eruptModel.eruptName,this.eruptFieldModel.fieldName).subscribe(e=>{let l=this.eruptBuildModel.tabErupts[this.eruptFieldModel.fieldName];this.treeData=this.dataHandlerService.dataTreeToZorroTree(e,l?l.eruptModel.eruptJson.tree.expandLevel:999)||[],this.loading=!1})}checkBoxChange(e){let l=e;if(l.node.isChecked)this.eruptFieldModel.eruptFieldJson.edit.$value=Array.from(new Set([...this.eruptFieldModel.eruptFieldJson.edit.$value,...Bu([l.node])]));else{let c=this.eruptFieldModel.eruptFieldJson.edit.$value,u=Bu([l.node]),b=[];if(u&&u.length>0){let N={};for(let M of u)N[M]=M;for(let M=0;M<c.length;M++)N[c[M]]||b.push(c[M])}this.eruptFieldModel.eruptFieldJson.edit.$value=b}}arrayAnyToString(e){if(e)for(let l in e)e[l]=e[l].toString();return e}findChecks(e,l=[]){return e.forEach(c=>{l.push(c.origin.key),c.children&&this.findChecks(c.children,l)}),l}static \u0275fac=function(l){return new(l||o)(le(Pe),le(nn))};static \u0275cmp=Fe({type:o,selectors:[["erupt-tab-tree"]],inputs:{eruptBuildModel:"eruptBuildModel",eruptFieldModel:"eruptFieldModel",onlyRead:"onlyRead"},standalone:!1,decls:7,vars:4,consts:[["suffixIcon",""],[3,"nzSpinning"],[1,"mb-sm",3,"nzSuffix"],["type","text","nz-input","","placeholder","Search",3,"ngModelChange","ngModel"],[2,"max-height","420px","overflow","auto",3,"nzCheckable","nzShowLine","nzVirtualHeight","nzCheckStrictly","nzData","nzSearchValue","nzCheckedKeys"],["nz-icon","","nzType","search"],[2,"max-height","420px","overflow","auto",3,"nzCheckBoxChange","nzCheckable","nzShowLine","nzVirtualHeight","nzCheckStrictly","nzData","nzSearchValue","nzCheckedKeys"]],template:function(l,c){if(l&1){let u=ne();R(0,"div")(1,"nz-spin",1)(2,"nz-input-group",2)(3,"input",3),ye("ngModelChange",function(N){return j(u),Ce(c.eruptFieldModel.eruptFieldJson.edit.$tempValue,N)||(c.eruptFieldModel.eruptFieldJson.edit.$tempValue=N),G(N)}),V()(),nt(4,yT,1,0,"ng-template",null,0,Qe),X(6,vT,1,7,"nz-tree",4),V()()}if(l&2){let u=Ue(5);A(),k("nzSpinning",c.loading),A(),k("nzSuffix",u),A(),ge("ngModel",c.eruptFieldModel.eruptFieldJson.edit.$tempValue),A(3),Q(c.treeData?6:-1)}},dependencies:[on,Et,zt,Ct,pt,Xt,fi,Gi,Pt,$r],encapsulation:2})}return o})();function wT(o,g){if(o&1&&(R(0,"div",3)(1,"label",5),he(2),V()()),o&2){let e=g.$implicit,l=S();k("nzXs",12)("nzSm",8)("nzMd",8)("nzLg",4),A(),k("nzDisabled",l.onlyRead)("nzValue",e.id)("nzTooltipTitle",e.remark)("title",e.label)("nzChecked",l.edit.$value&&l.edit.$value.indexOf(e.id)!=-1),A(),Dt(e.label)}}function bT(o,g){o&1&&te(0,"nz-empty",4),o&2&&k("nzNotFoundImage","simple")("nzNotFoundContent",null)}var Dl=(()=>{class o{dataService;eruptBuildModel;eruptFieldModel;onlyRead=!1;checkbox;loading=!1;edit;constructor(e){this.dataService=e}ngOnInit(){this.loading=!0,this.dataService.findCheckBox(this.eruptBuildModel.eruptModel.eruptName,this.eruptFieldModel.fieldName).subscribe(e=>{e&&(this.edit=this.eruptFieldModel.eruptFieldJson.edit,this.checkbox=e),this.loading=!1})}change(e){this.eruptFieldModel.eruptFieldJson.edit.$value=e}static \u0275fac=function(l){return new(l||o)(le(Pe))};static \u0275cmp=Fe({type:o,selectors:[["erupt-checkbox"]],inputs:{eruptBuildModel:"eruptBuildModel",eruptFieldModel:"eruptFieldModel",onlyRead:"onlyRead"},standalone:!1,decls:6,vars:2,consts:[[3,"nzSpinning"],[2,"width","100%","max-height","305px","overflow","auto",3,"nzOnChange"],["nz-row",""],["nz-col","",3,"nzXs","nzSm","nzMd","nzLg"],[3,"nzNotFoundImage","nzNotFoundContent"],["nz-checkbox","","nz-tooltip","",3,"nzDisabled","nzValue","nzTooltipTitle","title","nzChecked"]],template:function(l,c){l&1&&(R(0,"nz-spin",0)(1,"nz-checkbox-wrapper",1),se("nzOnChange",function(b){return c.change(b)}),R(2,"div",2),De(3,wT,3,10,"div",3,Ie),V()(),X(5,bT,1,2,"nz-empty",4),V()),l&2&&(k("nzSpinning",c.loading),A(3),Oe(c.checkbox),A(2),Q(!c.checkbox||!c.checkbox.length?5:-1))},dependencies:[Kn,Sn,Ur,Cc,Dn,Pt,uc],styles:["[_nghost-%COMP%]     label[nz-checkbox]{max-width:140px;line-height:initial;margin-left:0;margin-bottom:6px;margin-top:6px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}"]})}return o})();var gi=hl(Eu());function TT(o,g){if(o&1){let e=ne();R(0,"nz-range-picker",1),ye("ngModelChange",function(c){j(e);let u=S(2);return Ce(u.edit.$value,c)||(u.edit.$value=c),G(c)}),V()}if(o&2){let e=S(2);k("nzSize",e.size)("name",e.field.fieldName),ge("ngModel",e.edit.$value),k("nzDisabled",e.readonly)("nzShowTime",e.edit.dateType.type==e.dateEnum.DATE_TIME)("nzMode",e.rangeMode)("nzPlaceHolder",e.edit.placeHolder)("nzDisabledDate",e.disabledDate)("nzRanges",e.dateRanges)}}function ST(o,g){if(o&1&&X(0,TT,1,9,"nz-range-picker",0),o&2){let e=S();Q(e.edit.dateType.type!=e.dateEnum.TIME?0:-1)}}function MT(o,g){if(o&1){let e=ne();R(0,"nz-date-picker",6),ye("ngModelChange",function(c){j(e);let u=S(2);return Ce(u.edit.$value,c)||(u.edit.$value=c),G(c)}),V()}if(o&2){let e=S(2);k("nzSize",e.size),ge("ngModel",e.edit.$value),k("nzDisabled",e.readonly)("nzPlaceHolder",e.edit.placeHolder)("nzDisabledDate",e.disabledDate)("name",e.field.fieldName)}}function ET(o,g){if(o&1){let e=ne();R(0,"nz-date-picker",7),ye("ngModelChange",function(c){j(e);let u=S(2);return Ce(u.edit.$value,c)||(u.edit.$value=c),G(c)}),V()}if(o&2){let e=S(2);k("nzSize",e.size),ge("ngModel",e.edit.$value),k("nzDisabled",e.readonly)("nzPlaceHolder",e.edit.placeHolder)("nzDisabledDate",e.disabledDate)("name",e.field.fieldName)}}function zT(o,g){if(o&1){let e=ne();R(0,"nz-time-picker",8),ye("ngModelChange",function(c){j(e);let u=S(2);return Ce(u.edit.$value,c)||(u.edit.$value=c),G(c)}),V()}if(o&2){let e=S(2);k("nzSize",e.size),ge("ngModel",e.edit.$value),k("nzDisabled",e.readonly)("nzPlaceHolder",e.edit.placeHolder)("name",e.field.fieldName)}}function kT(o,g){if(o&1){let e=ne();R(0,"nz-week-picker",9),ye("ngModelChange",function(c){j(e);let u=S(2);return Ce(u.edit.$value,c)||(u.edit.$value=c),G(c)}),V()}if(o&2){let e=S(2);k("nzSize",e.size),ge("ngModel",e.edit.$value),k("nzDisabled",e.readonly)("nzDisabledDate",e.disabledDate)("nzPlaceHolder",e.edit.placeHolder)("name",e.field.fieldName)}}function LT(o,g){if(o&1){let e=ne();R(0,"nz-month-picker",6),ye("ngModelChange",function(c){j(e);let u=S(2);return Ce(u.edit.$value,c)||(u.edit.$value=c),G(c)}),V()}if(o&2){let e=S(2);k("nzSize",e.size),ge("ngModel",e.edit.$value),k("nzDisabled",e.readonly)("nzPlaceHolder",e.edit.placeHolder)("nzDisabledDate",e.disabledDate)("name",e.field.fieldName)}}function AT(o,g){if(o&1){let e=ne();R(0,"nz-year-picker",9),ye("ngModelChange",function(c){j(e);let u=S(2);return Ce(u.edit.$value,c)||(u.edit.$value=c),G(c)}),V()}if(o&2){let e=S(2);k("nzSize",e.size),ge("ngModel",e.edit.$value),k("nzDisabled",e.readonly)("nzDisabledDate",e.disabledDate)("nzPlaceHolder",e.edit.placeHolder)("name",e.field.fieldName)}}function FT(o,g){if(o&1&&X(0,MT,1,6,"nz-date-picker",2)(1,ET,1,6,"nz-date-picker",3)(2,zT,1,5,"nz-time-picker",4)(3,kT,1,6,"nz-week-picker",5)(4,LT,1,6,"nz-month-picker",2)(5,AT,1,6,"nz-year-picker",5),o&2){let e,l=S();Q((e=l.edit.dateType.type)===l.dateEnum.DATE?0:e===l.dateEnum.DATE_TIME?1:e===l.dateEnum.TIME?2:e===l.dateEnum.WEEK?3:e===l.dateEnum.MONTH?4:e===l.dateEnum.YEAR?5:-1)}}var Ac=(()=>{class o{i18n;size="default";field;range=!1;readonly;datePipe;edit;dateRanges={};dateEnum=Bt;startToday;endToday;rangeMode;constructor(e){this.i18n=e,this.datePipe=e.datePipe}ngOnInit(){if(this.startToday=(0,gi.default)((0,gi.default)().format("yyyy-MM-DD 00:00:00")).toDate(),this.endToday=(0,gi.default)((0,gi.default)().format("yyyy-MM-DD 23:59:59")).toDate(),this.dateRanges={[this.i18n.fanyi("global.today")]:[this.datePipe.transform(new Date,"yyyy-MM-dd 00:00:00"),this.datePipe.transform(new Date,"yyyy-MM-dd 23:59:59")],[this.i18n.fanyi("global.yesterday")]:[this.datePipe.transform((0,gi.default)().add(-1,"day").toDate(),"yyyy-MM-dd 00:00:00"),this.datePipe.transform((0,gi.default)().add(-1,"day").toDate(),"yyyy-MM-dd 23:59:59")],[this.i18n.fanyi("global.date.last_7_day")]:[this.datePipe.transform((0,gi.default)().add(-7,"day").toDate(),"yyyy-MM-dd 00:00:00"),this.datePipe.transform(new Date,"yyyy-MM-dd 23:59:59")],[this.i18n.fanyi("global.date.last_30_day")]:[this.datePipe.transform((0,gi.default)().add(-30,"day").toDate(),"yyyy-MM-dd 00:00:00"),this.datePipe.transform(new Date,"yyyy-MM-dd 23:59:59")],[this.i18n.fanyi("global.date.this_month")]:[this.datePipe.transform((0,gi.default)().toDate(),"yyyy-MM-01 00:00:00"),this.datePipe.transform(new Date,"yyyy-MM-dd 23:59:59")],[this.i18n.fanyi("global.date.last_month")]:[this.datePipe.transform((0,gi.default)().add(-1,"month").toDate(),"yyyy-MM-01 00:00:00"),this.datePipe.transform((0,gi.default)().add(-1,"month").endOf("month").toDate(),"yyyy-MM-dd 23:59:59")]},this.edit=this.field.eruptFieldJson.edit,this.range)switch(this.field.eruptFieldJson.edit.dateType.type){case Bt.DATE:case Bt.DATE_TIME:this.rangeMode="date";break;case Bt.WEEK:this.rangeMode="week";break;case Bt.MONTH:this.rangeMode="month";break;case Bt.YEAR:this.rangeMode="year";break}}disabledDate=e=>this.edit.dateType.pickerMode==cc.ALL?!1:this.edit.dateType.pickerMode==cc.FUTURE?e.getTime()<this.startToday.getTime():this.edit.dateType.pickerMode==cc.HISTORY?e.getTime()>this.endToday.getTime():null;static \u0275fac=function(l){return new(l||o)(le(qt))};static \u0275cmp=Fe({type:o,selectors:[["erupt-date"]],inputs:{size:"size",field:"field",range:"range",readonly:"readonly"},standalone:!1,decls:2,vars:2,consts:[[1,"erupt-input","stander-line-height",3,"nzSize","name","ngModel","nzDisabled","nzShowTime","nzMode","nzPlaceHolder","nzDisabledDate","nzRanges"],[1,"erupt-input","stander-line-height",3,"ngModelChange","nzSize","name","ngModel","nzDisabled","nzShowTime","nzMode","nzPlaceHolder","nzDisabledDate","nzRanges"],[1,"erupt-input","stander-line-height",3,"nzSize","ngModel","nzDisabled","nzPlaceHolder","nzDisabledDate","name"],["nzShowTime","",1,"erupt-input","stander-line-height",3,"nzSize","ngModel","nzDisabled","nzPlaceHolder","nzDisabledDate","name"],[1,"erupt-input","stander-line-height",3,"nzSize","ngModel","nzDisabled","nzPlaceHolder","name"],[1,"erupt-input","stander-line-height",3,"nzSize","ngModel","nzDisabled","nzDisabledDate","nzPlaceHolder","name"],[1,"erupt-input","stander-line-height",3,"ngModelChange","nzSize","ngModel","nzDisabled","nzPlaceHolder","nzDisabledDate","name"],["nzShowTime","",1,"erupt-input","stander-line-height",3,"ngModelChange","nzSize","ngModel","nzDisabled","nzPlaceHolder","nzDisabledDate","name"],[1,"erupt-input","stander-line-height",3,"ngModelChange","nzSize","ngModel","nzDisabled","nzPlaceHolder","name"],[1,"erupt-input","stander-line-height",3,"ngModelChange","nzSize","ngModel","nzDisabled","nzDisabledDate","nzPlaceHolder","name"]],template:function(l,c){l&1&&(X(0,ST,1,1),X(1,FT,6,1)),l&2&&(Q(c.range?0:-1),A(),Q(c.range?-1:1))},dependencies:[Et,zt,vc,wc,Lm,Fm,Am,km],encapsulation:2})}return o})();function NT(o,g){o&1&&(R(0,"label",4),he(1),Se(2,"translate"),V()),o&2&&(A(),Dt(Ee(2,1,"global.all")))}function DT(o,g){if(o&1&&(R(0,"label",6),he(1),V()),o&2){let e=g.$implicit,l=S(3);Ji("color",!e.disable&&e.color),k("nzTooltipTitle",e.desc)("nzDisabled",l.readonly||e.disable)("nzValue",e.value),A(),Dt(e.label)}}function OT(o,g){if(o&1){let e=ne();R(0,"nz-radio-group",3),ye("ngModelChange",function(c){j(e);let u=S(2);return Ce(u.eruptField.eruptFieldJson.edit.$value,c)||(u.eruptField.eruptFieldJson.edit.$value=c),G(c)}),se("ngModelChange",function(c){j(e);let u=S(2);return G(u.valueChange(c))}),X(1,NT,3,3,"label",4),De(2,DT,2,6,"label",5,Ie),V()}if(o&2){let e=S(2);ge("ngModel",e.eruptField.eruptFieldJson.edit.$value),k("name",e.eruptField.fieldName),A(),Q(e.checkAll?1:-1),A(),Oe(e.choiceVL)}}function IT(o,g){if(o&1&&(R(0,"nz-option",9)(1,"div",10),he(2),V()()),o&2){let e=g.$implicit;k("nzDisabled",e.disable)("nzValue",e.value)("nzLabel",e.label),A(),Ji("color",!e.disable&&e.color),k("nzTooltipPlacement","left")("nzTooltipTitle",e.desc),A(),Dt(e.label)}}function RT(o,g){if(o&1&&De(0,IT,3,8,"nz-option",9,Ie),o&2){let e=S(3);Oe(e.choiceVL)}}function PT(o,g){o&1&&(R(0,"nz-option",8)(1,"div",11),te(2,"i",12),V()())}function VT(o,g){if(o&1){let e=ne();R(0,"nz-select",7),se("nzOpenChange",function(c){j(e);let u=S(2);return G(u.load(c))}),ye("ngModelChange",function(c){j(e);let u=S(2);return Ce(u.eruptField.eruptFieldJson.edit.$value,c)||(u.eruptField.eruptFieldJson.edit.$value=c),G(c)}),se("ngModelChange",function(c){j(e);let u=S(2);return G(u.valueChange(c))}),X(1,RT,2,0),X(2,PT,3,0,"nz-option",8),V()}if(o&2){let e=S(2);k("nzLoading",e.isLoading)("nzDisabled",e.readonly),ge("ngModel",e.eruptField.eruptFieldJson.edit.$value),k("nzPlaceHolder",e.eruptField.eruptFieldJson.edit.placeHolder)("name",e.eruptField.fieldName)("nzSize",e.size)("nzShowSearch",!0),A(),Q(e.isLoading?-1:1),A(),Q(e.isLoading?2:-1)}}function BT(o,g){if(o&1&&X(0,OT,4,3,"nz-radio-group",1)(1,VT,3,9,"nz-select",2),o&2){let e,l=S();Q((e=l.eruptField.eruptFieldJson.edit.choiceType.type)===l.choiceEnum.RADIO?0:e===l.choiceEnum.SELECT?1:-1)}}function HT(o,g){if(o&1&&(R(0,"nz-option",9)(1,"div",10),he(2),V()()),o&2){let e=g.$implicit;k("nzDisabled",e.disable)("nzValue",e.value)("nzLabel",e.label),A(),Ji("color",e.color),k("nzTooltipPlacement","left")("nzTooltipTitle",e.desc),A(),Dt(e.label)}}function WT(o,g){if(o&1&&De(0,HT,3,8,"nz-option",9,Ie),o&2){let e=S(2);Oe(e.choiceVL)}}function JT(o,g){o&1&&(R(0,"nz-option",8)(1,"div",11),te(2,"i",12),V()())}function UT(o,g){if(o&1){let e=ne();R(0,"nz-select",13),se("nzOpenChange",function(c){j(e);let u=S();return G(u.load(c))}),ye("ngModelChange",function(c){j(e);let u=S();return Ce(u.eruptField.eruptFieldJson.edit.$value,c)||(u.eruptField.eruptFieldJson.edit.$value=c),G(c)}),se("ngModelChange",function(c){j(e);let u=S();return G(u.valueChange(c))}),X(1,WT,2,0),X(2,JT,3,0,"nz-option",8),V()}if(o&2){let e=S();k("nzLoading",e.isLoading)("nzDisabled",e.readonly),ge("ngModel",e.eruptField.eruptFieldJson.edit.$value),k("nzPlaceHolder",e.eruptField.eruptFieldJson.edit.placeHolder)("name",e.eruptField.fieldName)("nzSize",e.size)("nzShowSearch",!0),A(),Q(e.isLoading?-1:1),A(),Q(e.isLoading?2:-1)}}var Fc=(()=>{class o{dataService;msg;i18n;eruptModel;eruptField;editType;eruptParentName;vagueSearch=!1;readonly=!1;checkAll=!1;size="default";isLoading=!1;choiceEnum=ra;choiceVL=[];constructor(e,l,c){this.dataService=e,this.msg=l,this.i18n=c}ngOnInit(){this.eruptField.eruptFieldJson.edit.choiceType.dependField?this.eruptModel.eruptFieldModelMap.get(this.eruptField.eruptFieldJson.edit.choiceType.dependField).eruptFieldJson.edit.$valueSubject?.asObservable().subscribe(e=>{let l=this.eruptField.eruptFieldJson.edit.choiceType,c=()=>{this.choiceVL.filter(u=>u.value==this.eruptField.eruptFieldJson.edit.$value).length==0&&(this.eruptField.eruptFieldJson.edit.$value=null)};this.dataService.findChoiceItemFilter(this.eruptModel.eruptName,this.eruptField.fieldName,this.getFromData(),this.eruptParentName).subscribe(u=>{this.choiceVL=u,c()})}):this.choiceVL=this.eruptField.componentValue}valueChange(e){this.eruptField.eruptFieldJson.edit.choiceType.trigger&&this.editType&&(this.isLoading=!0,this.dataService.choiceTrigger(this.eruptModel.eruptName,this.eruptField.fieldName,e,this.eruptParentName).subscribe(l=>{l&&this.editType.fillForm(l),this.isLoading=!1}))}getFromData(){let e={};for(let l of this.eruptModel.eruptFieldModels)e[l.fieldName]=l.eruptFieldJson.edit.$value;return e}load(e){let l=this.eruptField.eruptFieldJson.edit.choiceType;e&&l.anewFetch&&(this.isLoading=!0,this.dataService.findChoiceItemFilter(this.eruptModel.eruptName,this.eruptField.fieldName,this.getFromData(),this.eruptParentName).subscribe(c=>{this.eruptField.componentValue=c,this.choiceVL=c,this.isLoading=!1}))}static \u0275fac=function(l){return new(l||o)(le(Pe),le(It),le(qt))};static \u0275cmp=Fe({type:o,selectors:[["erupt-choice"]],inputs:{eruptModel:"eruptModel",eruptField:"eruptField",editType:"editType",eruptParentName:"eruptParentName",vagueSearch:"vagueSearch",readonly:"readonly",checkAll:"checkAll",size:"size"},standalone:!1,decls:2,vars:2,consts:[["nzAllowClear","","nzMode","multiple",1,"erupt-input",3,"nzLoading","nzDisabled","ngModel","nzPlaceHolder","name","nzSize","nzShowSearch"],[1,"erupt-input","stander-line-height",3,"ngModel","name"],["nzAllowClear","",1,"erupt-input",3,"nzLoading","nzDisabled","ngModel","nzPlaceHolder","name","nzSize","nzShowSearch"],[1,"erupt-input","stander-line-height",3,"ngModelChange","ngModel","name"],["nz-radio","",3,"nzValue"],["nz-radio","","nz-tooltip","",3,"nzTooltipTitle","color","nzDisabled","nzValue"],["nz-radio","","nz-tooltip","",3,"nzTooltipTitle","nzDisabled","nzValue"],["nzAllowClear","",1,"erupt-input",3,"nzOpenChange","ngModelChange","nzLoading","nzDisabled","ngModel","nzPlaceHolder","name","nzSize","nzShowSearch"],["nzDisabled","","nzCustomContent",""],["nzCustomContent","",3,"nzDisabled","nzValue","nzLabel"],["nz-tooltip","",3,"nzTooltipPlacement","nzTooltipTitle"],[1,"text-center"],["nz-icon","","nzType","loading",1,"loading-icon"],["nzAllowClear","","nzMode","multiple",1,"erupt-input",3,"nzOpenChange","ngModelChange","nzLoading","nzDisabled","ngModel","nzPlaceHolder","name","nzSize","nzShowSearch"]],template:function(l,c){l&1&&(X(0,BT,2,1),X(1,UT,3,9,"nz-select",0)),l&2&&(Q(c.vagueSearch?-1:0),A(),Q(c.vagueSearch?1:-1))},dependencies:[Et,zt,Ct,Dn,mi,hi,pt,ho,mo,hn],styles:["[_nghost-%COMP%]     nz-radio-group label{line-height:32px}"]})}return o})();var lh=(()=>{class o{static \u0275fac=function(l){return new(l||o)};static \u0275mod=Wi({type:o});static \u0275inj=Hi({imports:[oc,ia,Yf]})}return o})();function $T(o,g){if(o&1&&(R(0,"nz-auto-option",3),he(1),V()),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",e),A(),$e(" ",e," ")}}var Nc=(()=>{class o{dataService;field;eruptModel;size="large";parentEruptName;constructor(e){this.dataService=e}ngOnInit(){}getFromData(){let e={};for(let l of this.eruptModel.eruptFieldModels)e[l.fieldName]=l.eruptFieldJson.edit.$value;return e}onAutoCompleteInput(e,l){let c=l.eruptFieldJson.edit;c.$value&&c.autoCompleteType.triggerLength<=c.$value.toString().trim().length?this.dataService.findAutoCompleteValue(this.eruptModel.eruptName,l.fieldName,this.getFromData(),c.$value,this.parentEruptName).subscribe(u=>{c.autoCompleteType.items=u}):c.autoCompleteType.items=[]}static \u0275fac=function(l){return new(l||o)(le(Pe))};static \u0275cmp=Fe({type:o,selectors:[["erupt-auto-complete"]],inputs:{field:"field",eruptModel:"eruptModel",size:"size",parentEruptName:"parentEruptName"},standalone:!1,decls:5,vars:6,consts:[["autocomplete",""],["nz-input","",3,"input","ngModelChange","nzSize","placeholder","name","ngModel","nzAutocomplete"],[3,"nzBackfill"],[3,"nzValue","nzLabel"]],template:function(l,c){if(l&1){let u=ne();R(0,"input",1),se("input",function(N){return j(u),G(c.onAutoCompleteInput(N,c.field))}),ye("ngModelChange",function(N){return j(u),Ce(c.field.eruptFieldJson.edit.$value,N)||(c.field.eruptFieldJson.edit.$value=N),G(N)}),V(),R(1,"nz-autocomplete",2,0),De(3,$T,2,3,"nz-auto-option",3,Ie),V()}if(l&2){let u=Ue(2);k("nzSize",c.size)("placeholder",c.field.eruptFieldJson.edit.placeHolder)("name",c.field.fieldName),ge("ngModel",c.field.eruptFieldJson.edit.$value),k("nzAutocomplete",u),A(),k("nzBackfill",!0),A(2),Oe(c.field.eruptFieldJson.edit.autoCompleteType.items)}},dependencies:[on,Et,zt,Xt,hc,fc,mc],encapsulation:2})}return o})();function jT(o,g){if(o&1){let e=ne();R(0,"i",5),se("click",function(){j(e);let c=S(2);return G(c.clearReferValue(c.field))}),V()}}function GT(o,g){if(o&1){let e=ne();R(0,"i",6),se("click",function(){j(e);let c=S(2);return G(c.createReferenceModal(c.field))}),V()}}function KT(o,g){if(o&1&&(X(0,jT,1,0,"i",3),X(1,GT,1,0,"i",4)),o&2){let e=S();Q(e.field.eruptFieldJson.edit.$value?0:-1),A(),Q(e.field.eruptFieldJson.edit.$value?-1:1)}}var va=(()=>{class o{modal;msg;i18n;eruptModel;field;size;readonly=!1;parentEruptName;editType=be;constructor(e,l,c){this.modal=e,this.msg=l,this.i18n=c}ngOnInit(){}createReferenceModal(e){e.eruptFieldJson.edit.type==be.REFERENCE_TABLE?this.createRefTableModal(e):e.eruptFieldJson.edit.type==be.REFERENCE_TREE&&this.createRefTreeModal(e)}createRefTreeModal(e){let l=e.eruptFieldJson.edit.referenceTreeType.dependField,c=null;if(l){let b=this.eruptModel.eruptFieldModels.find(N=>N.fieldName==l);if(b.eruptFieldJson.edit.$value)c=b.eruptFieldJson.edit.$value;else{this.msg.warning("\u8BF7\u5148\u9009\u62E9"+b.eruptFieldJson.edit.title);return}}let u=this.modal.create({nzWrapClassName:"modal-xs",nzKeyboard:!0,nzStyle:{top:"30px"},nzTitle:e.eruptFieldJson.edit.title+(e.eruptFieldJson.edit.$viewValue?"\u3010"+e.eruptFieldJson.edit.$viewValue+"\u3011":""),nzCancelText:this.i18n.fanyi("global.close")+"\uFF08ESC\uFF09",nzContent:ih,nzOnOk:()=>{let b=e.eruptFieldJson.edit.$tempValue;return b?(b.id!=e.eruptFieldJson.edit.$value&&this.clearReferValue(e),e.eruptFieldJson.edit.$viewValue=b.label,e.eruptFieldJson.edit.$value=b.id,e.eruptFieldJson.edit.$tempValue=null,!0):(this.msg.warning("\u8BF7\u9009\u4E2D\u4E00\u6761\u6570\u636E"),!1)}});Object.assign(u.getContentComponent(),{parentEruptName:this.parentEruptName,eruptModel:this.eruptModel,eruptField:e,dependVal:c})}createRefTableModal(e){let l=e.eruptFieldJson.edit,c;if(l.referenceTableType.dependField){let b=this.eruptModel.eruptFieldModelMap.get(l.referenceTableType.dependField);if(b.eruptFieldJson.edit.$value)c=b.eruptFieldJson.edit.$value;else{this.msg.warning(this.i18n.fanyi("global.pre_select")+b.eruptFieldJson.edit.title);return}}let u=this.modal.create({nzWrapClassName:"modal-xxl",nzKeyboard:!0,nzStyle:{top:"24px"},nzBodyStyle:{padding:"16px"},nzTitle:l.title+(e.eruptFieldJson.edit.$viewValue?"\u3010"+e.eruptFieldJson.edit.$viewValue+"\u3011":""),nzCancelText:this.i18n.fanyi("global.close")+"\uFF08ESC\uFF09",nzContent:ya,nzOnOk:()=>{let b=l.$tempValue;return b?(b[l.referenceTableType.id]!=e.eruptFieldJson.edit.$value&&this.clearReferValue(e),l.$value=b[l.referenceTableType.id],l.$viewValue=b[l.referenceTableType.label.replace(".","_")]||"-----",l.$tempValue=b,!0):(this.msg.warning("\u8BF7\u9009\u4E2D\u4E00\u6761\u6570\u636E"),!1)}});u.getContentComponent().referenceTable={eruptBuild:{eruptModel:this.eruptModel},eruptField:e,mode:Cr.radio,dependVal:c,parentEruptName:this.parentEruptName,tabRef:!1}}clearReferValue(e){e.eruptFieldJson.edit.$value=null,e.eruptFieldJson.edit.$viewValue=null,e.eruptFieldJson.edit.$tempValue=null;for(let l of this.eruptModel.eruptFieldModels){let c=l.eruptFieldJson.edit;c.type==be.REFERENCE_TREE&&c.referenceTreeType.dependField==e.fieldName&&this.clearReferValue(l),c.type==be.REFERENCE_TABLE&&c.referenceTableType.dependField==e.fieldName&&this.clearReferValue(l)}}static \u0275fac=function(l){return new(l||o)(le(fn),le(It),le(qt))};static \u0275cmp=Fe({type:o,selectors:[["erupt-reference"]],inputs:{eruptModel:"eruptModel",field:"field",size:"size",readonly:"readonly",parentEruptName:"parentEruptName"},standalone:!1,decls:4,vars:9,consts:[["refBtn",""],[1,"erupt-input",3,"nzSize","nzAddOnAfter"],["nz-input","","autocomplete","off",3,"click","ngModelChange","nzSize","required","readOnly","disabled","placeholder","ngModel","name"],["nz-icon","","nzType","close-circle","theme","fill",1,"point"],["nz-icon","","nzType","database","theme","fill",1,"point"],["nz-icon","","nzType","close-circle","theme","fill",1,"point",3,"click"],["nz-icon","","nzType","database","theme","fill",1,"point",3,"click"]],template:function(l,c){if(l&1){let u=ne();R(0,"nz-input-group",1)(1,"input",2),se("click",function(){return j(u),G(c.createReferenceModal(c.field))}),ye("ngModelChange",function(N){return j(u),Ce(c.field.eruptFieldJson.edit.$viewValue,N)||(c.field.eruptFieldJson.edit.$viewValue=N),G(N)}),V()(),nt(2,KT,2,2,"ng-template",null,0,Qe)}if(l&2){let u=Ue(3);k("nzSize",c.size)("nzAddOnAfter",c.readonly?null:u),A(),k("nzSize",c.size)("required",c.field.eruptFieldJson.edit.notNull)("readOnly",!0)("disabled",c.readonly)("placeholder",c.field.eruptFieldJson.edit.placeHolder),ge("ngModel",c.field.eruptFieldJson.edit.$viewValue),k("name",c.field.fieldName)}},dependencies:[on,Et,da,zt,Ct,pt,Xt,fi],styles:["[_nghost-%COMP%]     td .ant-radio-wrapper .ant-radio~span{display:none}[_nghost-%COMP%]     td .ant-radio-wrapper{margin-right:0}"]})}return o})();var XT=["*"],sh=(()=>{class o{field;constructor(){}ngOnInit(){}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=Fe({type:o,selectors:[["erupt-search-se"]],inputs:{field:"field"},standalone:!1,ngContentSelectors:XT,decls:10,vars:3,consts:[[2,"display","flex","margin","4px 0"],[2,"display","flex","justify-content","flex-end"],[1,"ellipsis",2,"line-height","32px","width","90px","text-align","left"],[2,"color","#f00"],[2,"margin","0 3px",3,"title"],[2,"flex","1 0 0","width","100%"]],template:function(l,c){l&1&&(du(),R(0,"div",0)(1,"div",1)(2,"label",2)(3,"span",3),he(4),V(),R(5,"span",4),he(6),V(),he(7," \xA0 "),V()(),R(8,"div",5),uu(9),V()()),l&2&&(A(4),Dt(c.field.eruptFieldJson.edit.search.notNull?"*":""),A(),k("title",c.field.eruptFieldJson.edit.title),A(),$e("",c.field.eruptFieldJson.edit.title," :"))},encapsulation:2})}return o})();var QT=["canvas"];function YT(o,g){if(o&1&&(Vr(0),he(1),Br()),o&2){let e=S(2);A(),Dt(e.nzStatusRender)}}function ZT(o,g){if(o&1&&(R(0,"div",1),nt(1,YT,2,1,"ng-container",2),V()),o&2){let e=S();A(),k("nzStringTemplateOutlet",e.nzStatusRender)}}function eS(o,g){o&1&&te(0,"nz-spin")}function tS(o,g){if(o&1){let e=ne();R(0,"div")(1,"p",3),he(2),V(),R(3,"button",4),se("click",function(){j(e);let c=S(2);return G(c.reloadQRCode())}),te(4,"nz-icon",5),R(5,"span"),he(6),V()()()}if(o&2){let e=S(2);A(2),Dt(e.locale.expired),A(4),Dt(e.locale.refresh)}}function nS(o,g){if(o&1&&(R(0,"div")(1,"p",3),he(2),V()()),o&2){let e=S(2);A(2),Dt(e.locale.scanned)}}function iS(o,g){if(o&1&&(R(0,"div",1),X(1,eS,1,0,"nz-spin")(2,tS,7,2,"div")(3,nS,3,1,"div"),V()),o&2){let e,l=S();A(),Q((e=l.nzStatus)==="loading"?1:e==="expired"?2:e==="scanned"?3:-1)}}function rS(o,g){o&1&&te(0,"canvas",null,0)}var vo;(function(o){let g=(()=>{class b{version;errorCorrectionLevel;static encodeText(M,m){let h=o.QrSegment.makeSegments(M);return b.encodeSegments(h,m)}static encodeBinary(M,m){let h=o.QrSegment.makeBytes(M);return b.encodeSegments([h],m)}static encodeSegments(M,m,h=1,T=40,y=-1,x=!0){if(!(b.MIN_VERSION<=h&&h<=T&&T<=b.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let v,O;for(v=h;;v++){let w=b.getNumDataCodewords(v,m)*8,W=u.getTotalBits(M,v);if(W<=w){O=W;break}if(v>=T)throw new RangeError("Data too long")}for(let w of[b.Ecc.MEDIUM,b.Ecc.QUARTILE,b.Ecc.HIGH])x&&O<=b.getNumDataCodewords(v,w)*8&&(m=w);let H=[];for(let w of M){e(w.mode.modeBits,4,H),e(w.numChars,w.mode.numCharCountBits(v),H);for(let W of w.getData())H.push(W)}c(H.length==O);let P=b.getNumDataCodewords(v,m)*8;c(H.length<=P),e(0,Math.min(4,P-H.length),H),e(0,(8-H.length%8)%8,H),c(H.length%8==0);for(let w=236;H.length<P;w^=253)e(w,8,H);let B=[];for(;B.length*8<H.length;)B.push(0);return H.forEach((w,W)=>B[W>>>3]|=w<<7-(W&7)),new b(v,m,B,y)}size;mask;modules=[];isFunction=[];constructor(M,m,h,T){if(this.version=M,this.errorCorrectionLevel=m,M<b.MIN_VERSION||M>b.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=M*4+17;let y=[];for(let v=0;v<this.size;v++)y.push(!1);for(let v=0;v<this.size;v++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();let x=this.addEccAndInterleave(h);if(this.drawCodewords(x),T==-1){let v=1e9;for(let O=0;O<8;O++){this.applyMask(O),this.drawFormatBits(O);let H=this.getPenaltyScore();H<v&&(T=O,v=H),this.applyMask(O)}}c(T>=0&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}getModule(M,m){return M>=0&&M<this.size&&m>=0&&m<this.size&&this.modules[m][M]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let M=this.getAlignmentPatternPositions(),m=M.length;for(let h=0;h<m;h++)for(let T=0;T<m;T++)h==0&&T==0||h==0&&T==m-1||h==m-1&&T==0||this.drawAlignmentPattern(M[h],M[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(M){let m=this.errorCorrectionLevel.formatBits<<3|M,h=m;for(let y=0;y<10;y++)h=h<<1^(h>>>9)*1335;let T=(m<<10|h)^21522;c(T>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,l(T,y));this.setFunctionModule(8,7,l(T,6)),this.setFunctionModule(8,8,l(T,7)),this.setFunctionModule(7,8,l(T,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,l(T,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,l(T,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,l(T,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let M=this.version;for(let h=0;h<12;h++)M=M<<1^(M>>>11)*7973;let m=this.version<<12|M;c(m>>>18==0);for(let h=0;h<18;h++){let T=l(m,h),y=this.size-11+h%3,x=Math.floor(h/3);this.setFunctionModule(y,x,T),this.setFunctionModule(x,y,T)}}drawFinderPattern(M,m){for(let h=-4;h<=4;h++)for(let T=-4;T<=4;T++){let y=Math.max(Math.abs(T),Math.abs(h)),x=M+T,v=m+h;x>=0&&x<this.size&&v>=0&&v<this.size&&this.setFunctionModule(x,v,y!=2&&y!=4)}}drawAlignmentPattern(M,m){for(let h=-2;h<=2;h++)for(let T=-2;T<=2;T++)this.setFunctionModule(M+T,m+h,Math.max(Math.abs(T),Math.abs(h))!=1)}setFunctionModule(M,m,h){this.modules[m][M]=h,this.isFunction[m][M]=!0}addEccAndInterleave(M){let m=this.version,h=this.errorCorrectionLevel;if(M.length!=b.getNumDataCodewords(m,h))throw new RangeError("Invalid argument");let T=b.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][m],y=b.ECC_CODEWORDS_PER_BLOCK[h.ordinal][m],x=Math.floor(b.getNumRawDataModules(m)/8),v=T-x%T,O=Math.floor(x/T),H=[],P=b.reedSolomonComputeDivisor(y);for(let w=0,W=0;w<T;w++){let ee=M.slice(W,W+O-y+(w<v?0:1));W+=ee.length;let ie=b.reedSolomonComputeRemainder(ee,P);w<v&&ee.push(0),H.push(ee.concat(ie))}let B=[];for(let w=0;w<H[0].length;w++)H.forEach((W,ee)=>{(w!=O-y||ee>=v)&&B.push(W[w])});return c(B.length==x),B}drawCodewords(M){if(M.length!=Math.floor(b.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let T=0;T<this.size;T++)for(let y=0;y<2;y++){let x=h-y,O=(h+1&2)==0?this.size-1-T:T;!this.isFunction[O][x]&&m<M.length*8&&(this.modules[O][x]=l(M[m>>>3],7-(m&7)),m++)}}c(m==M.length*8)}applyMask(M){if(M<0||M>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let h=0;h<this.size;h++){let T;switch(M){case 0:T=(h+m)%2==0;break;case 1:T=m%2==0;break;case 2:T=h%3==0;break;case 3:T=(h+m)%3==0;break;case 4:T=(Math.floor(h/3)+Math.floor(m/2))%2==0;break;case 5:T=h*m%2+h*m%3==0;break;case 6:T=(h*m%2+h*m%3)%2==0;break;case 7:T=((h+m)%2+h*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][h]&&T&&(this.modules[m][h]=!this.modules[m][h])}}getPenaltyScore(){let M=0;for(let y=0;y<this.size;y++){let x=!1,v=0,O=[0,0,0,0,0,0,0];for(let H=0;H<this.size;H++)this.modules[y][H]==x?(v++,v==5?M+=b.PENALTY_N1:v>5&&M++):(this.finderPenaltyAddHistory(v,O),x||(M+=this.finderPenaltyCountPatterns(O)*b.PENALTY_N3),x=this.modules[y][H],v=1);M+=this.finderPenaltyTerminateAndCount(x,v,O)*b.PENALTY_N3}for(let y=0;y<this.size;y++){let x=!1,v=0,O=[0,0,0,0,0,0,0];for(let H=0;H<this.size;H++)this.modules[H][y]==x?(v++,v==5?M+=b.PENALTY_N1:v>5&&M++):(this.finderPenaltyAddHistory(v,O),x||(M+=this.finderPenaltyCountPatterns(O)*b.PENALTY_N3),x=this.modules[H][y],v=1);M+=this.finderPenaltyTerminateAndCount(x,v,O)*b.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let x=0;x<this.size-1;x++){let v=this.modules[y][x];v==this.modules[y][x+1]&&v==this.modules[y+1][x]&&v==this.modules[y+1][x+1]&&(M+=b.PENALTY_N2)}let m=0;for(let y of this.modules)m=y.reduce((x,v)=>x+(v?1:0),m);let h=this.size*this.size,T=Math.ceil(Math.abs(m*20-h*10)/h)-1;return c(T>=0&&T<=9),M+=T*b.PENALTY_N4,c(M>=0&&M<=2568888),M}getAlignmentPatternPositions(){if(this.version==1)return[];{let M=Math.floor(this.version/7)+2,m=Math.floor((this.version*8+M*3+5)/(M*4-4))*2,h=[6];for(let T=this.size-7;h.length<M;T-=m)h.splice(1,0,T);return h}}static getNumRawDataModules(M){if(M<b.MIN_VERSION||M>b.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*M+128)*M+64;if(M>=2){let h=Math.floor(M/7)+2;m-=(25*h-10)*h-55,M>=7&&(m-=36)}return c(m>=208&&m<=29648),m}static getNumDataCodewords(M,m){return Math.floor(b.getNumRawDataModules(M)/8)-b.ECC_CODEWORDS_PER_BLOCK[m.ordinal][M]*b.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][M]}static reedSolomonComputeDivisor(M){if(M<1||M>255)throw new RangeError("Degree out of range");let m=[];for(let T=0;T<M-1;T++)m.push(0);m.push(1);let h=1;for(let T=0;T<M;T++){for(let y=0;y<m.length;y++)m[y]=b.reedSolomonMultiply(m[y],h),y+1<m.length&&(m[y]^=m[y+1]);h=b.reedSolomonMultiply(h,2)}return m}static reedSolomonComputeRemainder(M,m){let h=m.map(T=>0);for(let T of M){let y=T^h.shift();h.push(0),m.forEach((x,v)=>h[v]^=b.reedSolomonMultiply(x,y))}return h}static reedSolomonMultiply(M,m){if(M>>>8||m>>>8)throw new RangeError("Byte out of range");let h=0;for(let T=7;T>=0;T--)h=h<<1^(h>>>7)*285,h^=(m>>>T&1)*M;return c(h>>>8==0),h}finderPenaltyCountPatterns(M){let m=M[1];c(m<=this.size*3);let h=m>0&&M[2]==m&&M[3]==m*3&&M[4]==m&&M[5]==m;return(h&&M[0]>=m*4&&M[6]>=m?1:0)+(h&&M[6]>=m*4&&M[0]>=m?1:0)}finderPenaltyTerminateAndCount(M,m,h){return M&&(this.finderPenaltyAddHistory(m,h),m=0),m+=this.size,this.finderPenaltyAddHistory(m,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(M,m){m[0]==0&&(M+=this.size),m.pop(),m.unshift(M)}static MIN_VERSION=1;static MAX_VERSION=40;static PENALTY_N1=3;static PENALTY_N2=3;static PENALTY_N3=40;static PENALTY_N4=10;static ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]];static NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]}return b})();o.QrCode=g;function e(b,N,M){if(N<0||N>31||b>>>N)throw new RangeError("Value out of range");for(let m=N-1;m>=0;m--)M.push(b>>>m&1)}function l(b,N){return(b>>>N&1)!=0}function c(b){if(!b)throw new Error("Assertion error")}let u=(()=>{class b{mode;numChars;bitData;static makeBytes(M){let m=[];for(let h of M)e(h,8,m);return new b(b.Mode.BYTE,M.length,m)}static makeNumeric(M){if(!b.isNumeric(M))throw new RangeError("String contains non-numeric characters");let m=[];for(let h=0;h<M.length;){let T=Math.min(M.length-h,3);e(parseInt(M.substring(h,h+T),10),T*3+1,m),h+=T}return new b(b.Mode.NUMERIC,M.length,m)}static makeAlphanumeric(M){if(!b.isAlphanumeric(M))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],h;for(h=0;h+2<=M.length;h+=2){let T=b.ALPHANUMERIC_CHARSET.indexOf(M.charAt(h))*45;T+=b.ALPHANUMERIC_CHARSET.indexOf(M.charAt(h+1)),e(T,11,m)}return h<M.length&&e(b.ALPHANUMERIC_CHARSET.indexOf(M.charAt(h)),6,m),new b(b.Mode.ALPHANUMERIC,M.length,m)}static makeSegments(M){return M==""?[]:b.isNumeric(M)?[b.makeNumeric(M)]:b.isAlphanumeric(M)?[b.makeAlphanumeric(M)]:[b.makeBytes(b.toUtf8ByteArray(M))]}static makeEci(M){let m=[];if(M<0)throw new RangeError("ECI assignment value out of range");if(M<128)e(M,8,m);else if(M<16384)e(2,2,m),e(M,14,m);else if(M<1e6)e(6,3,m),e(M,21,m);else throw new RangeError("ECI assignment value out of range");return new b(b.Mode.ECI,0,m)}static isNumeric(M){return b.NUMERIC_REGEX.test(M)}static isAlphanumeric(M){return b.ALPHANUMERIC_REGEX.test(M)}constructor(M,m,h){if(this.mode=M,this.numChars=m,this.bitData=h,m<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}getData(){return this.bitData.slice()}static getTotalBits(M,m){let h=0;for(let T of M){let y=T.mode.numCharCountBits(m);if(T.numChars>=1<<y)return 1/0;h+=4+y+T.bitData.length}return h}static toUtf8ByteArray(M){M=encodeURI(M);let m=[];for(let h=0;h<M.length;h++)M.charAt(h)!="%"?m.push(M.charCodeAt(h)):(m.push(parseInt(M.substring(h+1,h+3),16)),h+=2);return m}static NUMERIC_REGEX=/^[0-9]*$/;static ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+./:-]*$/;static ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:"}return b})();o.QrSegment=u})(vo||(vo={}));(function(o){let g;(function(e){class l{ordinal;formatBits;static LOW=new l(0,1);static MEDIUM=new l(1,0);static QUARTILE=new l(2,3);static HIGH=new l(3,2);constructor(u,b){this.ordinal=u,this.formatBits=b}}e.Ecc=l})(g=o.QrCode||(o.QrCode={}))})(vo||(vo={}));(function(o){let g;(function(e){class l{modeBits;numBitsCharCount;static NUMERIC=new l(1,[10,12,14]);static ALPHANUMERIC=new l(2,[9,11,13]);static BYTE=new l(4,[8,16,16]);static KANJI=new l(8,[8,10,12]);static ECI=new l(7,[0,0,0]);constructor(u,b){this.modeBits=u,this.numBitsCharCount=b}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}}e.Mode=l})(g=o.QrSegment||(o.QrSegment={}))})(vo||(vo={}));var Ol=vo,oS={L:Ol.QrCode.Ecc.LOW,M:Ol.QrCode.Ecc.MEDIUM,Q:Ol.QrCode.Ecc.QUARTILE,H:Ol.QrCode.Ecc.HIGH},aS=160,lS=10,sS=10,cS="#000000",dS="#FFFFFF",uS=40,pS="M",fS=(o,g=pS)=>o?Ol.QrCode.encodeText(o,oS[g]):null;function mS(o,g,e=aS,l=lS,c=sS,u=cS,b=dS,N=uS,M){let m=o.getContext("2d"),h=hS(c);if(o.style.width=`${e}px`,o.style.height=`${e}px`,!g){m.fillStyle="rgba(0, 0, 0, 0)",m.fillRect(0,0,o.width,o.height);return}if(o.width=g.size*l+h[1]+h[3],o.height=g.size*l+h[0]+h[2],!M)Wu(m,o.width,o.height,l,b),Hu(m,g,l,h,b,u);else{let T=new Image;T.src=M,T.crossOrigin="anonymous",T.width=N*(o.width/e),T.height=N*(o.width/e);let y=()=>{v(),Wu(m,o.width,o.height,l,b),Hu(m,g,l,h,b,u);let O=o.width/2-N*(o.width/e)/2;m.fillRect(O,O,N*(o.width/e),N*(o.width/e)),m.drawImage(T,O,O,N*(o.width/e),N*(o.width/e))},x=()=>{v(),Wu(m,o.width,o.height,l,b),Hu(m,g,l,h,b,u)},v=()=>{T.removeEventListener("load",y),T.removeEventListener("error",x)};T.addEventListener("load",y),T.addEventListener("error",x)}}function Hu(o,g,e,l,c,u){for(let b=0;b<g.size;b++)for(let N=0;N<g.size;N++)o.fillStyle=g.getModule(N,b)?u:c,o.fillRect(l[3]+N*e,l[0]+b*e,e,e)}function Wu(o,g,e,l,c){o.fillStyle=c,o.fillRect(0,0,g*l,e*l)}function hS(o){return Array.isArray(o)?Array(4).fill(0).map((g,e)=>o[e%o.length]):[o,o,o,o]}var Dc=(()=>{class o{i18n=pi(qf);el=pi(Pr);cdr=pi(ic);destroyRef=pi(nc);isBrowser=Vf(pi(Lf));canvas;nzValue="";nzPadding=0;nzColor="#000000";nzBgColor="#FFFFFF";nzSize=160;nzIcon="";nzIconSize=40;nzBordered=!0;nzStatus="active";nzLevel="M";nzStatusRender=null;nzRefresh=new Nt;locale;ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe(na(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(e){let{nzValue:l,nzIcon:c,nzLevel:u,nzSize:b,nzIconSize:N,nzColor:M,nzPadding:m,nzBgColor:h}=e;(l||c||u||b||N||M||m||h)&&this.canvas&&this.drawCanvasQRCode(),h&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&mS(this.canvas.nativeElement,fS(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=Fe({type:o,selectors:[["nz-qrcode"]],viewQuery:function(l,c){if(l&1&&kt(QT,5),l&2){let u;Lt(u=At())&&(c.canvas=u.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(l,c){l&2&&gl("ant-qrcode-border",c.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:[2,"nzSize","nzSize",yl],nzIcon:"nzIcon",nzIconSize:[2,"nzIconSize","nzIconSize",yl],nzBordered:[2,"nzBordered","nzBordered",Hr],nzStatus:"nzStatus",nzLevel:"nzLevel",nzStatusRender:"nzStatusRender"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],features:[Xo],decls:3,vars:2,consts:[["canvas",""],[1,"ant-qrcode-mask"],[4,"nzStringTemplateOutlet"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nzType","reload","nzTheme","outline"]],template:function(l,c){l&1&&(X(0,ZT,2,1,"div",1)(1,iS,4,1,"div",1),X(2,rS,2,0,"canvas")),l&2&&(Q(c.nzStatusRender?0:c.nzStatus!=="active"?1:-1),A(2),Q(c.isBrowser?2:-1))},dependencies:[mm,Pt,lc,tn,Ct,ia,pt,Kf],encapsulation:2,changeDetection:0})}return o})(),ch=(()=>{class o{static \u0275fac=function(l){return new(l||o)};static \u0275mod=Wi({type:o});static \u0275inj=Hi({imports:[Dc]})}return o})();var gS=["nz-rate-item",""],dh=o=>({$implicit:o});function CS(o,g){}function yS(o,g){}function vS(o,g){o&1&&te(0,"nz-icon",4)}var wS=["ulElement"];function bS(o,g){if(o&1){let e=ne();R(0,"li",3)(1,"div",4),se("itemHover",function(c){let u=j(e).$index,b=S();return G(b.onItemHover(u,c))})("itemClick",function(c){let u=j(e).$index,b=S();return G(b.onItemClick(u,c))}),V()()}if(o&2){let e=g.$index,l=S();Cl(l.starStyleArray[e]||""),k("nzTooltipTitle",l.nzTooltips[e]),A(),k("allowHalf",l.nzAllowHalf)("character",l.nzCharacter)("index",e)}}var ph=(()=>{class o{character;index=0;allowHalf=!1;itemHover=new Nt;itemClick=new Nt;hoverRate(e){this.itemHover.next(e&&this.allowHalf)}clickRate(e){this.itemClick.next(e&&this.allowHalf)}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=Fe({type:o,selectors:[["","nz-rate-item",""]],inputs:{character:"character",index:"index",allowHalf:[2,"allowHalf","allowHalf",Hr]},outputs:{itemHover:"itemHover",itemClick:"itemClick"},exportAs:["nzRateItem"],attrs:gS,decls:6,vars:8,consts:[["defaultCharacter",""],[1,"ant-rate-star-second",3,"mouseover","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-rate-star-first",3,"mouseover","click"],["nzType","star","nzTheme","fill"]],template:function(l,c){if(l&1){let u=ne();R(0,"div",1),se("mouseover",function(N){return j(u),c.hoverRate(!1),G(N.stopPropagation())})("click",function(){return j(u),G(c.clickRate(!1))}),nt(1,CS,0,0,"ng-template",2),V(),R(2,"div",3),se("mouseover",function(N){return j(u),c.hoverRate(!0),G(N.stopPropagation())})("click",function(){return j(u),G(c.clickRate(!0))}),nt(3,yS,0,0,"ng-template",2),V(),nt(4,vS,1,0,"ng-template",null,0,Qe)}if(l&2){let u=Ue(5);A(),k("ngTemplateOutlet",c.character||u)("ngTemplateOutletContext",$t(4,dh,c.index)),A(2),k("ngTemplateOutlet",c.character||u)("ngTemplateOutletContext",$t(6,dh,c.index))}},dependencies:[Wr,ia,pt],encapsulation:2,changeDetection:0})}return o})(),uh="rate",Ic=(()=>{let o,g=[],e=[],l,c=[],u=[];return class Oc{static{let N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[hu()],l=[hu()],cu(null,null,o,{kind:"field",name:"nzAllowClear",static:!1,private:!1,access:{has:M=>"nzAllowClear"in M,get:M=>M.nzAllowClear,set:(M,m)=>{M.nzAllowClear=m}},metadata:N},g,e),cu(null,null,l,{kind:"field",name:"nzAllowHalf",static:!1,private:!1,access:{has:M=>"nzAllowHalf"in M,get:M=>M.nzAllowHalf,set:(M,m)=>{M.nzAllowHalf=m}},metadata:N},c,u),N&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N})}_nzModuleName=uh;ngZone=pi(Af);renderer=pi(Zo);cdr=pi(ic);directionality=pi(Wf);destroyRef=pi(nc);ulElement;nzAllowClear=_l(this,g,!0);nzAllowHalf=(_l(this,e),_l(this,c,!1));nzDisabled=(_l(this,u),!1);nzAutoFocus=!1;nzCharacter;nzCount=5;nzTooltips=[];nzOnBlur=new Nt;nzOnFocus=new Nt;nzOnHoverChange=new Nt;nzOnKeyDown=new Nt;classMap={};starArray=[];starStyleArray=[];dir="ltr";hasHalf=!1;hoverValue=0;isFocused=!1;_value=0;isNzDisableFirstChange=!0;get nzValue(){return this._value}set nzValue(N){this._value!==N&&(this._value=N,this.hasHalf=!Number.isInteger(N)&&this.nzAllowHalf,this.hoverValue=Math.ceil(N))}constructor(){Jf(uh,()=>this.cdr.markForCheck())}ngOnChanges(N){let{nzAutoFocus:M,nzCount:m,nzValue:h}=N;if(M&&!M.isFirstChange()){let T=this.ulElement.nativeElement;this.nzAutoFocus&&!this.nzDisabled?this.renderer.setAttribute(T,"autofocus","autofocus"):this.renderer.removeAttribute(T,"autofocus")}m&&this.updateStarArray(),h&&this.updateStarStyle()}ngOnInit(){this.directionality.change.pipe(na(this.destroyRef)).subscribe(N=>{this.dir=N,this.cdr.detectChanges()}),this.dir=this.directionality.value,mu(this.ulElement.nativeElement,"focus").pipe(na(this.destroyRef)).subscribe(N=>{this.isFocused=!0,this.nzOnFocus.observers.length&&this.ngZone.run(()=>this.nzOnFocus.emit(N))}),mu(this.ulElement.nativeElement,"blur").pipe(na(this.destroyRef)).subscribe(N=>{this.isFocused=!1,this.nzOnBlur.observers.length&&this.ngZone.run(()=>this.nzOnBlur.emit(N))})}onItemClick(N,M){if(this.nzDisabled)return;this.hoverValue=N+1;let m=M?N+.5:N+1;this.nzValue===m?this.nzAllowClear&&(this.nzValue=0,this.onChange(this.nzValue)):(this.nzValue=m,this.onChange(this.nzValue)),this.updateStarStyle()}onItemHover(N,M){this.nzDisabled||((this.hoverValue!==N+1||M!==this.hasHalf)&&(this.hoverValue=N+1,this.hasHalf=M,this.updateStarStyle()),this.nzOnHoverChange.emit(this.hoverValue))}onRateLeave(){this.hasHalf=!Number.isInteger(this.nzValue),this.hoverValue=Math.ceil(this.nzValue),this.nzOnHoverChange.emit(this.hoverValue),this.updateStarStyle()}focus(){this.ulElement.nativeElement.focus()}blur(){this.ulElement.nativeElement.blur()}onKeyDown(N){let M=this.nzValue;N.keyCode===39&&this.nzValue<this.nzCount?this.nzValue+=this.nzAllowHalf?.5:1:N.keyCode===37&&this.nzValue>0&&(this.nzValue-=this.nzAllowHalf?.5:1),M!==this.nzValue&&(this.onChange(this.nzValue),this.nzOnKeyDown.emit(N),this.updateStarStyle(),this.cdr.markForCheck())}updateStarArray(){this.starArray=Array(this.nzCount).fill(0).map((N,M)=>M),this.updateStarStyle()}updateStarStyle(){this.starStyleArray=this.starArray.map(N=>{let M="ant-rate-star",m=N+1;return{[`${M}-full`]:m<this.hoverValue||!this.hasHalf&&m===this.hoverValue,[`${M}-half`]:this.hasHalf&&m===this.hoverValue,[`${M}-active`]:this.hasHalf&&m===this.hoverValue,[`${M}-zero`]:m>this.hoverValue,[`${M}-focused`]:this.hasHalf&&m===this.hoverValue&&this.isFocused}})}writeValue(N){this.nzValue=N||0,this.updateStarArray(),this.cdr.markForCheck()}setDisabledState(N){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||N,this.isNzDisableFirstChange=!1,this.cdr.markForCheck()}registerOnChange(N){this.onChange=N}registerOnTouched(N){this.onTouched=N}onChange=()=>null;onTouched=()=>null;static \u0275fac=function(M){return new(M||Oc)};static \u0275cmp=Fe({type:Oc,selectors:[["nz-rate"]],viewQuery:function(M,m){if(M&1&&kt(wS,7),M&2){let h;Lt(h=At())&&(m.ulElement=h.first)}},inputs:{nzAllowClear:[2,"nzAllowClear","nzAllowClear",Hr],nzAllowHalf:[2,"nzAllowHalf","nzAllowHalf",Hr],nzDisabled:[2,"nzDisabled","nzDisabled",Hr],nzAutoFocus:[2,"nzAutoFocus","nzAutoFocus",Hr],nzCharacter:"nzCharacter",nzCount:[2,"nzCount","nzCount",yl],nzTooltips:"nzTooltips"},outputs:{nzOnBlur:"nzOnBlur",nzOnFocus:"nzOnFocus",nzOnHoverChange:"nzOnHoverChange",nzOnKeyDown:"nzOnKeyDown"},exportAs:["nzRate"],features:[Df([{provide:fm,useExisting:kf(()=>Oc),multi:!0}]),Xo],decls:4,vars:7,consts:[["ulElement",""],[1,"ant-rate",3,"keydown","mouseleave","tabindex"],["nz-tooltip","",1,"ant-rate-star",3,"class","nzTooltipTitle"],["nz-tooltip","",1,"ant-rate-star",3,"nzTooltipTitle"],["nz-rate-item","",3,"itemHover","itemClick","allowHalf","character","index"]],template:function(M,m){if(M&1){let h=ne();R(0,"ul",1,0),se("keydown",function(y){return j(h),m.onKeyDown(y),G(y.preventDefault())})("mouseleave",function(y){return j(h),m.onRateLeave(),G(y.stopPropagation())}),De(2,bS,2,6,"li",2,Ie),V()}M&2&&(Cl(m.classMap),gl("ant-rate-disabled",m.nzDisabled)("ant-rate-rtl",m.dir==="rtl"),k("tabindex",m.nzDisabled?-1:1),A(2),Oe(m.starArray))},dependencies:[Cm,Dn,ph],encapsulation:2,changeDetection:0})}})(),fh=(()=>{class o{static \u0275fac=function(l){return new(l||o)};static \u0275mod=Wi({type:o});static \u0275inj=Hi({imports:[Ic,ph]})}return o})();function TS(o,g){if(o&1&&(R(0,"nz-col",3)(1,"label",4),he(2),V()()),o&2){let e=g.$implicit,l=S(2);A(),Ji("color",!e.disable&&e.color),k("nzValue",e.value)("nzDisabled",l.readonly||e.disable)("nzTooltipTitle",e.desc)("nzChecked",l.includes(l.eruptField.eruptFieldJson.edit.$value,e.value)),A(),$e(" ",e.label," ")}}function SS(o,g){if(o&1){let e=ne();R(0,"nz-checkbox-wrapper",2),se("nzOnChange",function(c){j(e);let u=S();return G(u.checkboxChange(c))}),R(1,"nz-row"),De(2,TS,3,7,"nz-col",3,Ie),V()()}if(o&2){let e=S();A(2),Oe(e.eruptField.componentValue)}}function MS(o,g){if(o&1&&(R(0,"nz-option",6)(1,"div",7),he(2),V()()),o&2){let e=g.$implicit,l=S(2);k("nzLabel",e.label)("nzDisabled",l.readonly||e.disable)("nzValue",l.isNumeric(e.value)?l.parseInt(e.value):e.value),Ff("data-color",e.color),A(),Ji("color",!e.disable&&e.color),k("nzTooltipPlacement","left")("nzTooltipTitle",e.desc),A(),$e("",e.label," ")}}function ES(o,g){if(o&1){let e=ne();R(0,"nz-select",5),ye("ngModelChange",function(c){j(e);let u=S();return Ce(u.eruptField.eruptFieldJson.edit.$value,c)||(u.eruptField.eruptFieldJson.edit.$value=c),G(c)}),De(1,MS,3,9,"nz-option",6,Ie),V()}if(o&2){let e=S();ge("ngModel",e.eruptField.eruptFieldJson.edit.$value),k("nzSize",e.size)("nzOptionOverflowSize",8)("nzMaxMultipleCount",999),A(),Oe(e.eruptField.componentValue)}}var Il=(()=>{class o{dataService;el;renderer;eruptModel;eruptField;readonly=!1;size="default";eruptParentName;multiChoiceEnum=dc;constructor(e,l,c){this.dataService=e,this.el=l,this.renderer=c}ngOnInit(){this.eruptField.eruptFieldJson.edit.multiChoiceType.dependField&&this.eruptModel.eruptFieldModelMap.get(this.eruptField.eruptFieldJson.edit.multiChoiceType.dependField).eruptFieldJson.edit.$valueSubject?.asObservable().subscribe(e=>{this.dataService.findChoiceItemFilter(this.eruptModel.eruptName,this.eruptField.fieldName,this.getFromData(),this.eruptParentName).subscribe(l=>{this.eruptField.componentValue=l,this.eruptField.eruptFieldJson.edit.$value&&(this.eruptField.eruptFieldJson.edit.$value=this.eruptField.eruptFieldJson.edit.$value.filter(c=>this.eruptField.componentValue.some(u=>u.value==String(c))))})})}ngAfterViewChecked(){this.applyTagColors()}applyTagColors(){if(this.eruptField.eruptFieldJson.edit.multiChoiceType.type===this.multiChoiceEnum.SELECT){let e=this.el.nativeElement.querySelector(".multi-choice-select");e&&this.eruptField.eruptFieldJson.edit.$value&&e.querySelectorAll(".ant-select-selection-item").forEach(c=>{let u=c.querySelector(".ant-select-selection-item-content");if(u){let b=u.textContent?.trim(),N=this.eruptField.componentValue?.find(M=>M.label===b);N?.color&&!N.disable&&this.renderer.setStyle(u,"color",N.color)}})}}getFromData(){let e={};for(let l of this.eruptModel.eruptFieldModels)e[l.fieldName]=l.eruptFieldJson.edit.$value;return e}isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(parseFloat(e))}includes(e,l){return e?e.some(c=>c==l):!1}checkboxChange(e){this.eruptField.eruptFieldJson.edit.$value=e}getValueColor(e){return this.eruptField.componentValue?.find(c=>(this.isNumeric(c.value)?parseInt(c.value):c.value)==e)?.color||""}parseInt=parseInt;static \u0275fac=function(l){return new(l||o)(le(Pe),le(Pr),le(Zo))};static \u0275cmp=Fe({type:o,selectors:[["erupt-multi-choice"]],inputs:{eruptModel:"eruptModel",eruptField:"eruptField",readonly:"readonly",size:"size",eruptParentName:"eruptParentName"},standalone:!1,decls:2,vars:1,consts:[[2,"width","100%"],["nzMode","multiple",1,"multi-choice-select",2,"width","100%",3,"ngModel","nzSize","nzOptionOverflowSize","nzMaxMultipleCount"],[2,"width","100%",3,"nzOnChange"],["nzSpan","4"],["nz-checkbox","","nz-tooltip","",3,"nzValue","nzDisabled","nzTooltipTitle","nzChecked"],["nzMode","multiple",1,"multi-choice-select",2,"width","100%",3,"ngModelChange","ngModel","nzSize","nzOptionOverflowSize","nzMaxMultipleCount"],["nzCustomContent","",3,"nzLabel","nzDisabled","nzValue"],["nz-tooltip","",3,"nzTooltipPlacement","nzTooltipTitle"]],template:function(l,c){if(l&1&&X(0,SS,4,0,"nz-checkbox-wrapper",0)(1,ES,3,4,"nz-select",1),l&2){let u;Q((u=c.eruptField.eruptFieldJson.edit.multiChoiceType.type)===c.multiChoiceEnum.CHECKBOX?0:u===c.multiChoiceEnum.SELECT?1:-1)}},dependencies:[Et,zt,Kn,Sn,Ur,Cc,Dn,mi,hi],styles:["[_nghost-%COMP%]     nz-select-item .ant-select-selection-item-content{display:inline-block}"]})}return o})();var bt=(function(o){return o.STRING="STRING",o.NUMBER="NUMBER",o.DATE="DATE",o.BOOLEAN="BOOLEAN",o.CHOICE="CHOICE",o.REFERENCE="REFERENCE",o.UPMS="UPMS",o})(bt||{}),Rl=(function(o){return o.EQ="EQ",o.NEQ="NEQ",o.LIKE="LIKE",o.NOT_LIKE="NOT_LIKE",o.START_WITH="START_WITH",o.END_WITH="END_WITH",o.IN="IN",o.NOT_IN="NOT_IN",o.NULL="NULL",o.NOT_NULL="NOT_NULL",o})(Rl||{}),Pl=(function(o){return o.EQ="EQ",o.NEQ="NEQ",o.GT="GT",o.LT="LT",o.EGT="EGT",o.ELT="ELT",o.RANGE="RANGE",o.NULL="NULL",o.NOT_NULL="NOT_NULL",o})(Pl||{}),wa=(function(o){return o.TODAY="TODAY",o.FEW_DAYS="FEW_DAYS",o.FUTURE_DAYS="FUTURE_DAYS",o.RANGE="RANGE",o.GT="GT",o.LT="LT",o.EGT="EGT",o.ELT="ELT",o.NULL="NULL",o.NOT_NULL="NOT_NULL",o})(wa||{}),Rc=(function(o){return o.EQ="EQ",o.NEQ="NEQ",o.NULL="NULL",o.NOT_NULL="NOT_NULL",o})(Rc||{}),Ju=(function(o){return o.EQ="EQ",o.NEQ="NEQ",o})(Ju||{});var Uu=(function(o){return o.ORG="ORG",o.USER="USER",o.ROLE="ROLE",o.POST="POST",o})(Uu||{}),mh=class{users=[];posts=[];roles=[];orgs=[]};var Mn=()=>({standalone:!0}),LS=()=>[];function AS(o,g){o&1&&(R(0,"div",14)(1,"span",19),he(2,"\u6216"),V()())}function FS(o,g){if(o&1&&(R(0,"span",20),he(1),V()),o&2){let e=S().$index;A(),$e("\u6761\u4EF6\u7EC4 ",e+1)}}function NS(o,g){if(o&1){let e=ne();R(0,"button",22),se("click",function(){j(e);let c=S(2).$index,u=S();return G(u.removeConditionGroup(c))}),te(1,"i",23),V()}}function DS(o,g){if(o&1&&X(0,NS,2,0,"button",21),o&2){let e=S(2);Q(!e.requiredHasCondition||e.search.length>1?0:-1)}}function OS(o,g){if(o&1){let e=ne();R(0,"div",24)(1,"span",30),he(2,"\u4E14"),V(),R(3,"button",22),se("click",function(){j(e);let c=S().$index,u=S().$index,b=S();return G(b.removeCondition(u,c))}),te(4,"i",23),V()()}}function IS(o,g){if(o&1&&te(0,"nz-option",27),o&2){let e=S(3);k("nzValue",e.SUBMITTER)("nzLabel","\u63D0\u4EA4\u4EBA")}}function RS(o,g){if(o&1&&te(0,"nz-option",27),o&2){let e=S().$implicit;k("nzValue",e.fieldName)("nzLabel",e.eruptFieldJson.edit.title)}}function PS(o,g){if(o&1&&X(0,RS,1,2,"nz-option",27),o&2){let e=g.$implicit,l=S(3);Q(l.searchTypeMapping[e.eruptFieldJson.edit.type]&&(e.eruptFieldJson.edit!=null&&e.eruptFieldJson.edit.title)?0:-1)}}function VS(o,g){if(o&1&&(te(0,"nz-option",27),Se(1,"translate")),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",Ee(1,2,e))}}function BS(o,g){if(o&1&&(De(0,VS,2,4,"nz-option",27,Ie),Se(2,"enumToArray")),o&2){let e=S(3);Oe(Ee(2,0,e.OperatorStringType))}}function HS(o,g){if(o&1&&(te(0,"nz-option",27),Se(1,"translate")),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",Ee(1,2,e))}}function WS(o,g){if(o&1&&(De(0,HS,2,4,"nz-option",27,Ie),Se(2,"enumToArray")),o&2){let e=S(3);Oe(Ee(2,0,e.OperatorNumberType))}}function JS(o,g){if(o&1&&(te(0,"nz-option",27),Se(1,"translate")),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",Ee(1,2,e))}}function US(o,g){if(o&1&&(De(0,JS,2,4,"nz-option",27,Ie),Se(2,"enumToArray")),o&2){let e=S(3);Oe(Ee(2,0,e.OperatorDateType))}}function $S(o,g){if(o&1&&(te(0,"nz-option",27),Se(1,"translate")),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",Ee(1,2,e))}}function jS(o,g){if(o&1&&(De(0,$S,2,4,"nz-option",27,Ie),Se(2,"enumToArray")),o&2){let e=S(3);Oe(Ee(2,0,e.OperatorReferenceType))}}function GS(o,g){if(o&1&&(te(0,"nz-option",27),Se(1,"translate")),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",Ee(1,2,e))}}function KS(o,g){if(o&1&&(De(0,GS,2,4,"nz-option",27,Ie),Se(2,"enumToArray")),o&2){let e=S(3);Oe(Ee(2,0,e.OperatorReferenceType))}}function qS(o,g){if(o&1&&(te(0,"nz-option",27),Se(1,"translate")),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",Ee(1,2,e))}}function XS(o,g){if(o&1&&(De(0,qS,2,4,"nz-option",27,Ie),Se(2,"enumToArray")),o&2){let e=S(3);Oe(Ee(2,0,e.OperatorReferenceType))}}function QS(o,g){if(o&1&&(te(0,"nz-option",27),Se(1,"translate")),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",Ee(1,2,e))}}function YS(o,g){if(o&1&&(De(0,QS,2,4,"nz-option",27,Ie),Se(2,"enumToArray")),o&2){let e=S(3);Oe(Ee(2,0,e.OperatorUpmsType))}}function ZS(o,g){if(o&1){let e=ne();R(0,"nz-input-number",36),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;k("ngModelOptions",at(2,Mn)),ge("ngModel",e.value)}}function eM(o,g){if(o&1){let e=ne();R(0,"div",35)(1,"nz-input-number",37),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value[0],c)||(u.value[0]=c),G(c)}),V(),R(2,"span",38),he(3,"\u81F3"),V(),R(4,"nz-input-number",39),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value[1],c)||(u.value[1]=c),G(c)}),V()()}if(o&2){let e=S(3).$implicit;A(),k("ngModelOptions",at(4,Mn)),ge("ngModel",e.value[0]),A(3),k("ngModelOptions",at(5,Mn)),ge("ngModel",e.value[1])}}function tM(o,g){if(o&1&&(X(0,ZS,1,3,"nz-input-number",34),X(1,eM,5,6,"div",35)),o&2){let e=S(2).$implicit,l=S(2);Q(e.operator===l.OperatorNumberType.EQ||e.operator===l.OperatorNumberType.NEQ||e.operator===l.OperatorNumberType.GT||e.operator===l.OperatorNumberType.LT||e.operator===l.OperatorNumberType.EGT||e.operator===l.OperatorNumberType.ELT?0:-1),A(),Q(e.operator===l.OperatorNumberType.RANGE?1:-1)}}function nM(o,g){if(o&1){let e=ne();R(0,"input",42),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;k("ngModelOptions",at(2,Mn)),ge("ngModel",e.value)}}function iM(o,g){if(o&1){let e=ne();R(0,"nz-select",43),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;k("ngModelOptions",at(4,Mn))("nzPlaceHolder","\u8BF7\u9009\u62E9"),ge("ngModel",e.value),k("nzOptions",at(5,LS))}}function rM(o,g){if(o&1&&(X(0,nM,1,3,"input",40),X(1,iM,1,6,"nz-select",41)),o&2){let e=S(2).$implicit,l=S(2);Q(e.operator===l.OperatorStringType.EQ||e.operator===l.OperatorStringType.NEQ||e.operator===l.OperatorStringType.NOT_LIKE||e.operator===l.OperatorStringType.LIKE||e.operator===l.OperatorStringType.START_WITH||e.operator===l.OperatorStringType.END_WITH?0:-1),A(),Q(e.operator===l.OperatorStringType.IN||e.operator===l.OperatorStringType.NOT_IN?1:-1)}}function oM(o,g){if(o&1){let e=ne();R(0,"nz-date-picker",36),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;k("ngModelOptions",at(2,Mn)),ge("ngModel",e.value)}}function aM(o,g){if(o&1){let e=ne();R(0,"nz-range-picker",46),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;k("nzShowTime",!0),ge("ngModel",e.value)}}function lM(o,g){if(o&1){let e=ne();R(0,"nz-input-number",47),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),V()}if(o&2){let e=S(3).$implicit;k("ngModelOptions",at(3,Mn)),ge("ngModel",e.value),k("nzMin",0)}}function sM(o,g){if(o&1&&(X(0,oM,1,3,"nz-date-picker",34),X(1,aM,1,2,"nz-range-picker",44),X(2,lM,1,4,"nz-input-number",45)),o&2){let e=S(2).$implicit,l=S(2);Q(e.operator===l.OperatorDateType.GT||e.operator===l.OperatorDateType.LT||e.operator===l.OperatorDateType.EGT||e.operator===l.OperatorDateType.ELT?0:-1),A(),Q(e.operator===l.OperatorDateType.RANGE?1:-1),A(),Q(e.operator===l.OperatorDateType.FEW_DAYS||e.operator===l.OperatorDateType.FUTURE_DAYS?2:-1)}}function cM(o,g){if(o&1){let e=ne();R(0,"nz-select",48),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),te(1,"nz-option",27)(2,"nz-option",27),V()}if(o&2){let e=S(2).$implicit,l=S(2);k("ngModelOptions",at(7,Mn))("nzPlaceHolder","\u8BF7\u9009\u62E9"),ge("ngModel",e.value),A(),k("nzValue",!0)("nzLabel",l.eruptModel.eruptFieldModelMap.get(e.field).eruptFieldJson.edit.boolType.trueText),A(),k("nzValue",!1)("nzLabel",l.eruptModel.eruptFieldModelMap.get(e.field).eruptFieldJson.edit.boolType.falseText)}}function dM(o,g){if(o&1&&te(0,"nz-option",27),o&2){let e=g.$implicit;k("nzValue",e.value)("nzLabel",e.label)}}function uM(o,g){if(o&1){let e=ne();R(0,"nz-select",50),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),De(1,dM,1,2,"nz-option",27,Ie),V()}if(o&2){let e=S(3).$implicit,l=S(2);k("ngModelOptions",at(3,Mn))("nzPlaceHolder","\u8BF7\u9009\u62E9"),ge("ngModel",e.value),A(),Oe(l.eruptModel.eruptFieldModelMap.get(e.field).componentValue)}}function pM(o,g){if(o&1&&X(0,uM,3,4,"nz-select",49),o&2){let e=S(2).$implicit,l=S(2);Q(e.operator===l.OperatorReferenceType.EQ||e.operator===l.OperatorReferenceType.NEQ?0:-1)}}function fM(o,g){if(o&1&&te(0,"erupt-reference",51),o&2){let e=S(3).$implicit,l=S(2);k("eruptModel",l.eruptModel)("field",l.eruptModel.eruptFieldModelMap.get(e.field))("size","default")("readonly",!1)}}function mM(o,g){if(o&1&&X(0,fM,1,4,"erupt-reference",51),o&2){let e=S(2).$implicit,l=S(2);Q(e.operator===l.OperatorReferenceType.EQ||e.operator===l.OperatorReferenceType.NEQ?0:-1)}}function hM(o,g){if(o&1&&(te(0,"nz-option",27),Se(1,"translate")),o&2){let e=g.$implicit;k("nzValue",e)("nzLabel",Ee(1,2,e))}}function _M(o,g){if(o&1&&te(0,"nz-option",27),o&2){let e=g.$implicit;k("nzValue",e.key)("nzLabel",e.value)}}function gM(o,g){if(o&1){let e=ne();R(0,"nz-select",54),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),De(1,_M,1,2,"nz-option",27,Ie),V()}if(o&2){let e=S(3).$implicit,l=S(2);k("ngModelOptions",at(3,Mn))("nzPlaceHolder","\u8BF7\u9009\u62E9"),ge("ngModel",e.value),A(),Oe(l.upmsData==null?null:l.upmsData.users)}}function CM(o,g){if(o&1&&te(0,"nz-option",27),o&2){let e=g.$implicit;k("nzValue",e.key)("nzLabel",e.value)}}function yM(o,g){if(o&1){let e=ne();R(0,"nz-select",54),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),De(1,CM,1,2,"nz-option",27,Ie),V()}if(o&2){let e=S(3).$implicit,l=S(2);k("ngModelOptions",at(3,Mn))("nzPlaceHolder","\u8BF7\u9009\u62E9"),ge("ngModel",e.value),A(),Oe(l.upmsData==null?null:l.upmsData.orgs)}}function vM(o,g){if(o&1&&te(0,"nz-option",27),o&2){let e=g.$implicit;k("nzValue",e.key)("nzLabel",e.value)}}function wM(o,g){if(o&1){let e=ne();R(0,"nz-select",54),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),De(1,vM,1,2,"nz-option",27,Ie),V()}if(o&2){let e=S(3).$implicit,l=S(2);k("ngModelOptions",at(3,Mn))("nzPlaceHolder","\u8BF7\u9009\u62E9"),ge("ngModel",e.value),A(),Oe(l.upmsData==null?null:l.upmsData.posts)}}function bM(o,g){if(o&1&&te(0,"nz-option",27),o&2){let e=g.$implicit;k("nzValue",e.key)("nzLabel",e.value)}}function xM(o,g){if(o&1){let e=ne();R(0,"nz-select",54),ye("ngModelChange",function(c){j(e);let u=S(3).$implicit;return Ce(u.value,c)||(u.value=c),G(c)}),De(1,bM,1,2,"nz-option",27,Ie),V()}if(o&2){let e=S(3).$implicit,l=S(2);k("ngModelOptions",at(3,Mn))("nzPlaceHolder","\u8BF7\u9009\u62E9"),ge("ngModel",e.value),A(),Oe(l.upmsData==null?null:l.upmsData.roles)}}function TM(o,g){if(o&1){let e=ne();R(0,"div",33)(1,"nz-select",52),ye("ngModelChange",function(c){j(e);let u=S(2).$implicit;return Ce(u.upmsScope,c)||(u.upmsScope=c),G(c)}),De(2,hM,2,4,"nz-option",27,Ie),Se(4,"enumToArray"),V(),X(5,gM,3,4,"nz-select",53),X(6,yM,3,4,"nz-select",53),X(7,wM,3,4,"nz-select",53),X(8,xM,3,4,"nz-select",53),V()}if(o&2){let e=S(2).$implicit,l=S(2);A(),k("ngModelOptions",at(9,Mn))("nzPlaceHolder","\u8BF7\u9009\u62E9"),ge("ngModel",e.upmsScope),A(),Oe(Ee(4,7,l.UpmsScope)),A(3),Q(e.upmsScope===l.UpmsScope.USER?5:-1),A(),Q(e.upmsScope===l.UpmsScope.ORG?6:-1),A(),Q(e.upmsScope===l.UpmsScope.POST?7:-1),A(),Q(e.upmsScope===l.UpmsScope.ROLE?8:-1)}}function SM(o,g){if(o&1&&(R(0,"div",29)(1,"nz-form-item",31),X(2,tM,2,2),X(3,rM,2,2),X(4,sM,3,3),X(5,cM,3,8,"nz-select",32),X(6,pM,1,1),X(7,mM,1,1),X(8,TM,9,10,"div",33),V()()),o&2){let e=S().$implicit,l=S(2);A(2),Q(e.operatorType===l.OperatorType.NUMBER?2:-1),A(),Q(e.operatorType===l.OperatorType.STRING?3:-1),A(),Q(e.operatorType===l.OperatorType.DATE?4:-1),A(),Q(e.operatorType===l.OperatorType.BOOLEAN?5:-1),A(),Q(e.operatorType===l.OperatorType.CHOICE?6:-1),A(),Q(e.operatorType===l.OperatorType.REFERENCE?7:-1),A(),Q(e.operatorType===l.OperatorType.UPMS?8:-1)}}function MM(o,g){if(o&1){let e=ne();R(0,"div",17),X(1,OS,5,0,"div",24),R(2,"div",25)(3,"nz-form-item")(4,"nz-select",26),ye("ngModelChange",function(c){let u=j(e).$implicit;return Ce(u.field,c)||(u.field=c),G(c)}),se("ngModelChange",function(){let c=j(e).$implicit,u=S(2);return G(u.onFieldChange(c))}),X(5,IS,1,2,"nz-option",27),De(6,PS,1,1,null,null,Ie),V()(),R(8,"nz-form-item")(9,"nz-select",28),ye("ngModelChange",function(c){let u=j(e).$implicit;return Ce(u.operator,c)||(u.operator=c),G(c)}),se("ngModelChange",function(){let c=j(e).$implicit,u=S(2);return G(u.onOperatorChange(c))}),X(10,BS,3,2)(11,WS,3,2)(12,US,3,2)(13,jS,3,2)(14,KS,3,2)(15,XS,3,2)(16,YS,3,2),V()(),X(17,SM,9,7,"div",29),V()()}if(o&2){let e,l=g.$implicit,c=g.$index,u=S(2);A(),Q(c>0?1:-1),A(3),ge("ngModel",l.field),k("ngModelOptions",at(8,Mn)),A(),Q(u.upmsData?5:-1),A(),Oe(u.eruptModel.eruptFieldModels),A(3),ge("ngModel",l.operator),k("ngModelOptions",at(9,Mn)),A(),Q((e=l.operatorType)===u.OperatorType.STRING?10:e===u.OperatorType.NUMBER?11:e===u.OperatorType.DATE?12:e===u.OperatorType.BOOLEAN?13:e===u.OperatorType.CHOICE?14:e===u.OperatorType.REFERENCE?15:e===u.OperatorType.UPMS?16:-1),A(7),Q(l.operator?17:-1)}}function EM(o,g){if(o&1){let e=ne();R(0,"div",10),X(1,AS,3,0,"div",14),R(2,"nz-card",15),nt(3,FS,2,1,"ng-template",null,0,Qe)(5,DS,1,1,"ng-template",null,1,Qe),R(7,"div",16),De(8,MM,18,10,"div",17,Ie),R(10,"button",18),se("click",function(){let c=j(e).$index,u=S();return G(u.addCondition(c))}),te(11,"i",13),he(12," \u6DFB\u52A0\u6761\u4EF6 "),V()()()()}if(o&2){let e=g.$implicit,l=g.$index,c=Ue(4),u=Ue(6);A(),Q(l>0?1:-1),A(),k("nzTitle",c)("nzExtra",u)("nzSize","small"),A(6),Oe(e)}}var W3=(()=>{class o{msg;eruptModel;search=[];searchChange=new Nt;requiredHasCondition=!1;upmsData;SUBMITTER="SUBMITTER";searchTypeMapping={[be.INPUT]:bt.STRING,[be.COLOR]:bt.STRING,[be.TEXTAREA]:bt.STRING,[be.MARKDOWN]:bt.STRING,[be.HTML_EDITOR]:bt.STRING,[be.CODE_EDITOR]:bt.STRING,[be.AUTO_COMPLETE]:bt.STRING,[be.NUMBER]:bt.NUMBER,[be.SLIDER]:bt.NUMBER,[be.RATE]:bt.NUMBER,[be.DATE]:bt.DATE,[be.BOOLEAN]:bt.BOOLEAN,[be.CHOICE]:bt.CHOICE,[be.MULTI_CHOICE]:bt.CHOICE,[be.REFERENCE_TABLE]:bt.REFERENCE,[be.REFERENCE_TREE]:bt.REFERENCE};constructor(e){this.msg=e}saveCondition=()=>{for(let e of this.search)for(let l of e){if(!l.field)return this.msg.error("\u8BF7\u9009\u62E9\u5B57\u6BB5"),!1;if(!l.operator)return this.msg.error("\u8BF7\u9009\u62E9\u8FD0\u7B97\u7B26"),!1;if(l.operator!=wa.NOT_NULL&&l.operator!=wa.NULL&&l.value==null)return this.msg.error("\u8BF7\u8F93\u5165\u503C"),!1}return this.searchChange.emit(this.search),!0};ngOnInit(){this.requiredHasCondition&&(!this.search||this.search.length===0)&&(this.search=[[this.createEmptyCondition()]])}createEmptyCondition(){return{field:"",operatorType:null,operator:null,value:null,upmsScope:null}}onFieldChange(e){if(e.field===this.SUBMITTER){e.operatorType=bt.UPMS,e.operator=Rl.EQ;return}switch(e.operatorType=this.searchTypeMapping[this.eruptModel.eruptFieldModelMap.get(e.field)?.eruptFieldJson.edit.type]||bt.STRING,e.operatorType){case bt.STRING:e.operator=Rl.EQ;break;case bt.NUMBER:e.operator=Pl.EQ;break;case bt.DATE:e.operator=wa.TODAY;break;case bt.REFERENCE:case bt.BOOLEAN:case bt.CHOICE:case bt.UPMS:e.operator=Rc.EQ;break}e.value=null,e.upmsScope=null}onOperatorChange(e){e.operatorType===bt.NUMBER&&e.operator===Pl.RANGE?e.value=[]:e.operatorType===bt.CHOICE||e.operatorType===bt.UPMS?e.value=[]:e.value=null}addConditionGroup(){this.search.push([this.createEmptyCondition()])}removeConditionGroup(e){e>=0&&e<this.search.length&&this.search.splice(e,1)}addCondition(e){this.search[e]||(this.search[e]=[]),this.search[e].push(this.createEmptyCondition())}removeCondition(e,l){this.search[e]&&this.search[e].splice(l,1)}resetForm(){this.search=[[this.createEmptyCondition()]]}editType=be;OperatorType=bt;OperatorStringType=Rl;OperatorNumberType=Pl;OperatorDateType=wa;OperatorReferenceType=Rc;OperatorUpmsType=Ju;UpmsScope=Uu;static \u0275fac=function(l){return new(l||o)(le(It))};static \u0275cmp=Fe({type:o,selectors:[["erupt-smart-search"]],inputs:{eruptModel:"eruptModel",search:"search",requiredHasCondition:"requiredHasCondition",upmsData:"upmsData"},outputs:{searchChange:"searchChange"},standalone:!1,decls:16,vars:0,consts:[["cardTitle",""],["cardExtra",""],[1,"smart-search-container"],[1,"header-section"],[1,"title-area"],[1,"main-title"],["nz-button","","nzType","default",2,"margin-left","auto",3,"click"],["nz-form","",1,"condition-builder"],[1,"condition-panel"],[1,"condition-groups"],[1,"condition-group-wrapper"],[1,"add-group-section"],["nz-button","","nzType","dashed","nzBlock","",3,"click"],["nz-icon","","nzType","plus"],[1,"or-divider"],[1,"condition-group-card",3,"nzTitle","nzExtra","nzSize"],[1,"conditions-list"],[1,"condition-item"],["nz-button","","nzType","dashed","nzSize","small",1,"add-condition-btn",3,"click"],[1,"or-text"],[1,"card-title-text"],["nz-button","","nzType","text","nzSize","small","nzDanger",""],["nz-button","","nzType","text","nzSize","small","nzDanger","",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],[1,"logic-label"],[1,"condition-content"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u5B57\u6BB5","nzShowSearch","",1,"field-select",3,"ngModelChange","ngModel","ngModelOptions"],[3,"nzValue","nzLabel"],[1,"operator-select",3,"ngModelChange","ngModel","ngModelOptions"],[1,"value-row"],[1,"logic-text"],[1,"value-input-container"],[2,"width","100%",3,"ngModelOptions","nzPlaceHolder","ngModel"],[2,"gap","12px","display","flex","width","100%"],[2,"width","100%",3,"ngModelOptions","ngModel"],[2,"display","flex","align-items","center","gap","12px","width","100%"],[2,"width","100%",3,"ngModelChange","ngModelOptions","ngModel"],["placeholder","\u6700\u5C0F\u503C",2,"flex","1",3,"ngModelChange","ngModelOptions","ngModel"],[1,"range-separator"],["placeholder","\u6700\u5927\u503C",2,"flex","1",3,"ngModelChange","ngModelOptions","ngModel"],["nz-input","","type","text","placeholder","\u8BF7\u8F93\u5165",3,"ngModelOptions","ngModel"],["nzMode","tags",2,"width","100%",3,"ngModelOptions","nzPlaceHolder","ngModel","nzOptions"],["nz-input","","type","text","placeholder","\u8BF7\u8F93\u5165",3,"ngModelChange","ngModelOptions","ngModel"],["nzMode","tags",2,"width","100%",3,"ngModelChange","ngModelOptions","nzPlaceHolder","ngModel","nzOptions"],[2,"width","100%",3,"nzShowTime","ngModel"],[2,"width","100%",3,"ngModelOptions","ngModel","nzMin"],[2,"width","100%",3,"ngModelChange","nzShowTime","ngModel"],[2,"width","100%",3,"ngModelChange","ngModelOptions","ngModel","nzMin"],[2,"width","100%",3,"ngModelChange","ngModelOptions","nzPlaceHolder","ngModel"],["nzMode","multiple",2,"width","100%",3,"ngModelOptions","nzPlaceHolder","ngModel"],["nzMode","multiple",2,"width","100%",3,"ngModelChange","ngModelOptions","nzPlaceHolder","ngModel"],[2,"width","100%",3,"eruptModel","field","size","readonly"],[2,"width","30%",3,"ngModelChange","ngModelOptions","nzPlaceHolder","ngModel"],["nzMode","multiple",2,"width","70%",3,"ngModelOptions","nzPlaceHolder","ngModel"],["nzMode","multiple",2,"width","70%",3,"ngModelChange","ngModelOptions","nzPlaceHolder","ngModel"]],template:function(l,c){l&1&&(R(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),he(4," \u5F53\u6EE1\u8DB3\u4EE5\u4E0B\u6761\u4EF6\u65F6\u8FDB\u5165\u5F53\u524D\u5206\u652F "),V(),R(5,"button",6),se("click",function(){return c.resetForm()}),he(6," \u91CD\u7F6E "),V()()(),R(7,"form",7)(8,"div",8)(9,"div",9),De(10,EM,13,4,"div",10,Ie),V(),R(12,"div",11)(13,"button",12),se("click",function(){return c.addConditionGroup()}),te(14,"i",13),he(15," \u6DFB\u52A0\u6761\u4EF6\u7EC4 "),V()()()()()),l&2&&(A(10),Oe(c.search))},dependencies:[ca,on,Et,la,zt,sa,tn,Ct,dn,Sn,mi,hi,pt,Xt,vc,wc,ua,pa,ym,Jr,va,Im,hn],styles:['.smart-search-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.header-section[_ngcontent-%COMP%]{margin-bottom:16px}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:500;color:#646464;display:flex;align-items:center;gap:8px}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00000073;font-size:14px}.condition-group-wrapper[_ngcontent-%COMP%]{margin-bottom:16px}.condition-group-wrapper[_ngcontent-%COMP%]:last-child{margin-bottom:0}.or-divider[_ngcontent-%COMP%]{text-align:center;margin:16px 0;position:relative}.or-divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#f0f0f0;z-index:1}.or-divider[_ngcontent-%COMP%]   .or-text[_ngcontent-%COMP%]{background:#fff;padding:0 16px;color:#00000073;font-size:12px;font-weight:500;position:relative;z-index:2;border:1px solid #f0f0f0;border-radius:12px}.condition-group-card[_ngcontent-%COMP%]{border:1px solid #f0f0f0;border-radius:6px}.condition-group-card[_ngcontent-%COMP%]     .ant-card-head{min-height:48px;padding:0 16px}.condition-group-card[_ngcontent-%COMP%]     .ant-card-head .ant-card-head-title{padding:12px 0;font-size:14px;font-weight:500}.condition-group-card[_ngcontent-%COMP%]     .ant-card-head .ant-card-extra{padding:12px 0}.condition-group-card[_ngcontent-%COMP%]     .ant-card-body{padding:16px}.condition-group-card[_ngcontent-%COMP%]   .card-title-text[_ngcontent-%COMP%]{color:#000000d9}.conditions-list[_ngcontent-%COMP%]   .condition-item[_ngcontent-%COMP%]{margin-bottom:12px}.conditions-list[_ngcontent-%COMP%]   .condition-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.logic-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.logic-label[_ngcontent-%COMP%]   .logic-text[_ngcontent-%COMP%]{font-size:12px;color:#00000073;font-weight:500}.condition-content[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap}.condition-content[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]{margin-bottom:0;flex:1;min-width:150px}.condition-content[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]   .field-select[_ngcontent-%COMP%], .condition-content[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]   .operator-select[_ngcontent-%COMP%], .condition-content[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]   .value-select[_ngcontent-%COMP%]{width:100%}.condition-content[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]   .value-input[_ngcontent-%COMP%]{width:100%}.condition-content[_ngcontent-%COMP%]   .value-row[_ngcontent-%COMP%]{width:100%}.add-condition-btn[_ngcontent-%COMP%]{margin-top:8px}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:24px}@media (max-width: 768px){.smart-search-container[_ngcontent-%COMP%]{padding:16px}.condition-content[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.condition-content[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]{min-width:auto}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.or-divider[_ngcontent-%COMP%]{margin:12px 0}.or-divider[_ngcontent-%COMP%]   .or-text[_ngcontent-%COMP%]{padding:0 12px;font-size:11px}}']})}return o})();var aL=(()=>{class o{static \u0275fac=function(l){return new(l||o)};static \u0275mod=Wi({type:o});static \u0275inj=Hi({providers:[nn,Xi],imports:[oc,Rm,Bf,ah,Gf,lh,Pm,Qf,zm,ch,fh,hm,Tm,pm,lc]})}return o})();ea(_i,[Wr,ca,on,Et,la,zt,sa,xu,Tu,tn,Ct,dn,Kn,Sn,Dn,mi,hi,pt,yu,Cu,Xt,bu,vu,wu,vl,ua,ho,mo,pa,wl,xl,xc,Sl,Tl,Ic,_i,Pu,Al,Fl,_o,Vu,Nl,Dl,Ac,kl,Fc,Nc,va,Il],[bl,hn]);ea(In,[Pt,Mu,Su,Dc,Al,Fl,Nl,Dl,Il],[Ki,bl]);ea(zc,[Wr,Gn,ca,on,Et,la,da,zt,sa,Ct,Kn,Sn,mi,hi,pt,Xt,fi,Gi,ua,pa,xc,Ac,Fc,Nc,va,sh],[hn]);ea(_i,[Wr,ca,on,Et,la,zt,sa,xu,Tu,tn,Ct,dn,Kn,Sn,Dn,mi,hi,pt,yu,Cu,Xt,bu,vu,wu,vl,ua,ho,mo,pa,wl,xl,xc,Sl,Tl,Ic,_i,Pu,Al,Fl,_o,Vu,Nl,Dl,Ac,kl,Fc,Nc,va,Il],[bl,hn]);ea(In,[Pt,Mu,Su,Dc,Al,Fl,Nl,Dl,Il],[Ki,bl]);export{fh as a,mh as b,nn as c,Vm as d,_i as e,W3 as f,aL as g};
